!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){"use strict";var angular=require(16),resolvers=(require(17),require(1)),chartService=require(15),analyticsGraphView=require(14),overviewTemplate=require(11),eventsTemplate=require(3),funnelsTemplate=require(9),createFunnelTemplate=require(7),editFunnelTemplate=require(8),segmentationTemplate=require(12),overviewCtrl=require(10),eventsCtrl=require(2),funnelsCtrl=require(6),createFunnelCtrl=require(4),editFunnelCtrl=require(5),segmentationCtrl=require(13);module.exports=angular.module("built.analytics",["ui.router"]).controller("overviewCtrl",overviewCtrl).controller("eventsCtrl",eventsCtrl).controller("funnelsCtrl",funnelsCtrl).controller("createFunnelCtrl",createFunnelCtrl).controller("editFunnelCtrl",editFunnelCtrl).controller("segmentationCtrl",segmentationCtrl).directive("analyticsGraphView",analyticsGraphView).service("chartService",chartService).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.analytics-overview",{url:"/analytics/overview",template:overviewTemplate,controller:"overviewCtrl",data:{breadcrumbs:[{name:"Analytics"},{name:"Overview"}]}}).state("app.dashboard.analytics-segmentation",{url:"/analytics/segmentation",template:segmentationTemplate,resolve:resolvers.resolve(["events","segBookmarks"]),controller:"segmentationCtrl",data:{breadcrumbs:[{name:"Analytics"},{name:"Segmentation"}]}}).state("app.dashboard.analytics-funnels",{url:"/analytics/funnels?funnel_uid",template:funnelsTemplate,reloadOnSearch:!1,resolve:resolvers.resolve(["funnels"]),controller:"funnelsCtrl",data:{breadcrumbs:[{name:"Analytics"},{name:"Funnels"}]}}).state("app.dashboard.analytics-events",{url:"/analytics/events",template:eventsTemplate,resolve:resolvers.resolve(["events"]),controller:"eventsCtrl",data:{breadcrumbs:[{name:"Analytics"},{name:"events"}]}}).state("app.dashboard.analytics-funnels-create",{url:"/analytics/funnels/create",template:createFunnelTemplate,resolve:resolvers.resolve(["events"]),controller:"createFunnelCtrl",data:{breadcrumbs:[{name:"Analytics"},{name:"Funnels"},{name:"create"}]}}).state("app.dashboard.analytics-funnels-edit",{url:"/analytics/funnels/edit/:funnel_uid",template:editFunnelTemplate,resolve:resolvers.resolve(["funnels","events"]),controller:"editFunnelCtrl",data:{breadcrumbs:[{name:"Analytics"},{name:"Funnels"},{name:"edit"}]}})}]).run(["libraryService","menuService",function(LIB,menu){var menuItem={id:"analytics",title:"Analytics",order:7,icon:"fa-bar-chart-o",sub_menu:[{id:"overview",title:"Overview",state:"app.dashboard.analytics-overview"},{id:"segmentation",title:"Segmentation",state:"app.dashboard.analytics-segmentation"},{id:"funnels",title:"Funnels",state:"app.dashboard.analytics-funnels"},{id:"events",title:"Events",state:"app.dashboard.analytics-events"}]};menu.add(menuItem),LIB.register("charts")}])},{1:221,10:11,11:12,12:13,13:14,14:15,15:17,16:295,17:294,2:2,3:4,4:5,5:6,6:7,7:8,8:9,9:10}],2:[function(require,module){"use strict";var eventModal=require(1);module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","events","modalService","$timeout",function($scope,$location,$state,builtApi,Alert,Utils,events,Modal,$timeout){function editEvent(event){var index=$scope.events.indexOf(event);Modal.openModal({uid:event.uid,name:event.name,description:event.description,category:event.category},eventModal,editEventModalCtrl).then(function(res){$scope.events[index]=res.event,Alert.notify({title:"Success",content:res.notice,type:"success"})})}function deleteEvent(event){var index=$scope.events.indexOf(event),uid=event.uid;Alert.confirm({title:"Delete event",content:"Are you sure you want to delete this event?"}).then(function(){builtApi.Analytics.deleteEvents({options:{eventUid:uid}}).then(function(data){$scope.events.splice(index,1),Alert.notify({title:data.notice,content:"Success",type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}function getCategoryList(events){var categoryArray=[];if(_.isEmpty(events))return[];events.map(function(event){event.category.map(function(category){categoryArray.push(category)})});return categoryArray}function createNewEvent(){Modal.openModal({uid:"",name:"",description:"",category:getCategoryList($scope.events)},eventModal,newEventModalCtrl).then(function(res){$scope.events.push(res.event),Alert.notify({title:"Success",content:res.notice,type:"success"})})}$scope.events=events,$scope.actions=["edit","delete"];var apiKey=$state.params.api_key;$scope.selectedRows=[],$scope.classColumns=[],$scope.classColumns.push({label:"UID",key:"uid"},{label:"Name",key:"name"},{label:"Category",key:"category"},{label:"description",key:"description"}),$scope.action=function(act,event){return"delete"===act?void deleteEvent(event):"edit"===act?void editEvent(event):"create"===act?void createNewEvent():void 0};var editEventModalCtrl=function($scope,$modalInstance,data){$scope.isEventPresent=_.isEmpty(data.uid.trim())?!1:!0,$scope.data=data,$scope.btnStatus=!1,$timeout(function(){$("#js-category-selector").val($scope.data.category).select2({tags:$scope.data.category,tokenSeparators:[","]})}),$scope.ok=function(){$scope.data.name=$scope.data.name?$scope.data.name.trim():"",$scope.data.name?($scope.btnStatus=!0,$scope.data.category=$("#js-category-selector").select2("data").map(function(data){return data.text}),builtApi.Analytics.editEvents({options:{eventUid:$scope.data.uid},body:{app_api_key:apiKey,event:$scope.data,event_uid:$scope.data.uid}}).then(function(res){$scope.btnStatus=!1,$modalInstance.close(res)},function(xhr){$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})):Alert.notify({title:"Invalid Event Name",content:"",type:"error"})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$scope.categoryArrayToString=function(arr){return arr.join()};var newEventModalCtrl=function($scope,$modalInstance,data){$scope.isEventPresent=_.isEmpty(data.uid.trim())?!1:!0,$scope.data=data,$scope.btnStatus=!1,$timeout(function(){$("#js-category-selector").select2({tags:$scope.data.category,tokenSeparators:[","]})}),$scope.ok=function(){return $scope.btnStatus=!0,$scope.data.name=$scope.data.name?$scope.data.name.trim():"",_.isEmpty($scope.data.name)?void Alert.notify({title:"Please enter a valid event name.",content:"",type:"error"}):($scope.data.category=$("#js-category-selector").select2("data").map(function(data){return data.text}),void builtApi.Analytics.getPropAnalytics({body:{app_api_key:apiKey,event:$scope.data}}).then(function(res){$scope.btnStatus=!1,res.data=$scope.data,$modalInstance.close(res)},function(xhr){$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})}))},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:3}],3:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h3 class="modal-title">\n <span ng-if="!isEventPresent">Add New Event</span>\n <span ng-if="isEventPresent">Edit Event</span>\n</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">UID</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="data.uid" ng-value="data.uid" ng-disabled="isEventPresent">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Name</label>\n<div class="col-md-10">\n <input class="form-control" ng-model="data.name" ng-value="data.name" required>\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Categories</label>\n<div class="col-md-10">\n <input type="hidden" id="js-category-selector">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Description</label>\n<div class="col-md-10">\n<textarea ng-model="data.description" ng-value="data.description" class="form-control"></textarea> \n</div>\n</div>\n</fieldset>\n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <button btn-loader="btnStatus" loading-text="Saving..." class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Done\n</span> \n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>\n \n'},{}],4:[function(require,module){module.exports='<div class="">\n<div class=\'button-wrap mb10\'>\n <a ng-click="action(\'create\')" class="pull-left btn-labeled btn btn-primary">\n<span class="btn-label"><i class="fa fa-exchange"></i> \n</span> Create New Event\n</a> \n</div>\n<div class="data-tbl-wrap">\n<table class="table data-tbl log-table table-bordered table-hover">\n<thead>\n<tr class=\'dt-head-tr\'>\n<th>UID</th>\n<th>Name</th>\n<th>Category</th>\n<th>Description</th>\n<th>Actions</th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat="event in events">\n<td>{{event.uid}}</td>\n<td>{{event.name}}</td>\n<td>{{categoryArrayToString(event.category)}}</td>\n<td>{{event.description}}</td>\n<td>\n'+"<span title=\"{{act}}\" ng-repeat='act in actions' ng-click='action(act, event)' class=\"hand fa fa-lg edit_evnt ml10 dt-action-item\" ng-class=\"{'fa-pencil' : act == 'edit', 'fa-trash-o' : act == 'delete'}\"></span> \n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n"},{}],5:[function(require,module){"use strict";module.exports=["$scope","$state","constants","builtApi","alertService","utilsService","libraryService","events","previousStateService",function($scope,$state,constants,builtApi,Alert,Utils,LIB,events){function navigateToList(){$state.go("app.dashboard.analytics-funnels",{api_key:apiKey,funnel_uid:$scope.funnel.uid})}var apiKey=$state.params.api_key;$scope.funnel=_.cloneDeep(constants.analytics.defaults.funnelQuery),$scope.btnStatus=!1,$scope.events=events,$scope.getFunnelNow=!1;var apiKey=$state.params.api_key;$scope.createFunnel=function(){$scope.btnStatus=!0,builtApi.Analytics.addFunnel({body:{funnel:$scope.funnel}}).then(function(res){$scope.funnel=res.funnel,Alert.notify({title:"Success",content:res.notice,type:"success"}),navigateToList()},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){$scope.btnStatus=!1})},$scope.getFunnel=function(){$scope.getFunnelNow=!0},$scope.getFunnelCallback=function(getFunnel){getFunnel.then(function(funnel){$scope.funnel=funnel,$scope.createFunnel()},function(){}).finally(function(){$scope.getFunnelNow=!1})},$scope.cancel=function(){navigateToList()}}]},{}],6:[function(require,module){"use strict";module.exports=["$scope","constants","builtApi","alertService","utilsService","$state","funnels","events","previousStateService",function($scope,constants,builtApi,Alert,Utils,$state,funnels,events,previousState){function updateFunnel(){$scope.btnStatus=!0,builtApi.Analytics.editFunnel({options:{funnelUid:funnelUid},body:{funnel:$scope.funnel}}).then(function(res){Alert.notify({title:"Success",content:res.notice,type:"success"}),navigateToList()},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){$scope.btnStatus=!1})}function navigateToList(){previousState.go("app.dashboard.analytics-funnels",{api_key:apiKey,funnel_uid:funnelUid})}var apiKey=$state.params.api_key,funnelUid=$state.params.funnel_uid;$scope.events=events,$scope.getFunnelNow=!1,$scope.btnStatus=!1,$scope.funnel=_.find(funnels.funnels,{uid:funnelUid})||[],$scope.updateFunnel=function(){$scope.getFunnelNow=!0},$scope.getFunnelCallback=function(getFunnel){getFunnel.then(function(funnel){$scope.funnel=funnel,updateFunnel()},function(){}).finally(function(){$scope.getFunnelNow=!1})},$scope.cancel=function(){previousState.go("app.dashboard.analytics-funnels",{api_key:apiKey})}}]},{}],7:[function(require,module){"use strict";module.exports=["$scope","constants","builtApi","alertService","utilsService","libraryService","funnels","$state","$location","$rootScope","$stateParams","$timeout",function($scope,constants,builtApi,Alert,Utils,LIB,funnels,$state,$location,$rootScope,$stateParams,$timeout){function initialFunnelCheck(){_.isEmpty($scope.selectedFunnelUid)||(-1!=_.findIndex(funnels.funnels,{uid:$scope.selectedFunnelUid})?getFunnel($scope.selectedFunnelUid):($scope.selectedFunnelUid="",$scope.funnelParams={})),initFunnelSelect()}function initFunnelSelect(){funnelSelect.val($scope.selectedFunnelUid).select2({placeholder:"Select a funnel...",data:funnels.funnels.map(function(funnel){return funnel.id=funnel.uid,funnel.text=funnel.name,funnel})}).on("change",function(e){onFunnelSelect(e.val)})}function onFunnelSelect(uid){$location.search({funnel_uid:uid}),$scope.selectedFunnelUid=uid,getFunnel()}function getFunnel(){$scope.funnelParams.from_date=$scope.dateRange.startDate,$scope.funnelParams.to_date=$scope.dateRange.endDate,$scope.selectedFunnelUid&&($scope.funnelParams.funnel_uid=$scope.selectedFunnelUid),$scope.loading=!0,builtApi.Analytics.postAnalytics({options:{eventType:"analytics/funneling"},body:$scope.funnelParams}).then(function(res){onGetFunnel(res.funnel)}).finally(function(){$scope.loading=!1})}function onGetFunnel(funnelData){return $scope.maxCount=funnelData.analysis.max||0,$scope.minCount=funnelData.analysis.min||0,$scope.overallConvRatio=$scope.minCount/$scope.maxCount||0,$scope.maxCount?($scope.funnelSteps=funnelData.steps,$scope.noDataFound=!1,void $timeout(function(){calculateStepWidth()},500)):($scope.funnelSteps=[],void($scope.noDataFound=!0))}function calculateStepWidth(){var pBars=funnelChartWrap.find(".fc-step .progress-bar");_.forEach($scope.funnelSteps,function(step,i){pBars.eq(i).css({width:$scope.getProgress(step.overall_conv_ratio)})})}{var funnelSelect=$("#js-funnel-select"),funnelChartWrap=$(".funnel-chart-wrap");$state.params.api_key}$scope.loading=!1,$scope.noDataFound=!1,$scope.funnelSteps=[],$scope.overallConvRatio=0,$scope.selectedFunnelUid=$state.params.funnel_uid||"",$scope.funnelParams={},$scope.dateRange={startDate:moment().subtract(30,"day").format("YYYY-MM-DD"),endDate:moment().format("YYYY-MM-DD"),options:{opens:"left"}},initialFunnelCheck(),$scope.createNewFunnel=function(){$state.go("app.dashboard.analytics-funnels-create",{})},$scope.editFunnel=function(){$state.go("app.dashboard.analytics-funnels-edit",{funnel_uid:$scope.funnelParams.funnel_uid})},$scope.deleteFunnel=function(){Alert.confirm({title:"Delete Funnel",content:"Are you sure you want to delete this funnel?"}).then(function(){builtApi.Analytics.deleteFunnel({options:{funnelUid:$scope.funnelParams.funnel_uid}}).then(function(){funnels.funnels.splice(_.findIndex(funnels.funnels,{uid:$scope.funnelParams.funnel_uid}),1),$location.search({funnel_uid:""}),initialFunnelCheck()})})},$scope.onDateRangeChange=function(){getFunnel()},$scope.getProgress=function(num){return Utils.roundOff(num)+"%"}}]},{}],8:[function(require,module){module.exports='<div class="well well-sm upsert-funnel-wrap max-width-1000">\n<div funnel-builder funnel="funnel" events="events" get-funnel-now="getFunnelNow" get-funnel-callback="getFunnelCallback"></div>\n<div class="button-wrap form-actions">\n <button ng-click=\'getFunnel()\' btn-loader="btnStatus" loading-text="Creating..." class="btn btn-labeled btn-primary btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Create</span>\n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>'},{}],9:[function(require,module){module.exports='<div class="well well-sm upsert-funnel-wrap max-width-1000">\n<div funnel-builder funnel="funnel" events="events" get-funnel-now="getFunnelNow" get-funnel-callback="getFunnelCallback"></div>\n<div class="button-wrap form-actions">\n <button btn-loader="btnStatus" loading-text="Saving..." ng-click=\'updateFunnel()\' class="btn btn-labeled btn-primary btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Done</span>\n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>'},{}],10:[function(require,module){module.exports='<div class="well well-sm analytics-wrap funnel-analytics" ng-class="{\'analytics-initial-load\': !funnelParams.funnel_uid}">\n<div class="funnel-tools-wrap">\n<div class="funnel-tools gray-h-bar">\n<div class="row">\n<div class="col-sm-12">\n<div class="pull-left">\n<div type="hidden" id="js-funnel-select"></div>\n</div>\n<div class="btn-group pull-left ml10">\n <button rel="tooltip" class="btn btn-default btn-sm" ng-click="createNewFunnel()" title="" data-placement="bottom" data-original-title="Create funnel"><i class="fa fa-plus"></i>\n</button>\n <button rel="tooltip" class="btn btn-default btn-sm" ng-click="editFunnel()" title="" data-placement="bottom" data-original-title="Edit funnel" ng-disabled="!funnelParams.funnel_uid"><i class="fa fa-pencil"></i>\n</button>\n</div>\n <button rel="tooltip" ng-click="deleteFunnel()" class="pull-left btn btn-danger btn-sm ml10" title="" data-placement="bottom" data-original-title="Delete funnel" ng-disabled="!funnelParams.funnel_uid"><i class="fa fa-trash-o"></i>\n</button>\n</div>\n</div>\n</div>\n<div ng-show="!funnelParams.funnel_uid" class="analytics-init-msg">\n Funnels allow you to analyze the sequence of steps taken by a user. Get started by creating a new funnel by clicking the \'+\' icon above.\n</div>\n<div ng-show="funnelParams.funnel_uid" class="funnel-chart-wrap max-width-800">\n<div class="fc-header clearfix">\n<div ng-if="!loading && !noDataFound" class="pull-left">\n <span class="fc-conv-rate">\n {{getProgress(overallConvRatio)}} \n</span> \n <span class="fc-caption">\n Completion rate\n</span> \n</div>\n<div bootstrap-daterangepicker class="date-range-picker" date-range="dateRange" on-date-range-change="onDateRangeChange"></div>\n</div>\n<div class="fc-body animated fadeIn" ng-if="!loading && !noDataFound">\n<div class="fc-step" ng-repeat="step in funnelSteps" ng-class="{\'d-conv\': $index == 0}">\n<div class="media-box">\n<div class="media-image pull-right">\n<p class="fc-ev-count">{{step.count}}</p>\n</div>\n<div class="media-body">\n<div ng-if="$index != 0" class="fc-conv-rate-wrap ">\n<i class="fa fa-sort-amount-desc"></i> \n <span class="fc-conv-rate">\n ({{getProgress(step.step_conv_ratio)}})\n</span> \n <span class="fc-caption">\n Conversion rate\n</span> \n</div>\n\n<div class="fc-ev-name">\n {{step.name}}\n</div>\n<div class="progress progress-striped">\n<div class="progress-bar progress-bar-success"></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="no-msg" ng-if="!loading && noDataFound">\n No events triggered between the selected date range.\n</div>\n<div class="tab-loader clearfix" ng-if="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n</div>\n</div>\n</div>'},{}],11:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","constants","$timeout",function($scope,$location,$state,builtApi,Alert,Utils,constants,$timeout){function getAnalytics(){$scope.searchParams.from_date=$scope.dateRange.startDate,$scope.searchParams.to_date=$scope.dateRange.endDate,$scope.loading=!0,builtApi.Analytics.postAnalytics({options:{eventType:"analytics"},body:$scope.searchParams}).then(function(res){$scope.overviewData=res,onGetAnalytics(),categoryChanged=!1}).finally(function(){$scope.loading=!1})}function onGetAnalytics(){$scope.hasGraphData=!_.isEmpty($scope.overviewData.data),$scope.initialLoadDone||(setCategoryList(),initEventSelect(),$scope.initialLoadDone=!0),$scope.initialLoadDone&&categoryChanged&&initEventSelect()}function setCategoryList(){$("#js-category-selection").select2({placeholder:"Pick a category",allowClear:!0,data:$scope.overviewData.categories.map(function(category){return{id:category,text:category}})}).off("change").on("change",function(e){categoryChanged=!0,eventSelector.select2("val",""),$scope.searchParams.event.only.name=[],$scope.searchParams.event.only.category=e.val?[e.val]:[],getAnalytics()})}function initEventSelect(){var eventData=_.map($scope.overviewData.event_names,function(e){return{id:e,text:e}});eventSelector.select2({multiple:!0,data:eventData,placeholder:"Select events to compare..."}),$timeout(function(){eventSelector.select2("val","")},0)}var eventSelector=$("#js-event-selection"),categoryChanged=!1;$scope.overviewData={},$scope.searchParams=_.cloneDeep(constants.analytics.defaults.eventSearchParams),$scope.loading=!1,$scope.hasGraphData=!1,$scope.initialLoadDone=!1,$scope.noMsg="There are no events recorded within the selected date range. Try changing the date range from above.",$scope.unit={unit:$scope.searchParams.unit},$scope.dateRange={startDate:moment().subtract(30,"day").format("YYYY-MM-DD"),endDate:moment().format("YYYY-MM-DD"),options:{opens:"right"}},$scope.modifiedDataCallback=function(){getAnalytics()},$scope.clear=function(){eventSelector.select2("val",""),$scope.searchParams.event.only.name=[],getAnalytics()},$scope.compare=function(){eventSelector.val()&&($scope.searchParams.event.only.name=eventSelector.val().split(",")),getAnalytics()},getAnalytics()}]},{}],12:[function(require,module){module.exports='<div class="well well-sm analytics-wrap overview-analytics" ng-class="{\'no-graph-data\': !hasGraphData}">\n<legend class="pg-header">\n Overview\n</legend>\n<p class="pg-tagline animated fadeIn" ng-show="hasGraphData">\n The graph below displays the total number of times each event was recorded.\n</p>\n<div class="overview-graph-tools gray-h-bar animated fadeIn" ng-show="hasGraphData">\n<div class="row">\n<div class="col-md-6">\n<div class="ogt-events-wrap clearfix">\n <input type="hidden" id="js-event-selection" />\n <a ng-click="compare()" class="btn btn-primary btn-sm">\n Compare\n</a> \n <a ng-click="clear()" class="btn btn-default ml5 btn-sm">\n Clear\n</a> \n</div>\n</div>\n<div class="col-md-6">\n<div class="ogt-category-wrap clearfix">\n <input type="hidden" id="js-category-selection" />\n</div>\n</div>\n</div>\n</div>\n<div analytics-graph-view no-msg="noMsg" date-range="dateRange" loading="loading" modified-data-callback="modifiedDataCallback" graph-data="overviewData" unit="unit"></div>\n</div>'},{}],13:[function(require,module){module.exports='<div class="well well-sm analytics-wrap seg-analytics" ng-class="{\'analytics-initial-load\': !initialSelectionDone}">\n<div class="seg-graph-tools-wrap">\n<div class="seg-graph-tools gray-h-bar">\n<div class="row">\n<div class="col-sm-6">\n <input type="hidden" id="js-segmentn-event-sel" />\n</div>\n<div class="col-sm-6">\n<div class="seg-bookmarks-wrap" ng-show="initialSelectionDone">\n<div bookmarks="bookmarks" on-select-bookmark="onSelectBookmark" on-save-bookmark="onSaveBookmark" on-delete-bookmark="onDeleteBookmark"></div>\n</div>\n</div>\n</div>\n</div>\n<div class="row events-qb-wrap" ng-if="initialSelectionDone">\n<div class="col-md-12" ng-if="currentEvent">\n<div events-query-builder="intermediateQuery" evnt="currentEvent" expandable="isQbExpandable" get-query-now="getQueryNow" get-query-callback="getQueryCallback" class="qb-responsive events-query-builder"></div> \n</div>\n</div>\n<div class="gray-h-bar" ng-if="initialSelectionDone">\n<div class="row">\n<div class="col-md-12">\n<div class="button-wrap">\n <button class="btn btn-primary btn-sm" ng-click="getQuery()">Show</button>\n</div>\n</div>\n</div>\n</div>\n<div ng-show="initialSelectionDone" class="">\n<div analytics-graph-view loading="loading" no-msg="noMsg" date-range="dateRange" modified-data-callback="getAnalytics" graph-data="eventGraphData" unit="unit"></div>\n</div>\n<div ng-show="!initialSelectionDone" class="analytics-init-msg">\n Segmentation allows you to dive into an event, and query its properties. Get started by selecting an event from the dropdown above.\n</div>\n</div>\n \n</div>'},{}],14:[function(require,module){"use strict";require(1);module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","constants","events","segBookmarks","$q","$timeout",function($scope,$location,$state,builtApi,Alert,Utils,constants,events,segBookmarks,$q,$timeout){function checkIfSingleQuery(){var query=$scope.searchQuery;for(var i in query){var keyData=Object.keys(query[i][0])[0];if(1===query[i].length&&_.isEmpty(query[i][0][keyData]))return!0}return!1}function setSearchQueryPromise(){defSearchQuery=$q.defer(),getSearchQuery=defSearchQuery.promise}function initEventSelect(){eventSelect.select2({placeholder:"Pick an event",data:events.map(function(event){return event.id=event.uid,event.text=event.name,event})}).off("change").on("change",function(){onEventSelect(eventSelect.select2("data"))})}function onEventSelect(e){Utils.sa($scope,function(){$scope.initialSelectionDone||($scope.initialSelectionDone=!0),resetCurrentEvent(),resetQuery(),$timeout(function(){setCurrentEvent(e),getAnalytics()},0)})}function resetCurrentEvent(){$scope.currentEvent=null,$scope.searchParams.event.only.name=[]}function setCurrentEvent(e){$scope.currentEvent=e,$scope.searchParams.event.only.name=[e.name]}function resetQuery(){$scope.intermediateQuery.data.length=0,$scope.searchQuery={}}function setQuery(q){$scope.intermediateQuery.data=q.data}function getAnalytics(){checkIfSingleQuery()?getAnalyticsByProperty():getAnalyticsByQuery()}function getAnalyticsByProperty(){var query=$scope.searchQuery,params=_.cloneDeep($scope.searchParams);params.property=Object.keys(query[Object.keys(query)[0]][0])[0].replace("properties.",""),params.from_date=$scope.dateRange.startDate,params.to_date=$scope.dateRange.endDate,$scope.loading=!0,builtApi.Analytics.getPropAnalytics({options:{eventUid:$scope.currentEvent.uid+"/properties_analytics"},body:params}).then(function(res){$scope.eventGraphData=res}).finally(function(){$scope.loading=!1})}function getAnalyticsByQuery(){var params=_.cloneDeep($scope.searchParams);params.from_date=$scope.dateRange.startDate,params.to_date=$scope.dateRange.endDate,params.query=$scope.searchQuery,$scope.loading=!0,builtApi.Analytics.postAnalytics({options:{eventType:"analytics"},body:params}).then(function(res){$scope.eventGraphData=res}).finally(function(){$scope.loading=!1})}var events=_.cloneDeep(events),eventSelect=$("#js-segmentn-event-sel"),defSearchQuery=null,getSearchQuery=null;$scope.searchParams=_.cloneDeep(constants.analytics.defaults.eventSearchParams),$scope.noMsg="No data found!",$scope.unit={unit:$scope.searchParams.unit},$scope.bookmarks=segBookmarks.segments,$scope.eventGraphData={},$scope.getQueryForBookmark=!1,$scope.currentEvent=null,$scope.initialSelectionDone=!1,$scope.loading=!1,$scope.dateRange={startDate:moment().subtract(30,"day").format("YYYY-MM-DD"),endDate:moment().format("YYYY-MM-DD"),options:{opens:"right"}},$scope.intermediateQuery={data:[]},$scope.getQueryNow=!1,$scope.isQbExpandable=!0,$scope.searchQuery={},setSearchQueryPromise(),initEventSelect(),$scope.getQuery=function(){$scope.getQueryNow=!0,getSearchQuery.then(function(query){$scope.searchQuery=query,getAnalytics()}).finally(function(){$scope.getQueryNow=!1,setSearchQueryPromise()})},$scope.getQueryCallback=function(getQuery){return getQuery.then(function(query){defSearchQuery.resolve(query)},function(err){defSearchQuery.reject(err)}),getSearchQuery.promise},$scope.getAnalytics=function(){getAnalytics()},$scope.onSelectBookmark=function(bookmark){var currentEvent=_.filter(events,function(e){return bookmark.query.event.uid===e.uid})[0];return _.isUndefined(currentEvent)?(Alert.confirm({title:"Unable to load bookmark!",content:"The event saved in this bookmark is deleted.",buttons:"[Dismiss]"}),!1):(resetCurrentEvent(),setQuery(bookmark.query.query),void $timeout(function(){eventSelect.select2("val",currentEvent.uid),setCurrentEvent(currentEvent),$timeout(function(){$scope.getQuery()},500)},0))},$scope.onDeleteBookmark=function(bookmark,onDeletedCallback){builtApi.Analytics.deleteBookmarkSegment({options:{segmentUid:bookmark.uid}}).then(function(res){$scope.bookmarks.splice($scope.bookmarks.indexOf(bookmark),1),onDeletedCallback(),Alert.notify({title:"Success",content:res.notice,type:"success"})})},$scope.onSaveBookmark=function(bookmark,onSaveCallback){var query=Utils.removeKey($scope.intermediateQuery,"$$hashKey");builtApi.Analytics.postAnalytics({options:{eventType:"analytics/segments"},body:{segment:{name:bookmark,query:{event:{name:$scope.currentEvent.name,uid:$scope.currentEvent.uid},query:query}}}}).then(function(res){onSaveCallback(),$scope.bookmarks.push(res.segment),Alert.notify({title:"Success",content:res.notice,type:"success"}) })}}]},{1:330}],15:[function(require,module){"use strict";var analyticsGraphViewTemplate=require(1);module.exports=["libraryService","$injector","constants",function(LIB,$injector,constants){return{template:analyticsGraphViewTemplate,restrict:"A",replace:!0,scope:{dateRange:"=",modifiedDataCallback:"=",graphData:"=",unit:"=",loading:"=",noMsg:"="},link:function(scope,elem){function showGraph(){LIB.get("charts").then(function(){switch(scope.defaultChartType){case"line":renderGraph(prepareDataforLineGraph());break;case"bar":renderGraph(prepareDataForBarGraph());break;case"pie":renderGraph(prepareDataForPieGraph())}})}function prepareDataforLineGraph(){var rawGraphData=_.extend({},{},scope.graphData),options=_.cloneDeep(constants.analytics.defaults.charts.line),modGraphData=[],properties=rawGraphData.data;for(var key in properties){var series=[],stat=properties[key];for(var date in stat)series.push([new Date(date).getTime(),stat[date]]);modGraphData.push({name:key,data:series})}return options.series=modGraphData,options}function prepareDataForBarGraph(){var rawGraphData=$.extend(!0,{},scope.graphData),options=_.cloneDeep(constants.analytics.defaults.charts.bar),modGraphData={data:[]};for(var key in rawGraphData.data){var eventData=rawGraphData.data[key],eventDataCount=_.reduce(eventData,function(sum,num){return sum+num});modGraphData.data.push([key,eventDataCount]),options.xAxis.categories.push(key)}return options.series=[modGraphData],options.xAxis.labels.rotation=modGraphData.data.length>10?30:0,options}function prepareDataForPieGraph(){var rawGraphData=$.extend(!0,{},scope.graphData),options=_.cloneDeep(constants.analytics.defaults.charts.pie),modGraphData={data:[]};for(var key in rawGraphData.data){var eventData=rawGraphData.data[key],eventDataCount=_.reduce(eventData,function(sum,num){return sum+num});modGraphData.data.push([key,eventDataCount]),options.xAxis.categories.push(key)}return options.series=[modGraphData],options}function renderGraph(options){$injector.invoke(["chartService",function(hc){hc.drawChart({el:graphHolder,options:options})}])}var graphHolder=elem.find(".graph");scope.defaultChartType="line",scope.noDataFound=!1,scope.onDateRangeChange=function(){scope.modifiedDataCallback()},scope.setUnit=function(type){scope.unit.unit=type,scope.modifiedDataCallback()},scope.selectChartType=function(type){scope.defaultChartType=type,showGraph()},scope.$watch("graphData",function(){scope.graphData&&scope.graphData.data&&_.isEmpty(scope.graphData.data)?scope.noDataFound=!0:(scope.noDataFound=!1,showGraph())})}}}]},{1:16}],16:[function(require,module){module.exports='<div class="analytics-graph-view">\n<div class="agv-graph-tools">\n<div class="row">\n<div class="col-md-6">\n<div bootstrap-daterangepicker class="date-range-picker" date-range="dateRange" on-date-range-change="onDateRangeChange"></div>\n</div>\n<div class="col-md-6">\n<div class="agv-unit-wrap clearfix" ng-show="!noDataFound">\n \n<div class="btn-group">\n <a class="btn bg-color-blue txt-color-white btn-labeled" data-toggle="dropdown">\n <span class="btn-label">\n<i class="fa fa-calendar"></i> \n</span> \n <span class="btn-text">{{unit.unit}}</span>\n<span class="caret"></span> \n</a> \n<ul class="dropdown-menu">\n<li>\n <a class="hand" ng-click="setUnit(\'day\')">Day</a>\n</li>\n<li>\n <a class="hand" ng-click="setUnit(\'week\')">Week</a>\n</li>\n<li>\n <a class="hand" ng-click="setUnit(\'month\')">Month</a>\n</li>\n</ul>\n</div>\n\n<div class="btn-group">\n <a class="btn btn-chart-type bg-color-blue txt-color-white btn-labeled" data-toggle="dropdown">\n <span class="btn-label">\n<i class="fa fa-area-chart"></i> \n</span> \n <span class="btn-text">{{defaultChartType}}</span>\n<span class="caret"></span> \n</a> \n<ul class="dropdown-menu">\n<li>\n <a class="hand" ng-click="selectChartType(\'line\')">Line</a>\n</li>\n<li>\n <a class="hand" ng-click="selectChartType(\'bar\')">Bar</a>\n</li>\n<li>\n <a class="hand" ng-click="selectChartType(\'pie\')">Pie</a>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="agv-graph-holder" ng-class="{\'false-hidden\': loading || noDataFound}">\n<div class="graph"></div>\n</div>\n<div class="no-msg" ng-if="!loading && noDataFound">\n {{noMsg}}\n</div>\n<div class="tab-loader clearfix" ng-if="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n</div>'},{}],17:[function(require,module){require(1),module.exports=["$rootScope","constants",function($rootScope,constants){Highcharts.theme={colors:constants.charts.colorPalette},Highcharts.setOptions(Highcharts.theme),this.drawChart=function(args){args.el.highcharts(args.options)}}]},{1:306}],18:[function(require,module){"use strict";var appAclService=require(2),aclSelect=require(1);module.exports=angular.module("appAcl",[]).service("appAclService",appAclService).directive("aclSelect",aclSelect)},{1:19,2:21}],19:[function(require,module){"use strict";module.exports=["builtApi",function(builtApi){return{replace:!0,restrict:"A",scope:{data:"=data",aclType:"@aclType",selectedData:"=selecteddata"},link:function(scope){function getUserText(obj){var html="",format={n:$.trim((obj.first_name?obj.first_name:"")+" "+(obj.last_name?obj.last_name:"")),e:obj.email,u:obj.uid,t:obj._tenant?"Tenant: "+obj._tenant:""};for(var key in format)_.isEmpty(format[key])||(html+="<p>"+format[key]+"</p>");return html}function getAcl(aclType,searchStr){var query={uid:{$nin:getUidEncodeParams(scope.data.ACL[aclType])}},params={query:JSON.stringify(query),typeahead:searchStr,include_tenant_name:!0};if("users"===scope.aclType){params.only=JSON.stringify({BASE:["uid","username","email"]});var args={options:{classUid:"built_io_application_user",query:params}}}if("roles"===scope.aclType){params.only=JSON.stringify({BASE:["uid","name"]});var args={options:{classUid:"built_io_application_user_role",query:params}}}return builtApi.Objects.getAll(args)}function getUidEncodeParams(arr){var arrIds=arr.map(function(obj){return obj.uid});return arrIds}function checkIfAnonymous(){for(var i=0;i<scope.data.ACL.users.length;i++)if("anonymous"===scope.data.ACL.users[i].uid)return!0;return!1}function matchForAnonymous(query){var reg=new RegExp(query,"i");return null!="anonymous".match(reg)?!0:!1}var selectBox=$("#acl-"+scope.aclType+"-select"),anonymousObj={};anonymousObj={id:"anonymous",uid:"anonymous",text:"Anonymous (Non logged in users)",username:"Anonymous (Non logged in users)"};var searchACl=_.throttle(function(query){return getAcl(scope.aclType,query).then(function(data){var dataArr=data.objects.map(function(obj){return obj.id=obj.uid,obj.text="users"==scope.aclType?getUserText(obj):obj.name,obj});return"users"==scope.aclType&&!checkIfAnonymous()&&matchForAnonymous(query)&&dataArr.splice(0,0,anonymousObj),{results:dataArr}})},1e3);scope.$watch("selectedData",function(newValue){_.isEmpty(newValue)&&selectBox.select2("val","")}),selectBox.select2({minimumInputLength:1,multiple:!0,closeOnSelect:!1,placeholder:"Select application "+scope.aclType,formatResultCssClass:function(){return"users"==scope.aclType?"sel-ui":""},escapeMarkup:function(m){return m},query:function(query){searchACl(query.term).then(query.callback)}}),selectBox.on("change",function(){scope.selectedData.data=selectBox.select2("data")})}}}]},{}],20:[function(require,module){module.exports='<div class="acl-console">\n<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n\n<h3 class="modal-title smart-form">\n <span ng-if="data.isDefault">Configure Default ACL</span>\n <span ng-if="!data.isDefault">Configure ACL</span>\n <label class="toggle" ng-if="!data.isDefault">\n <input type="checkbox" name="checkbox-toggle" ng-init="aclDisableModel = !data.ACL.disable" ng-model="aclDisableModel" ng-change="data.ACL.disable = !aclDisableModel">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> \n</label> \n</h3>\n<div ng-if="!data.isDefault">\n<p ng-if="!data.ACL.disable">This object is restricted as per the ACL given below. Turn off ACL to make it public</p>\n<p ng-if="data.ACL.disable">This object is public, readable to everyone. and writable only by its owners, Turn on ACL to limit access</p>\n</div>\n</div>\n<div class="modal-body">\n<ul id="myTab1" class="nav nav-tabs acl-nav-tabs">\n<li class="active">\n <a data-toggle="tab" ng-click="getACLType(\'users\')">Users</a>\n</li>\n<li class="">\n <a data-toggle="tab" ng-click="getACLType(\'roles\')">Roles</a>\n</li>\n<li class="dropdown">\n <a data-toggle="tab" ng-click="getACLType(\'others\')">Everyone else</a>\n</li>\n\n</ul>\n\n<div class="tab-content acl-tabs-content">\n<div class="tab-pane fade active in acl-tab-pane" ng-class="{hidden:ACLType!=\'users\'}">\n<div class="acl-list-wrap">\n<div class="acl-list">\n<div class="acl-item animated blue-fade-5" ng-repeat="user in data.ACL.users track by $index">\n<table>\n<tr>\n<td>\n<div class="acl-details-wrap">\n<p ng-if="user.first_name || user.last_name">\n {{user.first_name}} {{user.last_name}} \n</p>\n<p ng-if="user.username">\n {{user.username}} \n</p>\n<p>\n {{user.email}}\n</p>\n<p>\n {{user.uid}}\n</p>\n<p class="acl-tenant-name" ng-if=\'user._tenant\'>\n Tenant: {{user._tenant}}\n</p>\n</div>\n</td>\n<td class="acl-rights-wrap">\n<div class="acl-rights">\n <label class="checkbox-inline" ng-repeat="right in data.rights">\n <input type="checkbox" class="checkbox style-0" ng-model="user[right]">\n <span>{{right}}</span>\n</label> \n</div>\n</td>\n<td class="remove-acl">\n <button type="button" class="close" ng-click=\'removeACL($index, data.ACL.users)\'>\n &times;\n</button>\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n<legend>\n Add more users\n</legend>\n<div class="row">\n<div class="col-md-6">\n <input id="acl-users-select" class="acl-user-select" acl-select="" data="data" acl-type="users" selecteddata="userSelectedData" type="text" />\n<div class="button-wrap mt5">\n <button class="btn bg-color-blue txt-color-white pull-right ml5 btn-sm" ng-click="addToUserList()">Add to list</button>\n <button class="btn btn-default pull-right btn-sm" ng-click="clearList(ACLType)">Clear</button>\n</div>\n</div>\n<div class="col-md-6">\n<div class="acl-rights">\n <label class="checkbox-inline" ng-repeat="right in data.rights">\n <input type="checkbox" class="checkbox style-0" ng-model="userRightPresets[right]">\n <span>{{right}}</span>\n</label> \n</div>\n</div>\n</div>\n</div>\n<div class="tab-pane fade active in acl-tab-pane" ng-class="{hidden:ACLType!=\'roles\'}">\n<div class="acl-list-wrap">\n<div class="acl-list">\n<div class="acl-item blue-fade-5" ng-repeat="role in data.ACL.roles">\n<table>\n<tr>\n<td>\n<div class="acl-name">\n {{role.name}}\n <span class="sub-name">{{role.uid}}</span>\n</div>\n</td>\n<td class="acl-rights-wrap">\n<div class="acl-rights">\n <label class="checkbox-inline" ng-repeat="right in data.rights">\n <input type="checkbox" class="checkbox style-0" ng-model="role[right]">\n <span>{{right}}</span>\n</label> \n</div>\n</td>\n<td class="remove-acl">\n <button type="button" class="close" ng-click=\'removeACL($index, data.ACL.roles)\'>\n &times;\n</button>\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n<legend>\n Add more roles\n</legend>\n<div class="row">\n<div class="col-md-6">\n<div id="acl-roles-select" class="acl-user-select" acl-select="" data="data" acl-type="roles" selecteddata="rolesSelectedData"></div>\n<div class="button-wrap mt5">\n <button class="btn bg-color-blue txt-color-white pull-right ml5 btn-sm" ng-click="addToRolesList()">Add to list</button>\n <button class="btn btn-default pull-right btn-sm" ng-click="clearList(ACLType)">Clear</button>\n</div>\n</div>\n<div class="col-md-6">\n<div class="acl-rights">\n <label class="checkbox-inline" ng-repeat="right in data.rights">\n <input type="checkbox" class="checkbox style-0" ng-model="roleRightPresets[right]">\n <span>{{right}}</span>\n</label> \n</div>\n</div>\n</div>\n</div>\n\n<div class="tab-pane fade active in acl-tab-pane" ng-class="{hidden:ACLType!=\'others\'}">\n<div class="acl-list-wrap">\n<div class="acl-list">\n<div class="acl-item">\n<table>\n<tr>\n<td>\n<div class="acl-name">\n Everyone else\n</div>\n</td>\n<td class="acl-rights-wrap">\n<div class="acl-rights">\n <label class="checkbox-inline" ng-repeat="right in data.rights">\n <input type="checkbox" class="checkbox style-0" ng-model="data.ACL.others[right]">\n <span>{{right}}</span>\n</label> \n</div>\n</td>\n<td class="remove-acl">\n <button type="button" class="close v-hidden" ng-click=\'removeACL($index, data.ACL.roles)\'>\n &times;\n</button>\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n\n</div>\n</div>\n\n\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <button ng-click=\'ok()\' class="btn btn-labeled btn-primary btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> Done\n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>\n</div>'},{}],21:[function(require,module){"use strict";var aclOverlayTemplate=require(1);module.exports=["$q","builtApi",function($q,builtApi){this.aclOverlayTemplate=aclOverlayTemplate,this.aclCtrl=function($scope,$modalInstance,data){function makeRightPresets(){for(var o={},i=0;i<data.rights.length;i++)o[data.rights[i]]=!1;return o}function makeOthersRights(){var rights=_.cloneDeep(defaultRights);return rights.read=!0,rights.hasOwnProperty("create")&&(rights.create=!0),_.extend({},rights,data.ACL.others||{})}function getUsers(query){if($scope.data.ACL.users.length){var args={options:{classUid:"built_io_application_user",query:query}};return builtApi.Objects.getAll(args)}return $q.reject({})}function getRoles(query){if($scope.data.ACL.roles.length){var args={options:{classUid:"built_io_application_user_role",query:query}};return builtApi.Objects.getAll(args)}return $q.reject({})}function mapUsers(users){var mappedUsers=$scope.data.ACL.users.map(function(aclUser){return _.find(users,function(user){aclUser.uid===user.uid&&(aclUser.email=user.email,aclUser.username=user.username,aclUser._tenant=user._tenant,aclUser.uid=user.uid)}),"anonymous"===aclUser.uid&&(aclUser.id="anonymous",aclUser.text="Anonymous (Non logged in users)",aclUser.username="Anonymous (Non logged in users)"),aclUser});$scope.data.ACL.users=mappedUsers}function mapRoles(roles){var mappedRoles=$scope.data.ACL.roles.map(function(aclRole){return _.find(roles,function(role){aclRole.uid===role.uid&&(aclRole.name=role.name,aclRole.uid=role.uid)}),aclRole});$scope.data.ACL.roles=mappedRoles}function getQuery(aclType){var query={uid:{$in:getUidEncodeParams($scope.data.ACL[aclType]||[])}},params={query:JSON.stringify(query),include_tenant_name:!0};return"users"===$scope.aclType&&(params.only=JSON.stringify({BASE:["uid","username","email"]})),"roles"===$scope.aclType&&(params.only=JSON.stringify({BASE:["uid","name"]})),params}function getUidEncodeParams(arr){var arrIds=arr.map(function(obj){return obj.uid});return arrIds}var defaultRights=makeRightPresets();data.ACL.users=data.ACL.users||[],data.ACL.roles=data.ACL.roles||[],data.ACL.others=makeOthersRights(),data.isDefault=data.isDefault||!1,data.isDefault||(data.ACL.disable=data.ACL.disable||!1),$scope.data=data,$scope.ACLType="users",$scope.userSelectedData={},$scope.rolesSelectedData={},$scope.userRightPresets=_.cloneDeep(defaultRights),$scope.roleRightPresets=_.cloneDeep(defaultRights),$scope.getACLType=function(ACLType){$scope.ACLType=ACLType},$scope.ok=function(){$modalInstance.close($scope.data)},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.removeACL=function(index,arr){arr.splice(index,1)},$scope.addToUserList=function(){if($scope.userSelectedData.data){var rights=_.cloneDeep($scope.userRightPresets);$scope.userSelectedData.data.map(function(obj){var o={};o.uid=obj.uid,o.username=obj.username,o.email=obj.email,o._tenant=obj._tenant,o=_.assign(o,rights),$scope.data.ACL.users.push(o)}),$scope.userSelectedData={}}},$scope.addToRolesList=function(){if($scope.rolesSelectedData.data){var rights=_.cloneDeep($scope.roleRightPresets);$scope.rolesSelectedData.data.map(function(obj){var o={};o.uid=obj.uid,o.name=obj.name,o=_.assign(o,rights),$scope.data.ACL.roles.push(o)}),$scope.rolesSelectedData={}}},$scope.clearList=function(ACLType){"users"===ACLType&&($scope.userSelectedData={}),"roles"===ACLType&&($scope.rolesSelectedData={})},getUsers(getQuery("users")).then(function(res){mapUsers(res.objects)}),getRoles(getQuery("roles")).then(function(res){mapRoles(res.objects)})}}]},{1:20}],22:[function(require,module){var builtApi=require(1);module.exports=angular.module("builtApi",[]).service("builtApi",builtApi)},{1:23}],23:[function(require,module){"use strict";function getHeaders(args){return args&&!_.isEmpty(args.headers)?_.extend(args.headers,headers):headers}function setHeaders(args_headers){headers=_.extend(headers,args_headers)}function removeHeaderKey(key){delete headers[key]}function removeHeaders(){headers={}}var BuiltApi=require(1),headers={};module.exports=["$q",function($q){return{setHeaders:setHeaders,removeHeaderKey:removeHeaderKey,removeHeaders:removeHeaders,getHeaders:getHeaders,ApiHost:{getApiHost:function(){return $q.when(BuiltApi.Apihost.getApiHost())}},FieldTypes:{getDataTypes:function(){return $q.when(BuiltApi.FieldTypes.getDataTypes())}},Tenants:{getAll:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Tenants.getAll(args))},addTenant:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Tenants.addTenant(args))},editTenant:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Tenants.editTenant(args))},deleteTenant:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Tenants.deleteTenant(args))}},SystemUserSession:{login:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.SystemUserSession.login(args))},get:function(){return $q.when(BuiltApi.SystemUserSession.get())},logout:function(){return $q.when(BuiltApi.SystemUserSession.logout())},postForgotPassword:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.SystemUserSession.postForgotPassword(args))},signUp:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.SystemUserSession.signUp(args))},update:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.SystemUserSession.update(args))},resetPassword:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.SystemUserSession.resetPassword(args))},activateAccount:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.SystemUserSession.activateAccount(args))}},AppUserSession:{login:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.AppUserSession.login(args))},get:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.AppUserSession.get(args))},logout:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.AppUserSession.logout(args))},resetPassword:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.AppUserSession.resetPassword(args))},activateAccount:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.AppUserSession.activateAccount(args))}},Application:{getApp:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.getApp(args))},getApps:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.getApps())},getAppSettings:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.getAppSettings(args))},postAppSettings:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.postAppSettings(args))},addOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.addOne(args))},deleteOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.deleteOne(args))},transferOwnerShip:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.transferOwnerShip(args))},editOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.editOne(args))},ownershipActivation:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Application.ownershipActivation(args))}},Classes:{getAll:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Classes.getAll(args))},getOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Classes.getOne(args))},editOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Classes.editOne(args))},addOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Classes.addOne(args))},deleteOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Classes.deleteOne(args))}},Objects:{getOne:function(args){var args=args||{};return args.headers=getHeaders(args),BuiltApi.Objects.getOne(args)},getAll:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Objects.getAll(args))},editOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Objects.editOne(args))},addOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Objects.addOne(args))},deleteOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Objects.deleteOne(args))},deleteSelected:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Objects.deleteSelected(args))}},File:{getUpload:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.File.getUpload(args))},deleteOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.File.deleteOne(args))},deleteSelected:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.File.deleteSelected(args))},postDefaultACl:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.File.postDefaultACl(args))},updateUploadACl:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.File.updateUploadACl(args))}},Notifications:{getAll:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Notifications.getAll(args))},addOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Notifications.addOne(args))},editOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Notifications.editOne(args))},deleteOne:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Notifications.deleteOne(args))},getCredentialsDetails:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Notifications.getCredentialsDetails(args))}},ServerConfig:{getServerConfig:function(){return $q.when(BuiltApi.ServerConfig.getServerConfig())}},Plans:{getPlans:function(){return $q.when(BuiltApi.Plans.getPlans())}},ApiMetrics:{get:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.ApiMetrics.get(args))}},Extensions:{get:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Extensions.get(args))},"delete":function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Extensions.delete(args))},addDomain:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Extensions.addDomain(args))},state:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Extensions.state(args))}},Accounts:{getAccounts:function(){return $q.when(BuiltApi.Accounts.getAccounts())},getBillingInfo:function(){return $q.when(BuiltApi.Accounts.getBillingInfo())},getPaymentHistory:function(){return $q.when(BuiltApi.Accounts.getPaymentHistory())},postPlans:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Accounts.postPlans(args))}},Integration:{get:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Integration.get(args))},post:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Integration.post(args))},put:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Integration.put(args))},"delete":function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Integration.delete(args))}},Analytics:{getEvents:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.getEvents(args))},getPropAnalytics:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.getPropAnalytics(args))},editEvents:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.editEvents(args))},deleteEvents:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.deleteEvents(args))},getAnalytics:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.getAnalytics(args))},postAnalytics:function(args){var args=args||{}; return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.postAnalytics(args))},deleteFunnel:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.deleteFunnel(args))},addFunnel:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.addFunnel(args))},editFunnel:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.editFunnel(args))},deleteBookmarkSegment:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Analytics.deleteBookmarkSegment(args))}},Bookmarks:{get:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Bookmarks.get(args))},add:function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Bookmarks.add(args))},"delete":function(args){var args=args||{};return args.headers=getHeaders(args),$q.when(BuiltApi.Bookmarks.delete(args))}}}}]},{1:247}],24:[function(require,module){"use strict";require(10),require(9);var angular=require(8),classbuilder=require(1),classfield=require(2),classFieldWrap=require(3),refSelect=require(4),uniqueSelect=require(5),classBuilderService=require(7),classAbilitiesService=require(6);module.exports=angular.module("classBuilder",["appAcl","ui.sortable"]).directive("classbuilder",classbuilder).directive("classfieldwrap",classFieldWrap).directive("classfield",classfield).directive("refselect",refSelect).directive("uniqueSelect",uniqueSelect).service("classBuilderService",classBuilderService).service("classAbilitiesService",classAbilitiesService)},{1:25,10:310,2:27,3:26,4:28,5:29,6:37,7:38,8:295,9:287}],25:[function(require,module){"use strict";var listBuilderTemplate=require(1),schemaOverlay=require(2);module.exports=["constants","utilsService","classBuilderService","modalService","appAclService","classAbilitiesService",function(constants,Utils,classBuilderService,fieldModal,appAclService){return{template:listBuilderTemplate,restrict:"A",scope:{clssdata:"=clssdata",dtypes:"=dtypes",apikey:"=",classSteps:"=",activeStep:"="},link:function(scope){function getHumanizedDate(date){return moment(date).format("ddd MMM Do, YYYY")}scope.validUid=null,scope.isNewClass=!1,scope.cfOptions={},_.isEmpty(scope.clssdata.uid)&&(scope.isNewClass=!0,scope.clssdata=_.cloneDeep(constants.classes.defaultClassData)),scope.isNewClass||(scope.created_at=getHumanizedDate(scope.clssdata.created_at),scope.updated_at=getHumanizedDate(scope.clssdata.updated_at)),scope.validateUID=function(){var uid=scope.clssdata.uid;return _.isEmpty(uid)?void(scope.validUid=null):void(scope.validUid=null==uid.match(constants.regex.uid)?!1:!0)},scope.autoFillUID=function(){scope.isNewClass&&(scope.clssdata.uid=Utils.createUID(scope.clssdata.title),scope.validUid=null)},scope.addFields=function(){var modalData={allDataTypes:scope.dtypes,field:{}};fieldModal.openModal(modalData,schemaOverlay,classBuilderService.fieldCtrl).then(function(field){scope.clssdata.schema.push(field)},function(err){})},scope.configureDefaultACL=function(){var modalData={ACL:_.cloneDeep(scope.clssdata.DEFAULT_ACL),esckey:!1,rights:["create","read","update","delete"]};fieldModal.openModal(modalData,appAclService.aclOverlayTemplate,appAclService.aclCtrl,{keyboard:!1}).then(function(res){scope.clssdata.DEFAULT_ACL=res.ACL})},scope.clssdata.options||(scope.clssdata.options={}),scope.clssdata.options.inbuiltFields||(scope.clssdata.options.inbuiltFields={publish:!0,location:!0,tag:!0}),scope.cfOptions=scope.clssdata.options.inbuiltFields,scope.$watch("cfOptions",function(){scope.clssdata.options||(scope.clssdata.options={}),scope.clssdata.options.inbuiltFields=scope.cfOptions,scope.cfOptions.publish&&scope.cfOptions.location&&scope.cfOptions.tag&&(scope.clssdata.options.hasOwnProperty("title")?delete scope.clssdata.options.inbuiltFields:delete scope.clssdata.options)},!0),$("[rel=tooltip]").tooltip()}}}]},{1:31,2:32}],26:[function(require,module){"use strict";var listBuilderTemplate=require(1);module.exports=["$compile",function($compile){return{replace:!0,restrict:"A",scope:{clssdata:"=clssdata",allclss:"=allclss",dtypes:"=dtypes"},link:function(scope,elem){var $template=angular.element(listBuilderTemplate);$compile($template)(scope),elem.append($template),scope.sortableOptions={forcePlaceholderSize:!0,axis:"y",handle:".cf-handle i",opacity:1,placeholder:"ui-sortable-placeholder",scroll:"true",containment:"parent"}}}}]},{1:33}],27:[function(require,module){"use strict";var listBuilderTemplate=require(2),schemaOverlay=require(1);module.exports=["modalService","classBuilderService","alertService",function(fieldModal,classBuilderService,Alert){return{template:listBuilderTemplate,replace:!0,restrict:"A",scope:{field:"=field",clssdata:"=clssdata",prop:"=prop",dtypes:"=dtypes"},link:function(scope,elem){function checkIfTitle(){"undefined"!=typeof scope.clssdata.options&&scope.clssdata.options.title===scope.field.uid&&elem.find(".chk-title").prop("checked",!0)}function addFields(){var modalData={allDataTypes:scope.dtypes,field:{}};fieldModal.openModal(modalData,schemaOverlay,classBuilderService.fieldCtrl).then(function(selectedItem){"undefined"==typeof scope.clssdata.schema[scope.prop].schema&&(scope.clssdata.schema[scope.prop].schema=[]),scope.clssdata.schema[scope.prop].schema.push(selectedItem)},function(err){})}function edit(field){var clonedField=_.cloneDeep(field),modalData={allDataTypes:scope.dtypes,field:clonedField};fieldModal.openModal(modalData,schemaOverlay,classBuilderService.fieldCtrl).then(function(res){scope.hideTitleip="text"===res.data_type&&1!=res.multiple,scope.hideTitleip||(scope.clssdata.options={}),scope.clssdata.schema[scope.prop]=res,scope.actions="group"===res.data_type?["Add","Edit","Delete"]:["Edit","Delete"]})}function del(gridItem,index){Alert.confirm({title:"Delete field",content:"Are you sure you want to delete this field?"}).then(function(){scope.clssdata.schema.splice(index,1)})}scope.actions="group"===scope.field.data_type?["Add","Edit","Delete"]:["Edit","Delete"],scope.hideTitleip="text"===scope.field.data_type&&1!=scope.field.multiple,scope.showgrp=!1,scope.grpToggleTxt="Expand",scope.showFieldMeta=!1,scope.toggleGrp=function(){scope.showgrp=!scope.showgrp,scope.grpToggleTxt=scope.showgrp?"Collapse":"Expand"},checkIfTitle(),elem.find(".chk-title").on("click",function(e){var wasChecked=$(e.currentTarget).prop("checked");$(".cft-row-inner .chk-title").removeAttr("checked"),wasChecked&&$(e.currentTarget).prop("checked",!0)}),elem.find(".chk-title").on("change",function(){void 0===$(this).prop("checked")||$(this).prop("checked")===!1?scope.clssdata.options.title="":(scope.clssdata.options={},scope.clssdata.options.title=scope.field.uid)}),scope.checkUnique=function(data){return null===data},scope.performAction=function(act,gridItem,index){return"Add"===act?addFields():"Edit"===act?edit(gridItem):"Delete"===act?del(gridItem,index):void 0},scope.toggleFieldMeta=function(){scope.showFieldMeta=!scope.showFieldMeta}}}}]},{1:32,2:34}],28:[function(require,module){"use strict";module.exports=["$compile","builtApi","utilsService",function($compile,builtApi,Utils){return{replace:!0,restrict:"A",scope:{referenceto:"=referenceto",dataitem:"=dataitem"},link:function(scope,elem){function onRefNotFound(){Utils.sa(scope,function(){scope.dataitem.reference_to="",scope.referenceto=void 0,setTimeout(function(){elem.select2("val",void 0)},0)})}elem.val(scope.referenceto).select2({placeholder:"Select a class",minimumInputLength:1,initSelection:function(element,callback){return scope.referenceto?void builtApi.Classes.getOne({options:{classUid:scope.referenceto}}).then(function(klass){callback({id:klass.uid,text:klass.title})},function(){onRefNotFound(),callback({id:"",text:""})}):void callback({id:"",text:""})},query:function(query){Utils.getClassSearch(builtApi,query.term)().then(query.callback)}}),elem.on("change",function(){scope.dataitem.reference_to=elem.select2("val")})}}}]},{}],29:[function(require,module){"use strict";require(2);var uniqueSelect=require(1);module.exports=["$compile",function(){return{template:uniqueSelect,restrict:"A",scope:{uniquevalue:"=uniquevalue",uniquefielddata:"=uniquefielddata",dataitem:"=dataitem"},link:function(scope,elem){elem.select2({allowClear:!0,placeholder:"Not Unique",data:scope.uniquefielddata}),scope.uniquevalue?elem.select2("val",scope.uniquevalue):elem.select2("val",null),elem.on("change",function(e){scope.dataitem.unique=""==e.val?null:e.val})}}}]},{1:36,2:324}],30:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h5 class="modal-title">Clients of this application can</h5>\n</div>\n<div class="modal-body smart-form class-abilities-wrap">\n<div class="cf-radio-wrap">\n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="abilities.create_object">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> Create objects\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="abilities.get_one_object">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> View an object\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="abilities.get_all_objects">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> View all objects\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="abilities.update_object">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> Update an object\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="abilities.delete_object">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> Delete an object\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="abilities.delete_all_objects">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> Delete all objects\n</label> \n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</a> \n <a ng-click=\'ok()\' class="btn btn-labeled btn-primary btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> Done\n</a> \n</div>\n</div>'},{}],31:[function(require,module){module.exports='<div>\n\n \n<div class="row" ng-show="activeStep == classSteps[0]">\n<div class="col-sm-5 col-sm-offset-3">\n<fieldset class="cb-step-1">\n<div class="form-group">\n <label>Title</label>\n<div class="input-group">\n<span class="input-group-addon"><i class="fa fa-pencil fa-fw"></i></span> \n <input autofocus class="form-control input-lg" required ng-keyup="autoFillUID()" type="text" placeholder="Enter your class title..." ng-model="clssdata.title">\n</div>\n</div>\n<div class="form-group" ng-if="!isNewClass">\n <label>UID</label>\n<div class="input-group">\n<span class="input-group-addon"><i class="fa fa-pencil fa-fw"></i></span> \n <input class="form-control input-lg" disabled ng-keyup="autoFillUID()" type="text" placeholder="Enter your class unique identification identity..." ng-model="clssdata.uid">\n</div>\n</div>\n<div class="form-group" ng-if="isNewClass" ng-class="{\'has-error\':validUid == false, \'has-success\': validUid == true}">\n <label>UID</label>\n<div class="input-group">\n<span class="input-group-addon"><i class="fa fa-pencil fa-fw"></i></span> \n <input class="form-control input-lg" required ng-keyup="validateUID()" type="text" placeholder="Enter your class unique identification identity..." ng-model="clssdata.uid" value="clssdata.uid">\n</div>\n<div class="note" ng-if="isNewClass">\n Only alphanumeric characters <b>(alphabets, numbers, underscore, hypen)</b> are allowed.\n</div>\n</div>\n</fieldset>\n</div>\n</div>\n\n \n<div ng-show="activeStep == classSteps[1]">\n<div ng-show="clssdata.schema.length != 0">\n<div class="class-date-row" ng-if="!isNewClass">\n<div class="alert alert-danger">\n<h4 class="alert-heading">Caution!</h4> Removing a field, modifying it\'s datatype or toggling it\'s multiple attribute will result in data loss of that field.\n</div>\n\n<div class="clearfix">\n<div class="pull-left">Last updated at: <span class="bold-text">{{updated_at}}</span>\n</div>\n<div class="pull-right">Created at: <span class="bold-text">{{created_at}}</span>\n</div>\n</div>\n</div>\n<div class="clearfix mb10">\n <a class="btn btn-labeled bg-color-blue txt-color-white pull-left" ng-click=\'addFields()\' ng-class="{\'tada\': clssdata.schema.length === 0}">\n <span class="btn-label">\n<i class="fa fa-plus-square"></i> \n</span> Add field\n</a> \n</div>\n</div>\n<div class="text-center" ng-show="clssdata.schema.length === 0">\n<h4 class="mb20">There are currently no fields in your class</h4>\n<p>\n <a class="btn btn-labeled btn-primary btn-lg" ng-click=\'addFields()\'>\n <span class="btn-label">\n<i class="fa fa-plus-square"></i> \n</span> Click to add a field\n</a> \n</p>\n</div>\n\n<section id="widget-grid" ng-class="{\'false-hidden\': clssdata.schema.length === 0}">\n<div class="jarviswidget class-field-table-wrap jarviswidget-color-blueDark">\n<div role=\'content\'>\n<div class="widget-body class-field-table no-padding">\n<div classfieldwrap clssdata="clssdata" dtypes="dtypes"></div>\n</div>\n</div>\n</div>\n</section>\n</div>\n\n \n<div ng-show="activeStep == classSteps[2]">\n \n<div class="class-abilities-wrap clearfix">\n<legend>Configure abilities of this class:</legend>\n<p>The users of this application can</p>\n<div class="cf-radio-wrap">\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="clssdata.abilities.create_object">\n <span>Create objects</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="clssdata.abilities.get_one_object">\n <span>View an object</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="clssdata.abilities.get_all_objects">\n <span>View all objects</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="clssdata.abilities.update_object">\n <span>Update an object</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="clssdata.abilities.delete_object">\n <span>Delete an object</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="clssdata.abilities.delete_all_objects">\n <span>Delete all objects</span>\n</label> \n</div>\n</div>\n</div>\n\n \n<div class="class-abilities-wrap mt20">\n<legend> Default permissons: Access control list (ACL)</legend>\n<p>You can select each user or role of this class and set its default permissions. <a class="hand" ng-click="configureDefaultACL()">Click here</a> to configure default permissions.</p>\n</div>\n\n \n<div class="class-abilities-wrap mt20">\n<legend> Inbuilt fields</legend>\n<p>built.io provides three inbuilt class fields. You can choose to show/hide these fields in your object view.</p>\n<div class="cf-radio-wrap">\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="cfOptions.publish">\n <span>Show publish option</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="cfOptions.location">\n <span>Show location</span>\n</label> \n</div>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="cfOptions.tag">\n <span>Show tags</span>\n</label> \n</div>\n</div>\n</div>\n\n</div>'},{}],32:[function(require,module){module.exports='<form class="form-horizontal class-field-ov" action="" method="" ng-submit="ok()">\n<div class="modal-header">\n <button type="button" class="close" ng-click=\'cancel()\'>\n &times;\n</button>\n<h4 class="modal-title" ng-if=\'isNewField\'>Add Field</h4>\n<h4 class="modal-title" ng-if=\'!isNewField\'>Edit Field</h4>\n</div>\n<div class="modal-body">\n<div class="alert alert-danger alert-block" ng-if="errors.length">\n<h4 class="alert-heading">Error!</h4>\n<ul>\n<li ng-repeat="error in errors">\n {{error}}\n</li>\n</ul>\n</div>\n<fieldset>\n \n<div class="form-group">\n <label class="col-sm-3 control-label">Display Name</label>\n<div class="col-sm-7">\n <input required ng-keyup="autoFillUID()" class="form-control" type="text" ng-model="data.field.display_name" value="{{data.field.display_name}}">\n</div>\n</div>\n<div class="form-group" ng-class="{\'has-error\':validUid == false, \'has-success\': validUid == true}">\n <label class="col-sm-3 control-label">UID</label>\n<div class="col-sm-7">\n <input required ng-trim="false" ng-keyup="validateUID()" class="form-control" type="text" ng-model="data.field.uid" value="data.field.uid">\n<div class="note">\n Only alphanumeric characters <b>(alphabets, numbers, underscore, hypen)</b> are allowed.\n</div>\n</div>\n\n</div>\n<div class="form-group">\n <label class="col-sm-3 control-label">Select Data Type</label>\n<div class="col-sm-9">\n <label class="cf-data-type-radio radio radio-inline" ng-repeat="type in data.allDataTypes">\n <input class="radiobox" name="style-0a" ng-model="data.field.data_type" type="radio" value="{{type.field_type}}" ng-change="selectedCheck(type)" class="selCheckClass">\n <span>{{type.label}}</span>\n</label> \n</div>\n</div>\n</fieldset>\n<fieldset>\n \n<div class="form-group" ng-if="activeDataType.multiple">\n <label class="col-xs-5 col-sm-3 control-label">Multiple</label>\n<div class="col-xs-7 col-sm-9">\n<div class="checkbox">\n <label>\n\n <input type="checkbox" class="checkbox style-0" ng-model=\'data.field.multiple\'>\n<span></span> \n</label> \n</div>\n</div>\n</div>\n<div class="form-group" ng-if="activeDataType.mandatory">\n <label class="col-xs-5 col-sm-3 control-label">Mandatory</label>\n<div class="col-xs-7 col-sm-9">\n<div class="checkbox">\n <label>\n\n <input type="checkbox" class="checkbox style-0" ng-model=\'data.field.mandatory\'>\n<span></span> \n</label> \n</div>\n</div>\n</div>\n\n<div class="form-group" ng-if="activeDataType.multiline">\n <label class="col-xs-5 col-sm-3 control-label">Multiline</label>\n<div class="col-xs-7 col-sm-9">\n<div class="checkbox">\n <label>\n\n <input type="checkbox" class="checkbox style-0" ng-model=\'data.field.field_metadata.multiline\'>\n<span></span> \n</label> \n</div>\n</div>\n</div>\n\n<div class="form-group" ng-if="activeDataType.allow_rich_text">\n <label class="col-xs-5 col-sm-3 control-label">Rich Text</label>\n<div class="col-xs-7 col-sm-9">\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model=\'data.field.field_metadata.allow_rich_text\'>\n<span></span> \n</label> \n</div>\n</div>\n</div>\n\n<div class="form-group" ng-if="activeDataType.unique">\n <label class="col-sm-3 control-label">Unique</label>\n<div class="col-sm-7">\n<div unique-select uniquevalue="data.field.unique" uniquefielddata="uniquefielddata" dataitem="data.field"></div>\n</div>\n\n</div>\n</fieldset>\n\n<fieldset>\n\n<div class="form-group" ng-if="activeDataType.field_type===\'reference\'">\n <label class="col-sm-3 control-label">Reference</label>\n<div class="col-sm-7">\n<div refselect referenceto="data.field.reference_to" dataitem="data.field"></div>\n</div>\n</div>\n<div class="form-group" ng-if="activeDataType.allow_length_validations">\n <label class="col-sm-3 control-label">Min. Length</label>\n<div class="col-sm-9">\n <input type="number" class="form-control cf-length-input" ng-model="data.field.min" value="{{data.field.min}}">\n</div>\n</div>\n\n<div class="form-group" ng-if="activeDataType.allow_length_validations">\n <label class="col-sm-3 control-label">Max. Length</label>\n<div class="col-sm-9">\n <input type="number" class="form-control cf-length-input" ng-model="data.field.max" value="{{data.field.max}}">\n</div>\n</div>\n\n<div class="form-group" ng-if="activeDataType.allow_regex">\n <label class="col-sm-3 control-label">Format</label>\n<div class="col-sm-7">\n <input type="text" class="form-control" ng-model="data.field.format">\n<p class="note">\n Ignore the /.../ just pass the matcher.\n</p>\n</div>\n</div>\n</fieldset>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</a> \n <button type="submit" class="btn btn-labeled btn-primary btn-sm pull-right">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span ng-if="isNewField">\n Add field\n</span> \n <span ng-if="!isNewField">\n Done\n</span> \n</button>\n</div>\n</div>\n</form>\n'},{}],33:[function(require,module){module.exports='<div>\n\n \n\n<div class="cft-row-header">\n<div class="chunk-0-5">\n Sort\n</div>\n<div class="chunk-0-5">\n Title\n</div>\n<div class="chunk-2">\n Display Name\n</div>\n<div class="chunk-2 hidden-xs hidden-sm">\n UID\n</div>\n<div class="chunk-1 hidden-xs hidden-sm">\n Datatype\n</div>\n<div class="chunk-1 hidden-xs hidden-sm">\n Unique\n</div>\n<div class="chunk-1 hidden-xs hidden-sm">\n Multiple\n</div>\n\n<div class="chunk-1 hidden-xs hidden-sm">\n Mandatory\n</div>\n<div class="chunk-1">\n Actions\n</div>\n</div>\n \n<div class="cft-rows-wrap" ui-sortable=\'sortableOptions\' ng-model="clssdata.schema">\n\n<div ng-repeat="field in clssdata.schema" classfield field="field" clssdata="clssdata" prop="$index" dtypes="dtypes" allclss="allclss">\n</div>\n</div>\n\n \n\n\n</div>\n'},{}],34:[function(require,module){module.exports='<div class="cft-row">\n<div class="cft-row-inner">\n<div class="chunk-0-5 cf-handle">\n<i class="fa fa-reorder"></i> \n</div>\n<div class="chunk-0-5 cf-boolean">\n<div class="checkbox cf-radio">\n <label ng-class="{\'hidden\':!hideTitleip}">\n <input type="checkbox" class="checkbox style-0 chk-title"></input>\n<span></span> \n</label> \n</div>\n</div>\n<div class="chunk-2 bold-text" ng-click="toggleFieldMeta()" title="{{field.display_name}}">\n {{field.display_name}}\n</div>\n<div class="chunk-2 bold-text hidden-xs hidden-sm" title="{{field.uid}}">\n {{field.uid}}\n</div>\n<div class="chunk-1 hidden-xs hidden-sm">\n {{field.data_type}}\n</div>\n<div class="chunk-1 hidden-xs hidden-sm">\n <span ng-show="checkUnique(field.unique)">Not unique</span>\n <span ng-hide="checkUnique(field.unique)">{{field.unique}}ly unique</span>\n</div>\n<div class="chunk-1 cf-boolean hidden-xs hidden-sm">\n<i class="fa" ng-class="{\'true fa-check-square-o\': field.multiple, \'fa-square-o\': !field.multiple}"></i> \n</div>\n<div class="chunk-1 cf-boolean hidden-xs hidden-sm">\n<i class="fa" ng-class="{\'true fa-check-square-o\': field.mandatory, \'fa-square-o\': !field.mandatory}"></i> \n</div>\n<div class="chunk-1 cf-actions" ng-if="!field.field_metadata.inbuilt_field">\n<div class="btn-group btn-cf-actions-group">\n <button class="btn dropdown-toggle btn-xs bg-color-blue txt-color-white" data-toggle="dropdown">\n<i class="fa fa-cog mr5"></i><i class="fa fa-caret-down"></i> \n</button>\n<ul class="dropdown-menu pull-right">\n\n<li ng-if="field.data_type != \'group\'" ng-repeat=\'act in actions\'>\n<a href="" ng-click=\'performAction(act, field, prop)\'><i ng-class="{\'fa fa-pencil txt-color-blue\' : act == \'Edit\', \'fa fa-trash-o txt-color-red\' : act == \'Delete\'}"></i> {{act}}</a> \n</li>\n<li ng-if="field.data_type == \'group\'" ng-repeat=\'act in actions\'>\n<a href="" ng-click=\'performAction(act, field, prop)\'><i ng-class="{\'fa fa-plus-square text-success\':act == \'Add\',\'fa fa-pencil txt-color-blue\' : act == \'Edit\', \'fa fa-trash-o txt-color-red\' : act == \'Delete\'}"></i> {{act}}</a> \n</li>\n\n</ul>\n</div>\n<a ng-click=\'toggleGrp()\' ng-if="field.data_type == \'group\'" href="" class="btn btn-xs btn-default btn-group-toggle" rel="tooltip" data-placement="left" data-original-title=\'<i class="fa fa-info-circle text-success"></i> {{grpToggleTxt}} field\' data-html="true">\n<i ng-class="{\'fa fa- fa-caret-down\':showgrp==true,\'fa fa-caret-right\':showgrp==false}"></i> \n</a> \n</div>\n\n</div>\n<div class="cft-row-meta" ng-show="showFieldMeta">\n<div class="media">\n<div class="meta-title">\n UID : \n</div>\n<div class="media-body">\n {{field.uid}}\n</div>\n</div>\n<div class="media">\n<div class="meta-title">\n Datatype : \n</div>\n<div class="media-body">\n {{field.data_type}}\n</div>\n</div>\n<div class="media">\n<div class="meta-title">\n Unique : \n</div>\n <span ng-show="checkUnique(field.unique)">Not unique</span>\n <span ng-hide="checkUnique(field.unique)">{{field.unique}}ly unique</span>\n</div>\n<div class="media">\n<div class="meta-title">\n Multiple :\n</div>\n<div class="media-body">\n {{field.multiple}}\n</div>\n</div>\n<div class="media">\n<div class="meta-title">\n Mandatory :\n</div>\n<div class="media-body">\n {{field.mandatory}}\n</div>\n</div>\n</div>\n<div ng-if="field.data_type == \'group\'">\n<div class="cft-group" ng-class="{\'hidden\': !showgrp}">\n<div classfieldwrap clssdata="field" allclss="allclss" dtypes="dtypes"></div>\n</div>\n</div>\n</div>'},{}],35:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h5 class="modal-title">Object options</h5>\n</div>\n<div class="modal-body smart-form class-abilities-wrap">\n<div class="cf-radio-wrap">\n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="options.publish">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> Publish\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="options.location">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> location\n</label> \n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="options.tag">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> Tag\n</label> \n \n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</a> \n <a ng-click=\'ok()\' class="btn btn-labeled btn-primary btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> Done\n</a> \n</div>\n</div>' },{}],36:[function(require,module){module.exports='<select class="unique-select">\n<option value=""></option>\n<option value="local">locally Unique</option>\n<option value="global">globally Unique</option>\n</select>'},{}],37:[function(require,module){"use strict";var abilitiesOverlayTemplate=require(1),optionsOverlayTemplate=require(2);module.exports=[function(){this.abilitiesOverlayTemplate=abilitiesOverlayTemplate,this.abilitiesCtrl=function($scope,$modalInstance,data){$scope.abilities=data.abilities,$scope.ok=function(){$modalInstance.close($scope.abilities)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}},this.optionsTemplate=optionsOverlayTemplate,this.optionsCtrl=function($scope,$modalInstance,data){$scope.options=data,$scope.ok=function(){$scope.options.publish&&$scope.options.location&&$scope.options.tag?$modalInstance.close():$modalInstance.close($scope.options)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:30,2:35}],38:[function(require,module){"use strict";module.exports=["constants","utilsService",function(constants,Utils){this.fieldCtrl=function($scope,$modalInstance,data){function getSelectedDataType(selItem,obj){for(var i=0;i<obj.length;i++)if(obj[i].field_type===selItem)return obj[i]}$scope.errors=[];var field={uid:null,data_type:"text",display_name:"",mandatory:!1,max:null,min:null,multiple:!1,format:"",unique:null,field_metadata:{allow_rich_text:!1,multiline:!1}};_.isEmpty(data.field)?(data.field=field,$scope.isNewField=!0):$scope.isNewField=!1,$scope.data=data,$scope.validUid=null,$scope.uniquefielddata=[{id:"global",text:"Globally Unique"},{id:"local",text:"Locally Unique"}],$scope.activeDataType=getSelectedDataType(data.field.data_type,data.allDataTypes),$scope.validateUID=function(){var uid=$scope.data.field.uid;return _.isEmpty(uid)?void($scope.validUid=null):void($scope.validUid=null==uid.match(constants.regex.uid)?!1:!0)},$scope.autoFillUID=function(){$scope.data.field.uid=Utils.createUID($scope.data.field.display_name),$scope.validUid=null},$scope.ok=function(){return $scope.errors.length=0,_.isEmpty($scope.data.field.display_name)&&$scope.errors.push("Display name cannot be blank."),_.isEmpty($scope.data.field.uid)&&$scope.errors.push("UID cannot be blank."),_.isEmpty($scope.data.field.uid)||null!=$scope.data.field.uid.match(constants.regex.uid)||$scope.errors.push("UID is not valid."),"reference"===$scope.data.field.data_type&&_.isEmpty($scope.data.field.reference_to)&&$scope.errors.push("Reference class cannot be blank."),$scope.errors.length||$modalInstance.close(data.field),!1},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.selectedCheck=function(selObj){$scope.data.field.data_type===selObj.field_type&&($scope.activeDataType=selObj)}}}]},{}],39:[function(require,module){"use strict";require(7),require(2),require(3),require(9),require(5),require(8),require(6),require(4),require(1),module.exports=angular.module("core",["builtApi","global","classBuilder","postMessageUpload","formBuilder","objectsQueryBuilder","funnelBuilder","eventsQueryBuilder"])},{1:18,2:22,3:24,4:54,5:74,6:95,7:106,8:129,9:133}],40:[function(require,module){"use strict";var groupViewTmpl=require(1);module.exports=["$compile","utilsService","tip","constants",function($compile,Utils,TIP,constants){return{replace:!0,restrict:"A",scope:{queryObject:"=eqGroupView",props:"=props",queryIndex:"=queryIndex",queryArray:"=queryArray",validateQueryNow:"=",promiseArray:"=",expandable:"="},link:function(scope,elem){function changeGroupCondition(condition){Utils.sa(scope,function(){scope.queryObject._key=condition})}function destroyTips(){TIP.destroyAll($(".query-builder"))}var $template=angular.element(groupViewTmpl);$compile($template)(scope),elem.append($template);var groups=["$or","$and"],groupConditionSelect=elem.find(".js-group-condition-select");scope.isSingleRow=!1,groupConditionSelect.val(scope.queryObject._key).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),groupConditionSelect.off("change").on("change",function(){changeGroupCondition(groupConditionSelect.select2("val"))}),scope.$watchCollection("queryObject._value",function(){scope.isSingleRow=1===scope.queryObject._value.length?!0:!1}),scope.isGroup=function(query){var r=-1!=$.inArray(query._key,groups)?!0:!1;return r},scope.addGroup=function(){destroyTips(),scope.queryObject._value.push(_.cloneDeep(constants.eventsQueryBuilder.defaults.group))},scope.deleteGroup=function(){destroyTips(),scope.queryArray.splice(scope.queryIndex,1)},scope.addRow=function(){destroyTips(),scope.queryObject._value.push(_.cloneDeep(constants.eventsQueryBuilder.defaults.row))}}}}]},{1:47}],41:[function(require,module){var queryBuilderTmpl=require(1);module.exports=["utilsService","$q","constants","$compile","tip",function(Utils,$q,constants,$compile,TIP){return{restrict:"A",scope:{query:"=eventsQueryBuilder",evnt:"=evnt",getQueryNow:"=",getQueryCallback:"=",expandable:"="},link:function(scope,elem){function getQuery(){return scope.validateQueryNow=!0,validateQuery().then(function(){return constructQuery(scope.query.data[0])},function(xhr){throw xhr}).finally(function(){scope.validateQueryNow=!1})}function constructQuery(query){var q={};return void 0===query._key?_.isPlainObject(query)&&_.isPlainObject(query.query)?(q=query,q.query=constructQuery(query.query),q):query:(q[query._key]=query._value instanceof Array?_.map(query._value,constructQuery):constructQuery(query._value),q)}function validateQuery(){return $q.all(scope.promiseArray.map(function(promiseObj){return promiseObj.promise}))}var $template=angular.element(queryBuilderTmpl);$compile($template)(scope),elem.append($template),scope.props=scope.evnt.properties?scope.evnt.properties:[],scope.promiseArray=[],scope.validateQueryNow=!1,scope.query.data.length||scope.query.data.push(_.cloneDeep(constants.eventsQueryBuilder.defaults.group)),scope.$on("$destroy",function(){TIP.destroyAll()}),scope.$watch("getQueryNow",function(){if(scope.getQueryNow){var actualQuery=getQuery();scope.getQueryCallback(actualQuery)}})}}}]},{1:48}],42:[function(require,module){"use strict";var rowViewTmpl=require(1);module.exports=["$compile","modalService","eqService","utilsService","$q","tip","constants","$timeout",function($compile,modalService,qbService,Utils,$q,TIP,constants,$timeout){return{replace:!0,restrict:"A",scope:{query:"=eqRowView",props:"=props",queryArray:"=queryArray",queryIndex:"=queryIndex",validateQueryNow:"=",promiseArray:"=",expandable:"="},link:function(scope,elem){function validateRow(){var props=propSelect.select2("data"),errorEls=[];_.isEmpty(props)?(deferred.reject(),errorEls.push(elem.find(".js-prop-select-wrap"))):checkFirstRow()||scope.renderRuleView||(deferred.reject(),errorEls.push(elem.find(".js-btn-expand-row"))),errorEls.length?qbService.showErrorTips(errorEls):deferred.resolve(),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function checkFirstRow(){return 0===scope.queryIndex&&1===scope.queryArray.length}function initRow(){initializePropSelect(),initDatatypeSelect(),_.isEmpty(scope.query._key)||setPropSelectValue(scope.query._key.substring(scope.query._key.indexOf(".")+1)),_.isEmpty(scope.query._value)||(scope.renderRuleView=!0)}function initializePropSelect(){propSelect.select2({placeholder:"Select properties",data:qbService.formatEventProperties(scope.props),containerCssClass:"select2-sm"}),propSelect.off("select2-open").on("select2-open",function(){qbService.destroyTip(elem.find(".js-prop-select-wrap"))}),propSelect.off("change").on("change",function(){onPropSelect(propSelect.select2("val"))})}function onPropSelect(prop){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject),$timeout(function(){scope.query._key="properties."+prop,checkSelectedProperty()},0)})}function checkSelectedProperty(){(scope.expandable===!1||scope.renderRuleView)&&(scope.renderRuleView=!0)}function setPropSelectValue(value){propSelect.select2("data",{id:value,text:value})}function initDatatypeSelect(){datatypeSelect.val(scope.query.rowData.datatype).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),datatypeSelect.off("change").on("change",function(){setDatatype(datatypeSelect.select2("val"))})}function setDatatype(datatype){Utils.sa(scope,function(){scope.query._value={},scope.query.rowData.datatype=datatype,delete scope.query.rowData.operator})}var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var $template=angular.element(rowViewTmpl);$compile($template)(scope),elem.append($template);var propSelect=$(elem).find(".js-prop-select").eq(0),datatypeSelect=$(elem).find(".js-datatype-select").eq(0);scope.renderRuleView=!1,scope.query.rowData.datatype||(scope.query.rowData.datatype="string"),initRow(),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRow()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)}),scope.removeRow=function(){TIP.destroyAll($(".query-builder")),1===scope.queryArray.length?(scope.query=_.cloneDeep(constants.eventsQueryBuilder.defaults.row),scope.queryArray.splice(scope.queryIndex,1,scope.query)):scope.queryArray.splice(scope.queryIndex,1)},scope.toggleRowFilter=function(){scope.renderRuleView?contractRow():expandRow()},scope.expandRow=function(){scope.query._key&&(scope.renderRuleView=!0)},scope.contractRow=function(){TIP.destroyAll($(elem)),scope.query._value={},scope.renderRuleView=!1}}}}]},{1:49}],43:[function(require,module){"use strict";var numberRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService",function($compile,qbService,Utils){return{replace:!0,restrict:"A",scope:{query:"=eqBooleanRuleView"},link:function(scope,elem){function changeOperator(operator){scope.query.rowData.operator=operator,Utils.sa(scope,function(){scope.operator=operator})}var $template=angular.element(numberRuleTmpl);$compile($template)(scope),elem.append($template);var operatorSelect=elem.find(".js-operand-select");scope.operator=_.isUndefined(scope.query.rowData.operator)?"true":scope.query.rowData.operator.toString(),operatorSelect.select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.select2("val",scope.operator),operatorSelect.off("change").on("change",function(){changeOperator(operatorSelect.select2("val"))}),scope.$watch("operator",function(){scope.query._value=JSON.parse(scope.operator),scope.query.rowData.operator=scope.operator})}}}]},{1:50}],44:[function(require,module){var stringRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService","$q",function($compile,qbService,Utils,$q){return{replace:!0,restrict:"A",scope:{query:"=eqIsodateRuleView",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function changeOperator(operator){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject),scope.operator=operator})}function setDefaultOperand(){if(_.isEmpty(scope.query._value)){var date=moment().format();scope.operand[defaultOperator]=date,scope.query._value["$"+defaultOperator]=date}else scope.query._value instanceof Object?scope.operand[scope.operator.replace("$","")]=scope.query._value[scope.operator]:scope.operand.equals=scope.query._value}function clearValues(){scope.operand={},scope.query._value={}}function checkOperator(){var dateTime=_.isEmpty(scope.query._value)?moment().format():moment(scope.query._value).format();switch(scope.query.rowData.operator=scope.operator,scope.operator){case"$gt":scope.operand.gt=dateTime;break;case"$lt":scope.operand.lt=dateTime;break;case"$equals":scope.operand.equals=dateTime}}function checkOperand(){switch(scope.operator){case"$gt":scope.query._value.$gt=scope.operand.gt;break;case"$lt":scope.query._value.$lt=scope.operand.lt;break;case"$equals":scope.query._value=scope.operand.equals}}function validateRule(){var errorEls=[],ltisNotEmpty=!_.isEmpty(scope.query._value.$lt),gtisNotEmpty=!_.isEmpty(scope.query._value.$gt);switch(scope.operator){case"$gt":gtisNotEmpty?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".opd-date-wrap")));break;case"$lt":ltisNotEmpty?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".opd-date-wrap")));break;case"$equals":_.isEmpty(scope.query._value)?(deferred.reject(),errorEls.push(elem.find(".opd-date-wrap"))):deferred.resolve()}errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}var $template=angular.element(stringRuleTmpl);$compile($template)(scope),elem.append($template);var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var defaultOperator="gt",operatorSelect=elem.find(".js-operator-select");scope.pickerClass="qb-input opd-date-input",scope.timeZoneSelectClass="select2-sm opd-timezone-select",scope.operator=scope.query.rowData.operator||"$"+defaultOperator,scope.operand={},setDefaultOperand(),operatorSelect.val(scope.operator).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.off("change").on("change",function(){changeOperator(operatorSelect.select2("val"))}),scope.$watch("operator",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(clearValues(),checkOperator())}),scope.$watch("operand",function(newVal,oldVal){_.isEqual(newVal,oldVal)||_.isEmpty(scope.operand)||checkOperand()},!0),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRule()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)})}}}]},{1:51}],45:[function(require,module){var numberRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService","$q",function($compile,qbService,Utils,$q){return{replace:!0,restrict:"A",scope:{query:"=eqNumberRuleView",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function validateRule(){var errorEls=[],ltisNumber=_.isNumber(scope.query._value.$lt),gtisNumber=_.isNumber(scope.query._value.$gt);switch(scope.operator){case"$btw":ltisNumber&&gtisNumber?deferred.resolve():(deferred.reject(),gtisNumber||errorEls.push(elem.find(".js-number-btw-gt")),ltisNumber||errorEls.push(elem.find(".js-number-btw-lt")));break;case"$lt":ltisNumber?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".js-number-lt")));break;case"$gt":gtisNumber?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".js-number-gt")));break;case"$equals":_.isNumber(scope.query._value)?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".js-number-equals")))}errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function setDefaultOperand(){_.isEmpty(scope.query._value)?(scope.operand[defaultOperator]="",scope.query._value.$lt="",scope.query._value.$gt=""):scope.query._value instanceof Object?"$btw"===scope.operator?(scope.operand.lt=scope.query._value.$lt,scope.operand.gt=scope.query._value.$gt):scope.operand[scope.operator.replace("$","")]=scope.query._value[scope.operator]:scope.operand.equals=scope.query._value}function changeOperator(operator){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject),scope.operator=operator})}function clearValues(){scope.operand={},scope.query._value={}}function checkOperator(){switch(scope.operator){case"$btw":scope.operand.lt="",scope.operand.gt="";break;case"$lt":scope.operand.lt="";break;case"$gt":scope.operand.gt="";break;case"$equals":scope.operand.equals=""}}function checkOperand(){switch(scope.query.rowData.operator=scope.operator,scope.operator){case"$btw":var lt=parseInt(scope.operand.lt),gt=parseInt(scope.operand.gt);scope.query._value.$lt=_.isNaN(lt)?"":lt,scope.query._value.$gt=_.isNaN(gt)?"":gt;break;case"$lt":var lt=parseInt(scope.operand.lt);scope.query._value.$lt=_.isNaN(lt)?"":lt;break;case"$gt":var gt=parseInt(scope.operand.gt);scope.query._value.$gt=_.isNaN(gt)?"":gt;break;case"$equals":var eq=parseInt(scope.operand.equals);scope.query._value=_.isNaN(eq)?"":eq}}var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var $template=angular.element(numberRuleTmpl);$compile($template)(scope),elem.append($template);var operatorSelect=elem.find(".js-operator-select"),defaultOperator="btw";scope.operator=scope.query.rowData.operator||"$"+defaultOperator,scope.operand={},setDefaultOperand(),operatorSelect.val(scope.operator).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.on("change",function(){changeOperator(operatorSelect.select2("val"))}),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRule()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)}),scope.$watch("operator",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(clearValues(),checkOperator())}),scope.$watch("operand",function(newVal,oldVal){_.isEqual(newVal,oldVal)||_.isEmpty(scope.operand)||checkOperand()},!0)}}}]},{1:52}],46:[function(require,module){var stringRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService","$q",function($compile,qbService,Utils,$q){return{replace:!0,restrict:"A",scope:{query:"=eqStringRuleView",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function checkValidRegexOptions(){return scope.query._value.$options=scope.query._value.$options?scope.query._value.$options.trim():"",-1!=["i","g","gi",""].indexOf(scope.query._value.$options)}function checkValidRegexForNot(){return scope.query._value.$ne.$options=scope.query._value.$ne.$options?scope.query._value.$ne.$options.trim():"",-1!=["i","g","gi",""].indexOf(scope.query._value.$ne.$options)}function setOperandOnLoad(){_.isEmpty(scope.query._value)||(scope.query._value instanceof Object?"$in"===scope.operator||"$not"===scope.operator?(scope.operand.regex=scope.query._value.$regex,scope.operand.options=scope.query._value.$options):scope.operand[scope.operator.replace("$","")]=scope.query._value[scope.operator]:scope.operand.equals=scope.query._value)}function changeOperator(operator){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),"$exists"!==operator&&"$notExists"!==operator&&(deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject)),scope.operator=operator})}function clearValues(){scope.operand={},scope.query._value={}}function checkOperator(){switch(scope.query.rowData.operator=scope.operator,scope.operator){case"$in":scope.operand.regex="",scope.operand.options="";break;case"$not":scope.operand.not={},scope.operand.not.regex="",scope.operand.not.options="";break;case"$exists":scope.operand.exists=!0;break;case"$notExists":scope.operand.exists=!1;break;case"$ne":scope.operand.ne="";break;case"$equals":scope.operand.equals=""}}function validateRule(){var errorEls=[];switch(scope.operator){case"$in":var validRegexOption=checkValidRegexOptions(),regexNotEmpty=!_.isEmpty(scope.query._value.$regex);regexNotEmpty&&validRegexOption?deferred.resolve():(deferred.reject(),validRegexOption||errorEls.push(elem.find(".js-string-options")),regexNotEmpty||errorEls.push(elem.find(".js-string-regex")));break;case"$not":var validRegexOption=checkValidRegexForNot(),regexNotEmpty=!_.isEmpty(scope.query._value.$ne.$regex);regexNotEmpty&&validRegexOption?deferred.resolve():(deferred.reject(),validRegexOption||errorEls.push(elem.find(".js-string-not-options")),regexNotEmpty||errorEls.push(elem.find(".js-string-not-regex")));break;case"$ne":_.isEmpty(scope.query._value.$ne)?(deferred.reject(),errorEls.push(elem.find(".js-string-ne"))):deferred.resolve();break;case"$equals":_.isEmpty(scope.query._value)?(deferred.reject(),errorEls.push(elem.find(".js-string-equals"))):deferred.resolve()}errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function checkOperand(){switch(scope.operator){case"$in":scope.query._value.$regex=scope.operand.regex,scope.query._value.$options=scope.operand.options;break;case"$not":scope.query._value.$ne={},scope.query._value.$ne.$regex=scope.operand.not.regex,scope.query._value.$ne.$options=scope.operand.not.options;break;case"$exists":scope.query._value.$exists=scope.operand.exists;break;case"$notExists":scope.query._value.$exists=scope.operand.exists;break;case"$ne":scope.query._value.$ne=scope.operand.ne;break;case"$equals":scope.query._value=scope.operand.equals}}var $template=angular.element(stringRuleTmpl);$compile($template)(scope),elem.append($template);var operatorSelect=elem.find(".js-operator-select"),deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var defaultOperator="in";scope.operator=scope.query.rowData.operator||"$"+defaultOperator,scope.operand={},setOperandOnLoad(),scope.$watch("operator",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(clearValues(),checkOperator())},!0),scope.$watch("operand",function(newVal,oldVal){_.isEqual(newVal,oldVal)||_.isEmpty(scope.operand)||checkOperand()},!0),operatorSelect.val(scope.operator).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.off("change").on("change",function(){changeOperator($(this).select2("val"))}),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRule()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)})}}}]},{1:53}],47:[function(require,module){module.exports='<div class="qb-group">\n<div class="qb-group-header clearfix">\n <select class="js-group-condition-select group-condition-select" ng-class="{\'false-hidden\': isSingleRow}">\n<option value="$and">AND</option>\n<option value="$or">OR</option>\n</select>\n<div class="qb-text-block" ng-if="isSingleRow">\n By\n</div>\n <button class="btn btn-xs bg-color-blue txt-color-white" ng-click="addRow()">Add condition</button>\n</div>\n<div class="qb-group-body">\n<div class="" ng-repeat="singleQuery in queryObject._value track by $id(singleQuery)">\n<div ng-if="!isGroup(singleQuery)" class="" eq-row-view="singleQuery" expandable="expandable" props="props" query-index="$index" query-array="queryObject._value" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-if="isGroup(singleQuery)" class="qb-group-inner" eq-group-view="singleQuery" query-index="$index" query-array="queryObject._value" expandable="expandable" props="props" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n</div>\n</div>\n</div>'},{}],48:[function(require,module){module.exports='<div class="query-builder">\n<div ng-repeat="queryObject in query.data track by $id(queryObject)" eq-group-view="queryObject" expandable="expandable" query-index="$index" query-array="query.data" props="props" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n</div>'},{}],49:[function(require,module){module.exports='<div class="qb-row">\n <input type="hidden" ng-model="query._key">\n\n<div class="qb-row-inner clearfix">\n\n<div class="qb-column-wrap clearfix js-prop-select-wrap" rel="tooltip">\n <input type="hidden" class="column-select js-prop-select">\n</div>\n\n<div class="qb-rule-wrap">\n<div class="qb-row-toggler-wrap clearfix js-btn-expand-row" ng-show="expandable && !renderRuleView" data-error-text="Please select a filter">\n <button class="btn bg-color-blue txt-color-white btn-sm" ng-click="expandRow()">\n<i class="fa fa-angle-double-right"></i> \n</button>\n</div>\n<div ng-switch on="query.rowData.datatype" ng-if="renderRuleView">\n<div ng-switch-when="string" eq-string-rule-view="query" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="isodate" eq-isodate-rule-view="query" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="number" eq-number-rule-view="query" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="boolean" eq-boolean-rule-view="query" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="null"></div>\n<div class="qb-row-toggler-wrap clearfix" ng-show="expandable">\n <button class="btn bg-color-blue txt-color-white btn-sm" ng-click="contractRow()">\n<i class="fa fa-angle-double-left"></i> \n</button>\n</div>\n</div>\n</div>\n\n\n<div class="qb-datatype-wrap">\n <select class="qb-datatype-select js-datatype-select">\n<option value="string">String</option>\n<option value="number">Number</option>\n<option value="isodate">Date</option>\n<option value="boolean">Boolean</option>\n</select>\n</div>\n\n <button type="button" class="close qb-btn-delete-row" data-dismiss="modal" aria-hidden="true" ng-click="removeRow()">\n ×\n</button>\n</div>\n \n</div>'},{}],50:[function(require,module){module.exports='<div>\n<div class="qb-operator-wrap clearfix">\n<div class="qb-text-block">\n equals\n</div>\n</div>\n<div class="qb-operand-wrap">\n <select class="js-operand-select opd-bool-select" ng-model="operator">\n<option value="true">true</option>\n<option value="false">false</option>\n</select>\n</div>\n</div>'},{}],51:[function(require,module){module.exports='<div>\n<div class="qb-operator-wrap clearfix">\n \n\n <select class="qb-operator-select js-operator-select opr-date-select">\n<option value="$gt">more than</option>\n<option value="$lt">less than</option>\n<option value="$equals">equals</option>\n</select>\n</div>\n\n<div ng-switch on="operator" class="qb-operand-wrap qb-date-operand-wrap">\n<div ng-switch-when="$gt" class="opd-date-wrap clearfix" rel="tooltip">\n <input bootstrap-date-picker picker-class="pickerClass" time-zone-select-class="timeZoneSelectClass" date-time="operand.gt">\n</div>\n<div ng-switch-when="$lt" class="opd-date-wrap clearfix" rel="tooltip">\n <input bootstrap-date-picker picker-class="pickerClass" time-zone-select-class="timeZoneSelectClass" date-time="operand.lt">\n</div>\n<div ng-switch-when="$equals" class="opd-date-wrap clearfix" rel="tooltip">\n <input bootstrap-date-picker picker-class="pickerClass" time-zone-select-class="timeZoneSelectClass" date-time="operand.equals">\n</div>\n</div>\n\n</div>'},{}],52:[function(require,module){module.exports='<div>\n<div class="qb-operator-wrap clearfix">\n \n<div class="qb-text-block">\n is\n</div>\n <select class="qb-operator-select js-operator-select opr-num-select">\n<option value="$btw">between</option>\n<option value="$lt">less than</option>\n<option value="$gt">greater than</option>\n<option value="$equals">equals</option>\n</select>\n</div>\n \n<div ng-switch on="operator" class="qb-operand-wrap">\n<div ng-switch-when="$btw">\n <input class="form-control qb-input opd-num-input js-number-btw-gt" type="text" rel="tooltip" ng-model="operand.gt">\n<div class="qb-text-block">\n and \n</div>\n <input class="form-control qb-input opd-num-input js-number-btw-lt" type="text" rel="tooltip" ng-model="operand.lt">\n</div>\n<div class="input-group" ng-switch-when="$lt">\n <input class="form-control qb-input js-number-lt" type="text" rel="tooltip" ng-model="operand.lt">\n</div>\n<div class="input-group" ng-switch-when="$gt">\n <input class="form-control qb-input js-number-gt" type="text" rel="tooltip" ng-model="operand.gt">\n</div>\n<div class="input-group" ng-switch-when="$equals">\n <input class="form-control qb-input js-number-equals" type="text" rel="tooltip" ng-model="operand.equals">\n</div>\n</div>\n</div>'},{}],53:[function(require,module){module.exports='<div>\n<div class="qb-operator-wrap clearfix">\n\n\n <select class="qb-operator-select js-operator-select opr-text-select">\n<option value="$in">contains</option>\n<option value="$not">does not contain</option>\n<option value="$exists">is set</option>\n<option value="$notExists">is not set</option>\n<option value="$equals">equals</option>\n<option value="$ne">not equal to</option>\n</select>\n</div>\n\n<div ng-switch on="operator" class="qb-operand-wrap">\n<div class="input-group" ng-switch-when="$in">\n <span class="input-group-addon">/</span>\n <input class="form-control opd-regex-input qb-input js-string-regex" rel="tooltip" type="text" ng-model="operand.regex">\n <span class="input-group-addon last-addon">/</span>\n <input class="form-control opd-options-input qb-input js-string-options" rel="tooltip" type="text" ng-model="operand.options" data-placement="right">\n</div>\n<div ng-switch-when="$not" class="input-group">\n <span class="input-group-addon">/</span>\n <input class="form-control opd-regex-input qb-input js-string-not-regex" rel="tooltip" type="text" ng-model="operand.not.regex">\n <span class="input-group-addon last-addon">/</span>\n <input class="form-control opd-options-input qb-input js-string-not-options" rel="tooltip" type="text" ng-model="operand.not.options" data-placement="right">\n</div>\n<div ng-switch-when="$ne">\n <input class="form-control qb-input js-string-ne" rel="tooltip" type="text" ng-model="operand.ne">\n</div>\n<div ng-switch-when="$equals">\n <input class="form-control qb-input js-string-equals" rel="tooltip" type="text" ng-model="operand.equals">\n</div>\n</div>\n\n</div>'},{}],54:[function(require,module){"use strict";require(11),require(10);var queryBuilder=require(3),groupView=require(2),rowView=require(4),stringRuleView=require(8),isoDateRuleView=require(6),numberRuleView=require(7),booleanRuleView=require(5),utils=require(9),tip=require(1);module.exports=angular.module("eventsQueryBuilder",[]).directive("eventsQueryBuilder",queryBuilder).directive("eqGroupView",groupView).directive("eqRowView",rowView).directive("eqStringRuleView",stringRuleView).directive("eqIsodateRuleView",isoDateRuleView).directive("eqNumberRuleView",numberRuleView).directive("eqBooleanRuleView",booleanRuleView).service("eqService",utils).service("tip",tip)},{1:112,10:320,11:324,2:40,3:41,4:42,5:43,6:44,7:45,8:46,9:55}],55:[function(require,module){module.exports=["builtApi","utilsService","tip","constants",function(builtApi,Utils,TIP){var tipOptions={content:{text:function(){return"Please enter a valid value" }},hide:{event:"click"},events:{hide:function(){$(this).qtip("destroy")}},position:{adjust:{x:-1}},style:{classes:"qtip-red"}};this.formatEventProperties=function(props){return _.map(props,function(prop){return{id:prop,text:prop}})},this.showErrorTips=function(els,o){for(var options=_.extend({},tipOptions,o||{}),i=0;i<els.length;i++){var el=els[i],opts=_.cloneDeep(options);el.data("error-text")&&(opts.content.text=function(){return el.data("error-text")}),TIP.show(el,opts)}},this.destroyErrorTips=function(elem){elem.find("[rel=tooltip]").tooltip("destroy")},this.destroyTip=function(el){TIP.destroy(el)}}]},{}],56:[function(require,module){"use strict";var assetGalleryTemplate=require(1);module.exports=["$q","builtApi","modalService","utilsService","appCacheService",function($q,builtApi,modalService,Utils,appCacheService){return{template:assetGalleryTemplate,restrict:"A",replace:!0,link:function(scope){function addAuthToken(url){return url+="?AUTHTOKEN="+scope.data.authtoken}function getAssetParams(pageNo,filter){return{options:{uploadType:"all"===filter?"":filter,query:{skip:(pageNo-1)*perPage,limit:perPage,include_count:!0}}}}function getAssetData(params){var deferred=$q.defer();return builtApi.File.getUpload(params).then(function(res){for(var uploads=[],i=0;i<res.uploads.length;i++)uploads.push({url:addAuthToken(res.uploads[i].url),isImage:Utils.isImage(res.uploads[i].filename),file_size:Utils.bytesToSize(res.uploads[i].file_size),filename:res.uploads[i].filename,uid:res.uploads[i].uid});deferred.resolve({uploads:uploads,total:res.count})},function(xhr){deferred.reject(xhr)}),deferred.promise}var perPage=50,cacheKeyPrefix="assetGallery:";scope.activeFilter="all",scope.assets={all:{total:0,data:[]},images:{total:0,data:[]},videos:{total:0,data:[]}},scope.getMoreAssets=function(filter,e){var button=$(e.currentTarget),cacheData=appCacheService.get(cacheKeyPrefix+filter);button.button("loading"),getAssetData(getAssetParams(cacheData.pageNo+1,filter)).then(function(res){cacheData.pageNo+=1;for(var i=0;i<res.uploads.length;i++)cacheData.assets.push(res.uploads[i]);cacheData.total=res.total,scope.assets[filter].total=cacheData.total},function(xhr){}).finally(function(){button.button("reset")})},scope.getAssets=function(filter){scope.activeFilter=filter;var cache=appCacheService.get(cacheKeyPrefix+filter),tabPane=$("#ag-"+filter);if(tabPane.addClass("loading"),cache){var cacheData=cache;scope.assets[filter].data=cacheData.assets,scope.assets[filter].total=cacheData.total,tabPane.removeClass("loading")}else{var cacheData={pageNo:1,skip:0,limit:perPage,assets:[]};getAssetData(getAssetParams(1,filter)).then(function(res){cacheData.assets=res.uploads,cacheData.total=res.total,appCacheService.set(cacheKeyPrefix+filter,cacheData),scope.assets[filter].total=cacheData.total,scope.assets[filter].data=cacheData.assets},function(xhr){}).finally(function(){tabPane.removeClass("loading")})}},scope.burstGalleryCache=function(){for(var key in scope.assets)appCacheService.remove(cacheKeyPrefix+key),scope.assets[key].total=0,scope.assets[key].data.length=0;scope.getAssets(scope.activeFilter)},scope.getAssets("all")}}}]},{1:75}],57:[function(require,module){"use strict";var formFieldBooleanTemplate=require(1);module.exports=function(){return{template:formFieldBooleanTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(){}}}},{1:76}],58:[function(require,module){"use strict";var formFieldFileTemplate=require(1),formFieldOverlay=require(2);module.exports=["$compile","builtApi","postMessageUploadService","modalService","$log","$cacheFactory","utilsService",function(compile,builtApi,postMessageUploadService,modalService,$log,$cacheFactory,Utils){var uploadCache=$cacheFactory("uploadCache");return{template:formFieldFileTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop",apikey:"=apikey",authtoken:"=authtoken",apihost:"=apihost",viewonly:"=viewonly"},link:function(scope,elem){function clearUpload(){scope.upload={},scope.progressstatus=!1,scope.fileUploaded=!1}function showUpload(upload){uploadCache.get(upload.uid)||uploadCache.put(upload.uid,upload),scope.upload=upload,scope.upload.file_size=Utils.bytesToSize(upload.file_size),scope.ctx[scope.prop]=upload.uid,scope.upload.isImage=Utils.isImage(upload.filename),-1==scope.upload.url.lastIndexOf("AUTHTOKEN")&&(scope.upload.url=addAuthToken(scope.upload.url)),scope.progressstatus=!1,scope.fileUploaded=!0}function addAuthToken(url){return url+="?AUTHTOKEN="+scope.authtoken}scope.randvalue=Utils.getRand(),scope.url="uploads",scope.upload={},scope.progressstatus=!1,scope.fileUploaded=scope.ctx[scope.prop]?!0:!1,scope.field.multiple&&scope.$watch("ctx[prop]",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(uploadCache.get(scope.ctx[scope.prop])?showUpload(uploadCache.get(scope.ctx[scope.prop])):clearUpload())}),scope.removeUpload=function(){scope.ctx[scope.prop]="",scope.fileUploaded=!1,scope.randvalue=Utils.getRand()},scope.uploadFile=function(){Utils.sa(scope,function(){scope.progressstatus=!0}),$(elem).find("form").trigger("submit"),postMessageUploadService.getPostMessage(scope.randvalue).then(function(res){res.upload.url=addAuthToken(res.upload.url),showUpload(res.upload)},function(){})},scope.showGallery=function(){modalService.openModal({authtoken:scope.authtoken},formFieldOverlay,assetGalleryCtrl).then(function(selectedItem){showUpload(selectedItem)},function(){})};var assetGalleryCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.selected={item:""},$scope.isActive=function(obj){return $scope.selected.item==obj},$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.itemDirectUpload=function(item){$modalInstance.close(item)}};scope.fileUploaded&&showUpload(scope.ctx[scope.prop])}}}]},{1:77,2:84}],59:[function(require,module){"use strict";var formFieldGroupTemplate=require(1);module.exports=["$compile","utilsService",function($compile,Utils){return{restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop",apikey:"=",viewonly:"=viewonly",classes:"=classes"},link:function(scope,elem){var $template=angular.element(formFieldGroupTemplate);$compile($template)(scope),elem.append($template);var groupWrap=$(elem).find(".group-wrap").eq(0);scope.field.multiple&&groupWrap.attr("id","grp-multiple-"+Utils.getRand()),scope.toggleGroup=function(){groupWrap.toggleClass("collapsed")}}}}]},{1:78}],60:[function(require,module){"use strict";var formFieldIsodateTemplate=require(1);require(2),module.exports=["$cacheFactory",function($cacheFactory){$cacheFactory("dateCache");return{template:formFieldIsodateTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(scope,elem){function isSelectedDateEmpty(e){return _.isEmpty($(e.currentTarget).val())}function checkSelectedDateTime(e){isSelectedDateEmpty(e)?scope.ctx[scope.prop]=null:setScope()}function setScope(){var setZone=elem.find(".timeSelecter option:selected").text(),inputDate=elem.find(".datetimepicker").data("DateTimePicker").getDate();if(inputDate){var setDateTime=_.cloneDeep(inputDate.format());setDateTime=setDateTime.substring(0,getDateIndex(setDateTime)),scope.ctx[scope.prop]=setDateTime+setZone}}function setTZScope(){var setZone=elem.find(".timeSelecter option:selected").text();scope.ctx[scope.prop]=scope.ctx[scope.prop].substring(0,getDateIndex(scope.ctx[scope.prop]))+setZone}function getDateIndex(isoDate){return-1!==isoDate.lastIndexOf(".")?isoDate.lastIndexOf("."):-1!==isoDate.lastIndexOf("+")?isoDate.lastIndexOf("+"):-1!==isoDate.lastIndexOf("-")?isoDate.lastIndexOf("-"):void 0}function getlocalTimeZone(){var date=moment().format();return date.substring(getDateIndex(date),date.length).split(":").join("")}function getTimeZones(){return["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"]}var dateTimePicker=elem.find(".datetimepicker");scope.timeZone=getTimeZones(),scope.faked={dt:"",zone:""},dateTimePicker.datetimepicker({useSeconds:!0,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}}).on("dp.change",function(e){checkSelectedDateTime(e)}),elem.find(".timeSelecter").on("change",function(){_.isEmpty(scope.ctx[scope.prop])||scope.$apply(function(){setTZScope()})}),scope.$watch("ctx[prop]",function(newValue){scope.faked.dt=newValue.substring(0,getDateIndex(newValue))||"",scope.faked.dt=scope.faked.dt?moment(scope.faked.dt).format("MMMM Do YYYY, h:mm:ss a"):scope.faked.dt,scope.faked.zone=newValue?newValue.substring(getDateIndex(newValue),newValue.length):getlocalTimeZone()},!0),scope.onDateTimePickerBlur=function(e){checkSelectedDateTime(e)}}}}]},{1:79,2:299}],61:[function(require,module){"use strict";var formFieldIsodateTemplate=require(1);module.exports=function(){return{template:formFieldIsodateTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(){}}}},{1:80}],62:[function(require,module){"use strict";var formFieldLocationTemplate=require(1);module.exports=["$q","libraryService",function($q,LIB){return{template:formFieldLocationTemplate,restrict:"A",replace:!0,scope:{obj:"=obj"},link:function(scope){function InitializeGeoLocationMap(){google.maps.visualRefresh=!0;var latlng=new google.maps.LatLng(scope.loc.lat,scope.loc.lng),mapOptions={zoom:18,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0};scope.mapObject=new google.maps.Map(document.getElementById("object-geo-location-map"),mapOptions),setMapMarker()}function setMapMarker(){var latlng=new google.maps.LatLng(scope.loc.lat,scope.loc.lng);scope.mapObject.setCenter(latlng),null!=scope.marker&&(scope.marker.setMap(null),scope.marker=null),scope.marker=new google.maps.Marker({map:scope.mapObject,position:latlng,draggable:!0,icon:"/assets/images/gmap/spotlight-poi.png"}),attachListenerToMarker()}function attachListenerToMarker(){google.maps.event.addListener(scope.marker,"dragend",function(){var position=scope.marker.getPosition();scope.mapObject.setCenter(position),scope.$apply(function(){populateLatLngInputs(position.lat(),position.lng())})})}function populateLatLngInputs(lat,lng){scope.hasLocationTag||(scope.obj.__loc=[]),scope.obj.__loc[1]=scope.loc.lat=lat,scope.obj.__loc[0]=scope.loc.lng=lng,scope.hasLocationTag=!0}scope.hasLocationTag=scope.obj.hasOwnProperty("__loc")&&null!==scope.obj.__loc?!0:!1,scope.locationStatus=scope.obj.hasOwnProperty("__loc")&&null!==scope.obj.__loc?!0:!1,scope.loc={},scope.marker=null,scope.$watch("locationStatus",function(){scope.locationStatus?(scope.loc.lat=scope.hasLocationTag?scope.obj.__loc[1]:37.74045209829323,scope.loc.lng=scope.hasLocationTag?scope.obj.__loc[0]:-122.4431164995849,populateLatLngInputs(scope.loc.lat,scope.loc.lng),LIB.get("googleMaps").then(function(){InitializeGeoLocationMap()}),$("#object-geo-location-map").show()):(scope.obj.__loc=null,scope.hasLocationTag=!1,$("#object-geo-location-map").hide())}),scope.$watchCollection("[loc.lat,loc.lng]",function(){scope.locationStatus&&(populateLatLngInputs(scope.loc.lat,scope.loc.lng),LIB.get("googleMaps").then(function(){setMapMarker()}))}),scope.searchRef=_.throttle(function(query){var deferred=$q.defer(),geocoder=new google.maps.Geocoder,objResults={};return geocoder.geocode({address:query},function(locationData){locationData&&(objResults={results:locationData.map(function(location){return{id:location.formatted_address,text:location.formatted_address,other:location}})},deferred.resolve(objResults))}),deferred.promise},10),scope.onSelectedSearchlocation=function(result){result=result.other,scope.$apply(function(){populateLatLngInputs(result.geometry.location.lat(),result.geometry.location.lng())}),setMapMarker()}}}}]},{1:81}],63:[function(require,module){"use strict";var formFieldMixedTemplate=require(1);module.exports=function(){return{template:formFieldMixedTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(scope){scope.mmixed=JSON.stringify(scope.ctx[scope.prop],null,2),scope.$watch("mmixed",function(newVal){try{scope.ctx[scope.prop]=JSON.parse(newVal)}catch(e){scope.ctx[scope.prop]=newVal}})}}}},{1:82}],64:[function(require,module){"use strict";var formFieldNumberTemplate=require(1);module.exports=function(){return{template:formFieldNumberTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(scope){scope.mnumber=scope.ctx[scope.prop],scope.$watch("mnumber",function(newVal){scope.ctx[scope.prop]=+newVal})}}}},{1:83}],65:[function(require,module){"use strict";var formFieldPasswordTemplate=require(1);module.exports=function(){return{template:formFieldPasswordTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(){}}}},{1:85}],66:[function(require,module){"use strict";var formFieldRefWrapTemplate=require(1);module.exports=["referenceObjectsSuggestionService","builtApi",function(suggestionService,builtApi){return{template:formFieldRefWrapTemplate,restrict:"A",replace:!0,scope:{field:"=field",obj:"=obj",ctx:"=ctx",apikey:"=apikey",onAdd:"=onAdd",onRemove:"=onRemove",viewonly:"=viewonly"},link:function(scope){scope.refData=scope.ctx[scope.field.uid].map(function(uid){return suggestionService.construct(uid,uid)}),builtApi.Classes.getOne({options:{classUid:scope.field.reference_to}}).then(function(klass){scope.klass=klass,suggestionService.get(scope.apikey,scope.field.reference_to,scope.ctx[scope.field.uid],klass).then(function(rData){scope.refData=rData})}),scope.$watchCollection("ctx[field.uid]",function(){var cache=scope.refData;_.isEmpty(scope.ctx[scope.field.uid])||(scope.refData=scope.ctx[scope.field.uid].map(function(uid){return R.find(R.where({id:uid}),cache)||suggestionService.construct(uid,uid)}))})}}}]},{1:86}],67:[function(require,module){"use strict";var formFieldRef=require(1);module.exports=["$q","referenceObjectsSuggestionService","builtApi",function($q,suggestionService){return{template:formFieldRef,restrict:"A",replace:!1,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop",apikey:"=apikey",refDatum:"=",onAdd:"=onAdd",onRemove:"=onRemove",klass:"=klass"},link:function(scope,elem){var searchRef=_.throttle(function(query,klass){return klass?suggestionService.get(scope.apikey,scope.field.reference_to,query,klass).then(function(data){return{results:data}}):$q.when({results:[]})},1e3);scope.$watch("klass",function(){elem.select2({minimumInputLength:1,multiple:!0,query:function(query){var RefVariable=searchRef(query.term,scope.klass);RefVariable&&RefVariable.then(query.callback)}})}),scope.$watch("refDatum",function(){elem.select2("data",scope.refDatum)}),elem.on("change",function(e){e.added&&scope.refDatum.push(e.added),scope.ctx[scope.field.uid]=e.val})}}}]},{1:87}],68:[function(require,module){"use strict";module.exports=["$compile",function(){return{template:"",restrict:"A",replace:!1,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop",viewonly:"=viewonly"},link:function(scope,elem){elem.val(scope.ctx[scope.prop]).select2({data:scope.field.field_metadata.__blt_data.__blt_select}).on("change",function(e){scope.ctx[scope.prop]=e.val})}}}]},{}],69:[function(require,module){"use strict";var formFieldTagTemplate=require(1);module.exports=["$compile",function(){return{template:formFieldTagTemplate,restrict:"A",replace:!1,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop"},link:function(scope,elem){var tagsArray=[];scope.obj.hasOwnProperty("tags")&&scope.obj.tags.length>0&&(tagsArray=scope.obj.tags.map(function(tag){return{id:tag,text:tag}})),elem.select2({multiple:!0,tags:tagsArray,tokenSeparators:[]}),elem.select2("data",tagsArray),elem.on("change",function(){elem.select2("data").length>0&&(scope.obj.tags=elem.select2("data").map(function(tag){return tag.text}))})}}}]},{1:88}],70:[function(require,module){"use strict";var formFieldTextTemplate=require(1);module.exports=["$compile",function(){return{template:formFieldTextTemplate,restrict:"A",replace:!1,scope:{field:"=field",obj:"=obj",ctx:"=ctx",prop:"=prop",viewonly:"=viewonly"},link:function(scope){scope.summernoteConfig={toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough"]],["Insert",["link","picture","table","hr"]],["Misc",["fullscreen","codeview"]],["Layout",["ul","ol","paragraph"]],["style",["style"]]]}}}}]},{1:89}],71:[function(require,module){"use strict";var formFieldTemplate=require(1);module.exports=["utilsService",function(Utils){var DEFAULTS={text:function(){return""},string:function(){return""},number:function(){return 0},reference:function(){return""},ui_reference:function(){return""},group:function(){return{}},isodate:function(){return""},file:function(){return null},"boolean":function(){return!1},link:function(){return{title:"",href:""}},mixed:function(){return{}},select:function(){return""},password:function(){return""}};return{template:formFieldTemplate,restrict:"A",replace:!1,scope:{field:"=field",obj:"=obj",ctx:"=ctx",apikey:"=apikey",authtoken:"=authtoken",apihost:"=apihost",viewonly:"=viewonly"},link:function(scope,elem){var uid=scope.field.uid,dataType=scope.field.data_type,groupOuterWrap=elem.find("> div").eq(0),multiple=scope.field.multiple?"true":"false";multiple=scope.multiple="reference"===dataType?"reference":multiple,scope.ctx[uid]||(scope.ctx[uid]="true"===multiple||"reference"===multiple?[]:DEFAULTS[dataType]()),scope.sortableOptions={forcePlaceholderSize:!0,axis:"y",handle:".field-sort-handle",opacity:1,placeholder:"ui-sortable-placeholder",scroll:"true",containment:"parent",start:function(e,ui){var el=ui.item.find("> .media > div > .form-field-wrap");ui.placeholder.height(el.height()),ui.placeholder.width(el.width())},update:function(){},stop:function(){scope.$apply(function(){scope.ctx[scope.field.uid]=_.compact(scope.ctx[scope.field.uid])})}},scope.onAdd=function(){scope.ctx[uid].push(DEFAULTS[dataType]())},scope.onRemove=function(index){scope.ctx[uid].splice(index,1)},scope.toggleGroup=function(){groupOuterWrap.toggleClass("collapsed")},"group"===dataType&&groupOuterWrap.attr("id","grp-"+Utils.getRand())}}}]},{1:90}],72:[function(require,module){"use strict";module.exports=function(){return{template:"<div></div>",restrict:"A",replace:!1,scope:{searchReference:"=",onSelectedReference:"="},link:function(scope,elem){elem.select2({minimumInputLength:1,containerCssClass:"no-arrow",placeholder:"Type in an address, place or street name...",query:function(query){scope.searchReference(query.term)&&scope.searchReference(query.term).then(query.callback)}}),elem.on("change",function(){elem.select2("data")&&scope.onSelectedReference(elem.select2("data"))})}}}},{}],73:[function(require,module){"use strict";require(3),require(2);var formBuilderTemplate=require(1);module.exports=["utilsService",function(Utils){return{template:formBuilderTemplate,restrict:"A",scope:{cls:"=cls",obj:"=obj",apikey:"=apikey",authtoken:"=authtoken",apihost:"=apihost",viewonly:"=viewonly",classes:"=classes"},link:function(scope){function makeGrpRibbon(){if($(".form-builder-wrap").length){var bc=$(".form-builder-wrap .object-form .group-tracker:in-viewport(130)");$(".form-builder-wrap .object-form .group-tracker").removeClass("active-group"),$(bc).addClass("active-group"),scope.groupRibbon=[{id:void 0,name:scope.cls.title}];for(var i=0;i<bc.length;i++){var e=$(bc[i]);scope.groupRibbon.push({id:e.attr("id"),name:e.data("name")})}Utils.sa(scope),"absolute"==grpRibbon.css("position")&&$(document.body).trigger("sticky_kit:recalc")}}var grpRibbon=$(".jarviswidget-form-builder .fb-group-ribbon");scope.groupRibbon=[],scope.configureFieldOptions={},scope.configureFieldOptions={publish:!0,tag:!0,location:!0},scope.cls.options&&scope.cls.options.configureField&&(scope.configureFieldOptions=scope.cls.options.configureField);({id:void 0,name:scope.cls.title});scope.scrollTo=function(id){Utils.scrollTo(id?$("#"+id).offset().top-100:0)},setTimeout(function(){$("#content").removeClass("animated fadeInDown"),grpRibbon.stick_in_parent(),$(document.body).trigger("sticky_kit:recalc")},3e3),Utils.formBuilder.scrollBinded||($(window).scroll(_.debounce(makeGrpRibbon,50)),Utils.formBuilder.scrollBinded=!0),makeGrpRibbon()}}}]},{1:91,2:307,3:328}],74:[function(require,module){"use strict";require(23),require(22),require(20),require(24),require(21);var formBuilder=require(18),formField=require(2),formFieldText=require(16),formFieldNumber=require(10),formFieldIsodate=require(6),formFieldBoolean=require(3),formFieldLink=require(7),formFieldGroup=require(5),formFieldMixed=require(9),formFieldFile=require(4),formFieldReference=require(12),formFieldTag=require(15),formFieldLocation=require(8),selectLocationSearch=require(17),formFieldReferenceWrap=require(13),formFieldSelect=require(14),formFieldPassword=require(11),assetGallery=require(1),referenceObjectsSuggestion=require(19);module.exports=angular.module("formBuilder",["ui.sortable","summernote"]).directive("formbuilder",formBuilder).directive("formField",formField).directive("formFieldText",formFieldText).directive("formFieldPassword",formFieldPassword).directive("formFieldNumber",formFieldNumber).directive("formFieldIsodate",formFieldIsodate).directive("formFieldBoolean",formFieldBoolean).directive("formFieldLink",formFieldLink).directive("formFieldGroup",formFieldGroup).directive("formFieldMixed",formFieldMixed).directive("formFieldFile",formFieldFile).directive("formFieldReference",formFieldReference).directive("formFieldTag",formFieldTag).directive("formFieldLocation",formFieldLocation).directive("selectLocationSearch",selectLocationSearch).directive("formFieldReferenceWrap",formFieldReferenceWrap).directive("assetGallery",assetGallery).directive("formFieldSelect",formFieldSelect).service("referenceObjectsSuggestionService",referenceObjectsSuggestion)},{1:56,10:64,11:65,12:67,13:66,14:68,15:69,16:70,17:72,18:73,19:92,2:71,20:287,21:289,22:310,23:324,24:329,3:57,4:58,5:59,6:60,7:61,8:62,9:63}],75:[function(require,module){module.exports='<div class="asset-gallery-view">\n<div class="ag-tabs">\n<ul class="nav nav-tabs">\n<li ng-class="{\'active\':activeFilter===\'all\'}">\n <a class="hand" ng-click="getAssets(\'all\')">All</a>\n</li>\n<li ng-class="{\'active\':activeFilter===\'images\'}">\n <a class="hand" ng-click="getAssets(\'images\')">Images</a>\n</li>\n<li ng-class="{\'active\':activeFilter===\'videos\'}">\n <a class="hand" ng-click="getAssets(\'videos\')">Videos</a>\n</li>\n<li class="pull-right">\n<span class="btn-refresh" ng-click="burstGalleryCache()"><i class="fa fa-refresh"></i> Refresh</span>\n</li>\n</ul>\n</div>\n<div class="ag-tabs-content grid-mode">\n<div class="tab-pane" id="ag-all" ng-class="{\'active\': activeFilter === \'all\'}">\n<div class="asset-box" ng-repeat="item in assets.all.data" ng-click="selected.item = item" ng-class="{active:isActive(item)}" ng-dblclick=\'itemDirectUpload(item)\'>\n<div class="asset-box-inner">\n<div class="asset-preview-wrap">\n <img ng-if="item.isImage" ng-src="{{item.url}}" alt="{{item.filename}}">\n<div ng-if="!item.isImage" class="fa fa-file-text-o asset-preview-icon"></div>\n</div>\n<div class="asset-details-wrap">\n<div class="asset-name" title="">{{item.filename}}</div>\n<div class="asset-size-type ">{{item.file_size}}</div>\n</div>\n</div>\n</div>\n<div class="tab-loader">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="btn btn-default btn-block btn-sm js-btn-load-more-all" ng-if="assets.all.data.length !== assets.all.total" ng-click="getMoreAssets(\'all\', $event)">Load more</div>\n</div>\n<div class="tab-pane" id="ag-images" ng-class="{\'active\': activeFilter === \'images\'}">\n<div class="asset-box" ng-repeat="item in assets.images.data" data-loading-text="Loading..." ng-click="selected.item = item" ng-class="{active:isActive(item)}" ng-dblclick=\'itemDirectUpload(item)\'>\n<div class="asset-box-inner">\n<div class="asset-preview-wrap">\n <img ng-if="item.isImage" ng-src="{{item.url}}" alt="{{item.filename}}">\n<div ng-if="!item.isImage" class="fa fa-file-text-o asset-preview-icon"></div>\n</div>\n<div class="asset-details-wrap">\n<div class="asset-name" title="">{{item.filename}}</div>\n<div class="asset-size-type ">{{item.file_size}}</div>\n</div>\n</div>\n</div>\n<div class="tab-loader">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="btn btn-default btn-block btn-sm js-btn-load-more-images" data-loading-text="Loading..." ng-if="assets.images.data.length !== assets.images.total" ng-click="getMoreAssets(\'images\', $event)">Load more</div>\n</div>\n<div class="tab-pane" id="ag-videos" ng-class="{\'active\': activeFilter === \'videos\'}">\n<div class="asset-box" ng-repeat="item in assets.videos.data" ng-click="selected.item = item" ng-class="{active:isActive(item)}" ng-dblclick=\'itemDirectUpload(item)\'>\n<div class="asset-box-inner">\n<div class="asset-preview-wrap">\n <img ng-if="item.isImage" ng-src="{{item.url}}" alt="{{item.filename}}">\n<div ng-if="!item.isImage" class="fa fa-file-text-o asset-preview-icon"></div>\n</div>\n<div class="asset-details-wrap">\n<div class="asset-name" title="">{{item.filename}}</div>\n<div class="asset-size-type ">{{item.file_size}}</div>\n</div>\n</div>\n</div>\n<div class="tab-loader">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="btn btn-default btn-block btn-sm js-btn-load-more-videos" data-loading-text="Loading..." ng-if="assets.videos.data.length !== assets.videos.total" ng-click="getMoreAssets(\'videos\', $event)">Load more</div>\n</div>\n</div>\n</div>'},{}],76:[function(require,module){module.exports='<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="ctx[prop]">\n<span></span> \n</label> \n</div>\n'},{}],77:[function(require,module){module.exports='<div ng-switch on="fileUploaded">\n\n<div class="object-asset-container media attachment-box" ng-switch-when=\'true\'>\n<div class="media-image attachment-preview pull-left">\n<div ng-hide="upload.isImage" class="attachment-file-icon fa fa-file-text-o"></div>\n <a href="{{upload.url}}" target="_blank" class="attachment-preview-link">\n <img ng-show="upload.isImage" ng-src="{{upload.url}}" alt="{{upload.filename}}" class="block-element">\n</a> \n</div>\n<div class="media-body attachment-info">\n<div class="attachment-name" title="{{upload.filename}}">{{upload.filename}}</div>\n<div class="attachment-size">{{upload.file_size}}</div>\n</div>\n<div class="remove-attachment-icon fa fa-times" ng-click="removeUpload()"></div>\n</div>\n\n \n<div ng-switch-when=\'false\'>\n \n<div ng-show="progressstatus" class="object-asset-progress">\n<div class="progress progress-striped active">\n<div class="progress-bar bg-color-darken" role="progressbar" style="width: 100%">\n Uploading...\n</div>\n</div>\n</div>\n<div ng-if="!viewonly">\n<div ng-show="!progressstatus" file-upload authtoken="authtoken" url="url" apikey="apikey" apihost="apihost" prop="prop" randvalue="randvalue">\n<div class="pull-left">\n<div class="upload-file-button-wrap">\n<div class="btn txt-color-white bg-color-blue fileinput-button"><i class="fa fa-plus"></i> \n <span>Upload file...</span>\n <input type="file" class="object-file-input object-field-input invisible-input" name="upload[upload]" onchange="angular.element(this).scope().uploadFile(this)">\n</div>\n <span class="ml5">or</span>\n <a class="btn-asset-gallery" ng-click="showGallery()">Choose from uploads</a>\n</div>\n<div class="field-asset-preview-wrap"></div>\n</div>\n</div>\n</div>\n \n <span href="" ng-if="viewonly" class="btn btn-link btn-sm mb15 ng-scope" disabled="">---</span>\n \n</div>\n</div>\n\n\n\n'},{}],78:[function(require,module){module.exports='<div class="group-wrap" ng-class="{\'multiple group-tracker\': field.multiple}" data-name="{{prop}}">\n<div class="group-header-wrap" ng-if="field.data_type == \'group\' && field.multiple">\n<span class="header-icon"></span> \n<h2 class="ml20">{{prop}}</h2>\n<div class="jarviswidget-ctrls" role="menu">\n <a class="button-icon btn-toggle-group" ng-click="toggleGroup()">\n<i class="fa fa-caret-down"></i> \n</a> \n</div>\n</div>\n<div ng-repeat="fld in field.schema" form-field field="fld" obj="obj" ctx="ctx[prop]" apikey="apikey" viewonly="viewonly">\n</div>\n</div>'},{}],79:[function(require,module){module.exports='<div>\n <input type="text" class="form-control datetimepicker pull-left mr10" ng-blur="onDateTimePickerBlur($event)" ng-model="faked.dt" data-date-format="MMMM Do YYYY, h:mm:ss a" />\n <select class="timeSelecter form-control timezone-select" ng-options="select as select for select in timeZone" ng-model="faked.zone">\n</select>\n</div>\n'},{}],80:[function(require,module){module.exports='<div>\n <input type="text" class="form-control mb10" ng-model="ctx[prop][\'title\']" placeholder="A title for your link">\n <input type="text" class="form-control" ng-model="ctx[prop][\'href\']" placeholder="URL">\n</div>'},{}],81:[function(require,module){module.exports='<div>\n<div class="ol-header">\n<div class="media">\n<div class="pull-right smart-form">\n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="locationStatus" ng-change="locationStatus!=locationStatus">\n<i data-swchon-text="ON" data-swchoff-text="OFF"></i> \n</label> \n</div>\n<div class="media-body">\n Location\n</div>\n</div> \n</div>\n<div class="ol-content" ng-if="hasLocationTag">\n<div class="row">\n<div class="col-sm-6">\n <label>Latitude</label> \n <input class="form-control" type="text" ng-model="loc.lat" ng-value="loc.lat" />\n</div>\n<div class="col-sm-6">\n <label>Longitude</label> \n <input class="form-control" type="text" ng-model="loc.lng" ng-value="loc.lng" />\n</div>\n<div class="col-sm-12">\n<div id="js-select2-loc-search" select-location-search search-reference="searchRef" on-selected-reference="onSelectedSearchlocation"></div>\n</div>\n</div>\n \n</div>\n</div>' },{}],82:[function(require,module){module.exports='<textarea class="form-control" ng-model="mmixed">'},{}],83:[function(require,module){module.exports='<input type="text" class="form-control" ng-model="mnumber">'},{}],84:[function(require,module){module.exports='<div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">×</button>\n    <h4 class="modal-title">Choose file</h4>\n</div>\n<div class="modal-body">\n    <div asset-gallery></div>\n</div>\n<div class="modal-footer">\n    <div class="button-wrap">\n        <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n            <span class="btn-label"><i class="fa fa-arrow-left"></i>\n            </span>Cancel\n        </a>\n        <a ng-click=\'ok()\' class="btn btn-labeled btn-primary btn-sm pull-right">\n            <span class="btn-label"><i class="fa fa-check"></i>\n            </span>Done\n        </a>\n    </div>\n</div>\n'},{}],85:[function(require,module){module.exports='<input type="password" class="form-control" ng-model="ctx[prop]" ng-value="ctx[prop]">'},{}],86:[function(require,module){module.exports='<div ng-model="ctx[field.uid]">\n  <span href="" ng-if="viewonly" class="btn btn-link btn-sm mb15" disabled>---</span>\n  <div class="mb10">\n    <div class="clearfix">\n	    <div class="pull-left"> \n	    	<div form-field-reference classes="classes" field="field" obj="obj" ctx="ctx" apikey="apikey" ref-datum="refData" check="checkdata" klass="klass">  </div>\n	    </div>\n	</div>\n  </div>\n</div>\n\n'},{}],87:[function(require,module){module.exports='<select class="form-control">\n</select>'},{}],88:[function(require,module){module.exports="<div></div>"},{}],89:[function(require,module){module.exports='<!--Initialize summernote when allow_rich_text is mandatorily truthy and multipline may or may not--> \n<textarea ng-if="field.field_metadata.allow_rich_text" class="form-control richtextarea" summernote config="summernoteConfig" ng-model="ctx[prop]"></textarea>\n\n\n<input type="text" class="form-control" ng-model="ctx[prop]" ng-if="!field.field_metadata.allow_rich_text && !field.field_metadata.multiline">\n\n\n<textarea ng-if="field.field_metadata.multiline && !field.field_metadata.allow_rich_text" class="form-control" ng-model="ctx[prop]"></textarea>\n'},{}],90:[function(require,module){module.exports='<div ng-class="{\'group-outer-wrap group-tracker\': field.data_type == \'group\'}" data-name="{{field.display_name}}">\n\n<div class="clearfix group-header-wrap" ng-if="field.data_type == \'group\'">\n<div class="header-ctrls" role="menu">\n <a class="button-icon btn-toggle-group" ng-click="toggleGroup()" ng-hide="(field.multiple == true && ctx[field.uid].length == 0)">\n<i class="fa fa-caret-down"></i> \n</a> \n<a href="javascript:void(0);" ng-if="(field.multiple == true && ctx[field.uid].length == 0) && !viewonly" ng-click="onAdd()" class="button-icon" rel="tooltip" title="" data-placement="bottom" data-original-title="Add"><i class="fa fa-plus"></i></a> \n</div>\n<span class="header-icon"><i class="fa fa-lg fa-indent"></i> \n</span> \n<h2><sup ng-if="field.mandatory" class="m-star">*</sup> {{field.display_name}}</h2>\n</span> \n</div>\n\n\n<div ng-switch on="multiple" class="form-group">\n <label ng-if="field.data_type != \'group\'" class="col-sm-2 control-label">\n <sup ng-if="field.mandatory" class="m-star">*</sup> {{field.display_name}}\n</label> \n\n<div ng-switch-when="reference" class="form-field-wrap col-sm-10 object-reference-wrap">\n<div form-field-reference-wrap field="field" obj="obj" ctx="ctx" apikey="apikey" on-add="onAdd" on-remove="onRemove" viewonly="viewonly">\n</div>\n</div>\n \n \n<div class="form-field-wrap col-sm-10 object-reference-wrap" ng-if="field.data_type === \'ui_reference\' && field.multiple">\n<div form-field-ui-reference-wrap classes="classes" field="field" obj="obj" ctx="ctx" apikey="apikey" viewonly="viewonly">\n</div>\n</div>\n \n\n<div ng-switch-when="true" ng-class="{\'col-sm-12\': field.data_type == \'group\', \'col-sm-10\': field.data_type != \'group\'}" ui-sortable="sortableOptions" ng-model="ctx[field.uid]">\n\n<a href="" ng-if=\'(ctx[field.uid].length == 0 && field.data_type != "group") && !viewonly && (field.data_type !== "ui_reference")\' ng-click="onAdd()" class="btn bg-color-blue add-field btn-primary btn-sm mb15"><i class="fa fa-plus"></i></a> \n <span href="" ng-if=\'(ctx[field.uid].length == 0 && field.data_type != "group") && viewonly\' class="btn btn-link btn-sm mb15" disabled>---</span>\n\n<div class="form-fields-multiple-wrap" ng-repeat="dat in ctx[field.uid] track by $index" ng-switch on="field.data_type">\n<div class="media">\n<div class="pull-right grp-multiple-btn-wrap" ng-if=\'(field.data_type == "group") && !viewonly && (field.data_type !== "ui_reference")\'>\n<div class="btn-group">\n<a href="" ng-click="onRemove($index)" class="btn btn-danger remove-field btn-sm {{$index}}"><i class="fa fa-minus"></i></a> \n<a href="" ng-class="{\'v-hidden\': !$last}" ng-click="onAdd()" class="btn bg-color-blue add-field btn-primary btn-sm"><i class="fa fa-plus"></i></a> \n</div>\n</div>\n<div ng-class="{\'pull-left\': field.data_type != \'group\',\'media-body\': field.data_type == \'group\'}">\n<div class="form-field-wrap" ng-switch-when="text" form-field-text field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly" dat="dat"></div>\n<div class="form-field-wrap" ng-switch-when="password" form-field-password field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="string" form-field-text field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="number" form-field-number field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap object-isodate-wrap" ng-switch-when="isodate" form-field-isodate field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="boolean" form-field-boolean field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="link" form-field-link field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="mixed" form-field-mixed field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="select" form-field-select field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="group" form-field-group viewonly="viewonly" field="field" obj="obj" ctx="ctx[field.uid]" prop="$index" apikey="apikey" viewonly="viewonly"></div>\n<div class="form-field-wrap object-file-wrap" ng-switch-when="file" form-field-file field="field" obj="obj" ctx="ctx[field.uid]" authtoken="authtoken" prop="$index" apikey="apikey" apihost="apihost" viewonly="viewonly"></div>\n\n \n<div class="form-field-wrap hidden" ng-switch-default form-field-text viewonly="viewonly" field="field" obj="obj" ctx="ctx[field.uid]" prop="$index"></div>\n</div>\n<div class="pull-left" ng-if=\'(field.data_type != "group") && !viewonly && (field.data_type != "ui_reference")\'>\n<div class="btn-group">\n<a href="" ng-click="onRemove($index)" class="btn btn-danger remove-field btn-sm {{$index}}"><i class="fa fa-minus"></i></a> \n<a href="" ng-if="$last" ng-click="onAdd()" class="btn bg-color-blue add-field btn-primary btn-sm"><i class="fa fa-plus"></i></a> \n</div>\n</div>\n</div>\n<div class="fa fa-reorder field-sort-handle" ng-class="{\'btn-group-reorder\': field.data_type == \'group\'}" title="Drag to sort"></div>\n</div>\n\n</div>\n\n<div ng-switch-when="false" ng-switch on="field.data_type" ng-class="{\'col-sm-12\': field.data_type == \'group\', \'col-sm-10\': field.data_type != \'group\'}">\n<div class="form-field-wrap" ng-switch-when="text" viewonly="viewonly" form-field-text field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="password" viewonly="viewonly" form-field-password field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="string" viewonly="viewonly" form-field-text field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="number" viewonly="viewonly" form-field-number field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap object-isodate-wrap" viewonly="viewonly" ng-switch-when="isodate" form-field-isodate field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="boolean" viewonly="viewonly" form-field-boolean field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="link" viewonly="viewonly" form-field-link field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="mixed" viewonly="viewonly" form-field-mixed field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n<div class="form-field-wrap" ng-switch-when="group" form-field-group viewonly="viewonly" field="field" obj="obj" ctx="ctx" prop="field[\'uid\']" apikey="apikey"></div>\n<div class="form-field-wrap object-file-wrap" ng-switch-when="file" form-field-file field="field" authtoken="authtoken" obj="obj" ctx="ctx" prop="field[\'uid\']" apikey="apikey" apihost="apihost" viewonly="viewonly"></div>\n<div class="form-field-wrap" ng-switch-when="select" form-field-select field="field" authtoken="authtoken" obj="obj" ctx="ctx" prop="field[\'uid\']" apikey="apikey" apihost="apihost" viewonly="viewonly"></div>\n<div ng-switch-default form-field-text viewonly="viewonly" field="field" obj="obj" ctx="ctx" prop="field[\'uid\']"></div>\n</div>\n</div>\n</div>\n '},{}],91:[function(require,module){module.exports='<div class="fb-group-ribbon">\n<ol class="breadcrumb">\n<i class="fa fa-indent ribbon-icon"></i> \n<li ng-repeat=\'g in groupRibbon track by $index\'>\n <a ng-click="scrollTo(g.id)">{{g.name}}</a>\n</li>\n</ol>\n</div>\n<form class="form-horizontal object-form" role="form">\n<div class="form-group form-field-wrap" ng-show="obj.uid">\n <label class="col-sm-2 control-label">Unique ID</label>\n<div class="col-sm-10">\n <input type="text" disabled="disabled" ng-model="obj.uid" class="form-control" />\n</div>\n</div>\n<div ng-repeat="field in cls.schema" form-field field="field" obj="obj" ctx="obj" apikey="apikey" authtoken="authtoken" apihost="apihost" viewonly="viewonly">\n</div>\n\n<div class="form-group form-field-wrap" ng-show="configureFieldOptions.tag">\n <label class="col-sm-2 control-label">Tags</label>\n<div class="col-sm-10">\n<div form-field-tag obj="obj" class="object-tags-input"></div>\n</div>\n</div>\n\n<div class="form-group form-field-wrap" ng-if="!viewonly && configureFieldOptions.publish">\n <label class="col-sm-2 control-label">Publish this object</label>\n<div class="col-sm-10">\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="obj.published">\n<span></span> \n</label> \n</div>\n</div>\n</div>\n\n<div class="object-location-wrap" ng-show="configureFieldOptions.location">\n<div form-field-location obj="obj"></div>\n<div id="object-geo-location-map"></div>\n</div>\n</form>'},{}],92:[function(require,module){"use strict";module.exports=["$q","builtApi","appCacheService","constants",function($q,builtApi,appCacheService,constants){function buildQuery(uids,title){var uid={query:JSON.stringify({uid:{$in:uids}}),limit:constants.queryLimit,include_unpublished:!0},titleSearch={};titleSearch[title]={$regex:uids,$options:"i"};var type={query:JSON.stringify({$or:[{uid:{$regex:uids,$options:"i"}},titleSearch]}),limit:constants.queryLimit,include_unpublished:!0};return angular.isArray(uids)?uid:type}var construct=this.construct=function(uid,title){return{id:uid,text:title}};this.get=function(apiKey,classUid,query,cls){var title=cls.options&&cls.options.title||"uid",params={options:{classUid:classUid,query:buildQuery(query,title)}},promise=builtApi.Objects.getAll(params).then(function(objs){return objs.objects.map(function(obj){return construct(obj.uid,obj[title]||obj.uid)})});return $q.when(promise)}}]},{}],93:[function(require,module){"use strict";var funnelBuilderTemplate=require(1);module.exports=["$compile","$q","eqService","utilsService","tip",function($compile,$q,eqService,Utils,TIP){return{restrict:"A",replace:!0,scope:{funnel:"=",events:"=",getFunnelNow:"=",getFunnelCallback:"="},link:function(scope,elem){function getFunnel(){return $q.all([validateFunnelName(),getQuery()]).then(function(pObjs){var stepQueryArray=pObjs[1];return buildFunnel(stepQueryArray)})}function validateFunnelName(){var deferred=$q.defer();return _.isEmpty(funnelNameInput.val())?(eqService.showErrorTips([funnelNameInput]),deferred.reject(!1)):deferred.resolve(!0),deferred.promise}function sortPromiseArray(){if(paSortMap.a!==paSortMap.b){var temp=scope.funnelValidationArray[paSortMap.a];scope.funnelValidationArray.splice(paSortMap.a,1),scope.funnelValidationArray.splice(paSortMap.b,0,temp)}}function buildFunnel(stepQueryArray){return scope.funnel.events=[],scope.funnel.query={},scope.funnelSteps.forEach(function(step,i){scope.funnel.events.push(step.event_uid),_.isObject(stepQueryArray[i])&&!_.isEmpty(stepQueryArray[i])&&(scope.funnel.query["step"+(i+1)]=stepQueryArray[i].$or[0])}),scope.funnel.webui_payload=JSON.stringify(Utils.removeKey(scope.funnelSteps,"$$hashKey")),scope.funnel}function validateFunnel(){return $q.all(scope.funnelValidationArray.map(function(promiseObj){return promiseObj.promise}))}function getQuery(){return validateFunnel().then(function(res){return res},function(xhr){throw xhr}).finally(function(){scope.validateFunnelNow=!1})}var $template=angular.element(funnelBuilderTemplate);$compile($template)(scope),elem.append($template);var paSortMap={b:null,a:null},funnelNameInput=elem.find(".funnel-name-input");scope.funnelValidationArray=[],scope.validateFunnelNow=!1,scope.funnelSteps="string"==typeof scope.funnel.webui_payload?JSON.parse(scope.funnel.webui_payload):scope.funnel.webui_payload,scope.sortableOptions={axis:"y",opacity:1,scroll:"true",containment:"parent",placeholder:"ui-sortable-placeholder",handle:".btn-sort-step",forcePlaceholderSize:!0,start:function(e,ui){paSortMap.b=ui.item.index(),TIP.destroyAll($(elem))},stop:function(event,ui){paSortMap.a=ui.item.index(),sortPromiseArray()}},scope.$watch("getFunnelNow",function(){if(scope.getFunnelNow){scope.validateFunnelNow=!0;var actualFunnel=getFunnel();scope.getFunnelCallback(actualFunnel)}}),scope.addStep=function(){scope.funnelSteps.push({event_uid:"",query:{data:[]}})}}}}]},{1:96}],94:[function(require,module){"use strict";var stepViewTemplate=require(1);module.exports=["$compile","eqService","$q","tip","utilsService",function($compile,eqService,$q,TIP,Utils){return{restrict:"A",replace:!0,scope:{step:"=",events:"=",stepIndex:"=",stepArray:"=",validateFunnelNow:"=",funnelValidationArray:"="},link:function(scope,elem){function resetQuery(){scope.step.query.data.length=0}function setDefaultPromise(){deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function validateRow(){var currentEvent=funnelEventSelect.select2("data"),errorEls=[];_.isEmpty(currentEvent)?(deferred.reject(!1),errorEls.push(elem.find("div.js-funnel-event-select").eq(0)),errorEls.length&&eqService.showErrorTips(errorEls),setDefaultPromise()):validateQuery()}function validateQuery(){return scope.isStepExpanded?void(scope.getQueryNow=!0):void deferred.resolve(!0)}function initEventSelect(){funnelEventSelect.select2({placeholder:"Select an event",containerCssClass:"select2-sm",data:scope.events.map(function(event){return event.id=event.uid,event.text=event.name,event})}).off("change").on("change",function(){onEventChange()}),funnelEventSelect.off("select2-open").on("select2-open",function(){eqService.destroyTip(elem.find(".js-funnel-event-select").eq(0))})}function onEventChange(){Utils.sa(scope,function(){scope.currentEvent=funnelEventSelect.select2("data"),scope.step.event_uid=funnelEventSelect.select2("val"),scope.contractStep()})}function initialCheck(){_.isEmpty(scope.step.event_uid)||(funnelEventSelect.select2("val",scope.step.event_uid),scope.currentEvent=_.find(scope.events,function(e){return e.uid===scope.step.event_uid}),scope.step.query.data.length&&scope.expandStep())}var $template=angular.element(stepViewTemplate);$compile($template)(scope),elem.append($template);var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.funnelValidationArray.push(defaultPromiseObject);var funnelEventSelect=elem.find(".js-funnel-event-select").eq(0);scope.currentEvent=null,scope.getQueryNow=!1,scope.isStepExpanded=!1,scope.isQbExpandable=!1,scope.promiseArray=[],scope.$watch("validateFunnelNow",function(){scope.validateFunnelNow&&validateRow()}),scope.$on("$destroy",function(){scope.funnelValidationArray.splice(scope.funnelValidationArray.indexOf(defaultPromiseObject),1)}),scope.expandStep=function(){scope.isStepExpanded=!0},scope.contractStep=function(){scope.isStepExpanded=!1,resetQuery()},scope.removeStep=function(){return 2===scope.stepArray.length?(scope.currentEvent=null,scope.contractStep(),void funnelEventSelect.select2("val","")):(scope.stepArray.splice(scope.stepIndex,1),void TIP.repositionAll())},scope.queryCallback=function(getQuery){getQuery.then(function(res){deferred.resolve(res)},function(){deferred.reject(!1)}).finally(function(){scope.getQueryNow=!1,setDefaultPromise()})},initEventSelect(),initialCheck()}}}]},{1:97}],95:[function(require,module){"use strict";var funnelBuilder=require(1),stepView=require(2);module.exports=angular.module("funnelBuilder",["ui.sortable"]).directive("funnelBuilder",funnelBuilder).directive("stepView",stepView)},{1:93,2:94}],96:[function(require,module){module.exports='<div class="funnel-builder">\n<div class="form-actions form-actions-top">\n <input type="text" class="form-control funnel-name-input" autofocus ng-model="funnel.name" placeholder="Enter funnel name..."/>\n</div>\n<div class="fb-step-wrap" ui-sortable="sortableOptions" ng-model="funnelSteps">\n<div ng-repeat="step in funnelSteps track by $id(step)">\n<div class="fb-step" validate-funnel-now="validateFunnelNow" funnel-validation-array="funnelValidationArray" step-view events="events" step="step" step-index="$index" step-array="funnelSteps"></div>\n</div>\n <button ng-click="addStep()" class="btn btn-default btn-lg btn-fb-add-step">\n<i class="fa fa-plus-circle"></i> Add step\n</button>\n</div>\n</div>'},{}],97:[function(require,module){module.exports='<div class="panel panel-default fb-step-view">\n<div class="panel-heading">\n<h3 class="panel-title">\n<i class="fa fa-reorder btn-step-head btn-sort-step"></i> \n STEP {{stepIndex + 1 }}\n</h3>\n <a ng-click="removeStep()" class="hand btn-step-head btn-remove-step">\n<i class="fa fa-times"></i> \n</a> \n</div>\n<div class="panel-body">\n<div class="fb-step-inner clearfix">\n<div class="event-select-wrap pull-left">\n <input type="hidden" class="js-funnel-event-select" />\n</div>\n<div class="qb-row-toggler-wrap clearfix" ng-show="currentEvent && !isStepExpanded">\n <button class="btn bg-color-blue txt-color-white btn-sm" ng-click="expandStep()">\n<i class="fa fa-angle-double-right"></i> \n</button>\n</div>\n<div class="events-query-builder-wrap" ng-if="currentEvent && isStepExpanded">\n<div events-query-builder="step.query" evnt="currentEvent" expandable="isQbExpandable" get-query-now="getQueryNow" get-query-callback="queryCallback" class="events-query-builder qb-single"></div>\n</div>\n<div class="qb-row-toggler-wrap clearfix" ng-show="isStepExpanded">\n <button class="btn bg-color-blue txt-color-white btn-sm" ng-click="contractStep()">\n<i class="fa fa-angle-double-left"></i> \n</button>\n</div>\n</div>\n</div>\n</div>'},{}],98:[function(require,module){"use strict";var bootstrapDaterangepicker=require(2),bootstrapDatePicker=require(1),breadcrumbs=require(3),btnLoader=require(4);module.exports=angular.module("global-directives",[]).directive("bootstrapDatePicker",bootstrapDatePicker).directive("bootstrapDaterangepicker",bootstrapDaterangepicker).directive("breadcrumbs",breadcrumbs).directive("btnLoader",btnLoader)},{1:102,2:103,3:104,4:105}],99:[function(require,module){module.exports='<div>\n <input type="text" class="form-control js-datetimepicker {{pickerClass}}" ng-model="showDate" ng-keyup="checkDate($event)" />\n <select class="timeSelecter timezone-select js-timezone-select">\n<option ng-repeat="zone in timeZone" value="{{zone}}">{{zone}}</option>\n</select>\n</div>\n'},{}],100:[function(require,module){module.exports='<div id="reportrange" class="pull-right">\n<i class="fa fa-calendar"></i> \n<span></span><b class="caret"></b> \n</div>'},{}],101:[function(require,module){module.exports='<ol class="breadcrumb">\n<li ng-repeat="crumb in breadcrumbs" ng-class="{ active: $last }">\n <a ng-if="crumb.state" class="hand" ui-sref="{{crumb.state}}({{crumb.params}})">{{ crumb.name }}</a> \n <span ng-if="!crumb.state">{{ crumb.name }}</span>\n</li>\n</ol>'},{}],102:[function(require,module){"use strict";require(2);var datepickerTemplate=require(1);module.exports=["$compile","utilsService",function(compile,Utils){return{template:datepickerTemplate,restrict:"A",replace:!0,scope:{dateTime:"=",pickerClass:"=pickerClass",timeZoneSelectClass:"=timeZoneSelectClass"},link:function(scope,elem){function timeZoneChanged(zone){Utils.sa(scope,function(){scope.zone=zone,setScope()})}function setScope(){var setDateTime=dateTimeSelector.val().trim();setDateTime.length>0&&(setDateTime=getISODateTime(dateTimeSelector.data("DateTimePicker").getDate()),setDateTime=setDateTime.substring(0,getDateIndex(setDateTime)),scope.dateTime=setDateTime+scope.zone)}function getDateIndex(isoDate){return-1!==isoDate.lastIndexOf(".")?isoDate.lastIndexOf("."):-1!==isoDate.lastIndexOf("+")?isoDate.lastIndexOf("+"):-1!==isoDate.lastIndexOf("-")?isoDate.lastIndexOf("-"):void 0}function getMomentDateTime(date){return moment(date).format("MMM Do YYYY, h:mm:ss a")}function getISODateTime(date){return new Date(date).toISOString()}function getlocalTimeZone(){var date=moment().format();return date.substring(getDateIndex(date),date.length).split(":").join("")}function getTimeZones(){return["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"]}scope.timeZone=getTimeZones(),scope.dateTime=scope.dateTime?scope.dateTime:moment().format(),scope.zone=scope.dateTime.substring(getDateIndex(scope.dateTime),scope.dateTime.length).replace(":",""),scope.zone=0===scope.zone.length?getlocalTimeZone():scope.zone;var dateTimeSelector=elem.find(".js-datetimepicker"),timeZoneSelector=elem.find(".js-timezone-select");scope.showDate=scope.dateTime?getMomentDateTime(scope.dateTime):"",scope.defaultDate=new Date(scope.dateTime)||"",dateTimeSelector.datetimepicker({useSeconds:!0,defaultDate:scope.defaultDate,format:"MMM Do YYYY, h:mm:ss a",icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}}),dateTimeSelector.off("dp.change").on("dp.change",function(e){scope.$apply(function(){scope.showDate=getMomentDateTime(e.date),setScope()})}),timeZoneSelector.select2({containerCssClass:scope.timeZoneSelectClass,minimumResultsForSearch:-1}),setTimeout(function(){timeZoneSelector.select2("val",scope.zone)},0),timeZoneSelector.off("change").on("change",function(){timeZoneChanged(timeZoneSelector.select2("val"))}),elem.find(".timeSelecter").on("change",function(){setScope()}),scope.checkDate=function(e){_.isEmpty($(e.currentTarget).val())&&(scope.dateTime="")}}}}]},{1:99,2:299}],103:[function(require,module){"use strict";var daterangepickerTemplate=require(1);require(2),module.exports=function(){return{restrict:"A",replace:!0,scope:{drpOptions:"=",dateRange:"=",onDateRangeChange:"="},template:daterangepickerTemplate,link:function(scope,elem){var defaultOptions={startDate:moment(scope.dateRange.startDate).format("MMM D, YYYY"),endDate:moment(scope.dateRange.endDate).format("MMM D, YYYY"),minDate:moment("01/01/2012").format("MMM D, YYYY"),maxDate:moment().format("MMM D, YYYY"),dateLimit:!1,showDropdowns:!0,showWeekNumbers:!0,timePicker:!1,timePickerIncrement:1,timePicker12Hour:!0,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},opens:"left",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary",cancelClass:"btn-small",format:"MMM D, YYYY",separator:" to ",locale:{applyLabel:"Submit",cancelLabel:"Clear",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}},opts=_.extend({},defaultOptions,scope.dateRange.options||{});$("#reportrange span").html(moment(scope.dateRange.startDate).format("MMM D, YYYY")+" - "+moment(scope.dateRange.endDate).format("MMM D, YYYY")),$("#reportrange").daterangepicker(opts,function(start,end){elem.find("span").html(start.format("MMM D, YYYY")+" - "+end.format("MMM D, YYYY")),scope.dateRange.startDate=start.format("YYYY-MM-DD"),scope.dateRange.endDate=end.format("YYYY-MM-DD"),scope.onDateRangeChange()})}}}},{1:100,2:297}],104:[function(require,module){"use strict";var breadcrumbsTpl=require(1);module.exports=["$rootScope","$state","utilsService","$timeout","$injector",function($rootScope,$state,Utils,$timeout){return{template:breadcrumbsTpl,restrict:"A",replace:!0,scope:{},link:function(scope){function updateBreadcrumbs(currentState){return Utils.getPath(currentState,"$current.data.breadcrumbs")?void(scope.breadcrumbs=_.map(_.cloneDeep(currentState.$current.data.breadcrumbs),function(crumb){return crumb.name=interpolateName(crumb.name,currentState),crumb.params&&(crumb.params.p=1,crumb.params=interpolateStateParams(crumb.params,currentState)),crumb})):void(scope.breadcrumbs.length=0)}function interpolateStateParams(params,state){for(var key in params)params[key]=interpolateName(params[key],state);return params}function interpolateName(name,state){return _.contains(name,"{{")?Utils.getPath(state,"$current.locals.globals."+name.replace(/[{}]/g,""))||name:name}scope.breadcrumbs=[],$rootScope.$on("$stateChangeSuccess",function(){$timeout(function(){Utils.sa(scope,function(){updateBreadcrumbs($state)})},0)}),updateBreadcrumbs($state)}}}]},{1:101}],105:[function(require,module){"use strict";module.exports=function(){return{restrict:"A",replace:!1,scope:{btnLoader:"=",loadingText:"@"},link:function(scope,elem){var textSelect=elem.find(".js-btn-text"),btnText=textSelect.text();scope.$watch("btnLoader",function(){scope.btnLoader?(elem.attr("disabled","disabled"),textSelect.text(scope.loadingText)):(elem.removeAttr("disabled","disabled"),textSelect.text(btnText))})}}}},{}],106:[function(require,module){var angular=require(8);require(9),require(1);var alerts=require(2),appCache=require(3),constants=require(4),utils=require(7),modal=require(6),library=require(5);module.exports=angular.module("global",["ui.bootstrap","global-directives"]).service("alertService",alerts).service("appCacheService",appCache).service("constants",constants).service("utilsService",utils).service("modalService",modal).service("libraryService",library)},{1:98,2:107,3:108,4:109,5:110,6:111,7:113,8:295,9:293}],107:[function(require,module){require(2),require(1);var notifyOptions={title:"",text:"",styling:"fontawesome",width:"420px",delay:6e3,mouse_reset:!1},confirmOptions={title:"",content:"",classes:"fa-exclamation-triangle txt-color-redLight",buttons:"[No][Yes]"},type={success:{icon:"fa fa-check",color:"#739E73"},info:{icon:"fa fa-bell swing animated",color:"#3276B1"},warning:{icon:"fa fa-exclamation-triangle swing animated",color:"#739E73"},error:{icon:"fa fa-warning shake animated",color:"#C46A69"}};module.exports=["$q",function($q){this.notify=function(o){var options=_.extend({},notifyOptions,o,type[o.type]);options.text=options.content,new PNotify(options)},this.confirm=function(o){var p=$q.defer(),classes=o.classes||confirmOptions.classes;o.title='<i class="fa '+classes+' mr5"></i> '+o.title;var bc=_.extend({},confirmOptions,o);return $.SmartMessageBox(bc,function(b){"Yes"===b&&p.resolve(),"No"===b&&p.reject()}),p.promise}}]},{1:318,2:326}],108:[function(require,module){"use strict";module.exports=["$rootScope","$cacheFactory","$q",function($rootScope,$cache,$q){var caches=[],that=this,appCache=$cache("appCache");this.then=function(cacheKey,promise){return promise.then(function(data){return that.set(cacheKey,data),data},function(error){return $q.reject(error)})},this.set=function(cacheKey,data){var val=appCache.put(cacheKey,data);return caches.push(cacheKey),$rootScope.$broadcast(cacheKey,{data:data,set:!0}),val},this.get=function(cacheKey){return appCache.get(cacheKey)},this.getInfo=function(){return appCache.info()},this.remove=function(){for(var cacheKeys=arguments instanceof Array?arguments:Array.prototype.slice.call(arguments,0),values=[],i=0;i<cacheKeys.length;i++)values.push(appCache.remove(cacheKeys[i])),caches.splice(_.indexOf(caches,cacheKeys[i]),1),$rootScope.$broadcast(cacheKeys[i],{remove:!0}); return 1===values.length?cacheKeys[0]:values},this.removeAll=function(){appCache.removeAll();for(var i=0;i<caches.length;i++)$rootScope.$broadcast(caches[i],{remove:!0});return caches.length=0,void(caches=[])}}]},{}],109:[function(require,module){module.exports=function(){var colorPalette=["#73ac71","#abc5e9","#bfbca7","#868d99","#97bfb7","#9a7a84","#f18080","#6d90bf","#d7c876","#70c6e5","#ddd2cb","#c494a2"];return{regex:{uid:/^[a-z][_a-z0-9]*$/,underscores:/_{2,}/g,alphaNumericOnly:/\W/g},api_version:"v1",env_url:{stag:"stag-manage.built.io",prod:"manage.built.io"},braintree:{key:{dev:"MIIBCgKCAQEA/ke5+DNsQqFlkbJYu06SVvy5EmkqJP4DxdmdCMRzQXEI/Ifc5k/1ouV/sjGoEgZpXoII7UWHToV9ihxbLglDZyEsD0kVZC1wrymwJ4fL74eNejAYXB6LkLvjtIBsTBFCZBaOMNm0FENZKZ4eDV59gU1Snu/qyjC9gf3RrLyN+Si719ZPTgjpDEHsy6qs3QnA7O5N//lpnMk0F/3uxYM/KbRqzoxn+MSF/Eyd4aznhvcHjKHCzGrm/U+PdobdpbHtSmcDkO3xXEuhYpsRweuuuYQdju9ja1p+1J19PtB0fITuXD9USbLk6qBuMIheVHa90R9Y4+TExn3H4RLKEtabZQIDAQAB",prod:"MIIBCgKCAQEAoUtttRcU85V0ayPptLEsEgXjyD9UYJ08KTOFojkV4Lg6kAMX/LOPJa4jmS9EeoqHXRl8bI0+kYumPHbUCD/m6ZTk0EsSaC2ZP7cTa25a1lEs9mRnxA9ZRIK+1mc3b01K5Gs1KFr1UptfB/EvzLxJHS6djx22ZF7ZazG4/oWXLqbPy3V43xkLQ8U49dtAxO/eoHTw8Ve9mjXINtSENeKWrNXhrUUvuJkJ7igRgL+Yp/LCAnzLWN/9oEsGLVx/0Rj/o/xt/MMv6+71tNLFC3VPivGnMaL301HI2IUxCZ70c3ZTyt1+dCAyTbkTiW8kl8PITROtmbYK63BO0NxQdaQ22QIDAQAB"}},analytics:{defaults:{funnelQuery:{name:"",events:[],query:{},webui_payload:[{event_uid:"",query:{data:[]}},{event_uid:"",query:{data:[]}}]},eventSearchParams:{event:{only:{name:[],category:[]}},include_event_details:!1,unit:"day"},charts:{line:{chart:{type:"line",zoomType:"x",backgroundColor:"transparent"},title:{text:""},subtitle:{text:""},legend:{align:"top",verticalAlign:"top",x:0,y:0},xAxis:{type:"datetime",maxZoom:12096e5,title:{text:""},dateTimeLabelFormats:{day:"%b %e"}},yAxis:{title:{text:"Events count"},gridLineColor:"#E2E2E2",min:0},tooltip:{valueSuffix:"",formatter:function(){var color=this.series.color;return"<small>"+Highcharts.dateFormat("%b %e, %Y",this.x)+'</small><br/><div style="color: '+color+'">'+this.series.name+" : <b>"+this.y+"</b></div>"}},credits:{enabled:!1}},pie:{chart:{type:"pie",backgroundColor:"transparent"},title:{text:""},subtitle:{text:""},xAxis:{categories:[]},yAxis:{title:{text:"Events count"},gridLineColor:"#E2E2E2"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer"}},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+Highcharts.numberFormat(this.percentage,2)+" %"}},credits:{enabled:!1}},bar:{chart:{type:"column",marginRight:25,backgroundColor:"transparent"},title:{text:""},subtitle:{text:""},xAxis:{categories:[],labels:{rotation:0}},yAxis:{title:{margin:30,text:"Events count"},labels:{align:"left"},gridLineColor:"#E2E2E2"},tooltip:{shared:!0,useHTML:!0,headerFormat:"<small>{point.key}</small><table>",pointFormat:'<tr><td style="color: {series.color}">Count:</td><td><b>{point.y}</b></td></tr>',footerFormat:"</table>",valueDecimals:0},credits:{enabled:!1},legend:{enabled:!1}}}}},queryLimit:50,charts:{colorPalette:colorPalette,defaults:{line:{chart:{type:"line",zoomType:"x",backgroundColor:"transparent"},title:{align:"left",text:"",margin:25},subtitle:{text:""},xAxis:{type:"datetime",gridLineWidth:0,maxZoom:12096e5,title:{text:""},dateTimeLabelFormats:{day:"%b %e",month:"%b %y",year:"%Y"},labels:{enabled:!0}},yAxis:{gridLineWidth:0,title:{text:"Count"},labels:{enabled:!0},min:0},tooltip:{valueSuffix:"",formatter:function(){this.series.color;return"<small>"+Highcharts.dateFormat("%b %e, %Y",this.x)+"</small><br/><div>"+this.series.name+" : <b>"+this.y+"</b></div>"}},credits:{enabled:!1},legend:{enabled:!0,align:"center",verticalAlign:"bottom",x:0,y:0,borderWidth:0}}}},classes:{creationSteps:["info","fields","configuration"],defaultClassData:{uid:"",title:"",schema:[],abilities:{create_object:!0,delete_all_objects:!0,delete_object:!0,get_all_objects:!0,get_one_object:!0,update_object:!0},DEFAULT_ACL:{others:[],roles:[],users:[]}},inbuiltFields:[{uid:"uid",data_type:"text",display_name:"UID"},{uid:"app_user_object_uid",data_type:"reference",display_name:"Owner",reference_to:"built_io_application_user"},{uid:"created_at",data_type:"isodate",display_name:"Created at"},{uid:"updated_at",data_type:"isodate",display_name:"Updated at"}]},defaultACL:{disable:!1,roles:[],users:[],others:[]},queryBuilder:{defaults:{group:{_key:"$and",_value:[{_key:"",_value:{},fieldData:{name:"",currentQueryPath:[],currentField:{}}}]},row:{_key:"",_value:{},fieldData:{name:"",currentQueryPath:[],currentField:{}}}}},googleMaps:{key:null,defaults:{lat:37.74045209829323,lng:-122.4431164995849}},eventsQueryBuilder:{defaults:{group:{_key:"$or",_value:[{_key:"",_value:{},rowData:{datatype:"string"}}]},row:{_key:"",_value:{},rowData:{datatype:"string"}}}},deviceType:[{id:"ios",text:"iOS"},{id:"android",text:"Android"},{id:"other",text:"other"}],timezones:[{id:"-12:00",text:"(GMT-12:00) Eniwetok, Kwajalein"},{id:"-11:00",text:"(GMT-11:00) Midway Island, Samoa"},{id:"-10:00",text:"(GMT-10:00) Hawaii"},{id:"-09:00",text:"(GMT-09:00) Alaska"},{id:"-08:00",text:"(GMT-08:00) Pacific Time (US & Canada)"},{id:"-07:00",text:"(GMT-07:00) Mountain Time (US & Canada)"},{id:"-06:00",text:"(GMT-06:00) Central Time (US & Canada)"},{id:"-05:00",text:"(GMT-05:00) Eastern Time (US & Canada)"},{id:"-04:00",text:"(GMT-04:00) Atlantic Time (Canada), Caracas, La Paz"},{id:"-03:30",text:"(GMT-03:30) Newfoundland"},{id:"-03:00",text:"(GMT-03:00) Brazil, Buenos Aires, Georgetown"},{id:"-02:00",text:"(GMT-02:00) Mid-Atlantic"},{id:"-01:00",text:"(GMT-01:00) Azores, Cape Verde Islands"},{id:"+00:00",text:"(GMT+00:00) Western Europe Time, London, Lisbon, Casablanca"},{id:"+01:00",text:"(GMT+01:00) Berlin, Copenhagen, Madrid, Paris"},{id:"+02:00",text:"(GMT+02:00) Kaliningrad, South Africa"},{id:"+03:00",text:"(GMT+03:00) Baghdad, Riyadh, Moscow, St. Petersburg"},{id:"+03:30",text:"(GMT+03:30) Tehran"},{id:"+04:00",text:"(GMT+04:00) Abu Dhabi, Muscat, Baku, Tbilisi"},{id:"+04:30",text:"(GMT+04:30) Kabul"},{id:"+05:00",text:"(GMT+05:00) Ekaterinburg, Islamabad, Karachi, Tashkent"},{id:"+05:30",text:"(GMT+05:30) Mumbai, Kolkata, Chennai, New Delhi"},{id:"+05:45",text:"(GMT+05:45) Kathmandu"},{id:"+06:00",text:"(GMT+06:00) Almaty, Dhaka, Colombo"},{id:"+06:30",text:"(GMT+06:30) Yangon (Rangoon)"},{id:"+07:00",text:"(GMT+07:00) Bangkok, Hanoi, Jakarta"},{id:"+08:00",text:"(GMT+08:00) Beijing, Perth, Hong Kong, Singapore"},{id:"+09:00",text:"(GMT+09:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk"},{id:"+09:30",text:"(GMT+09:30) Adelaide, Darwi"},{id:"+10:00",text:"(GMT+10:00) Eastern Australia, Guam, Vladivostok"},{id:"+11:00",text:"(GMT+11:00) Magadan, Solomon Islands, New Caledonia"},{id:"+12:00",text:"(GMT+12:00) Auckland, Wellington, Fiji, Kamchatka"}]}}},{}],110:[function(require,module){"use strict";module.exports=["$q","$rootScope",function($q){var libraries=[],libRequests={};this.register=function(lib){if(libraries.push(lib),libRequests[lib])for(var i=0;i<libRequests[lib].length;i++)libRequests[lib][i].resolve()},this.has=function(lib){return libraries.indexOf(lib)>-1},this.get=function(lib){if(libraries.indexOf(lib)>-1)return $q.when(lib);var deferred=$q.defer();return libRequests.hasOwnProperty(lib)?libRequests[lib].push(deferred):libRequests[lib]=[deferred],deferred.promise}}]},{}],111:[function(require,module){module.exports=["$q","$modal",function($q,$modal){this.openModal=function(data,template,controller,options){var defaultOptions={template:template,backdrop:"static",keyboard:!0,controller:controller,size:"",resolve:{data:function(){return data}}},modalInstance=$modal.open(_.extend({},defaultOptions,options||{}));return modalInstance.result}}]},{}],112:[function(require,module){require(1),module.exports=[function(){this.destroyAll=function(container){var container=container||$("body");container.find(".qtip").qtip("destroy"),container.find("[data-hasqtip]").qtip("destroy")},this.repositionAll=function(){$(".qtip").qtip("reposition")},this.destroy=function(el){el.qtip("destroy")},this.show=function(el,o){var tooltip=el.qtip(_.extend({},o||{}));tooltip.qtip("show")}}]},{1:320}],113:[function(require,module){"use strict";var traverse=require(1);module.exports=["constants","alertService",function(constants,Alert){var self=this;this.formBuilder={scrollBinded:!1},this.parseError=function(data,schema){var errorString="";if(data&&data.errors&&data.errors instanceof Object)for(var prop in data.errors)if("errors"==prop)errorString+="<span class='e-value'>"+data.errors[prop].toString()+"</span><br />";else{if(schema&&null!==prop.match(/schema./)){var str=this.getPath({schema:schema},prop);str&&(data.errors[str]=data.errors[prop],delete data.errors[prop],prop=str)}errorString+="<span class='e-key'>"+prop+"</span> <span class='e-value'>"+data.errors[prop].toString()+"</span><br />"}return"<div class='parsed-error'>"+errorString+"</div>"},this.scrollTo=function(position,selector){if(!selector)var selector=$("html, body");_.defer(function(){selector.animate({scrollTop:position||"0px"},100)})},this.getRand=function(pool){var num=Math.ceil(1e9*Math.random());return pool?-1!==pool.indexOf(num)?getRand():(pool.push(num),num):num},this.sa=function(scope,fn){fn?scope.$$phase||scope.$root.$$phase?fn():scope.$apply(fn):scope.$$phase||scope.$root.$$phase?"":scope.$apply()},this.getOS=function(){var p=navigator.platform.toUpperCase();return-1!==p.indexOf("MAC")?"mac":-1!==p.indexOf("WIN")?"windows":-1!==p.indexOf("LINUX")?"linux":"other"},this.getMenu=function(currentApp,currentUser){var menu=JSON.parse(currentApp.application_variables.menu),roleNames=currentUser.roles.map(function(role){return role.name});roleNames.push("default");var setMenu=menu.filter(function(obj){var rights=_.flatten(roleNames.map(function(item){return obj.data.roles[item].can}));return rights.indexOf("access")>=0});return setMenu},this.createUID=function(str){return _.isEmpty(str)?void 0:(str=str.replace(constants.regex.alphaNumericOnly,"_"),str=str.replace(constants.regex.underscores,"_"),str.toLowerCase())},this.getFileInfo=function(asset){var fileName=asset.filename||asset.name,fileSize=asset.file_size||asset.size,index=fileName.lastIndexOf(".")+1;return self.bytesToSize(fileSize)+" "+fileName.substring(index,fileName.length)+" File"},this.bytesToSize=function(bytes){if(isNaN(bytes))return bytes;var sizes=["Bytes","KB","MB","GB","TB"],i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i),2)+" "+sizes[i]},this.isImage=function(name){name=name.toLowerCase();var ext=name.substr(name.lastIndexOf(".")+1);switch(ext){case"jpg":return!0;case"png":return!0;case"gif":return!0;default:return!1}},this.getPath=function(obj,ks){return"string"==typeof ks&&(ks=ks.split(".")),void 0===obj?void 0:0===ks.length?obj:null===obj?void 0:this.getPath(obj[_.first(ks)],_.rest(ks))},this.setCookie=function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires},this.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(-1!=c.indexOf(name))return c.substring(name.length,c.length)}return""},this.deleteCookie=function(name){document.cookie=name+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},this.queryDecoder=function(query){for(var m,splittedHash=query.split("?"),params=new Object,queryString=splittedHash[1],regex=/([^&=]+)=([^&]*)/g;m=regex.exec(queryString);)params[decodeURIComponent(m[1])]=decodeURIComponent(m[2]);return params},this.calcPercent=function(n,t){var p=parseFloat((n/t*100).toFixed(1));return _.isNaN(p)?0:p>100?100:p},this.humanizeNumber=function(value){var suffixes=["","K","M","B","T"],suffixNum=Math.floor((""+value).length/3),shortValue=parseFloat((0!=suffixNum?value/Math.pow(1e3,suffixNum):value).toPrecision(2));if(shortValue%1!=0){shortValue.toFixed(1)}return shortValue+suffixes[suffixNum]},this.joinStr=function(key,joinStr,seperator){return seperator=seperator||".",_.isEmpty(key)&&(seperator=""),key+=seperator+joinStr},this.getTimeZoneOffset=function(){return constants.timezones.map(function(zone){return zone.id.replace(":","")})},this.showAccountMessage=function(msg){for(var tempStr="",i=0,len=msg.length;len>i;i++)tempStr+="<p>"+msg+"</p>";return tempStr},this.setInfoMessage=function(msg,type){Alert.notify({title:type.charAt(0).toUpperCase()+type.slice(1),content:this.showAccountMessage(msg),type:type,hide:!1,timeout:null})},this.truncateText=function(text,maxLength){return text.length>maxLength?text.substr(0,maxLength)+"...":text},this.isTenantSet=function(app){return app.discrete_variables&&app.discrete_variables.tenant&&"built_default_tenant"!=app.discrete_variables.tenant},this.tip=function(o){setTimeout(function(){$("[rel=tooltip]").tooltip(o)},1e3)},this.getClassSearch=function(builtApi,query){return _.throttle(function(){var params={options:{query:{query:JSON.stringify({$or:[{uid:{$regex:query,$options:"i"}},{title:{$regex:query,$options:"i"}}]}),limit:constants.queryLimit}}};return builtApi.Classes.getAll(params).then(function(klasses){return klasses=klasses.classes,{results:klasses.map(function(klass){return klass.id=klass.uid,klass.text=klass.title,klass})}})},10)},this.removeKey=function(obj,key){return traverse(obj).forEach(function(){this.key==key&&this.delete()})},this.roundOff=function(num){return Math.round(100*num)}}]},{1:330}],114:[function(require,module){"use strict";var groupViewTmpl=require(1);module.exports=["$compile","utilsService","tip","constants",function($compile,Utils,TIP,constants){return{replace:!0,restrict:"A",scope:{queryObject:"=oqGroupView",schema:"=schema",queryIndex:"=queryIndex",queryArray:"=queryArray",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function changeGroupCondition(condition){Utils.sa(scope,function(){scope.queryObject._key=condition})}function destroyTips(){TIP.destroyAll($(".query-builder"))}var $template=angular.element(groupViewTmpl);$compile($template)(scope),elem.append($template);var groups=["$or","$and"],groupConditionSelect=elem.find(".js-group-condition-select");groupConditionSelect.val(scope.queryObject._key).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),groupConditionSelect.off("change").on("change",function(){changeGroupCondition(groupConditionSelect.select2("val"))}),scope.isGroup=function(query){var r=-1!=$.inArray(query._key,groups)?!0:!1;return r},scope.addGroup=function(){destroyTips(),scope.queryObject._value.push(_.cloneDeep(constants.queryBuilder.defaults.group))},scope.deleteGroup=function(){destroyTips(),scope.queryArray.splice(scope.queryIndex,1)},scope.addRow=function(){destroyTips(),scope.queryObject._value.push(_.cloneDeep(constants.queryBuilder.defaults.row))}}}}]},{1:122}],115:[function(require,module){var queryBuilderTmpl=require(1);module.exports=["utilsService","$q","constants","tip",function(Utils,$q,constants,TIP){return{template:queryBuilderTmpl,restrict:"A",scope:{query:"=objectsQueryBuilder",cls:"=cls",getQueryNow:"=",getQueryCallback:"="},link:function(scope){function getQuery(){return scope.validateQueryNow=!0,validateQuery().then(function(){return makeQuery(scope.query[0])},function(xhr){throw xhr}).finally(function(){scope.validateQueryNow=!1})}function constructQuery(query){var q={};return void 0===query._key?_.isPlainObject(query)&&_.isPlainObject(query.query)?(q=query,q.query=constructQuery(query.query),q):query:(q[query._key]=query._value instanceof Array?_.map(query._value,constructQuery):constructQuery(query._value),q)}function optimizeQuery(query){var q={};q[_.keys(query)[0]]=[{}];var queryArray=q[_.keys(query)[0]],firstObj=queryArray[0];return query[_.keys(query)[0]].forEach(function(el){for(var key in el)if(_.isArray(el[key])){var o={};o[key]=el[key],_.extend(firstObj,optimizeQuery(o))}else"$or"==_.keys(query)[0]?_.isEmpty(queryArray[0])?queryArray[0][key]=el[key]:queryArray.push(el):_.contains(_.keys(firstObj),key)?queryArray.push(el):firstObj[key]=el[key]}),q}function lavdifyQuery(query){var key=Object.keys(query)[0];return"$and"===key?query[key].length>1?query:query[key][0]:query}function validateQuery(){return $q.all(scope.promiseArray.map(function(promiseObj){return promiseObj.promise}))}var makeQuery=R.compose(lavdifyQuery,optimizeQuery,constructQuery);scope.schema=_.cloneDeep(scope.cls.schema),scope.promiseArray=[],scope.validateQueryNow=!1,scope.query.length||(scope.query=[_.cloneDeep(constants.queryBuilder.defaults.group)]),scope.$watch("getQueryNow",function(){if(scope.getQueryNow){var actualQuery=getQuery();scope.getQueryCallback(actualQuery)}}),scope.$on("$destroy",function(){TIP.destroyAll($(".query-builder"))})}}}]},{1:123}],116:[function(require,module){"use strict";var rowViewTmpl=require(1);module.exports=["$compile","modalService","oqService","utilsService","$q","tip","constants","$timeout",function($compile,modalService,qbService,Utils,$q,TIP,constants,$timeout){return{replace:!0,restrict:"A",scope:{query:"=oqRowView",schema:"=schema",queryArray:"=queryArray",queryIndex:"=queryIndex",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function validateRow(){var fieldData=columnSelect.select2("data"),errorEls=[];_.isEmpty(fieldData)?(deferred.reject(),errorEls.push(elem.find(".js-column-select-wrap"))):deferred.resolve(),errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function resetDatatype(){scope.currentDataType="null"}function initRow(){initializeColumnSelect(),_.isEmpty(scope.query._key)||setColumnSelectValue(scope.query._key)}function initializeColumnSelect(){columnSelect.select2({placeholder:"Select field",data:qbService.formatClassFields(scope.schema,!0),containerCssClass:"select2-sm"}),columnSelect.off("select2-open").on("select2-open",function(){qbService.destroyTip(elem.find(".js-column-select-wrap"))}),columnSelect.off("change").on("change",function(){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject),resetDatatype(),$timeout(function(){scope.query.fieldData.currentField=columnSelect.select2("data"),scope.query._key=scope.query.fieldData.currentField.uid,scope.query._value={},delete scope.query.fieldData.operator,checkSelectedField()},0)})})}function initialFieldCheck(){_.isEmpty(scope.query._key)?initRow():(qbService.isGroup(scope.query.fieldData.currentField)||qbService.isReference(scope.query.fieldData.currentField)||initRow(),scope.currentDataType=scope.query.fieldData.currentField.data_type)}function checkSelectedField(){qbService.isGroup(scope.query.fieldData.currentField)||qbService.isReference(scope.query.fieldData.currentField)?initFieldSelectModal():scope.currentDataType=scope.query.fieldData.currentField.data_type}function setColumnSelectValue(value){columnSelect.select2("data",{id:value,text:value})}function initFieldSelectModal(){scope.query.fieldData.name=scope.query.fieldData.currentField.display_name,modalService.openModal({data:{query:scope.query,currentQuery:scope.currentQuery}},qbService.fieldSelectModalTmpl,qbService.fieldSelectModalCtrl).then(function(res){resetDatatype(),scope.currentDataType=scope.query.fieldData.currentField.data_type,scope.currentQuery=res.currentQuery},function(){resetDatatype();var query=_.cloneDeep(constants.queryBuilder.defaults.row);scope.query._key="",scope.query._value="",scope.query.fieldData=query.fieldData,scope.currentQuery=scope.query,columnSelect.select2("val","")})}var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var $template=angular.element(rowViewTmpl);$compile($template)(scope),elem.append($template);var columnSelect=$(elem).find(".js-column-select").eq(0);scope.currentDataType=null,scope.currentQuery=Utils.getPath(scope.query,scope.query.fieldData.currentQueryPath),_.isUndefined(scope.currentQuery)&&(scope.currentQuery=scope.query),initialFieldCheck(),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRow()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)}),scope.removeRow=function(){TIP.destroyAll($(".query-builder")),1===scope.queryArray.length?(scope.query=_.cloneDeep(constants.queryBuilder.defaults.row),scope.queryArray.splice(scope.queryIndex,1,scope.query)):scope.queryArray.splice(scope.queryIndex,1)}}}}]},{1:124}],117:[function(require,module){"use strict";var numberRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService",function($compile,qbService,Utils){return{replace:!0,restrict:"A",scope:{query:"=oqBooleanRuleView"},link:function(scope,elem){function changeOperator(operator){scope.query.fieldData.operator=operator,Utils.sa(scope,function(){scope.operator=operator})}var $template=angular.element(numberRuleTmpl);$compile($template)(scope),elem.append($template);var operatorSelect=elem.find(".js-operand-select");scope.operator=_.isUndefined(scope.query.fieldData.operator)?"true":scope.query.fieldData.operator.toString(),operatorSelect.select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.select2("val",scope.operator),operatorSelect.off("change").on("change",function(){changeOperator(operatorSelect.select2("val"))}),scope.$watch("operator",function(){scope.query._value=JSON.parse(scope.operator)})}}}]},{1:125}],118:[function(require,module){var stringRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService","$q",function($compile,qbService,Utils,$q){return{replace:!0,restrict:"A",scope:{query:"=oqIsodateRuleView",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function changeOperator(operator){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject),scope.operator=operator})}function setDefaultOperand(){if(_.isEmpty(scope.query._value)){var date=moment().format();scope.operand[defaultOperator]=date,scope.query._value["$"+defaultOperator]=date}else scope.query._value instanceof Object?scope.operand[scope.operator.replace("$","")]=scope.query._value[scope.operator]:scope.operand.equals=scope.query._value}function clearValues(){scope.operand={},scope.query._value={}}function checkOperator(){var dateTime=_.isEmpty(scope.query._value)?moment().format():moment(scope.query._value).format();switch(scope.query.fieldData.operator=scope.operator,scope.operator){case"$gt":scope.operand.gt=dateTime;break;case"$lt":scope.operand.lt=dateTime;break;case"$equals":scope.operand.equals=dateTime}}function checkOperand(){switch(scope.operator){case"$gt":scope.query._value.$gt=scope.operand.gt;break;case"$lt":scope.query._value.$lt=scope.operand.lt;break;case"$equals":scope.query._value=scope.operand.equals}}function validateRule(){var errorEls=[],ltisNotEmpty=!_.isEmpty(scope.query._value.$lt),gtisNotEmpty=!_.isEmpty(scope.query._value.$gt);switch(scope.operator){case"$gt":gtisNotEmpty?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".opd-date-wrap")));break;case"$lt":ltisNotEmpty?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".opd-date-wrap")));break;case"$equals":_.isEmpty(scope.query._value)?(deferred.reject(),errorEls.push(elem.find(".opd-date-wrap"))):deferred.resolve()}errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}var $template=angular.element(stringRuleTmpl);$compile($template)(scope),elem.append($template);var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var defaultOperator="gt",operatorSelect=elem.find(".js-operator-select");scope.pickerClass="qb-input opd-date-input",scope.timeZoneSelectClass="select2-sm opd-timezone-select",scope.operator=scope.query.fieldData.operator||"$"+defaultOperator,scope.operand={},setDefaultOperand(),operatorSelect.val(scope.operator).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.off("change").on("change",function(){changeOperator(operatorSelect.select2("val"))}),scope.$watch("operator",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(clearValues(),checkOperator())}),scope.$watch("operand",function(newVal,oldVal){_.isEqual(newVal,oldVal)||_.isEmpty(scope.operand)||checkOperand()},!0),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRule()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)})}}}]},{1:126}],119:[function(require,module){var numberRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService","$q",function($compile,qbService,Utils,$q){return{replace:!0,restrict:"A",scope:{query:"=oqNumberRuleView",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function validateRule(){var errorEls=[],ltisNumber=_.isNumber(scope.query._value.$lt),gtisNumber=_.isNumber(scope.query._value.$gt);switch(scope.operator){case"$btw":ltisNumber&&gtisNumber?deferred.resolve():(deferred.reject(),gtisNumber||errorEls.push(elem.find(".js-number-btw-gt")),ltisNumber||errorEls.push(elem.find(".js-number-btw-lt")));break;case"$lt":ltisNumber?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".js-number-lt")));break;case"$gt":gtisNumber?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".js-number-gt")));break;case"$equals":_.isNumber(scope.query._value)?deferred.resolve():(deferred.reject(),errorEls.push(elem.find(".js-number-equals")))}errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function setDefaultOperand(){_.isEmpty(scope.query._value)?(scope.operand[defaultOperator]="",scope.query._value.$lt="",scope.query._value.$gt=""):scope.query._value instanceof Object?"$btw"===scope.operator?(scope.operand.lt=scope.query._value.$lt,scope.operand.gt=scope.query._value.$gt):scope.operand[scope.operator.replace("$","")]=scope.query._value[scope.operator]:scope.operand.equals=scope.query._value}function changeOperator(operator){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject),scope.operator=operator})}function clearValues(){scope.operand={},scope.query._value={}}function checkOperator(){switch(scope.query.fieldData.operator=scope.operator,scope.operator){case"$btw":scope.operand.lt="",scope.operand.gt="";break;case"$lt":scope.operand.lt="";break;case"$gt":scope.operand.gt="";break;case"$equals":scope.operand.equals=""}}function checkOperand(){switch(scope.operator){case"$btw":var lt=parseInt(scope.operand.lt),gt=parseInt(scope.operand.gt);scope.query._value.$lt=_.isNaN(lt)?"":lt,scope.query._value.$gt=_.isNaN(gt)?"":gt;break;case"$lt":var lt=parseInt(scope.operand.lt);scope.query._value.$lt=_.isNaN(lt)?"":lt;break;case"$gt":var gt=parseInt(scope.operand.gt);scope.query._value.$gt=_.isNaN(gt)?"":gt;break;case"$equals":var eq=parseInt(scope.operand.equals);scope.query._value=_.isNaN(eq)?"":eq}}var deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var $template=angular.element(numberRuleTmpl);$compile($template)(scope),elem.append($template);var operatorSelect=elem.find(".js-operator-select"),defaultOperator="btw";scope.operator=scope.query.fieldData.operator||"$"+defaultOperator,scope.operand={},setDefaultOperand(),operatorSelect.val(scope.operator).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.on("change",function(){changeOperator(operatorSelect.select2("val"))}),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRule()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)}),scope.$watch("operator",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(clearValues(),checkOperator())}),scope.$watch("operand",function(newVal,oldVal){_.isEqual(newVal,oldVal)||_.isEmpty(scope.operand)||checkOperand()},!0)}}}]},{1:127}],120:[function(require,module){var stringRuleTmpl=require(1);module.exports=["$compile","oqService","utilsService","$q",function($compile,qbService,Utils,$q){return{replace:!0,restrict:"A",scope:{query:"=oqStringRuleView",validateQueryNow:"=",promiseArray:"="},link:function(scope,elem){function checkValidRegexOptions(){return scope.query._value.$options=scope.query._value.$options?scope.query._value.$options.trim():"",-1!=["i","g","gi",""].indexOf(scope.query._value.$options)}function checkValidRegexForNot(){return scope.query._value.$ne.$options=scope.query._value.$ne.$options?scope.query._value.$ne.$options.trim():"",-1!=["i","g","gi",""].indexOf(scope.query._value.$ne.$options)}function setOperandOnLoad(){_.isEmpty(scope.query._value)||(scope.query._value instanceof Object?"$in"===scope.operator||"$not"===scope.operator?(scope.operand.regex=scope.query._value.$regex,scope.operand.options=scope.query._value.$options):scope.operand[scope.operator.replace("$","")]=scope.query._value[scope.operator]:scope.operand.equals=scope.query._value)}function changeOperator(operator){Utils.sa(scope,function(){qbService.destroyErrorTips(elem),scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1),"$exists"!==operator&&"$notExists"!==operator&&(deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise,scope.promiseArray.push(defaultPromiseObject)),scope.operator=operator})}function clearValues(){scope.operand={},scope.query._value={}}function checkOperator(){switch(scope.query.fieldData.operator=scope.operator,scope.operator){case"$in":scope.operand.regex="",scope.operand.options="";break;case"$not":scope.operand.not={},scope.operand.not.regex="",scope.operand.not.options="";break;case"$exists":scope.operand.exists=!0;break;case"$notExists":scope.operand.exists=!1;break;case"$ne":scope.operand.ne="";break;case"$equals":scope.operand.equals=""}}function validateRule(){var errorEls=[];switch(scope.operator){case"$in":var validRegexOption=checkValidRegexOptions(),regexNotEmpty=!_.isEmpty(scope.query._value.$regex);regexNotEmpty&&validRegexOption?deferred.resolve():(deferred.reject(),validRegexOption||errorEls.push(elem.find(".js-string-options")),regexNotEmpty||errorEls.push(elem.find(".js-string-regex")));break;case"$not":var validRegexOption=checkValidRegexForNot(),regexNotEmpty=!_.isEmpty(scope.query._value.$ne.$regex);regexNotEmpty&&validRegexOption?deferred.resolve():(deferred.reject(),validRegexOption||errorEls.push(elem.find(".js-string-not-options")),regexNotEmpty||errorEls.push(elem.find(".js-string-not-regex")));break;case"$ne":_.isEmpty(scope.query._value.$ne)?(deferred.reject(),errorEls.push(elem.find(".js-string-ne"))):deferred.resolve();break;case"$equals":_.isEmpty(scope.query._value)?(deferred.reject(),errorEls.push(elem.find(".js-string-equals"))):deferred.resolve()}errorEls.length&&qbService.showErrorTips(errorEls),deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function checkOperand(){switch(scope.operator){case"$in":scope.query._value.$regex=scope.operand.regex,scope.query._value.$options=scope.operand.options;break;case"$not":scope.query._value.$ne={},scope.query._value.$ne.$regex=scope.operand.not.regex,scope.query._value.$ne.$options=scope.operand.not.options;break;case"$exists":scope.query._value.$exists=scope.operand.exists;break;case"$notExists":scope.query._value.$exists=scope.operand.exists;break;case"$ne":scope.query._value.$ne=scope.operand.ne; break;case"$equals":scope.query._value=scope.operand.equals}}var $template=angular.element(stringRuleTmpl);$compile($template)(scope),elem.append($template);var operatorSelect=elem.find(".js-operator-select"),deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.promiseArray.push(defaultPromiseObject);var defaultOperator="in";scope.operator=scope.query.fieldData.operator||"$"+defaultOperator,scope.operand={},setOperandOnLoad(),scope.$watch("operator",function(newVal,oldVal){_.isEqual(newVal,oldVal)||(clearValues(),checkOperator())},!0),scope.$watch("operand",function(newVal,oldVal){_.isEqual(newVal,oldVal)||_.isEmpty(scope.operand)||checkOperand()},!0),operatorSelect.val(scope.operator).select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),operatorSelect.off("change").on("change",function(){changeOperator($(this).select2("val"))}),scope.$watch("validateQueryNow",function(){scope.validateQueryNow&&validateRule()}),scope.$on("$destroy",function(){scope.promiseArray.splice(scope.promiseArray.indexOf(defaultPromiseObject),1)})}}}]},{1:128}],121:[function(require,module){module.exports='<div class="qb-select-field-modal">\n<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h3 class="modal-title">{{nestedFieldData.name}}</h3>\n</div>\n<div class="modal-body">\n<fieldset ng-show="!refLoading">\n<div class="form-group" ng-show="!refError">\n <label class="col-md-3 control-label mt5">Select field</label>\n<div class="col-md-9">\n <input class="js-select-field-modal-select" placeholder="Select field">\n \n</div>\n</div>\n<p ng-show="refError">\n Sorry! We could not find the referenced class for this field. May be it has been deleted.\n</p>\n</fieldset>\n<fieldset ng-show="refLoading">\n <img class="ref-loader" alt="" src="images/loaders/list-loader.gif" />\n</fieldset>\n</div>\n<div class="modal-footer">\n<div class="button-wrap">\n <a class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()" ng-show="!refError">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span>\n Done\n</span> \n</a> \n <a class="btn btn-labeled btn-default btn-sm pull-left" ng-click="cancel()" ng-show="refError">\n <span class="btn-label">\n<i class="fa fa-arrow-left"></i> \n</span> \n <span>\n close\n</span> \n</a> \n</div>\n</div>\n</div>'},{}],122:[function(require,module){module.exports='<div class="qb-group">\n<div class="qb-group-header clearfix">\n <select class="js-group-condition-select group-condition-select">\n<option value="$and">AND</option>\n<option value="$or">OR</option>\n</select>\n <button class="btn btn-xs bg-color-blue txt-color-white" ng-click="addGroup()">Add group</button>\n <button class="btn btn-xs bg-color-blue txt-color-white" ng-click="addRow()">Add condition</button>\n <button class="btn btn-xs btn-danger btn-delete-group" ng-click="deleteGroup()">Delete group</button>\n</div>\n<div class="qb-group-body">\n<div class="" ng-repeat="singleQuery in queryObject._value track by $id(singleQuery)">\n<div ng-if="!isGroup(singleQuery)" class="" oq-row-view="singleQuery" schema="schema" query-index="$index" query-array="queryObject._value" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-if="isGroup(singleQuery)" class="qb-group-inner" oq-group-view="singleQuery" query-index="$index" query-array="queryObject._value" schema="schema" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n</div>\n</div>\n</div>'},{}],123:[function(require,module){module.exports='<div class="query-builder">\n<div ng-repeat="queryObject in query track by $id(queryObject)" oq-group-view="queryObject" query-index="$index" query-array="query" schema="schema" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n</div>'},{}],124:[function(require,module){module.exports='<div class="qb-row">\n <input type="hidden" ng-model="query._key">\n\n<div class="qb-row-inner clearfix">\n\n<div class="qb-column-wrap clearfix js-column-select-wrap" rel="tooltip">\n <input type="hidden" ng-show="!query.fieldData.name" class="column-select js-column-select">\n<div ng-show="query.fieldData.name" class="qb-text-block qb-nested-field-bar text-ellipsis">\n {{query.fieldData.name}}\n</div>\n</div>\n\n<div class="qb-rule-wrap" ng-switch on="currentDataType">\n<div ng-switch-when="text" oq-string-rule-view="currentQuery" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="isodate" class="" oq-isodate-rule-view="currentQuery" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="number" class="" oq-number-rule-view="currentQuery" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="boolean" class="" oq-boolean-rule-view="currentQuery" validate-query-now="validateQueryNow" promise-array="promiseArray"></div>\n<div ng-switch-when="null"></div>\n</div>\n <button type="button" class="close qb-btn-delete-row" data-dismiss="modal" aria-hidden="true" ng-click="removeRow()">\n ×\n</button>\n</div>\n \n</div>'},{}],125:[function(require,module){module.exports=require(50)},{}],126:[function(require,module){module.exports=require(51)},{}],127:[function(require,module){module.exports=require(52)},{}],128:[function(require,module){module.exports=require(53)},{}],129:[function(require,module){"use strict";require(11),require(10);var queryBuilder=require(3),groupview=require(2),rowview=require(4),stringRuleView=require(8),isoDateRuleView=require(6),numberRuleView=require(7),booleanRuleView=require(5),utils=require(9),tip=require(1);module.exports=angular.module("objectsQueryBuilder",[]).directive("objectsQueryBuilder",queryBuilder).directive("oqGroupView",groupview).directive("oqRowView",rowview).directive("oqStringRuleView",stringRuleView).directive("oqIsodateRuleView",isoDateRuleView).directive("oqNumberRuleView",numberRuleView).directive("oqBooleanRuleView",booleanRuleView).service("oqService",utils).service("tip",tip)},{1:112,10:320,11:324,2:114,3:115,4:116,5:117,6:118,7:119,8:120,9:130}],130:[function(require,module){var fieldSelectModalTmpl=require(1);module.exports=["builtApi","utilsService","tip","constants",function(builtApi,Utils,TIP,constants){var self=this,tipOptions={content:{text:function(){return"Please enter a valid value"}},hide:{event:"click"},events:{hide:function(){$(this).qtip("destroy")}},position:{adjust:{x:-1}},style:{classes:"qtip-red"}},restrictedDatatypes=["file","mixed","string","link"],inbuiltClassFields=_.cloneDeep(constants.classes.inbuiltFields);this.fieldSelectModalTmpl=fieldSelectModalTmpl,this.isGroup=function(field){return"group"===field.data_type},this.isReference=function(field){return"reference"===field.data_type},this.formatClassFields=function(schema,includeInbuiltFields){return includeInbuiltFields&&(schema=schema.concat(inbuiltClassFields)),_.filter(schema,function(obj){return _.contains(restrictedDatatypes,obj.data_type)?!1:(obj.id=obj.uid,obj.text=obj.display_name,!0)})},this.showErrorTips=function(els,o){for(var options=_.extend({},tipOptions,o||{}),i=0;i<els.length;i++){var el=els[i],opts=_.cloneDeep(options);el.data("error-text")&&(opts.content.text=function(){return el.data("error-text")}),TIP.show(el,opts)}},this.destroyErrorTips=function(elem){elem.find("[rel=tooltip]").tooltip("destroy")},this.destroyTip=function(el){TIP.destroy(el)},this.fieldSelectModalCtrl=function($scope,$modalInstance,data){function initFieldSelect(currentField){var fields=self.formatClassFields(currentField.schema,!1);void 0!==fieldSelect.data("select2")&&fieldSelect.select2("destroy"),fieldSelect.val(null),fieldSelect.select2({data:fields}),fieldSelect.off("change").on("change",function(){Utils.sa($scope,function(){$scope.nestedFieldData.currentField=fieldSelect.select2("data"),$scope.nestedFieldData.name+="."+fieldSelect.select2("data").display_name,$scope.currentQuery._key=Utils.joinStr($scope.currentQuery._key,$scope.nestedFieldData.currentField.uid),checkSelectedField()})})}function checkSelectedField(){Utils.sa($scope,function(){self.isGroup($scope.nestedFieldData.currentField)?initFieldSelect($scope.nestedFieldData.currentField):self.isReference($scope.nestedFieldData.currentField)&&($scope.refLoading=!0,getReferenceField($scope.nestedFieldData.currentField).then(function(field){$scope.currentQuery._value._key="$select",$scope.currentQuery._value._value={key:"uid",class_uid:field.uid,query:{_key:"",_value:{},fieldData:{}}},$scope.currentQuery=$scope.currentQuery._value._value.query,$scope.nestedFieldData.currentQueryPath=Utils.joinStr($scope.nestedFieldData.currentQueryPath,"_value._value.query"),initFieldSelect(field)},function(){$scope.refError=!0}).finally(function(){$scope.refLoading=!1}))})}function getReferenceField(field){return builtApi.Classes.getOne({options:{classUid:field.reference_to}})}var fieldSelect=null;$scope.nestedFieldData=data.data.query.fieldData,$scope.currentQuery=data.data.currentQuery,$scope.refLoading=!1,$scope.refError=!1,setTimeout(function(){fieldSelect=$(".js-select-field-modal-select"),checkSelectedField()},0),$scope.ok=function(){_.isEmpty(fieldSelect.select2("data"))||$modalInstance.close({query:data.data.query,currentQuery:$scope.currentQuery})},$scope.cancel=function(){$modalInstance.dismiss()}}}]},{1:121}],131:[function(require,module){"use strict";var formUpload=require(1);module.exports=["$sce",function($sce){var iframe='<iframe height="1" width="1" id="ACTION_TARGET" name="ACTION_TARGET" class="hidden" src=""></iframe>';return{restrict:"A",transclude:!0,scope:{prop:"=prop",authtoken:"=authtoken",url:"=url",apikey:"=apikey",apihost:"=apihost",randvalue:"=randvalue"},template:formUpload,link:function(scope,elem){scope.host=window.location.protocol+"//"+window.location.host,scope.actionTarget="object-file-upload-form-iframe"+scope.randvalue,scope.actionurl=$sce.trustAsResourceUrl("/v1/"+scope.url+".postmessage?AUTHTOKEN="+scope.authtoken+"&APPLICATION_API_KEY="+scope.apikey+"&file=true&postmessage_payload="+scope.randvalue),$(elem).append(iframe.replace(/ACTION_TARGET/g,scope.actionTarget))}}}]},{1:132}],132:[function(require,module){module.exports='<form class="object-file-upload-form clearfix" action="{{actionurl}}" method="POST" target="{{actionTarget}}" enctype="multipart/form-data" multipart="">\n <input type="hidden" name="host" value="{{host}}" /> \n<div ng-transclude></div>\n</form>\n\n\n'},{}],133:[function(require,module){"use strict";var postMessageUpload=require(1),postMessageUploadService=require(2);module.exports=angular.module("postMessageUpload",[]).directive("fileUpload",postMessageUpload).service("postMessageUploadService",postMessageUploadService)},{1:131,2:134}],134:[function(require,module){"use strict";var defers={};module.exports=["$q","$rootScope",function($q,$rootScope){var cleanUp=function(delimiter){delete defers[delimiter]};this.getPostMessage=function(d){var deferred=$q.defer();return defers[d]=deferred,defers[d].promise},$rootScope.postMsgAttached||($rootScope.postMsgAttached=!0,$(window).on("message",function(res){if("process-tick"!=res.originalEvent.data){var dataObj=JSON.parse(res.originalEvent.data);defers[dataObj.postmessage_payload]&&(defers[dataObj.postmessage_payload].resolve(dataObj),cleanUp(dataObj.postmessage_payload))}}))}]},{}],135:[function(require,module){"use strict";require(1),module.exports=["$scope","$state","$interval","builtApi","$injector","constants","alertService","utilsService","libraryService",function($scope,$state,$interval,builtApi,$injector,constants,Alert,Utils){function initLogging(){$scope.ccLogs=[],$scope.isRealTimeEnabled=!1,$scope.apiKey=$state.params.api_key,$scope.firstTime=!0,getLogsByDate(),$scope.onDateRangeChange=function(){getLogsByDate()}}function getLogsByDate(){return $state.is("app.dashboard.extensions-logs")?($scope.gettingLogs=!0,$scope.dateRange.startDate=new Date($scope.dateRange.startDate),$scope.dateRange.endDate=new Date($scope.dateRange.endDate),$scope.isRealTimeEnabled?($scope.gettingLogs=!1,$scope.dateRange.startDate=$scope.dateRange.endDate,$scope.dateRange.endDate=new Date,$scope.firstTime&&($scope.dateRange.startDate=new Date)):($scope.dateRange.startDate.setHours(0),$scope.dateRange.startDate.setMinutes(0),$scope.dateRange.startDate.setSeconds(0),$scope.dateRange.endDate.setHours(23),$scope.dateRange.endDate.setMinutes(59),$scope.dateRange.endDate.setSeconds(59)),void builtApi.Extensions.get({options:{paramId:"logs",query:{app_api_key:$scope.apiKey,from:$scope.dateRange.startDate.toISOString(),to:$scope.dateRange.endDate.toISOString()}}}).then(function(ccLogs){if($scope.isRealTimeEnabled){$scope.firstTime=!1;for(var i=ccLogs.logs.length-1;i>=0;i--)$scope.ccLogs.unshift(ccLogs.logs[i])}else $scope.ccLogs=ccLogs.logs},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){$scope.gettingLogs=!1})):void $interval.cancel(logInterval)}var logInterval;$scope.gettingExtApp=!0,$scope.dateRange={startDate:moment().format(),endDate:moment().format()},builtApi.Extensions.get({options:{paramId:"applications"}}).then(function(app){$scope.extension=app.ccapp,"deployed"!==$scope.extension.status?$scope.canShowLogs=!1:($scope.canShowLogs=!0,initLogging())},function(){$scope.canShowLogs=!1}).finally(function(){$scope.gettingExtApp=!1}),$scope.toggleRealtime=function(){if($scope.isRealTimeEnabled)$scope.isRealTimeEnabled=!1,$interval.cancel(logInterval),logInterval=void 0;else{if(angular.isDefined(logInterval))return;logInterval=$interval(getLogsByDate,1e4),$scope.isRealTimeEnabled=!0}},$scope.getDate=function(date){return moment(new Date(date)).format("ddd Do MMM, YYYY h:mm:ss A")},$scope.getHumanizedDate=function(date){return moment(new Date(date)).calendar()}}]},{1:304}],136:[function(require,module){"use strict";module.exports=["$scope","$state","$timeout","builtApi","alertService","utilsService","serverConfig","currentApiHost","currentUser","postMessageUploadService",function($scope,$state,$timeout,builtApi,Alert,Utils,serverConfig,currentApiHost,currentUser,postMessageUploadService){function getExtension(){$state.is("app.dashboard.extensions-setup")&&builtApi.Extensions.get({options:{paramId:"applications"}}).then(function(extension){$scope.extension=extension.ccapp,$scope.hasExtensions=!0,Utils.tip({containe:"body"}),"pending"==extension.ccapp.status&&$timeout(function(){getExtension()},1e4)},function(xhr){xhr=xhr.entity,$scope.hasExtensions=!1})}$scope.hasExtensions="loading",$scope.serverConfig=serverConfig,$scope.extension={},$scope.extensionNameStatus=null,$scope.phaseStatusText="Stop app",$scope.downloadLink=window.location.protocol+"//"+window.location.host+"/v1/cc/applications/downloads?APPLICATION_API_KEY="+$state.params.api_key;var apiKey=$state.params.api_key;$scope.formData={authtoken:currentUser.authtoken,url:"cc/applications",apiKey:apiKey,apihost:currentApiHost.api_host,randvalue:Utils.getRand()};var checkExtensionName=_.debounce(function(appName){builtApi.Extensions.get({options:{paramId:"applications/availability",query:{app_name:appName}}}).then(function(){_.isEmpty($scope.extension.app_name)||($scope.extensionNameStatus="available")},function(){_.isEmpty($scope.extension.app_name)||($scope.extensionNameStatus="not-available")})},300);$scope.checkKey=function(e){13===e.keyCode&&$scope.addDomain()},$scope.addDomain=function(){var button=$(".js-btn-add-domain");_.isEmpty($scope.domainName)||(button.button("loading"),builtApi.Extensions.addDomain({options:{paramId:"domains"},body:{app_api_key:apiKey,domain:$scope.domainName}}).then(function(res){$scope.extension.custom_domains||($scope.extension.custom_domains=[]),$scope.extension.custom_domains.push($scope.domainName),$scope.domainName="",Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){button.button("reset")}))},$scope.startStopExtension=function(){var button=$(".js-start-stop-ext"),urlSuffix="deployed"===$scope.extension.status?"stop":"start";button.attr("disabled","disabled"),builtApi.Extensions.state({options:{paramId:"applications/"+urlSuffix}}).then(function(res){$scope.extension.status="deployed"===$scope.extension.status?"stopped":"deployed",Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){button.removeAttr("disabled")})},$scope.deleteDomain=function(domain){var index=$scope.extension.custom_domains.indexOf(domain);builtApi.Extensions.delete({options:{paramId:"domains"},body:{app_api_key:apiKey,domain:domain}}).then(function(res){$scope.extension.custom_domains.splice(index,1),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$scope.submitExtension=function(){var form=$(".js-setup-form").find("form"),button=$(".js-btn-deploy-app");return _.isEmpty($scope.extension.app_name)?void Alert.confirm({title:"Please enter your extension app name!",content:"",buttons:"[Dismiss]"}):_.isEmpty(form.find('[name="ccapp[app_zip]"]').val())?void Alert.confirm({title:"Please choose a valid (.zip) file!",content:"",buttons:"[Dismiss]"}):void($scope.hasExtensions||"available"===$scope.extensionNameStatus?(button.button("loading"),form.trigger("submit"),postMessageUploadService.getPostMessage($scope.formData.randvalue).then(function(res){res.hasOwnProperty("error_code")?Alert.notify({title:res.error_message,content:Utils.parseError(res),type:"error"}):($scope.hasExtensions=!0,$(".js-setup-form").find("form")[0].reset(),getExtension(),Alert.notify({title:"Success",content:res.notice,type:"success"}))}).finally(function(){button.button("reset")})):Alert.confirm({title:"App name already taken!",content:"The app name you have entered is already taken. Please select a different app name and try again.",buttons:"[Dismiss]"}))},$scope.$watch("extension.app_name",function(newName){if(!$scope.hasExtensions){if(_.isEmpty(newName))return void($scope.extensionNameStatus=null);$scope.extensionNameStatus="searching",checkExtensionName(newName)}}),$scope.deleteExtension=function(){Alert.confirm({title:"Delete Extension app",content:"Are you sure you want to delete this extension app?"}).then(function(){builtApi.Extensions.delete({options:{paramId:"applications"}}).then(function(res){$scope.hasExtensions=!1,$scope.extension={},$(".js-setup-form").find("form")[0].reset(),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})},$scope.extensionStateRestart=function(){var button=$(".js-restart-ext");button.attr("disabled","disabled").find(".fa").addClass("fa-spin"),builtApi.Extensions.state({options:{paramId:"applications/restart"}}).then(function(res){Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){button.removeAttr("disabled").find(".fa").removeClass("fa-spin")})},getExtension()}]},{}],137:[function(require,module){"use strict";var angular=require(7),resolvers=(require(6),require(1)),logsCtrl=require(2),setupCtrl=require(3),setupTemplate=require(5),logsTemplate=require(4);module.exports=angular.module("built.extensions",["ui.router"]).controller("setupCtrl",setupCtrl).controller("logsCtrl",logsCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.extensions-setup",{url:"/extensions/setup",template:setupTemplate,controller:"setupCtrl",data:{breadcrumbs:[{name:"Extensions"},{name:"Setup"}]}}).state("app.dashboard.extensions-logs",{url:"/extensions/logs",template:logsTemplate,resolve:resolvers.resolve(["extensions"]),controller:"logsCtrl",data:{breadcrumbs:[{name:"Extensions"},{name:"Logs"}]}})}]).run(["menuService",function(menu){var menuItem={id:"extensions",title:"Extensions",order:9,icon:"fa-cloud",sub_menu:[{id:"setup",title:"Setup",state:"app.dashboard.extensions-setup"},{id:"logs",title:"Logs",state:"app.dashboard.extensions-logs"}]};menu.add(menuItem)}])},{1:221,2:135,3:136,4:138,5:139,6:239,7:295}],138:[function(require,module){module.exports='<div class="ext-logs-wrap">\n<div ng-if="!gettingExtApp && canShowLogs">\n<div class=\'button-wrap mb10\'>\n <button class="pull-left btn txt-color-white mr10 trans01s" ng-class="{\'bg-color-magenta\': isRealTimeEnabled, \' bg-color-blue\' : !isRealTimeEnabled}" ng-click="toggleRealtime()">\n<i class="fa fa-bullseye mr5 fa-lg" ng-class="{\'flashy\': isRealTimeEnabled}"></i> \n <span ng-if="!isRealTimeEnabled">Enable</span>\n <span ng-if="isRealTimeEnabled">Disable</span>\n real time\n</button>\n <button class="btn btn-danger pull-left" ng-if="!isRealTimeEnabled">\n<i class="fa fa-trash-o mr5"></i> Clear logs\n</button>\n \n<div class="date-range-picker-wrap pull-right" ng-class="{\'disabled\': isRealTimeEnabled}">\n<div class="date-range-picker" bootstrap-daterangepicker date-range="dateRange" on-date-range-change="onDateRangeChange"></div>\n</div>\n</div>\n<div class="data-tbl-wrap">\n<table class="table data-tbl log-table table-bordered table-hover">\n<thead>\n<tr class=\'dt-head-tr\'>\n<th class="log-level-th">Level</th>\n<th>Log</th>\n<th class="log-date-th">Datetime</th>\n</tr>\n</thead>\n<tbody>\n<tr ng-if="!gettingLogs" ng-repeat="log in ccLogs" ng-class="{\'blue-fade-5\' : isRealTimeEnabled}">\n<td class="log-level">\n <span class="label" ng-class="{\'label-success\':log.level == \'info\',\'label-warning\' : log.level == \'warn\', \'label-danger\' : log.level == \'error\'}" title="{{log.level}}">&nbsp;</span>\n</td>\n<td>\n<div class="log-msg">\n {{log.message}}\n</div>\n</td>\n<td class="log-date">\n<p>{{getHumanizedDate(log.timestamp)}}</p>\n<p>{{getDate(log.timestamp)}}</p>\n</td>\n</tr>\n<tr ng-if="gettingLogs">\n<td colspan=\'100\'>\n<div class="dt-loader">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n</td>\n</tr>\n<tr ng-if="!gettingLogs && !isRealTimeEnabled && !ccLogs.length">\n<td colspan=\'100\'>\n<div class="no-msg">\n No logs found\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div ng-if="!gettingExtApp && !canShowLogs">\n<div class="well well-sm">\n<div class="alert alert-info mb0" ng-if="!extension">\n<h4 class="alert-heading">No extension app setup yet!</h4>\n You have not uploaded any extensions yet. Please upload an extension <a class="bold-text" ng-href="#/dashboard/{{apiKey}}/extensions/setup">here</a>.\n</div>\n<div class="alert alert-info mb0" ng-if="extension.status === \'stopped\'">\n<h4 class="alert-heading">You have stopped your extension app!</h4>\n Your extension is in \'stopped\' state. No logs can be recorded or retrived from your app in this state. Please start your <a class="bold-text" ng-href="#/dashboard/{{apiKey}}/extensions/setup">extension app</a> to view previous or realtime logs.\n</div>\n</div>\n</div>\n</div>'},{}],139:[function(require,module){module.exports='<div class="well well-sm extensions-wrap max-width-800">\n<div class="row">\n<div class="col-sm-12">\n<legend class="pg-header">\n Setup your extension app\n</legend>\n<p class="pg-tagline">\n Cloud Extensions allows you to extend the functionality of your built.io application. Upload your JavaScript code containing your custom business logic below. For more info, please refer the <a href="https://docs.built.io/guide/extensions" target="_blank" class="bold-text">documentation</a>.\n</p>\n\n<div class="es-header animated fadeIn" ng-if="hasExtensions && hasExtensions!=\'loading\'">\n<div class="media">\n<div class="pull-right">\n<div class="btn-group">\n <button rel="tooltip" class="btn btn-default btn-sm js-restart-ext" ng-show="hasExtensions && extension.status === \'deployed\'" ng-click="extensionStateRestart()" title="Restart app" data-placement="bottom">\n<i class="fa fa-refresh"></i> \n</button>\n <button rel="tooltip" class="btn btn-default btn-sm js-start-stop-ext" ng-show="hasExtensions && extension.status === \'deployed\'" ng-click="startStopExtension()" title="Stop app" data-placement="bottom">\n<i class="fa fa-stop"></i> \n</button>\n <button rel="tooltip" class="btn btn-default btn-sm js-start-stop-ext" ng-show="hasExtensions && extension.status === \'stopped\'" ng-click="startStopExtension()" title="Start app" data-placement="bottom">\n<i class="fa fa-play"></i> \n</button>\n <button rel="tooltip" ng-click="deleteExtension()" class="btn btn-danger btn-sm" title="Delete app" data-placement="bottom">\n<i class="fa fa-trash-o"></i> \n</button>\n</div>\n</div>\n<div class="media-body">\n<p>\n <a target="_blank" ng-href="http://{{extension.app_name}}{{serverConfig.extension_domain_suffix}}">{{extension.app_name}}{{serverConfig.extension_domain_suffix}}</a> \n</p>\n</div>\n</div>\n</div>\n\n<div class="js-setup-form form-horizontal animated fadeIn" ng-if="hasExtensions!=\'loading\'" file-upload authtoken="formData.authtoken" url="formData.url" apikey="formData.apiKey" apihost="formData.apihost" randvalue="formData.randvalue">\n <input type="hidden" name="ccapp[app_name]" value="{{extension.app_name}}">\n<fieldset>\n<div class="form-group" ng-if="!hasExtensions">\n <label class="col-md-3 control-label">Choose your app name</label>\n<div class="col-md-5" ng-class="{\'has-success\': extensionNameStatus==\'available\', \'has-error\': extensionNameStatus==\'not-available\'}">\n<div class="input-group">\n <input class="form-control" type="text" ng-model="extension.app_name" ng-value="extension.app_name" required>\n <span class="input-group-addon">\n<i class="fa fa-thumbs-up" title="This app name is available." ng-if="extensionNameStatus==\'available\'"></i> \n<i class="fa fa-thumbs-down" title="This app name is not available." ng-if="extensionNameStatus==\'not-available\'"></i> \n<i class="fa fa-cloud" title="This app name is not available." ng-if="extensionNameStatus==null"></i> \n<i class="fa fa-spinner fa-spin" ng-if="extensionNameStatus==\'searching\'" title="This app name is not available." ng-if="extensionNameStatus==\'not-available\'"></i> \n</span> \n</div>\n <span class="help-block">\n <span ng-if="extensionNameStatus==\'searching\'">Checking availability...</span>\n <span ng-if="extensionNameStatus==\'available\'">This app name is available!</span>\n <span ng-if="extensionNameStatus==\'not-available\'">This app name is not available!</span>\n</span> \n<p ng-if="extension.app_name.length">\n {{extension.app_name}}{{serverConfig.extension_domain_suffix}}\n</p>\n</div>\n</div>\n\n<div class="form-group animated fadeIn" ng-if="hasExtensions">\n <label class="col-md-3 control-label">Download your source code</label>\n<div class="col-md-9">\n<div class="es-download-link">\n <a target="_blank" ng-href="{{downloadLink}}">{{downloadLink}}</a>\n</div>\n</div>\n</div>\n\n<div class="form-group" ng-show="extension.status != \'stopped\'">\n <label class="col-md-3 control-label">\n <span ng-if="!hasExtensions">Upload</span>\n <span ng-if="hasExtensions">Update</span> your code\n <span class="mute-text">(.zip)</span>\n</label> \n<div class="col-md-5">\n <input type="file" title="Choose a zip file" name="ccapp[app_zip]" class="form-control" max="1" required>\n</div>\n</div>\n</fieldset>\n</div>\n\n<div class="es-footer animated fadeIn" ng-if="hasExtensions!=\'loading\'">\n<div class="media">\n<div class="pull-right">\n <a ng-show="extension.status != \'stopped\'" class="btn btn-primary js-btn-deploy-app btn-sm" data-loading-text="Deploying..." ng-click="submitExtension()">\n Deploy app\n</a> \n</div>\n<div class="media-body es-status-wrap">\n<div ng-if="extension.status==\'pending\'">\n<i class="fa fa-lg fa-cloud-upload mr5 yellow-text flashy"></i> Please hold on while your app gets deployed...\n</div>\n<div ng-if="extension.status==\'deployed\'" class="animated fadeIn">\n<i class="fa fa-lg fa-check-square mr5 green-text"></i> Your app is up and running!\n</div>\n<div ng-if="extension.status==\'not_deployed\'" class="animated fadeIn">\n<i class="fa fa-lg fa-circle mr5"></i> Your app is not deployed yet.\n</div>\n<div ng-if="extension.status==\'error\'" class="animated fadeIn">\n<i class="fa fa-lg fa-exclaimation-triangle mr5 red-text"></i> There was a problem deploying the app.\n<p class="ext-reason">Reason: {{extension.reason}}</p>\n</div>\n<div ng-if="extension.status==\'stopped\'" class="animated fadeIn">\n<i class="fa red-text fa-stop mr5"></i> Your application is stopped.</p>\n</div>\n</div>\n</div>\n</div>\n\n<div class="tab-loader" ng-if="hasExtensions==\'loading\'">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n</div>\n</div>\n<div class="row mt20 animated fadeIn" ng-show="hasExtensions && hasExtensions!=\'loading\' && extension.status !== \'stopped\'">\n<div class="col-sm-12">\n<legend class="pg-header">\n Domain\n</legend>\n<p>\n Setup custom domains to point to your website.\n</p>\n<div class="domain-input-wrap">\n<div class="input-group">\n <input type="text" placeholder="Enter a domain name..." class="form-control input-sm" ng-model="domainName" ng-value="domainName" ng-keyup="checkKey($event)">\n <span class="input-group-btn">\n <button class="btn btn-primary js-btn-add-domain btn-sm" ng-click="addDomain()" data-loading-text="Adding...">Add Domain</button>\n</span> \n</div>\n<ul class="d-list">\n<li ng-repeat="domain in extension.custom_domains" class="d-item">\n<div>\n <code>{{domain}}</code>\n <a class="btn btn-sm btn-danger btn-delete-domain" ng-click="deleteDomain(domain)">\n<i class="fa fa-trash-o"></i> \n</a> \n</div>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>' },{}],140:[function(require,module){"use strict";require(3);var hookModalTemplate=require(2),helpModalTemplate=require(1);module.exports=["$scope","$state","$interval","builtApi","$injector","modalService","alertService","utilsService","integration",function($scope,$state,$interval,builtApi,$injector,Modal,Alert,Utils,integration){function createWebHook(){Modal.openModal({uid:"",channels:[],url:"",action:"create"},hookModalTemplate,webHookCtrl).then(function(hook){$scope.webHooks.push(hook.web_hook)})}function setSelect2data(data){if(_.isEmpty(data))return data;var tempArray=data.map(function(obj){return{id:obj,text:obj}});return tempArray}function editWebHook(hook){hook.action="edit";var index=$scope.webHooks.indexOf(hook);Modal.openModal(_.cloneDeep(hook),hookModalTemplate,webHookCtrl).then(function(hook){$scope.webHooks[index]=hook.web_hook})}function deleteWebHook(hook){var index=$scope.webHooks.indexOf(hook);Alert.confirm({title:"Delete Web Hook",content:"Are you sure you want to delete this Web Hook?"}).then(function(){builtApi.Integration.delete({options:{hookUid:hook.uid}}).then(function(res){$scope.webHooks.splice(index,1),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}var apiKey=$state.params.api_key;$scope.webHooks=integration,$scope.actions=["edit","delete"],$scope.getChannelsString=function(channels){return channels.toString()},$scope.action=function(act,hook){"create"===act&&createWebHook(),"delete"===act&&deleteWebHook(hook),"edit"===act&&editWebHook(hook)};var webHookCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.uidEditable=_.isEmpty(data.uid)?!0:!1,$scope.btnStatus=!1,setTimeout(function(){$("#js-channel-selection").select2({multiple:!0,tags:setSelect2data(data.channels),placeholder:"Enter comma(,) separated channels...",tokenSeparators:[","]}),$("#js-channel-selection").select2("data",setSelect2data(data.channels)),$("#js-channel-selection").on("change",function(){var select2Data=$("#js-channel-selection").select2("data");select2Data&&($scope.data.channels=select2Data.map(function(obj){return obj.id}))})},0),$scope.ok=function(){var WebHookRequest="";$scope.btnStatus=!0,"create"===$scope.data.action&&(WebHookRequest=builtApi.Integration.post({body:{app_api_key:apiKey,web_hook:$scope.data}})),"edit"===$scope.data.action&&(WebHookRequest=builtApi.Integration.put({options:{webHookUid:$scope.data.uid},body:{app_api_key:apiKey,web_hook:$scope.data,webhook_uid:$scope.data.uid}})),WebHookRequest.then(function(res){$scope.btnStatus=!1,$modalInstance.close(res),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){$scope.btnStatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$scope.getHelp=function(){Modal.openModal({},helpModalTemplate,helpCtrl)};var helpCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:142,2:143,3:304}],141:[function(require,module){"use strict";var angular=require(5),resolvers=(require(4),require(1)),integrationCtrl=require(2),integrationTemplate=require(3);module.exports=angular.module("built.integration",["ui.router"]).controller("integrationCtrl",integrationCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.integration",{url:"/integration",template:integrationTemplate,resolve:resolvers.resolve(["integration"]),controller:"integrationCtrl",data:{breadcrumbs:[{name:"Integration"}]}})}]).run(["$rootScope","menuService",function($rootScope,menu){var menuItem={id:"integration",title:"Integration",order:5,icon:"fa-exchange",state:"app.dashboard.integration"};menu.add(menuItem)}])},{1:221,2:140,3:144,4:239,5:295}],142:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click=\'cancel()\'>\n ×\n</button>\n<h3 class="modal-title">Web Hooks</h3>\n</div>\n<div class="modal-body">\n<p>Webhooks allow you to integrate with events in your application.</p>\n<p>Webhooks let you register an URL, to which we will POST anytime the specified event is triggered. The events are encoded as "channels", which are strings that encode event information. The following events are triggered:</p>\n<p>* Create/Update/Delete of class</p>\n<p>* Create/Update/Delete of object</p>\n<p>* Create/Update/Delete of upload</p>\n<p>You may listen on one or more of these events, by listening on their corresponding channels.</p>\n<p>Channels have the following syntax:</p><pre class="prettyprint">{class_uid}.{object_uid}.{event}</pre> \n<p>The structure for create/update/delete on a class,object or upload:</p><pre class="prettyprint">class.{create|update|delete}<br>{class_uid}.object.{create|update|delete}<br>upload.create<br>{upload_uid}.update<br>{upload_uid}.delete</pre> \n<p>There are also more generic events:</p>\n<p>* when any event is triggered on any class:</p><pre class="prettyprint">class.{create|update|delete}</pre> \n<p>* when any event is triggered on any object of a particular class:</p><pre class="prettyprint">{class_uid}.object.{create|update|delete}</pre> \n<p>* when any event is triggered on any object:</p><pre class="prettyprint">object.{create|update|delete}</pre> \n<p>* when any event is triggered on any upload:</p><pre class="prettyprint">upload.delete<br>upload.update</pre> \n<p>For example, lets say you have a "Post" class, and want to be notified of any new post that is created. We may listen on the following channel to be notified of such an event:</p><pre class="prettyprint">post.object.create</pre> \n</div>\n<div class="modal-footer">\n <a class="btn btn-labeled btn-default btn-sm pull-left" ng-click=\'cancel()\'>\n <span class="btn-label">\n<i class="fa fa-arrow-left"></i> \n</span> \n <span>\n Create\n</span> \n</a> \n</div>'},{}],143:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h3 class="modal-title"><span ng-show="data.action==\'create\'">New</span><span ng-show="data.action==\'edit\'">Edit</span> web hook</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">UID</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="data.uid" ng-value="data.uid" ng-disabled="!uidEditable">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Channels</label>\n<div class="col-md-10">\n<div class="select2-full-width" id="js-channel-selection"></div>\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">URL</label>\n<div class="col-md-10">\n <input type="text" ng-model="data.url" ng-value="data.url" class="form-control" />\n</div>\n</div>\n</fieldset>\n</div>\n</div>\n<div class="modal-footer">\n<div class="button-wrap">\n <button ng-if="data.action==\'create\'" btn-loader="btnStatus" loading-text="Creating..." class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Create\n</span> \n</button>\n <button ng-if="data.action==\'edit\'" btn-loader="btnStatus" loading-text="Updating..." class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Update\n</span> \n</button>\n <button class="btn btn-labeled btn-default btn-sm pull-left" ng-click="cancel()">\n <span class="btn-label">\n<i class="fa fa-arrow-left"></i> \n</span> \n <span>\n Cancel\n</span> \n</button>\n</div>\n</div>'},{}],144:[function(require,module){module.exports='<div class="">\n<div class=\'button-wrap mb10\'>\n <a ng-click="action(\'create\')" class="pull-left btn-labeled btn btn-primary">\n<span class="btn-label"><i class="fa fa-exchange"></i> \n</span> New web hook\n</a> \n<i class="fa fa-info-circle help-icon pull-left ml10" ng-click="getHelp()"></i> \n</div>\n<div class="data-tbl-wrap">\n<table class="table data-tbl log-table table-bordered table-hover">\n<thead>\n<tr class=\'dt-head-tr\'>\n<th>UID</th>\n<th>URL</th>\n<th>Channels</th>\n<th>Actions</th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat="hook in webHooks">\n<td>{{hook.uid}}</td>\n<td>{{hook.url}}</td>\n<td>{{getChannelsString(hook.channels)}}</td>\n<td>\n'+"<span title=\"{{act}}\" ng-repeat='act in actions' ng-click='action(act, hook)' class=\"hand fa fa-lg edit_evnt ml10 dt-action-item\" ng-class=\"{'fa-pencil' : act == 'edit', 'fa-trash-o' : act == 'delete'}\"></span> \n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n"},{}],145:[function(require,module){"use strict";var angular=require(17),resolvers=(require(18),require(1)),accountCtrl=require(2),personalInfoCtrl=require(9),securityCtrl=require(15),plansCtrl=require(11),billingInfoCtrl=require(4),purchaseHistoryCtrl=require(13),metricsCtrl=require(6),accountTemplate=require(3),personalInfoTemplate=require(8),securityTemplate=require(14),plansTemplate=require(10),billingInfoTemplate=require(5),purchaseHistoryTemplate=require(12),metricsTemplate=require(7),billingInfoDirective=require(16);module.exports=angular.module("built.account",["ui.router"]).controller("accountCtrl",accountCtrl).controller("personalInfoCtrl",personalInfoCtrl).controller("securityCtrl",securityCtrl).controller("plansCtrl",plansCtrl).controller("billingInfoCtrl",billingInfoCtrl).controller("purchaseHistoryCtrl",purchaseHistoryCtrl).controller("metricsCtrl",metricsCtrl).directive("billingInfo",billingInfoDirective).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.account",{"abstract":!0,url:"/account",controller:"accountCtrl",resolve:resolvers.resolve(["currentUser","accounts","plans"]),template:accountTemplate}).state("app.account.personalInfo",{url:"/personal-info",controller:"personalInfoCtrl",template:personalInfoTemplate,data:{layout:{leftMenu:!1}}}).state("app.account.security",{url:"/security",controller:"securityCtrl",template:securityTemplate,data:{layout:{leftMenu:!1}}}).state("app.account.plans",{url:"/plans",controller:"plansCtrl",template:plansTemplate,data:{layout:{leftMenu:!1}}}).state("app.account.billingInfo",{url:"/billing-info",controller:"billingInfoCtrl",resolve:resolvers.resolve(["billingInfo"]),template:billingInfoTemplate,data:{layout:{leftMenu:!1}}}).state("app.account.purchaseHistory",{url:"/purchase-history",controller:"purchaseHistoryCtrl",resolve:resolvers.resolve(["paymentHistory"]),template:purchaseHistoryTemplate,data:{layout:{leftMenu:!1}}}).state("app.account.metrics",{url:"/metrics",controller:"metricsCtrl",resolve:resolvers.resolve(["accountApiMetrics"]),template:metricsTemplate,data:{layout:{leftMenu:!1}}})}])},{1:221,10:155,11:156,12:157,13:158,14:159,15:160,16:161,17:295,18:294,2:146,3:147,4:148,5:149,6:150,7:151,8:152,9:153}],146:[function(require,module){"use strict";module.exports=["$scope","$state","appCacheService",function($scope,$state,appCacheService){$scope.serverConfig=appCacheService.get("serverConfig"),$scope.isActiveState=function(s){return $state.is(s)}}]},{}],147:[function(require,module){module.exports='<div id="main" role=\'main\'>\n<div class="content animated fadeInDown clearfix">\n<div class="container accounts-page-wrap">\n<div class="row">\n<div class="col-md-3">\n<div class="well nav-list-wrap">\n<ul class="nav nav-list">\n<li class="nav-header">Profile Settings</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.personalInfo\')}">\n <a ui-sref="app.account.personalInfo">Personal information</a>\n</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.security\')}">\n <a ui-sref="app.account.security">Security</a>\n</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.metrics\')}" ng-if="serverConfig.on_premise">\n <a ui-sref="app.account.metrics">Metrics</a>\n</li>\n<li class="nav-header" ng-if="!serverConfig.on_premise">Plans and Payment</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.plans\')}" ng-if="!serverConfig.on_premise">\n <a ui-sref="app.account.plans">Plans</a>\n</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.metrics\')}" ng-if="!serverConfig.on_premise">\n <a ui-sref="app.account.metrics">Metrics</a>\n</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.billingInfo\')}" ng-if="!serverConfig.on_premise">\n <a ui-sref="app.account.billingInfo">Billing info</a>\n</li>\n<li ng-class="{\'active\': isActiveState(\'app.account.purchaseHistory\')}" ng-if="!serverConfig.on_premise">\n <a ui-sref="app.account.purchaseHistory">Purchase history</a>\n</li>\n</ul>\n</div>\n</div>\n<div class="col-md-9">\n<div ui-view></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n'},{}],148:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","accounts","billingInfo","constants",function($scope,$location,$state,builtApi,Alert,Utils,accounts,billingInfo){$scope.billingInfo=billingInfo}]},{}],149:[function(require,module){module.exports='<div billing-info="billingInfo"></div>'},{}],150:[function(require,module){"use strict";require(1),module.exports=["$scope","$injector","constants","builtApi","alertService","utilsService","accounts","accountApiMetrics","libraryService","serverConfig",function($scope,$injector,constants,builtApi,Alert,Utils,accounts,ApiMetrics,LIB,serverConfig){function prepareGraphData(){var rawGraphData=$.extend(!0,{},$scope.apiMetrics),metrics=rawGraphData.range.stats;$scope.modGraphData.length=0;for(var key in metrics){var series=[],stat=metrics[key];for(var date in stat)series.push([new Date(date).getTime(),stat[date]]);$scope.modGraphData.push({name:key.charAt(0).toUpperCase()+key.slice(1).replace("_"," "),data:series,el:$("."+key+"-graph")})}$scope.modGraphData.sort(function(a,b){return a.name>b.name})}function getapiMetrics(){builtApi.ApiMetrics.get({options:{metricsType:"account_api_metrics",query:{to:$scope.dateRange.endDate,from:$scope.dateRange.startDate}}}).then(function(apiMetrics){$scope.apiMetrics=apiMetrics,showGraph()})}function renderGraphs(){for(var i=0;i<$scope.modGraphData.length;i++){var hcOptions=_.cloneDeep(constants.charts.defaults.line);hcOptions.chart.height=200,hcOptions.colors=[constants.charts.colorPalette[i]],hcOptions.series=[$scope.modGraphData[i]],$injector.invoke(["chartService",function(hc){hc.drawChart({el:$scope.modGraphData[i].el,options:hcOptions})}])}}function showGraph(){LIB.get("charts").then(function(){prepareGraphData(),renderGraphs()})}$scope.account=accounts[0],$scope.apiMetrics=ApiMetrics,$scope.graphDom=[],$scope.onPremise=serverConfig.on_premise||($scope.account.plan?!1:!0),$scope.overall={apiCalls:$scope.onPremise?ApiMetrics.overall.total_api_usage:Utils.calcPercent(ApiMetrics.overall.total_api_usage,$scope.account.plan.functionalities.api_limit),pushNotifications:$scope.onPremise?ApiMetrics.overall.push_notifications:Utils.calcPercent(ApiMetrics.overall.push_notifications,$scope.account.plan.functionalities.push_limit),storage:$scope.onPremise?ApiMetrics.overall.file_storage_used:Utils.calcPercent(ApiMetrics.overall.file_storage_used,$scope.account.plan.functionalities.storage_limit)},$scope.modGraphData=[],$scope.dateRange={startDate:$scope.apiMetrics.range.from,endDate:$scope.apiMetrics.range.to},$scope.getSize=function(mb){return 0==mb?mb:Utils.bytesToSize(1024*mb*1024)},$scope.humanizeNumber=function(v){return Utils.humanizeNumber(v)},$scope.onDateRangeChange=function(){getapiMetrics()},showGraph(),setTimeout(function(){$scope.onPremise||runAllCharts(),$("[rel=tooltip]").tooltip()},100)}]},{1:301}],151:[function(require,module){module.exports='<div class="metrics-wrap"> \n<legend>Overall account metrics</legend>\n<div class="well">\n<div class="row">\n<div class="col-md-4">\n<div class="stat-wrap" rel="tooltip" title="{{apiMetrics.overall.total_api_usage}} of {{account.plan.functionalities.api_limit}} API calls made" data-placement="bottom" ng-if="!onPremise">\n<h4 class="ep-header">\n API calls\n</h4>\n<div class="easy-pie-chart easyPieChart js-pie-chart txt-color-green" data-pie-size="130" data-percent="{{overall.apiCalls}}">\n<div class="percent percent-sign txt-color-green">\n <span>{{overall.apiCalls}}</span>\n</div>\n</div>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.total_api_usage)}} <span class="subscript">of {{humanizeNumber(account.plan.functionalities.api_limit)}}</span>\n</div>\n<p class="ep-bottom-line">API calls made</p>\n</div>\n\n<div class="stat-wrap sw-on-p" rel="tooltip" title="{{apiMetrics.overall.total_api_usage}} API calls made" data-placement="bottom" ng-if="onPremise">\n<h4 class="ep-header">\n API calls\n</h4>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.total_api_usage)}}\n</div>\n<p class="ep-bottom-line">API calls made</p>\n</div>\n</div>\n<div class="col-md-4">\n<div class="stat-wrap" rel="tooltip" title="{{apiMetrics.overall.push_notifications}} of {{account.plan.functionalities.push_limit}} push notifications sent" data-placement="bottom" ng-if="!onPremise">\n<h4 class="ep-header">\n Push notifications\n</h4>\n<div class="easy-pie-chart easyPieChart js-pie-chart txt-color-blue" data-pie-size="130" data-percent="{{overall.pushNotifications}}">\n<div class="percent percent-sign txt-color-blue">\n <span>{{overall.pushNotifications}}</span>\n</div>\n</div>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.push_notifications)}} <span class="subscript">of {{humanizeNumber(account.plan.functionalities.push_limit)}}</span>\n</div>\n<p class="ep-bottom-line">push notifications sent</p>\n</div>\n<div class="stat-wrap sw-on-p" rel="tooltip" title="{{apiMetrics.overall.push_notifications}} push notifications sent" data-placement="bottom" ng-if="onPremise">\n<h4 class="ep-header">\n Push notifications\n</h4>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.push_notifications)}}\n</div>\n<p class="ep-bottom-line">push notifications sent</p>\n</div>\n</div>\n<div class="col-md-4">\n \n<div class="stat-wrap" rel="tooltip" title="{{getSize(apiMetrics.overall.file_storage_used)}} of {{getSize(account.plan.functionalities.storage_limit)}} file storage used" data-placement="bottom" ng-if="!onPremise">\n<h4 class="ep-header">\n File storage\n</h4>\n<div class="easy-pie-chart easyPieChart js-pie-chart txt-color-beige" data-pie-size="130" data-percent="{{overall.storage}}">\n<div class="percent percent-sign txt-color-beige">\n <span>{{overall.storage}}</span>\n</div>\n</div>\n<div class="ep-figure">\n <span class="js-file-size">{{getSize(apiMetrics.overall.file_storage_used)}}</span> <span class="subscript">of <span class="js-file-size">{{getSize(account.plan.functionalities.storage_limit)}}</span></span>\n</div>\n<p class="ep-bottom-line">file storage used</p>\n</div>\n\n<div class="stat-wrap sw-on-p" rel="tooltip" title="{{getSize(apiMetrics.overall.file_storage_used)}} file storage used" data-placement="bottom" ng-if="onPremise">\n<h4 class="ep-header">\n File storage\n</h4>\n \n<div class="ep-figure">\n <span class="js-file-size">{{getSize(apiMetrics.overall.file_storage_used)}}</span>\n</div>\n<p class="ep-bottom-line">file storage used</p>\n</div>\n\n</div>\n</div>\n</div>\n \n<legend class="mt20 clearfix">\n <span class="pull-left">Day to day statistics</span>\n<div class="pull-right date-range-picker" bootstrap-daterangepicker date-range="dateRange" on-date-range-change="onDateRangeChange"></div>\n</legend>\n\n<div class="row">\n<div class="col-md-12 mb20">\n<div class="well">\n<p class="metrics-graph-header">API calls made: {{apiMetrics.range.overall.total_api_usage}}</p>\n<div class="api_usage-graph"></div>\n</div>\n</div>\n \n<div class="col-md-12">\n<div class="well">\n<p class="metrics-graph-header">Push notifications sent: {{apiMetrics.range.overall.push_notifications}}</p>\n<div class="push_notifications-graph"></div>\n</div>\n</div>\n \n<div class="col-md-12 m-file-storage-wrap">\n<div class="well">\n<p class="metrics-graph-header" ng-if="apiMetrics.range.overall.file_storage_used">\n File storage used: {{getSize(apiMetrics.range.overall.file_storage_used)}}\n</p>\n<p class="metrics-graph-header" ng-if="!apiMetrics.range.overall.file_storage_used">\n File storage used: {{apiMetrics.range.overall.file_storage_used}}\n</p>\n</div>\n</div>\n</div>\n</div>'},{}],152:[function(require,module){module.exports='<form class="acc-form">\n<fieldset>\n<legend>Edit your personal information</legend>\n<div class="form-group">\n <label>First name</label>\n <input class="form-control" type="text" ng-model="user.first_name">\n</div>\n<div class="form-group">\n <label>Last name</label>\n <input class="form-control" type="text" ng-model="user.last_name">\n</div>\n<div class="form-group">\n <label>Email address</label>\n <input class="form-control" type="email" ng-model="user.email" disabled>\n</div>\n<div class="form-group">\n <label>Company</label>\n <input class="form-control" type="text" ng-model="user.company">\n</div>\n<div class="button-wrap">\n <a ng-click=\'saveInformation($event)\' class="btn btn-primary pull-left js-btn-update-info" data-loading-text="Saving...">\n Save Information\n</a> \n</div>\n</fieldset>\n</form>\n'},{}],153:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","accounts",function($scope,$location,$state,builtApi,Alert,Utils,accounts){$(".js-btn-update-info");$scope.user=accounts[0].owner,$scope.saveInformation=function(e){var button=$(e.currentTarget);button.button("loading"),builtApi.SystemUserSession.update({body:{user:$scope.user}}).then(function(res){Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})}).finally(function(){button.button("reset")})}}]},{}],154:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="data.callback.cancel()">\n ×\n</button>\n<h4 class="modal-title">Please Enter your billing info</h4>\n</div>\n<div class="modal-body">\n<div billing-info="data"></div>\n</div>'},{}],155:[function(require,module){module.exports='<div class="clearfix">\n<legend>View/Change your plan</legend>\n<div class="alert alert-warning fade in" ng-if="planMsg"> \n<i class="fa-fw fa fa-info"></i><span ng-bind-html="planMsg"></span> \n</div>\n<div class="row">\n<div class="col-xs-12 col-sm-6 col-md-4" ng-repeat="plan in plans track by $index">\n<div class="panel panel-primary pricing-big" ng-class="{\'active\': plan.plan_id===activePlan.plan_id}">\n<div class="panel-heading">\n<h3 class="panel-title">\n {{plan.name}}</h3>\n</div>\n<div class="panel-body no-padding text-align-center">\n<div class="the-price">\n<h1 ng-if="!plan.free_plan">\n {{plan.price}} <span class="subscript">/ mo</span>\n</h1>\n<h1 ng-if="plan.free_plan">\n FREE<span class="subscript"></span> \n</h1>\n</div>\n<div class="price-features">\n<ul class="list-unstyled text-left">\n<li ng-repeat="feature in plan.features track by $index">\n<i class="fa" ng-class="{\'text-success fa-check\': feature.enabled, \'text-danger fa-times\': !feature.enabled}"></i> {{feature.feature}}\n</li>\n</ul>\n</div>\n</div>\n<div class="panel-footer text-align-center">\n <a class="btn btn-default btn-block hand" role="button" ng-if="plan.plan_id!=activePlan.plan_id" ng-click="ValidatePlan(plan, $event)" data-loading-text="Please wait...">Select Plan</a>\n <a class="btn btn-primary btn-block" role="button" ng-class="{\'disabled\': plan.plan_id===activePlan.plan_id}" ng-if="plan.plan_id===activePlan.plan_id">Active</a>\n</div>\n</div>\n</div>\n</div>\n</div>'},{}],156:[function(require,module){"use strict";var billingInfoModal=require(1);module.exports=["$scope","$location","$state","$sce","builtApi","alertService","utilsService","plans","accounts","modalService","appCacheService",function($scope,$location,$state,$sce,builtApi,Alert,Utils,plans,accounts,Modal,appCacheService){function selectPlan(plan,e){$scope.btnSelectedPlan=$(e.currentTarget),$scope.btnSelectedPlan.button("loading"),plan.free_plan||accounts[0].has_billing_info?postPlan(plan):Modal.openModal({month:"",number:"",year:"",esckey:!1,plan:plan},billingInfoModal,billingModalCtrl,{size:"sm",windowClass:"credit-card-modal"}).then(function(plan){postPlan(plan)},function(){$scope.btnSelectedPlan.button("reset")})}function getPlanMsg(){var planMessage="<b>You are currently trying out built.io.</b> Please choose any of the plans below.";if(!_.isEmpty($scope.activePlan)&&!_.isEmpty($scope.activePlan.message)){var createdAt=accounts[0].created_at,trialPeriod=$scope.activePlan.trial_period||0;planMessage=$scope.activePlan.message.replace(/{expiration}/gi,moment(createdAt).add("days",trialPeriod).format("MMMM Do, YYYY"))}return planMessage}function getPlanFeatures(){return plans.map(function(plan){try{plan.features=JSON.parse(plan.feature_list)}catch(e){}return plan})}function postPlan(plan){builtApi.Accounts.postPlans({body:{plan_id:plan.plan_id}}).then(function(res){var account=accounts[0];account.plan=plan,isCustomPlan()&&$scope.plans.splice($scope.plans.indexOf($scope.activePlan),1),$scope.activePlan=plan,appCacheService.set("currentAccount",account),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})}).finally(function(){$scope.btnSelectedPlan.button("reset")})}function isCustomPlan(){return $scope.activePlan&&$scope.activePlan.custom}$scope.activePlan=accounts[0].plan,$scope.btnSelectedPlan=null,$scope.plans=getPlanFeatures(),$scope.isUserInTrialPeriod=accounts[0].plan&&accounts[0].plan.trial_id?!0:!1,$scope.isUserInTrialPeriod&&($scope.planMsg=$sce.trustAsHtml(getPlanMsg())),isCustomPlan()&&$scope.plans.push($scope.activePlan),$scope.ValidatePlan=function(plan,e){isCustomPlan()?Alert.confirm({title:"Switching to a different plan?",content:"Are you sure you want to switch to a different plan? Doing so will discard your custom plan."}).then(function(){selectPlan(plan,e)}):selectPlan(plan,e)};var billingModalCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.data.callback={ok:function(plan){$modalInstance.close(plan)},cancel:function(){$modalInstance.dismiss("cancel")}}}}]},{1:154}],157:[function(require,module){module.exports='<div class="purchase-history-wrap">\n<legend>\n Purchase history\n</legend>\n\n<div ng-if="hasPaymentHistory" ng-repeat="(year, historyArray) in paymentHistory track by $index" class="ph-statements">\n<h5 ng-class="{\'first\': $first}">\n Year {{year}}\n</h5>\n<div ng-repeat="statement in historyArray" class="ph-statement media">\n<div class="pull-left">\n<div class="cal-sticker" title="{{getDate(statement.timestamp)}}" rel="tooltip">\n <strong>{{getOnlyMonth(statement.timestamp)}}</strong>\n <span>{{getOnlyDate(statement.timestamp)}}</span>\n</div>\n</div>\n\n<div class="media-body">\n <span>Payment of</span>\n <span class="plan-price" title="Price">{{statement.price}}</span>\n\n <span ng-if="statement.transaction_type === \'subscription_charged_successfully\' || statement.transaction_type === \'successful\'" class="transaction-status" title="">\n was successful\n</span> \n\n <span ng-if="statement.transaction_type === \'pending\' || statement.transaction_type === \'subscription_went_past_due\'" class="transaction-status">\n is in process\n</span> \n\n <span ng-if="statement.transaction_type === \'failed\' || statement.transaction_type === \'subscription_charged_unsuccessfully\'" class="transaction-status">\n failed\n</span> \n\n <span>for</span>\n\n <span class="plan-name" title="Plan name">{{statement.plan_name}}</span>.\n</div>\n</div>\n</div>\n<div class="no-msg" ng-if="!hasPaymentHistory">\n No purchases made yet.\n</div>\n</div>\n'},{}],158:[function(require,module){"use strict"; module.exports=["$scope","$state","paymentHistory",function($scope,$state,paymentHistory){function getYear(timeStamp){return moment(timeStamp).format("YYYY")}function formatPaymentHistory(){for(var i=0;i<paymentHistory.length;i++){var statement=paymentHistory[i],year=getYear(statement.timestamp);$scope.paymentHistory.hasOwnProperty(year)||($scope.paymentHistory[year]=[]),$scope.paymentHistory[year].push(statement)}}$scope.paymentHistory={},$scope.hasPaymentHistory=paymentHistory.length>0?!0:!1,formatPaymentHistory(),$scope.getdayMonth=function(timeStamp){return moment(timeStamp).format("MMM D")},$scope.getDate=function(timeStamp){return moment(timeStamp).format("MMMM Do YYYY, h:mm:ss a")},$scope.getOnlyDate=function(timeStamp){return moment(timeStamp).format("D")},$scope.getOnlyMonth=function(timeStamp){return moment(timeStamp).format("MMM")},setTimeout(function(){$("[rel=tooltip]").tooltip()},10)}]},{}],159:[function(require,module){module.exports='<form class="acc-form" method="PUT" action="" ng-submit="updatePassword()">\n<fieldset>\n<legend>Change your password</legend>\n<div class="form-group">\n <label>Enter old password</label>\n <input required class="form-control" type="password" ng-model="user.old_password">\n</div>\n<div class="form-group">\n <label>Enter new password</label>\n <input required class="form-control" type="password" ng-model="user.password">\n</div>\n<div class="form-group">\n <label>Confirm password</label>\n <input required class="form-control" type="password" ng-model="user.password_confirmation">\n</div>\n<div class="button-wrap">\n <button type="submit" class="btn btn-primary pull-left js-btn-update-password" data-loading-text="Updating...">\n Update password\n</button>\n</div>\n</fieldset>\n</form>\n\n'},{}],160:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","accounts",function($scope,$location,$state,builtApi,Alert,Utils){var btnUpdatePassword=$(".acc-form .js-btn-update-password");$scope.user={old_password:"",password:"",password_confirmation:""},$scope.updatePassword=function(){btnUpdatePassword.button("loading"),builtApi.SystemUserSession.update({body:{user:$scope.user}}).then(function(){$state.go("app.applications"),setTimeout(function(){Alert.notify({title:"Success",content:"Woot! Password updated successfully",type:"success"})},1e3)},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})}).finally(function(){btnUpdatePassword.button("reset")})}}]},{}],161:[function(require,module){"use strict";var billingInfoTemplate=require(1);module.exports=["alertService","utilsService","constants","appCacheService","libraryService",function(Alert,Utils,constants,appCacheService,LIB){return{template:billingInfoTemplate,restrict:"A",replace:!0,scope:{billingInfo:"="},link:function(scope){function billingInfoForm(e){e.preventDefault(),btnSaveCard.button("loading"),$.post(form.attr("action"),form.serialize(),function(data){var account=appCacheService.get("currentAccount")[0];account.has_billing_info=!0,appCacheService.set("currentAccount",[account]),Utils.sa(scope,function(){scope.isModal&&scope.billingInfo.callback.ok(scope.billingInfo.plan),scope.hasBillingInfo=!0}),Alert.notify({title:"Success",content:data.notice,type:"success"})}).fail(function(xhr){scope.isModal&&scope.billingInfo.callback.cancel();var error=JSON.parse(xhr.responseText);Alert.notify({title:error.error_message,content:Utils.parseError(error),type:"error"})}).always(function(){btnSaveCard.button("reset")})}function getYearsArray(){for(var currentYear=(new Date).getFullYear(),yearsArray=[],i=0;12>i;i++)yearsArray.push(currentYear++);return yearsArray}function getBrainTree(){return serverConfig.onPremise||LIB.has("brainTree")?void(scope.brainTreeLoaded=!0):void $.getScript("https://js.braintreegateway.com/v1/braintree.js").done(function(script){LIB.register("brainTree"),Utils.sa(scope,function(){scope.brainTreeLoaded=!0})}).fail(function(){Utils.sa(scope,function(){scope.brainTreeLoaded=!1})})}var form=$("#billing-info-form"),key=constants.braintree.key.dev,btnSaveCard=form.find(".js-btn-save-card"),serverConfig=appCacheService.get("serverConfig");scope.isModal=scope.billingInfo.callback?!0:!1,scope.brainTreeLoaded=!1,scope.years=getYearsArray(),scope.hasBillingInfo=!1,scope.billingInfo.number&&(scope.hasBillingInfo=!0),(window.location.host===constants.env_url.prod||window.location.host===constants.env_url.stag)&&(key=constants.braintree.key.prod),LIB.get("brainTree").then(function(){var braintree=Braintree.create(key);braintree.onSubmitEncryptForm("billing-info-form",billingInfoForm)}),scope.updateCard=function(){scope.billingInfo={},scope.hasBillingInfo=!1},getBrainTree()}}}]},{1:162}],162:[function(require,module){module.exports='<div>\n<legend ng-if="!isModal">Billing information</legend>\n<form role="form" id="billing-info-form" method="POST" action="/v1/accounts/update_billing_info" class="panel billing-info-wrap panel-default" ng-show="brainTreeLoaded && !hasBillingInfo">\n<div class="panel-heading">\n<h3 class="panel-title">\n Enter your card details\n</h3>\n</div>\n<div class="panel-body">\n<div class="form-group">\n <label for="cardNumber">CARD NUMBER</label>\n<div class="input-group">\n <input type="text" class="form-control" required autofocus size="20" autocomplete="off" data-encrypted-name="number" ng-model="billingInfo.number" />\n <span class="input-group-addon">\n<span class="fa fa-credit-card"></span> \n</span> \n</div>\n</div>\n<div class="form-group cc-date-wrap">\n <label>EXPIRY DATE</label>\n <select class="form-control cc-month" data-encrypted-name="month" placeholder="Month">\n<option value="01">Jan (01)</option>\n<option value="02">Feb (02)</option>\n<option value="03">Mar (03)</option>\n<option value="04">Apr (04)</option>\n<option value="05">May (05)</option>\n<option value="06">June (06)</option>\n<option value="07">July (07)</option>\n<option value="08">Aug (08)</option>\n<option value="09">Sep (09)</option>\n<option value="10">Oct (10)</option>\n<option value="11">Nov (11)</option>\n<option value="12">Dec (12)</option>\n</select>\n <select class="form-control cc-year" data-encrypted-name="year" placeholder="Year">\n<option ng-repeat="year in years" value="{{year}}">{{year}}</option>\n</select>\n</div>\n<div class="form-group">\n <label>CVV</label>\n <input class="form-control cc-cvv" data-encrypted-name="cvv" max="3" type="password" placeholder="" required />\n</div>\n</div>\n<div class="panel-footer">\n<div class="button-wrap">\n <button class="btn btn-primary pull-right js-btn-save-card" type="submit" ng-show="!hasBillingInfo" data-loading-text="Please wait...">\n Save card\n</button>\n</div>\n</div>\n</form>\n\n<div class="billing-info-details" ng-show="brainTreeLoaded && hasBillingInfo">\n<div class="row">\n<div class="col-sm-5">\n<div class="media">\n<div class="pull-left">\n<div class="fa fa-credit-card"></div>\n</div>\n<div class="media-body">\n<div>\n <span>Number:</span> {{billingInfo.number}}\n</div>\n<div class="mt5">\n <span>Expiry:</span> {{billingInfo.month}}/{{billingInfo.year}}\n</div>\n</div>\n</div>\n</div>\n<div class="col-sm-7">\n<a class="edit-cc-card hand" ng-click="updateCard()"><i class="fa fa-pencil mr5"></i> Update your card</a>\n</div>\n</div>\n</div>\n\n<div class="no-msg" ng-if="!brainTreeLoaded">\n Fetching your card details...\n</div>\n</div>\n\n'},{}],163:[function(require,module){"use strict";var angular=require(4),resolvers=(require(5),require(1)),apiMetricsCtrl=require(2),apiMetricsTemplate=require(3);module.exports=angular.module("built.api-metrics",["ui.router"]).controller("apiMetricsCtrl",apiMetricsCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.api-metrics",{url:"/api-metrics",template:apiMetricsTemplate,resolve:resolvers.resolve(["accountApiMetrics","applicationApiMetrics","accounts"]),controller:"apiMetricsCtrl",data:{breadcrumbs:[{name:"Api metrics"}]}})}]).run(["$rootScope","menuService",function($rootScope,menu){var menuItem={id:"api-metrics",title:"API metrics",order:3,icon:"fa-dashboard",state:"app.dashboard.api-metrics"};menu.add(menuItem)}])},{1:221,2:164,3:165,4:295,5:294}],164:[function(require,module){"use strict";module.exports=["$scope","builtApi","$injector","constants","alertService","utilsService","libraryService","accounts","applicationApiMetrics","accountApiMetrics","serverConfig",function($scope,builtApi,$injector,constants,Alert,Utils,LIB,accounts,appApiMetrics,accountApiMetrics,serverConfig){function getapiMetrics(){builtApi.ApiMetrics.get({options:{metricsType:"application_api_metrics",query:{to:$scope.dateRange.endDate,from:$scope.dateRange.startDate}}}).then(function(apiMetrics){$scope.apiMetrics=apiMetrics,showGraph()})}function renderGraphs(){for(var i=0;i<$scope.modGraphData.length;i++){var hcOptions=_.cloneDeep(constants.charts.defaults.line);hcOptions.chart.height=200,hcOptions.colors=[constants.charts.colorPalette[i]],hcOptions.series=[$scope.modGraphData[i]],$injector.invoke(["chartService",function(hc){hc.drawChart({el:$scope.modGraphData[i].el,options:hcOptions})}])}}function prepareGraphData(){var rawGraphData=$.extend(!0,{},$scope.apiMetrics),metrics=rawGraphData.range.stats;$scope.modGraphData.length=0;for(var key in metrics){var series=[],stat=metrics[key];for(var date in stat)series.push([new Date(date).getTime(),stat[date]]);$scope.modGraphData.push({name:key.charAt(0).toUpperCase()+key.slice(1).replace("_"," "),data:series,el:$("."+key+"-graph")})}$scope.modGraphData.sort(function(a,b){return a.name>b.name})}function showGraph(){LIB.get("charts").then(function(){prepareGraphData(),renderGraphs()})}$scope.apiMetrics=appApiMetrics,$scope.account=accounts[0],$scope.accountApiMetrics=accountApiMetrics,$scope.onPremise=serverConfig.on_premise||($scope.account.plan?!1:!0),$scope.overall={apiCalls:$scope.onPremise?appApiMetrics.overall.total_api_usage:Utils.calcPercent(appApiMetrics.overall.total_api_usage,accountApiMetrics.overall.total_api_usage),pushNotifications:$scope.onPremise?appApiMetrics.overall.push_notifications:Utils.calcPercent(appApiMetrics.overall.push_notifications,accountApiMetrics.overall.push_notifications),storage:$scope.onPremise?appApiMetrics.overall.file_storage_used:Utils.calcPercent(appApiMetrics.overall.file_storage_used,accountApiMetrics.overall.file_storage_used),users:appApiMetrics.overall.total_users,androidUsers:appApiMetrics.overall.total_android_users,iosUsers:appApiMetrics.overall.total_ios_users,userLoginCount:appApiMetrics.overall.user_login_count},$scope.modGraphData=[],$scope.dateRange={startDate:$scope.apiMetrics.range.from,endDate:$scope.apiMetrics.range.to},$scope.humanizeNumber=function(v){return Utils.humanizeNumber(v)},setTimeout(function(){$scope.onPremise||runAllCharts(),$("[rel=tooltip]").tooltip()},100),$scope.getSize=function(mb){return 0==mb?mb:Utils.bytesToSize(1024*mb*1024)},$scope.onDateRangeChange=function(){getapiMetrics()},showGraph()}]},{}],165:[function(require,module){module.exports='<div class="metrics-wrap app-api-metrics">\n<div class="well well-sm">\n<legend class="pg-header">Overall metrics</legend>\n<p class="pg-tagline">\n The metrics shown below for this application is compared with your overall account metrics.\n</p>\n<div class="row">\n<div class="col-md-4">\n<div class="stat-wrap" rel="tooltip" title="{{apiMetrics.overall.total_api_usage}} of {{accountApiMetrics.overall.total_api_usage}} API calls made" data-placement="bottom" ng-if="!onPremise">\n<h4 class="ep-header">\n API calls\n</h4>\n<div class="easy-pie-chart easyPieChart js-pie-chart txt-color-green" data-pie-size="130" data-percent="{{overall.apiCalls}}">\n<div class="percent percent-sign txt-color-green">\n <span>{{overall.apiCalls}}</span>\n</div>\n</div>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.total_api_usage)}} <span class="subscript">of {{humanizeNumber(accountApiMetrics.overall.total_api_usage)}}</span>\n</div>\n<p class="ep-bottom-line">API calls are made by this application</p>\n</div>\n<div class="stat-wrap sw-on-p" rel="tooltip" title="{{apiMetrics.overall.total_api_usage}} API calls made" data-placement="bottom" ng-if="onPremise">\n<h4 class="ep-header">\n API calls\n</h4>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.total_api_usage)}}\n</div>\n<p class="ep-bottom-line">API calls are made by this application</p>\n</div>\n</div>\n<div class="col-md-4">\n<div class="stat-wrap" rel="tooltip" title="{{apiMetrics.overall.push_notifications}} of {{accountApiMetrics.overall.push_notifications}} push notifications sent" data-placement="bottom" ng-if="!onPremise">\n<h4 class="ep-header">\n Push notifications\n</h4>\n<div class="easy-pie-chart easyPieChart js-pie-chart txt-color-blue" data-pie-size="130" data-percent="{{overall.pushNotifications}}">\n<div class="percent percent-sign txt-color-blue">\n <span>{{overall.pushNotifications}}</span>\n</div>\n</div>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.push_notifications)}} <span class="subscript">of {{humanizeNumber(accountApiMetrics.overall.push_notifications)}}</span>\n</div>\n<p class="ep-bottom-line">push notifications are been sent by this application</p>\n</div>\n<div class="stat-wrap sw-on-p" rel="tooltip" title="{{apiMetrics.overall.push_notifications}} push notifications sent" data-placement="bottom" ng-if="onPremise">\n<h4 class="ep-header">\n Push notifications\n</h4>\n<div class="ep-figure">\n {{humanizeNumber(apiMetrics.overall.push_notifications)}}\n</div>\n<p class="ep-bottom-line">push notifications are been sent by this application</p>\n</div>\n</div>\n<div class="col-md-4">\n<div class="stat-wrap" rel="tooltip" title="{{getSize(apiMetrics.overall.file_storage_used)}} of {{getSize(accountApiMetrics.overall.file_storage_used)}} file storage used" data-placement="bottom" ng-if="!onPremise">\n<h4 class="ep-header">\n File storage\n</h4>\n<div class="easy-pie-chart easyPieChart js-pie-chart txt-color-beige" data-pie-size="130" data-percent="{{overall.storage}}">\n<div class="percent percent-sign txt-color-beige">\n <span>{{overall.storage}}</span>\n</div>\n</div>\n<div class="ep-figure">\n <span class="js-file-size">{{getSize(apiMetrics.overall.file_storage_used)}}</span>\n <span class="subscript">of <span class="js-file-size">{{getSize(accountApiMetrics.overall.file_storage_used)}}</span>\n</span> \n</div>\n<p class="ep-bottom-line">file storage is used by this application</p>\n</div>\n<div class="stat-wrap sw-on-p" rel="tooltip" title="{{getSize(apiMetrics.overall.file_storage_used)}} file storage used" data-placement="bottom" ng-if="onPremise">\n<h4 class="ep-header">\n File storage\n</h4>\n<div class="ep-figure">\n <span class="js-file-size">{{getSize(apiMetrics.overall.file_storage_used)}}</span>\n</div>\n<p class="ep-bottom-line">file storage is used by this application</p>\n</div>\n</div>\n</div>\n<div class="row">\n<hr/>\n<div class="col-md-3">\n<div class="well well-sm well-light m-num-box" rel="tooltip" data-placement="bottom" title="You have {{overall.users}} users in this application">\n <span>Total users: <span class="num">{{overall.users}}</span></span> \n</div>\n</div>\n<div class="col-md-3">\n<div class="well well-sm well-light m-num-box" rel="tooltip" data-placement="bottom" title="{{overall.androidUsers}} of {{overall.users}} are Android users">\n <span>Android users: <span class="num">{{overall.androidUsers}}</span></span>\n \n</div>\n</div>\n<div class="col-md-3">\n<div class="well well-sm well-light m-num-box" rel="tooltip" data-placement="bottom" title="{{overall.iosUsers}} of {{overall.users}} are iOS users">\n <span>iOS users: <span class="num">{{overall.iosUsers}}</span></span>\n</div>\n</div>\n<div class="col-md-3">\n<div class="well well-sm well-light m-num-box" rel="tooltip" data-placement="bottom" title="{{overall.users - overall.iosUsers - overall.androidUsers}} of {{overall.users}} are other users">\n <span>Other users: <span class="num">{{overall.users - overall.iosUsers - overall.androidUsers}}</span></span>\n</div>\n</div>\n</div>\n</div>\n\n<legend class="mt20 clearfix">\n <span class="pull-left mt10">Day to day statistics</span>\n<div class="pull-right date-range-picker" bootstrap-daterangepicker date-range="dateRange" on-date-range-change="onDateRangeChange"></div>\n</legend>\n<div class="row">\n<div class="col-md-6">\n<div class="well">\n<p class="metrics-graph-header">API calls made: {{apiMetrics.range.overall.total_api_usage}}</p>\n<div class="api_usage-graph"></div>\n</div>\n</div>\n<div class="col-md-6">\n<div class="well">\n<p class="metrics-graph-header">Push notifications sent: {{apiMetrics.range.overall.push_notifications}}</p>\n<div class="push_notifications-graph"></div>\n</div>\n</div>\n<div class="col-md-6">\n<div class="well">\n<p class="metrics-graph-header">User logins: {{apiMetrics.range.overall.user_login_count}}</p>\n<div class="user_login_count-graph"></div>\n</div>\n</div>\n<div class="col-md-6">\n<div class="well m-file-storage-wrap">\n <span class="metrics-graph-header">File storage used: {{getSize(apiMetrics.range.overall.file_storage_used)}}</span>\n</div>\n</div>\n</div>\n</div>'},{}],166:[function(require,module){"use strict";var angular=require(7),resolvers=(require(8),require(1)),applicationsCtrl=require(2),ownershipActivationCtrl=require(3),applicationItem=require(4),applicationsTemplate=require(5),ownershipActivationTemplate=require(6);module.exports=angular.module("built.applications",["ui.router"]).controller("applicationsCtrl",applicationsCtrl).controller("ownershipActivationCtrl",ownershipActivationCtrl).directive("app",applicationItem).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.applications",{url:"/applications",resolve:resolvers.resolve(["currentUser","apps","accounts"]),template:applicationsTemplate,controller:"applicationsCtrl",data:{layout:{leftMenu:!1}}}).state("app.appOwnerShipActivation",{url:"/application/:authtoken/accept_application_ownership",template:ownershipActivationTemplate,controller:"ownershipActivationCtrl",data:{layout:{leftMenu:!1}}})}])},{1:221,2:167,3:168,4:169,5:171,6:173,7:295,8:294}],167:[function(require,module){"use strict";require(1);module.exports=["$scope","$state","$location","apps","builtApi","constants","appCacheService","alertService","utilsService","modalService","menuService","libraryService","$injector",function($scope,$state,$location,apps,builtApi,constants,appCacheService,Alert,Utils,Modal,Menu){var account=appCacheService.get("currentAccount")[0];$scope.dummyAppMenu=Menu.getMenu(),$scope.apps=apps,$scope.myApps=[],$scope.sharedApps=[],$scope.isAppInEditMode=!1,$scope.validUid=null,$scope.newApp={},$scope.searchApplicationText="";for(var i=0;i<apps.length;i++)account.name===apps[i].account_name?$scope.myApps.push(apps[i]):$scope.sharedApps.push(apps[i]);builtApi.ApiMetrics.get({options:{metricsType:"account_api_metrics"}}).then(function(accountApiMetrics){$scope.apiMetrics=accountApiMetrics}),$scope.createApp=function(){var button=$(".js-btn-create-new-app");button.button("loading"),builtApi.Application.addOne({body:{application:$scope.newApp}}).then(function(res){$scope.apps.unshift(res.application),$scope.myApps.unshift(res.application),$scope.resetAppEditMode(),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){button.button("reset"),$scope.validUid=null})},$scope.invokeAppEditMode=function(){$scope.searchApplicationText="",$scope.isAppInEditMode=!0,setTimeout(function(){$(".js-new-app-name-input").focus()},10)},$scope.resetAppEditMode=function(){$scope.isAppInEditMode=!1,$scope.newApp={}},$scope.validateUID=function(){var uid=$scope.newApp.uid;return _.isEmpty(uid)?void($scope.validUid=null):void($scope.validUid=null==uid.match(constants.regex.uid)?!1:!0)},$scope.autoFillUID=function(){$scope.newApp.uid=Utils.createUID($scope.newApp.name),$scope.validUid=null}}]},{1:172}],168:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService",function($scope,$location,$state,builtApi,Alert){var authtoken=$state.params.authtoken;$scope.transferStatus="checking",builtApi.Application.ownershipActivation({options:{authtoken:authtoken},body:{}}).then(function(res){$scope.transferStatus="success",Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){$scope.transferStatus="failed",Alert.notify({title:"Redirecting Failed",content:xhr.entity.error_message,type:"error"})})}]},{}],169:[function(require,module){"use strict";var appItemTemplate=require(2),transferOwnerShipModalTemplate=require(1);module.exports=["$state","$location","builtApi","appCacheService","alertService","utilsService","modalService","menuService","manageUtils","$timeout",function($state,$location,builtApi,appCacheService,Alert,Utils,Modal,Menu,manageUtils,$timeout){return{template:appItemTemplate,restrict:"A",replace:!0,link:function(scope,elem){function bindClicks(){$(elem).find(".js-menu-link").off("click").on("click",function(e){var restrictStatus=manageUtils.applications.checkRestriction($(e.currentTarget).data("menu-item").restrict,scope.isShared);return restrictStatus&&(appCacheService.set("currentApp",scope.app),manageUtils.setAppHeaders(scope.app)),restrictStatus})}var account=appCacheService.get("currentAccount")[0];scope.renameAppMode=!1,scope.appMenu=Menu.getMenu(scope.app.api_restriction).slice().reverse(),scope.isShared=account.name===scope.app.account_name?!1:!0,scope.stateQueryParam={api_key:scope.app.api_key,p:1},scope.checkKeyCode=function(e){13===e.keyCode?scope.renameApp(e):27===e.keyCode&&scope.resetRenameAppMode()},scope.invokeRenameAppMode=function(){scope.renameAppMode=!0,setTimeout(function(){$(elem).find(".js-rename-app-input").focus()},0)},scope.resetRenameAppMode=function(){scope.renameAppMode=!1},scope.deleteApp=function(){return Alert.confirm({title:"Are you sure you want to delete this application?",content:"All data within this application will permenantly be lost. This action cannot be undone."}).then(function(){builtApi.Application.deleteOne({headers:{application_api_key:scope.app.api_key,application_uid:scope.app.uid},options:{appUid:scope.app.uid}}).then(function(res){scope.apps.splice(scope.apps.indexOf(scope.app),1),scope.isShared||scope.myApps.splice(scope.myApps.indexOf(scope.app),1),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})}),!1},scope.renameApp=function(e){var newAppName=$.trim($(e.currentTarget).val());return""===newAppName||newAppName===scope.app.name?(scope.resetRenameAppMode(),!1):void builtApi.Application.editOne({headers:{application_api_key:scope.app.api_key,application_uid:scope.app.uid},options:{appUid:scope.app.uid},body:{app_api_key:scope.app.api_key,app_uid:scope.app.uid,application:{name:newAppName}}}).then(function(res){scope.resetRenameAppMode(),scope.app.name=newAppName,Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},scope.transferOwnerShip=function(){return Modal.openModal({email:"",app:scope.app},transferOwnerShipModalTemplate,transferOwnerShipCtrl,{size:"sm"}).then(function(res){Alert.notify({title:"Success",content:res.notice,type:"success"})}),!1};var transferOwnerShipCtrl=function($scope,$modalInstance,data){$scope.data=data;var app=data.app;$scope.tranfer=function(){$scope.ok()},$scope.ok=function(){return builtApi.Application.transferOwnerShip({headers:{application_api_key:app.api_key,application_uid:app.uid},options:{appUid:app.uid},body:{app_api_key:app.api_key,app_uid:app.uid,transfer_to:$scope.data.email}}).then(function(res){$modalInstance.close(res)},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"}),$modalInstance.dismiss("cancel")}),!1},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$timeout(function(){bindClicks()},0)}}}]},{1:174,2:170}],170:[function(require,module){module.exports='<div class="app-box">\n<div class="btn-group app-actions" ng-if="!isShared">\n <button class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">\n<i class="fa fa-caret-down"></i> \n</button>\n<ul class="dropdown-menu">\n \n<li>\n<a href="javascript:void(0)" ng-click="invokeRenameAppMode()"><i class="fa fa-pencil mr5"></i> Rename application</a>\n</li>\n<li>\n<a href="javascript:void(0)" ng-click="transferOwnerShip()"><i class="fa fa-legal mr5"></i> Transfer ownership</a>\n</li>\n<li>\n<a href="javascript:void(0)" ng-click="deleteApp()"><i class="fa fa-trash-o mr5"></i> Delete app</a>\n</li>\n</ul>\n</div>\n<div class="app-info">\n<div class="app-name">\n<div class="clearfix" ng-if="!renameAppMode">\n <a ui-sref="app.dashboard.classes-user-list({{stateQueryParam}})" href="js-menu-link" class="an-text text-ellipsis" title="{{app.name}}">{{app.name}}</a>\n</div>\n <input type="text" ng-value="app.name" class="new-app-name-input js-rename-app-input" ng-if="renameAppMode" ng-blur="renameApp($event)" ng-keyup="checkKeyCode($event)">\n</div>\n<div class="app-meta">\n<div class="text-ellipsis" title="{{app.uid}}">\n <span class="key">UID:</span> {{app.uid}}\n</div>\n<div>\n <span class="key">API key:</span> {{app.api_key}}\n</div>\n<div class="shared-icon" ng-if="isShared">\n<i class="fa fa-group"></i> Shared with you\n</div>\n</div>\n</div>\n<div class="app-menu">\n<div class="am-btns">\n<a class="btn js-menu-link" data-menu-item="{{m}}" ui-sref="{{m.state}}({{stateQueryParam}})" ng-repeat="m in appMenu" title="{{m.title}}" rel="tooltip" data-placement="bottom"><i class="fa {{m.icon}}"></i></a> \n</div>\n</div>\n</div>'},{}],171:[function(require,module){module.exports='<div id="main" role=\'main\'>\n<div class="dash-tool-bar application-dtb">\n<div class="container clearfix">\n<div class="count-wrap hidden-xs">\n <span>\n {{apps.length || \'No\'}} Application<span ng-if="apps.length != 1">s</span>\n</span> \n</div>\n<div class="search-wrap">\n<div class="icon-addon addon-md">\n <input type="text" placeholder="Search" class="form-control" ng-model="searchApplicationText">\n<label class="fa fa-search"></label> \n</div>\n</div>\n<div class="dash-btns">\n <a ng-click="invokeAppEditMode()" class="btn btn-labeled btn-primary hidden-xs">\n <span class="btn-label">\n<i class="fa fa-plus-square"></i> \n</span> \n Create new application\n</a> \n <a ng-click="invokeAppEditMode()" class="btn btn-primary visible-xs">\n<i class="fa fa-plus-square"></i> \n</a> \n</div>\n</div>\n</div>\n<div class="content animated fadeInDown">\n<div class="application-list-wrap with-dash-tool-bar">\n<div class="container">\n<div class="row applications-wrap">\n<div class="col-md-9">\n<div class="my-apps-wrap">\n<h3 ng-if="myApps.length"> My applications <span class="label label-default">{{myApps.length}}</span></h3>\n<div class="row">\n<div class="col-md-6 sample-app-wrap" ng-class="{\'hidden\': !isAppInEditMode}">\n<div class="app-box sample-app animated pulse" ng-class="{\'app-edit-mode\': isAppInEditMode}">\n<div class="app-info">\n<div class="new-app-text" ng-hide="isAppInEditMode" ng-click="invokeAppEditMode()">\n<i class="fa fa-plus"></i> \n New app\n</div>\n<div class="app-details" ng-show="isAppInEditMode">\n<form method="POST" ng-submit="createApp()">\n<div class="form-group">\n <input class="new-app-name-input js-new-app-name-input" ng-keyup="autoFillUID()" type="text" ng-model="newApp.name" required placeholder="Enter your app name">\n</div>\n<div class="form-group" ng-class="{\'has-error\':validUid == false, \'has-success\': validUid == true}">\n <input class="new-app-uid-input" ng-keyup="validateUID()" type="text" ng-model="newApp.uid" required placeholder="Enter your app UID">\n</div>\n<div class="form-actions clearfix">\n <button type="submit" class="btn btn-primary btn-xs pull-right js-btn-create-new-app" data-loading-text="Creating...">Create</button>\n <a class="btn btn-default btn-xs pull-left hand js-clear-app-form" ng-click="resetAppEditMode()">Cancel</a>\n</div>\n</form>\n</div>\n</div>\n<div class="app-menu">\n<div class="am-btns">\n<a ng-repeat="m in dummyAppMenu" class="btn" title="{{m.title}}"><i class="fa {{m.icon}}"></i></a> \n</div>\n</div>\n</div>\n</div>\n<div class="col-md-6" ng-show="myApps.length" ng-repeat="app in myApps | filter:searchApplicationText">\n<div app></div>\n</div>\n<div class="no-msg" ng-if="!myApps.length">\n You have not created any applications yet.\n</div>\n<div class="no-msg" ng-if="myApps.length">\n No apps found.\n</div>\n</div>\n</div>\n<div class="shared-apps-wrap" ng-if="sharedApps.length">\n<h3> Shared with me <span class="label label-default">{{sharedApps.length}}</span></h3>\n<div class="row">\n<div class="col-md-6" ng-repeat="app in sharedApps | filter:searchApplicationText">\n<div app></div>\n</div>\n<div class="no-msg">\n No shared apps found\n</div>\n</div>\n</div>\n</div>\n<div class="col-md-3">\n<h3 class="v-hidden">dum</h3>\n<div metrics-widget api-metrics="apiMetrics"></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n\n\n' },{}],172:[function(require,module){module.exports='<div class="modal-header">\n<h3 class="modal-title">Upload File</h3>\n</div>\n<div class="modal-body">\n<div class="row-fluid">\n<div class="span3">\n<div class="title">Name</div>\n</div>\n<div class="span9">\n <input type="text" class="c-a-name-input" ng-model="data.name">\n</div>\n</div>\n<div class="row-fluid">\n<div class="span3">\n<div class="title">UID</div>\n</div>\n<div class="span9">\n <input type="text" class="c-a-uid-input" ng-model="data.uid">\n</div>\n</div>\n\n</div>\n<div class="modal-footer">\n <button class="btn btn-primary" ng-click="ok()">Create</button>\n <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n</div>'},{}],173:[function(require,module){module.exports='<div id="main" role="main">\n \n<div id="content" class="container">\n<h2 ng-show="transferStatus===\'checking\'" class="no-msg">Please wait...</h2>\n<h2 ng-show="transferStatus===\'success\'" class="no-msg">\n <a href="/#/">Continue</a>\n</h2>\n<h2 ng-show="transferStatus===\'failed\'" class="no-msg">Something went wrong!</h2>\n</div>\n</div>'},{}],174:[function(require,module){module.exports='<form method="" action="" ng-submit="ok()">\n<div class="modal-header">\n<h3 class="modal-title">Transfer ownership</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Email</label>\n<div class="col-md-10">\n <input type="email" name="email" ng-model="data.email" required class="form-control">\n</div>\n</div>\n</fieldset>\n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</a> \n <button type="submit" class="btn btn-labeled btn-primary btn-sm pull-right">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span>\n Transfer\n</span> \n</button>\n</div>\n</div>\n</form>\n \n'},{}],175:[function(require,module){var angular=require(9),uiRouter=require(10),signinCtrl=require(3),signupCtrl=require(4),resetPasswordCtrl=require(2),appActivationCtrl=require(1),signinTemplate=require(7),signupTemplate=require(8),resetPasswordTemplate=require(6),appActivationTemplate=require(5);module.exports=angular.module("built.auth",[uiRouter]).controller("signinCtrl",signinCtrl).controller("signupCtrl",signupCtrl).controller("resetPasswordCtrl",resetPasswordCtrl).controller("appActivationCtrl",appActivationCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.signin",{url:"/",template:signinTemplate,resolvers:["serverConfig"],controller:"signinCtrl",data:{extraPage:!0,layout:{leftMenu:!1}}}).state("app.signup",{url:"/signup",template:signupTemplate,controller:"signupCtrl",resolvers:["serverConfig"],data:{extraPage:!0,layout:{leftMenu:!1}}}).state("app.systemResetPassword",{url:"/user/reset_password_submit/:authtoken",template:resetPasswordTemplate,controller:"resetPasswordCtrl",data:{extraPage:!0,layout:{leftMenu:!1}}}).state("app.appUserResetPassword",{url:"/application/users/reset_password/:authtoken",template:resetPasswordTemplate,controller:"resetPasswordCtrl",data:{appUser:!0,extraPage:!0,layout:{leftMenu:!1}}}).state("app.systemUserActivations",{url:"/activations/:authtoken",template:appActivationTemplate,controller:"appActivationCtrl",data:{extraPage:!0,layout:{leftMenu:!1}}}).state("app.appUserActivations",{url:"/application/users/:appUserUid/activate/:authtoken",template:appActivationTemplate,controller:"appActivationCtrl",data:{appUser:!0,extraPage:!0,layout:{leftMenu:!1}}})}])},{1:176,10:294,2:177,3:178,4:179,5:180,6:182,7:183,8:184,9:295}],176:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService",function($scope,$location,$state,builtApi,Alert){function userTypeAppActivationCall(){return isAppUser?builtApi.AppUserSession.activateAccount({options:{appUserUid:appUserUid,authtoken:authtoken}}):builtApi.SystemUserSession.activateAccount({options:{authtoken:authtoken}})}var appUserUid=$state.params.appUserUid,authtoken=$state.params.authtoken,isAppUser=$state.current.data.appUser;$scope.activationStatus="checking",userTypeAppActivationCall().then(function(res){isAppUser?$scope.activationStatus="success":$state.go("app.signin"),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){$scope.activationStatus="fail",Alert.notify({title:"Redirecting Failed",content:xhr.entity.error_message,type:"error"})})}]},{}],177:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService",function($scope,$location,$state,builtApi,Alert){function validatePswd(){return!_.isEmpty($scope.userCredential.password)&&!_.isEmpty($scope.userCredential.password_confirmation)}function matchPswd(){return $scope.userCredential.password===$scope.userCredential.password_confirmation}function userTypeResetPswdCall(){return isAppUser?builtApi.AppUserSession.resetPassword({body:{application_user:$scope.userCredential}}):builtApi.SystemUserSession.resetPassword({body:{user:$scope.userCredential}})}var authtoken=$state.params.authtoken,btnSubmit=$("#reset-form .btn-submit"),isAppUser=$state.current.data.appUser;$scope.onSetPassword=!1,$scope.userCredential={password:"",password_confirmation:"",reset_password_token:authtoken},$scope.cancel=function(){$state.go("app.signin")},$scope.resetPswd=function(){btnSubmit.button("loading"),validatePswd()?matchPswd()?userTypeResetPswdCall().then(function(res){isAppUser?$scope.onSetPassword=!0:$state.go("app.signin"),btnSubmit.button("reset"),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){btnSubmit.button("reset"),Alert.notify({title:"Password reset failed",content:xhr.entity.error_message,type:"error"})}):(btnSubmit.button("reset"),Alert.notify({title:"Password reset failed",content:"password and confirmation must match",type:"error"})):(btnSubmit.button("reset"),Alert.notify({title:"Password reset failed",content:"Invalid!",type:"error"}))}}]},{}],178:[function(require,module){"use strict";var forgotPassword=require(1);module.exports=["$scope","$state","builtApi","appCacheService","alertService","utilsService","modalService","serverConfig",function($scope,$state,builtApi,appCacheService,Alert,Utils,Modal,serverConfig){var btnSubmit=$("#login-form .btn-submit");btnSubmit.button("loading..."),$scope.resReg=serverConfig.restricted_registration,appCacheService.then("currentUser",builtApi.SystemUserSession.get()).then(function(){$state.go("app.applications")},function(){}).finally(function(){btnSubmit.button("reset")}),$scope.login=function(credentials){btnSubmit.button("loading");var params={body:{user:{email:credentials.email,password:credentials.password}}};builtApi.SystemUserSession.login(params).then(function(){$state.go("app.applications")},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){btnSubmit.button("reset")})},$scope.signUp=function(){$state.go("app.signup")},$scope.showResetPasswordModal=function(){return Modal.openModal({email:""},forgotPassword,ModalInstanceCtrl,{size:"sm"}).then(function(res){builtApi.SystemUserSession.postForgotPassword({body:{user:res}}).then(function(res){Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})}),!1};var ModalInstanceCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.ok=function(){$modalInstance.close($scope.data)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:181}],179:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","serverConfig",function($scope,$location,$state,builtApi,Alert,Utils,serverConfig){var btnSubmit=$("#sign-up .btn-signup"),searchQuery=Utils.queryDecoder(window.location.search)||void 0;$scope.userData={},$scope.btnLabel={loading:serverConfig.restricted_registration?"Creating...":"Signing up...",normal:serverConfig.restricted_registration?"Create Account":"Start building killer apps!"},searchQuery&&(searchQuery.email&&($scope.userData.email=searchQuery.email),searchQuery.referral&&($scope.userData.promo_code=searchQuery.referral)),$scope.createAccount=function(){if(btnSubmit.button("loading"),$("#divSmallBoxes").empty(),searchQuery){var source=searchQuery.blt_source||searchQuery.utm_campaign;if($.trim(source)&&($scope.userData.source=source),serverConfig.onPremise===!1&&searchQuery.plan_id&&($scope.userData.plan_id=searchQuery.plan_id),!$scope.termAgreement)return Alert.notify({title:"Terms and conditions agreement",content:"In order to use built.io, you must agree to the terms of service and privacy policy.",type:"error"}),btnSubmit.button("reset"),!1;var params={body:{user:$scope.userData}};builtApi.SystemUserSession.signUp(params).then(function(res){$state.go("app.signin"),setTimeout(function(){Alert.notify({title:"Success",content:res.notice,type:"success"})},1e3)},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){btnSubmit.button("reset")})}}}]},{}],180:[function(require,module){module.exports='<div id="main" role="main">\n \n<div id="content" class="container">\n<h2 ng-show="activationStatus==\'checking\'" class="no-msg">Please wait...</h2>\n<h2 ng-show="activationStatus==\'success\'" class="no-msg">Your account has been activated successfully!</h2>\n<h2 ng-show="activationStatus==\'fail\'" class="no-msg">Please try again later!</h2>\n</div>\n</div>'},{}],181:[function(require,module){module.exports='<form class="forgot-password-ov" action="" method="" ng-submit="ok()">\n<div class="modal-header">\n <button type="button" class="close" ng-click=\'cancel()\'>\n &times;\n</button>\n<h4 class="modal-title">Send password reset request</h4>\n</div>\n<div class="modal-body">\n<fieldset>\n<div class="form-group">\n <label class="no-placeholder">Enter your email address</label>\n <input required ng-model="data.email" name="email" type="email" class="form-control" placeholder="Enter your email address">\n</div>\n</fieldset>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</a> \n <button type="submit" class="btn btn-labeled btn-primary btn-sm pull-right">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n Send Request\n</button>\n</div>\n</div>\n</form>\n'},{}],182:[function(require,module){module.exports='<div id="main" role="main">\n \n<div id="content" class="container">\n\n<div class="row">\n<div class="col-md-5 col-md-offset-4 col-lg-4 col-sm-6 col-sm-offset-3" ng-hide="onSetPassword">\n<div class="well no-padding login-form-wrap">\n<form id="reset-form" ng-submit="resetPswd()" name="resetForm" class="form-signin smart-form client-form" role="form" method="POST" action="">\n<header>\n Reset your password\n</header>\n<fieldset>\n<section>\n <label class="label">New password</label>\n<label class="input"><i class="icon-append fa fa-lock"></i> \n <input type="password" name="password" ng-model="userCredential.password" required autofocus>\n</label> \n</section>\n<section>\n <label class="label">Confirm Password</label>\n<label class="input"><i class="icon-append fa fa-lock"></i> \n <input type="password" name="password" ng-model="userCredential.password_confirmation">\n</label> \n</section>\n</fieldset>\n<footer>\n <button type="submit" class="btn btn-primary btn-submit" data-loading-text="Reseting...">Reset</button>\n <button ng-click="cancel()" class="btn btn-default">Cancel</button>\n</footer>\n</form>\n</div>\n</div>\n<h2 ng-show="onSetPassword">\n Your password has been updated successfully!\n</h2>\n</div>\n</div>\n</div>'},{}],183:[function(require,module){module.exports='<div id="main" role="main">\n \n<div id="content" class="container">\n\n<div class="row">\n<div class="col-md-5 col-md-offset-4 col-lg-4 col-sm-6 col-sm-offset-3">\n<div class="well no-padding login-form-wrap">\n<form id="login-form" ng-submit="login(credentials)" name="loginForm" class="form-signin smart-form client-form" role="form" method="POST" action="">\n<header>\n Sign In\n</header>\n\n<fieldset>\n\n<section>\n <label class="label">E-mail</label>\n<label class="input"><i class="icon-append fa fa-user"></i> \n <input type="email" name="email" id="email" ng-model="credentials.email" required autofocus>\n<b class="tooltip tooltip-top-right"><i class="fa fa-user txt-color-teal"></i> Please enter your email address</b>\n</label> \n</section>\n\n<section>\n <label class="label">Password</label>\n<label class="input"><i class="icon-append fa fa-lock"></i> \n <input type="password" name="password" ng-model="credentials.password">\n<b class="tooltip tooltip-top-right"><i class="fa fa-lock txt-color-teal"></i> Enter your password</b> \n</label> \n</section>\n<section>\n<div class="mbm"> <a href="#" ng-click=\'showResetPasswordModal()\' class="btn-forgot-password font-size-14">Forgot your password?</a> \n</div>\n</section>\n</fieldset>\n<footer>\n <button type="submit" class="btn btn-primary btn-submit" data-loading-text="Signing in...">\n Sign in\n</button>\n</footer>\n</form>\n</div>\n\n<div ng-if="resReg" class="lf-info">\n If you are considering dedicated built.io, <a href="#/signup">sign up</a> now for a 90-day free trial of built.io running on VMware vCloud Air.\n</div>\n</div>\n</div>\n</div>\n</div>'},{}],184:[function(require,module){module.exports='<div id="main" role="main">\n \n<div id="content" class="container">\n<div class="col-md-offset-3 col-md-6 col-sm-offset-3 col-sm-6">\n<div class="well no-padding signup-form-wrap">\n<form action="" method="POST" ng-submit="createAccount(userData)" id="sign-up" class="smart-form client-form user-signup-form">\n<header ng-if="resReg">\n<h5>\n Sign up now for a 90-day free trial of built.io running on VMware vCloud Air.\n</h5>\n</header>\n\n<header ng-if="!resReg">\n Sign up\n</header>\n\n<fieldset>\n<section>\n <label class="label">E-mail <sup class="mandatory-star">*</sup></label>\n<label class="input"><i class="icon-append fa fa-envelope"></i> \n <input required type="email" name="email" placeholder="Email address" ng-model="userData.email">\n <b class="tooltip tooltip-bottom-right">Needed to verify your account</b></label> \n</section>\n\n<section>\n <label class="label">Password <sup class="mandatory-star">*</sup></label>\n<label class="input"><i class="icon-append fa fa-lock"></i> \n <input required type="password" name="password" placeholder="Password" id="password" ng-model="userData.password">\n <b class="tooltip tooltip-bottom-right">Don\'t forget your password</b></label> \n</section>\n\n<section>\n <label class="label">Confirm password <sup class="mandatory-star">*</sup></label>\n<label class="input"><i class="icon-append fa fa-lock"></i> \n <input required type="password" name="passwordConfirm" placeholder="Confirm password" ng-model="userData.password_confirmation">\n <b class="tooltip tooltip-bottom-right">Don\'t forget your password</b></label> \n</section>\n</fieldset>\n\n<fieldset>\n<div class="row">\n<section class="col col-6">\n <label class="label">First name</label>\n <label class="input">\n <input type="text" name="firstname" placeholder="First name" ng-model="userData.first_name">\n</label> \n</section>\n<section class="col col-6">\n <label class="label">Last name</label>\n <label class="input">\n <input type="text" name="lastname" placeholder="Last name" ng-model="userData.last_name">\n</label> \n</section>\n</div>\n\n<div class="row">\n<section class="col col-6">\n <label class="label">Company</label>\n <label class="input">\n <input type="text" name="company" placeholder="Company" ng-model="userData.company">\n</label> \n</section>\n<section class="col col-6" ng-if="userData.promo_code">\n <label class="label">Referral</label>\n <label class="input">\n <input type="text" placeholder="Referral" ng-model="userData.promo_code">\n</label> \n</section>\n</div>\n\n<section>\n <label class="checkbox">\n <input type="checkbox" ng-model="termAgreement" name="terms" id="terms">\n<i></i> \n I agree to built.io <a href="http://www.built.io/termsofservice.html" target="_blank">Terms of Service</a> and <a href="http://www.built.io/privacy.html" target="_blank">Privacy Policy</a>.\n</label> \n</section>\n</fieldset>\n<footer>\n <button type="submit" data-loading-text="{{btnLabel.loading}}" class="btn btn-primary btn-signup">\n {{btnLabel.normal}}\n</button>\n</footer>\n</form>\n</div>\n</div>\n \n</div>\n</div>'},{}],185:[function(require,module){"use strict";var angular=require(5),resolvers=(require(4),require(1)),baseCtrl=require(2),baseTemplate=require(3);module.exports=angular.module("built.base",["ui.router"]).controller("baseCtrl",baseCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app",{template:baseTemplate,resolve:resolvers.resolve(["currentApiHost","serverConfig","plans"]),controller:"baseCtrl"})}])},{1:221,2:186,3:187,4:239,5:295}],186:[function(require,module){module.exports=["$scope","$location","$state","$timeout","builtApi","appCacheService","utilsService","serverConfig","plans","alertService","libraryService","$injector","manageUtils",function($scope,$location,$state,$timeout,builtApi,appCacheService,Utils,serverConfig,plans,Alert,LIB,$injector,manageUtils){function getCurrentUser(){var user=appCacheService.get("currentUser");$scope.userName=null,$timeout(function(){$scope.userName=user?"undefined"!=typeof user.first_name&&"undefined"!=typeof user.last_name?user.first_name+" "+user.last_name:user.email:null},500)}function getCurrentApp(){var app=appCacheService.get("currentApp");$scope.currentApp=app?app:null}function getAllApps(){var apps=appCacheService.get("apps");$scope.apps=[],$scope.apps=apps?apps:[]}function getMap(){if(serverConfig.features.maps.enabled&&!goForMap){var key="";serverConfig.features.maps.meta.api_key&&(key="?key="+serverConfig.features.maps.meta.api_key),$injector.invoke(["thirdPartyService",function(TPS){TPS.getMap(key).then(function(MapStatus){goForMap=MapStatus,LIB.register("googleMaps")})}])}}$scope.resReg=serverConfig.restricted_registration,$scope.year=(new Date).getFullYear(),$scope.showAllApps=function(){$state.go("app.applications")},$scope.openApp=function(api_key){manageUtils.cache.clearAppHeaderKeys(),manageUtils.cache.clearAppRelatedCache();var currentApp=appCacheService.set("currentApp",_.find($scope.apps,function(app){return app.api_key===api_key}));return manageUtils.setAppHeaders(currentApp),$state.go("app.dashboard.classes-user-list",{api_key:api_key,p:1}),!1},$scope.logout=function(){appCacheService.remove("currentUser"),builtApi.SystemUserSession.logout().then(function(){$location.search({}),$state.go("app.signin")},function(){})},$scope.$on("currentUser",function(){getCurrentUser()}),$scope.$on("currentApp",function(){getCurrentApp()}),$scope.$on("apps",function(){getAllApps()}),getCurrentUser(),getAllApps(),getCurrentApp();var goForMap=!1;getMap()}]},{}],187:[function(require,module){module.exports='<!-- #HEADER -->\n<header id="header">\n<div id="logo-group">\n <a id="logo" href="" ng-click="showAllApps()">\n <img src="assets/images/logo/built_io_logo.png" alt="built.io">\n</a> \n</div>\n\n <span id="extr-page-header-space" ng-if="\'app.signup\' | isState">\n <span class="hidden-mobile">Already registered?</span>\n <a ui-sref="app.signin" class="btn btn-danger">Sign In</a>\n</span> \n\n <span id="extr-page-header-space" ng-if="(\'app.signin\' | isState) && !resReg">\n <span class="hidden-mobile">New to built.io?</span>\n <a ui-sref="app.signup" class="btn btn-danger">Create account</a>\n</span> \n\n <!-- #PROJECTS: projects dropdown -->\n<div class="project-context hidden-xs header-app-dropdown" data-bc="{{currentApp.name}}" ng-if=\'userName && currentApp\'>\n\n <span class="label">Applications:</span>\n <span class="project-selector dropdown-toggle" data-toggle="dropdown">{{currentApp.name}}</span>\n<i class="fa fa-angle-down ml5"></i> \n\n<ul class="dropdown-menu">\n<li ng-repeat="app in apps" ng-class="{\'active\' : app.api_key === currentApp.api_key}">\n <a ng-click="openApp(app.api_key)" href="" title="{{app.name}}">{{app.name}}</a>\n</li>\n</ul>\n \n\n</div>\n \n\n <!-- #TOGGLE LAYOUT BUTTONS -->\n \n<div class="pull-right header-buttons">\n<div id="hide-menu" class="btn-header pull-right visible-sm visible-xs" ng-if=\'currentApp\'>\n <span>\n <a href="#" data-action="toggleMenu" title="Collapse Menu">\n<i class="fa fa-reorder"></i> \n</a> \n</span> \n</div>\n \n \n<div class="project-context pull-right animated fadeIn account-dropdown" ng-if=\'userName\'>\n <span class="label">User:</span>\n <span class="project-selector dropdown-toggle" data-toggle="dropdown">{{userName}}<i class="fa fa-angle-down"></i></span> \n<ul class="dropdown-menu">\n<li>\n<a ui-sref="app.account.personalInfo"><i class="fa fa-cogs"></i> Account settings</a>\n</li>\n<li>\n<a ng-click="logout()" title="Sign Out"><i class="fa fa-sign-out"></i> Sign out</a>\n</li>\n</ul>\n</div>\n\n</div>\n \n\n</header>\n\n<div ui-view></div>\n\n<div class="page-loader body-loader">\n<div class="logo-cubes">\n<div class="cube-1 cube"></div>\n<div class="cube-2 cube"></div>\n<div class="cube-3 cube"></div>\n</div>\n</div>\n\n<footer class="page-footer">\n<div class="row">\n<div class="col-xs-12">\n<p class="footer-text">\n <span>\n <a href="mailto:support@built.io" target="_blank">support@built.io</a>\n |\n <a href="http://built.io/privacy.html" target="_blank">Privacy Policy</a>\n |\n <a href="http://built.io/termsofservice.html" target="_blank">Terms of Service</a>\n |\n</span> \n <span>\n Copyright © {{year}}\n <a href="http://www.raweng.com/" target="_blank" class="">\n raw engineering, inc.\n</a> \n</span> \n <span>\n All Rights Reserved.\n</span> \n</p>\n</div>\n</div>\n</footer>'},{}],188:[function(require,module){"use strict";var angular=require(8),resolvers=(require(10),require(1)),list=require(6),create=require(2),edit=require(4),createTemplate=require(3),editTemplate=require(5),listTemplate=require(7);require(9),module.exports=angular.module("built.classes",["ui.router"]).controller("classListCtrl",list).controller("classCreateCtrl",create).controller("classEditCtrl",edit).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.classes-edit",{url:"/classes/:class_uid/edit",template:editTemplate,resolve:resolvers.resolve(["currentClass","currentFieldTypes"]),controller:"classEditCtrl",data:{breadcrumbs:[{name:"Classes"},{name:"{{currentClass.title}}"},{name:"Edit"}]}}).state("app.dashboard.classes-create",{url:"/classes/create",template:createTemplate,resolve:resolvers.resolve(["currentFieldTypes"]),controller:"classCreateCtrl",data:{breadcrumbs:[{name:"Classes"},{name:"Create"}]}}).state("app.dashboard.classes-user-list",{url:"/classes/list?p",template:listTemplate,controller:"classListCtrl",data:{breadcrumbs:[{name:"Classes"},{name:"User classes"}]}}).state("app.dashboard.classes-system-list",{url:"/classes/system/list?p",template:listTemplate,controller:"classListCtrl",data:{breadcrumbs:[{name:"Classes"},{name:"System classes"}]}})}]).run(["$rootScope","menuService",function($rootScope,menu){var menuItem={id:"classes",title:"Data",order:1,icon:"fa-sitemap",sub_menu:[{id:"user-classes",title:"User classes",state:"app.dashboard.classes-user-list"},{id:"system-classes",title:"System classes",state:"app.dashboard.classes-system-list"}]};menu.add(menuItem)}])},{1:221,10:294,2:189,3:190,4:191,5:192,6:193,7:195,8:295,9:291}],189:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","currentFieldTypes","constants","previousStateService",function($scope,$location,$state,builtApi,Alert,Utils,currentFieldTypes,constants,previousState){function navigateToList(){previousState.go("app.dashboard.classes-user-list",{api_key:$scope.apikey,p:1})}var apiKey=$state.params.api_key;$scope.apikey=apiKey,$scope.clssdata={uid:"",title:"",schema:[]},$scope.dtypes=currentFieldTypes,$scope.classSteps=constants.classes.creationSteps,$scope.activeStep=$scope.classSteps[0],$scope.btnStatus=!1,$scope.changeStep=function(step){$scope.activeStep=step},$scope.createClass=function(){if($scope.btnStatus=!0,_.isEmpty($scope.clssdata))alert("Inputs are incomplete");else{var params={body:{"class":$scope.clssdata,app_api_key:apiKey}};builtApi.Classes.addOne(params).then(function(res){$scope.btnStatus=!1,Alert.notify({title:"Success",content:res.notice,type:"success"}),navigateToList()},function(xhr){$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr,params.body.class.schema),type:"error"})})}},$scope.cancel=function(){navigateToList()}}]},{}],190:[function(require,module){module.exports='<div class="well well-sm max-width-1000 class-crud-wrap">\n<div class="form-actions form-actions-top mb20">\n<ul class="bootstrapWizard form-wizard clearfix">\n<li ng-class="{\'active\': activeStep == classSteps[0]}">\n <a data-toggle="tab" ng-click="changeStep(classSteps[0])"><span class="step">1</span> <span class="title">Enter class title and UID</span></a> \n</li>\n<li ng-class="{\'active\': activeStep == classSteps[1]}">\n <a ng-click="changeStep(classSteps[1])" data-toggle="tab"><span class="step">2</span> <span class="title">Add fields</span></a> \n</li>\n<li ng-class="{\'active\': activeStep == classSteps[2]}">\n <a ng-click="changeStep(classSteps[2])" data-toggle="tab"><span class="step">3</span> <span class="title">Configure</span></a> \n</li>\n</ul>\n</div>\n<div classbuilder clssdata="clssdata" dtypes="dtypes" data-id="{{clssdata}}" apikey="apikey" active-step="activeStep" class-steps="classSteps"></div>\n<div class="form-actions">\n<div class="button-wrap">\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left" ng-show="activeStep == classSteps[0]">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n\n <button ng-click=\'changeStep(classSteps[classSteps.indexOf(activeStep) -1])\' ng-show="activeStep != classSteps[0]" class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Back\n</button>\n <button ng-click=\'changeStep(classSteps[classSteps.indexOf(activeStep) + 1])\' ng-show="activeStep != classSteps[2]" class="btn btn-labeled btn-default btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-arrow-right"></i> \n</span> Next\n</button>\n\n <button btn-loader="btnStatus" loading-text="Creating..." ng-click=\'createClass()\' class="btn btn-labeled btn-primary btn-sm pull-right" ng-show="activeStep == classSteps[2]">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> <span class="js-btn-text">Create</span>\n</button>\n</div>\n</div>\n</div>' },{}],191:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","currentClass","currentFieldTypes","alertService","utilsService","constants","previousStateService",function($scope,$location,$state,builtApi,currentClass,currentFieldTypes,Alert,Utils,constants,previousState){function navigateToList(){previousState.go("app.dashboard.classes-user-list",{api_key:apiKey,p:1})}var apiKey=$state.params.api_key,classUid=($state.params.app_uid,$state.params.class_uid);$scope.apikey=apiKey,$scope.clssdata=_.cloneDeep(currentClass),$scope.dtypes=currentFieldTypes,$scope.classSteps=constants.classes.creationSteps,$scope.activeStep=$scope.classSteps[0],$scope.btnStatus=!1,$scope.changeStep=function(step){$scope.activeStep=step},$scope.save=function(){$scope.btnStatus=!0;var params={options:{classUid:classUid},body:{app_api_key:apiKey,"class":$scope.clssdata}};builtApi.Classes.editOne(params).then(function(res){Alert.notify({title:res.notice,content:"Success",type:"success"}),navigateToList()},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr,params.body.class.schema),type:"error"})}).finally(function(){$scope.btnStatus=!1})},$scope.cancel=function(){navigateToList()}}]},{}],192:[function(require,module){module.exports='<div class="well well-sm max-width-1000 class-crud-wrap">\n<div class="form-actions form-actions-top mb20">\n<ul class="bootstrapWizard form-wizard clearfix">\n<li ng-class="{\'active\': activeStep == classSteps[0]}">\n <a data-toggle="tab" ng-click="changeStep(classSteps[0])"><span class="step">1</span> <span class="title">Edit class title</span></a> \n</li>\n<li ng-class="{\'active\': activeStep == classSteps[1]}">\n <a ng-click="changeStep(classSteps[1])" data-toggle="tab"><span class="step">2</span> <span class="title">Edit fields</span></a> \n</li>\n<li ng-class="{\'active\': activeStep == classSteps[2]}">\n <a ng-click="changeStep(classSteps[2])" data-toggle="tab"><span class="step">3</span> <span class="title">Configure</span></a> \n</li>\n</ul>\n</div>\n<div classbuilder clssdata="clssdata" dtypes="dtypes" data-id="{{clssdata}}" apikey="apikey" active-step="activeStep" class-steps="classSteps"></div>\n<div class="form-actions">\n<div class="button-wrap">\n <button ng-click=\'changeStep(classSteps[classSteps.indexOf(activeStep) + 1])\' ng-show="activeStep != classSteps[2]" class="btn btn-labeled btn-default btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-arrow-right"></i> \n</span> Next\n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left" ng-show="activeStep == classSteps[0]">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n <button btn-loader="btnStatus" loading-text="Saving..." ng-click=\'save()\' class="btn btn-labeled btn-primary btn-sm pull-right" ng-show="activeStep == classSteps[2]">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Done</span>\n</button>\n\n <button ng-click=\'changeStep(classSteps[classSteps.indexOf(activeStep) -1])\' ng-show="activeStep != classSteps[0]" class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Back\n</button>\n \n\n</div>\n</div>\n</div>'},{}],193:[function(require,module){"use strict";require(2);var importClassModalTemplate=require(1);module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","appCacheService","postMessageUploadService","modalService","currentApiHost","currentUser","constants","$sce","dataGridService",function($scope,$location,$state,builtApi,Alert,Utils,appCacheService,postMessageUploadService,Modal,currentApiHost,currentUser,constants,$sce,dataGrid){function importClass(){Modal.openModal({file:"",randvalue:Utils.getRand(),apihost:currentApiHost.api_host,apiKey:$scope.apiKey,authtoken:currentUser.authtoken,url:"classes/import"},importClassModalTemplate,ModalInstanceCtrl,{size:"sm"}).then(function(res){$scope.listRows.unshift(res.class),$scope.myItemsTotalCount++,Alert.notify({title:"Success",content:res.notice,type:"success"})})}function navigateTo(act,params){$state.go("app.dashboard.classes-"+act,params)}function deleteClass(klass){var index=$scope.listRows.indexOf(klass);Alert.confirm({title:"Delete class",content:"Are you sure you want to delete this class?"}).then(function(){var params={};params.options={classUid:klass.uid},builtApi.Classes.deleteOne(params).then(function(data){$scope.listRows.splice(index,1),Alert.notify({title:"Success",content:data.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}var previousFilter=($state.params.tenant_uid,void 0),dataTableContainer=$(".data-tbl");$scope.apiKey=$state.params.api_key,$scope.isSystemClassesList=$state.is("app.dashboard.classes-system-list"),$scope.actions=["edit","export","delete"],$scope.loading=!0,$scope.isSystemClassesList&&($scope.cannotCreate=!0),$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.classColumns=[{label:"Title",key:"title"},{label:"Updated at",key:"updated_at"}],dataGrid.addResponsiveAttrs($scope.classColumns,"phone");var pagno=parseInt($location.search().p)-1;$scope.myPageItemsCount=constants.queryLimit,$scope.mycurrentPage=(0>pagno?0:pagno)||0,$scope.onServerSideItemsRequested=function(currentPage,filterBy,filterByFields,orderBy,orderByReverse,myPageItemsCount){$scope.loading=!0;var skip=currentPage*myPageItemsCount;dataGrid.checkFilter(filterBy,previousFilter,$scope.mycurrentPage,skip);var params={options:{query:{skip:skip,limit:myPageItemsCount,include_count:!0,desc:"created_at",query:{inbuilt_klass:$scope.isSystemClassesList}}}};filterBy&&(params.options.query.query.$or=[{uid:{$regex:filterBy,$options:"i"}},{title:{$regex:filterBy,$options:"i"}}]),params.options.query.query=JSON.stringify(params.options.query.query),builtApi.Classes.getAll(params).then(function(data){$scope.listRows=data.classes,$scope.myItemsTotalCount=data.count,dataGrid.initFootable(dataTableContainer),$location.search({p:currentPage+1})}).finally(function(){$scope.loading=!1})},$scope.action=function(act,klass){if("delete"===act)return void deleteClass(klass);if("export"===act)return void $("#export-class-iframe").attr("src","/"+constants.api_version+"/classes/"+klass.uid+"/export.json?APPLICATION_API_KEY="+$scope.apiKey);if("import"===act)return void importClass();var params={};"create"===act?appCacheService.remove("currentClass"):(params.class_uid=klass.uid,appCacheService.set("currentClass",klass)),navigateTo(act,params)};var ModalInstanceCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.progressstatus=!1,$scope.ok=function(){$scope.progressstatus=!0,$(".modal-body").find("form").trigger("submit"),postMessageUploadService.getPostMessage(data.randvalue).then(function(res){$scope.progressstatus=!1,res.hasOwnProperty("error_code")?Alert.notify({title:res.error_message,content:Utils.parseError(res),type:"error"}):$modalInstance.close(res)},function(xhr){$scope.progressstatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$scope.showObjects=function(klass){$state.go("app.dashboard.classes-objects-list.all",{class_uid:klass.uid})}}]},{1:194,2:304}],194:[function(require,module){module.exports='<div class="modal-header">\n<h3 class="modal-title">Import class</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div ng-show="progressstatus" class="object-asset-progress">\n<div class="col-md-12">\n<div class="progress progress-striped active">\n<div class="progress-bar bg-color-darken" role="progressbar" style="width: 100%">\n Uploading...\n</div>\n</div>\n</div>\n</div>\n<div class="form-group" ng-show="!progressstatus" file-upload authtoken="data.authtoken" url="data.url" apikey="data.apiKey" apihost="data.apihost" randvalue="data.randvalue">\n<div class="col-md-12">\n<p>Choose a class JSON file</p>\n</div>\n<div class="col-md-12">\n <input type="file" class="btn btn-default" name="import" required>\n</div>\n</div>\n</fieldset>\n</div>\n</div>\n<div class="modal-footer">\n<div class="button-wrap">\n <a ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</a> \n <button btn-loader="btnStatus" loading-text="Creating..." ng-click=\'ok()\' class="btn btn-labeled btn-primary btn-sm pull-right">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Import\n</span> \n</button>\n</div>\n</div>'},{}],195:[function(require,module){module.exports='<div class="button-wrap mb10" ng-hide="cannotCreate">\n <a ng-click="action(\'create\')" class="btn btn-labeled btn-primary pull-left mr10">\n<span class="btn-label"><i class="fa fa-plus-square"></i> \n</span> Create new class\n</a> \n <a ng-click="action(\'import\')" class="btn btn-labeled btn-default pull-left">\n<span class="btn-label"><i class="fa fa-download"></i> \n</span> Import Class\n</a> \n</div>\n<div class="data-tbl-wrap">\n<table tr-ng-grid="" items="listRows" class="table data-tbl" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="mycurrentPage" on-data-required="onServerSideItemsRequested(mycurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-tools">\n<th colspan="100">\n<div class="row">\n<div class="col-md-4 col-xs-12">\n<form class="form-inline table-search-wrap" ng-show="!selectedRows.length">\n<div tr-ng-grid-global-filter=""></div>\n</form>\n</div>\n<div class="col-md-8 col-xs-12">\n<span tr-ng-grid-pager=""></span> \n</div>\n</div>\n</th>\n</tr>\n<tr class="dt-head-tr" ng-show="loading || listRows.length">\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}} \n</div>\n</th>\n<th class="dt-actions-th">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody ng-show="!loading">\n<tr>\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}">\n <a class="dt-clickable" ng-href="#/dashboard/{{apiKey}}/classes/{{gridItem.uid}}/objects/all?p=1" ng-if="column.key===\'title\'">{{dataGrid.getCell(gridItem, column)}}</a>\n <span ng-if="column.key===\'updated_at\'">{{dataGrid.getCell(gridItem, column)}}</span>\n</td>\n<td>\n<span title="{{act}}" ng-repeat=\'act in actions\' ng-click=\'action(act, gridItem)\' class="hand fa fa-lg edit_evnt ml10 dt-action-item" ng-class="{\'fa-share\':act == \'export\',\'fa-pencil\' : act == \'edit\', \'fa-trash-o\' : act == \'delete\'}"></span> \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table>\n<div class="tab-loader" ng-show="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="no-msg" ng-show="!loading && !listRows.length">\n No classes found.\n</div>\n <iframe id="export-class-iframe" height="0" width="0" class="hidden"></iframe>\n</div>\n'},{}],196:[function(require,module){module.exports=["$scope","$state","$timeout","appCacheService","menuService","currentApp","builtApi","manageUtils",function($scope,$state,$timeout,appCacheService,menu,currentApp,builtApi,manageUtils){function setTenant(){$scope.tenant=appCacheService.get("currentTenant")}function bindClicks(){$("#left-panel .js-menu-link").off("click").on("click",function(e){return manageUtils.applications.checkRestriction($(e.currentTarget).data("menu-item").restrict,$scope.isShared)})}$scope.currentApp=currentApp,$scope.menu=menu.getMenu(currentApp.api_restriction),$scope.tenant="",$scope.stateQueryParam={api_key:currentApp.api_key,p:1},$scope.isActiveMenu=function(s){return $state.is(s)},$scope.checkIfParent=function(menu){return menu.hasOwnProperty("sub_menu")},$scope.toggleMenu=function(e,menu){return menu.sub_menu?(e.stopPropagation(),!1):void 0},$scope.isActive=function(uid){return $scope.activeMenu===uid?!0:!1},$scope.$on("currentTenant",function(event,args){$scope.tenant=args.data}),setTenant(),$timeout(function(){initApp.leftNav(),bindClicks()},0)}]},{}],197:[function(require,module){"use strict";var angular=require(4),resolvers=(require(5),require(1)),dashboardCtrl=require(2),dashboardTemplate=require(3);module.exports=angular.module("built.dashboard",["ui.router"]).controller("dashboardCtrl",dashboardCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard",{url:"/dashboard/:api_key","abstract":!0,template:dashboardTemplate,resolve:resolvers.resolve(["currentApp","currentUser","accounts","apps"]),controller:"dashboardCtrl"})}])},{1:221,2:196,3:198,4:295,5:294}],198:[function(require,module){module.exports='<aside id="left-panel">\n \n<div class="login-info hidden">\n<p>\n<i class="fa fa-lg fa-fw fa-list-alt mr5 form-icon"></i> \n <span class="menu-item-parent">Forms</span>\n<i class="fa fa-angle ml5"></i> \n</p>\n</div>\n<nav>\n<ul>\n<li ng-repeat="menuItem in menu" ng-class="{\'active\': isActiveMenu(menuItem.state)}">\n <a ng-if="menuItem.sub_menu.length" title="{{menuItem.title}}" ng-click="toggleMenu($event, menuItem)">\n<i class="fa fa-lg fa-fw {{menuItem.icon}}"></i> \n <span ng-class="{\'menu-item-parent\':checkIfParent(menuItem)}">{{menuItem.title}}</span>\n</a> \n\n <a ng-if="!menuItem.sub_menu.length" class="js-menu-link" data-menu-item="{{menuItem}}" ui-sref="{{menuItem.state}}({{stateQueryParam}})" title="{{menuItem.title}}">\n<i class="fa fa-lg fa-fw {{menuItem.icon}}"></i> \n <span ng-class="{\'menu-item-parent\':checkIfParent(menuItem)}">{{menuItem.title}}</span>\n</a> \n\n<ul ng-if="menuItem.sub_menu.length">\n<li ng-repeat="subMenuItem in menuItem.sub_menu" ng-class="{\'active\': isActiveMenu(subMenuItem.state)}">\n <a class="js-menu-link" data-menu-item="{{menuItem}}" ui-sref="{{subMenuItem.state}}({{stateQueryParam}})">{{subMenuItem.title}}</a>\n</li>\n</ul>\n</li>\n<li class="dash-app-info">\n <a>\n<i class="fa fa-lg fa-fw fa-cube"></i> \n Application info\n</a> \n<ul>\n<dl>\n<dt>API Key</dt>\n<dd>{{currentApp.api_key}}</dd>\n<dt>UID</dt>\n<dd class="text-ellipsis" title="{{currentApp.uid}}">{{currentApp.uid}}</dd>\n<dt ng-if="tenant">Tenant</dt>\n<dd ng-if="tenant" class="text-ellipsis" title="{{currentApp.uid}}">{{tenant}}</dd>\n</dl>\n</ul>\n</li>\n</ul>\n</nav>\n</aside>\n\n\n<div id="main">\n\n \n<div id="ribbon">\n<div breadcrumbs></div>\n</div>\n \n<div id="content" ui-view class="animated fadeInDown">\n\n</div>\n</div>'},{}],199:[function(require){""!=window.location.pathname&&"/"!=window.location.pathname&&(window.location.href=window.location.protocol+"//"+window.location.host+"/"+window.location.search+"#/"+window.location.pathname),_=require(19),R=require(22),moment=require(20);var angular=require(18),uiRouter=require(17);require(21);var base=require(10),core=require(2),auth=require(9),global=require(13),applications=require(8),dashboard=require(12),classes=require(11),objects=require(14),uploads=require(16),settings=require(15),account=require(6),apiMetrics=require(7),plugins=[],analytics=require(1);plugins.push(analytics.name);var extensions=require(3);plugins.push(extensions.name);var notifications=require(5);plugins.push(notifications.name);var integration=require(4);plugins.push(integration.name);var baseModules=[uiRouter,"trNgGrid",analytics.name,extensions.name,integration.name,notifications.name,core.name,global.name,base.name,auth.name,applications.name,dashboard.name,classes.name,objects.name,uploads.name,settings.name,account.name,apiMetrics.name];baseModules=baseModules.concat(plugins),angular.module("manage",baseModules).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/applications").when("","/")}]).run(["$rootScope","utilsService","$state","appCacheService","alertService","$q","builtApi","previousStateService","manageUtils",function($rootScope,Utils,$state,appCacheService,Alert,$q,builtApi,previousStateService,manageUtils){function showInitialMessages(){if(!_.isEmpty(appCacheService.get("currentAccount"))){var InfoMsg=appCacheService.get("currentAccount")[0].info_messages;_.isEmpty(InfoMsg)||infoMessageFlag||(Utils.setInfoMessage(InfoMsg,"info"),infoMessageFlag=!0);var warningMsg=appCacheService.get("currentAccount")[0].warning_messages;_.isEmpty(warningMsg)||warningMessageFlag||(Utils.setInfoMessage(warningMsg,"warning"),warningMessageFlag=!0)}}var infoMessageFlag=!1,warningMessageFlag=!1,h=$("html");h.addClass("its-"+Utils.getOS()),void 0==document.createElement("input").placeholder&&h.addClass("no-placeholder-support"),setTimeout(function(){h.addClass("app-loaded"),pageSetUp(),initApp.addDeviceType(),initApp.menuPos(),initApp.domReadyMisc(),initApp.SmartActions()},400),$rootScope.$on("currentApp",function(){appCacheService.remove("assetGallery:all","assetGallery:images","assetGallery:videos")}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){return 401===Utils.getPath(error,"status.code")?void $state.go("app.signin"):void Alert.notify({title:Utils.getPath(error,"entity.error_message")||"Something went wrong!",content:error.entity?Utils.parseError(error.entity):error.message,type:"error",delay:3e4})}),$rootScope.$on("$stateChangeStart",function(event,next){switch(next.name){case"app.signin":appCacheService.remove("currentApp","currentUser","currentAccount");break;case"app.applications":appCacheService.remove("apps","currentApp"),manageUtils.cache.clearAppHeaderKeys(),manageUtils.cache.clearAppRelatedCache();break;case"app.dashboard.classes-user-list":case"app.dashboard.classes-system-list":appCacheService.remove("currentClass","currentObject");break;case"app.dashboard.classes-objects-list":case"app.dashboard.classes-objects-list.all":appCacheService.remove("currentObject")}}),$rootScope.$on("$stateChangeSuccess",function(event,next,toParams,fromState,fromParams){previousStateService.set(fromState.name,fromParams),showInitialMessages(),Utils.scrollTo(0,$("html, body")),$("body").removeClass("nooverflow"),$("#divSmallBoxes").empty(),_.isUndefined(Utils.getPath(next.data,"extraPage"))?h.removeAttr("id").removeClass("animated fadeInDown"):h.attr("id","extr-page").addClass("animated fadeInDown").removeClass("hidden-menu-mobile-lock"),_.isUndefined(Utils.getPath(next.data,"layout.leftMenu"))||next.data.layout.leftMenu!==!1?h.removeClass("no-left-menu"):h.addClass("no-left-menu")})}])},{1:1,10:185,11:188,12:197,13:204,14:220,15:234,16:238,17:239,18:295,19:312,2:39,20:314,21:316,22:322,3:137,4:141,5:366,6:145,7:163,8:166,9:175}],200:[function(require,module){"use strict";var bookmarksTemplate=require(1);module.exports=["utilsService","alertService","$timeout",function(Utils,Alert,$timeout){return{template:bookmarksTemplate,restrict:"A",replace:!0,scope:{onSelectBookmark:"=",onSaveBookmark:"=",onDeleteBookmark:"=",bookmarks:"="},link:function(scope,elem){scope.showBookmarkTag=!0,scope.inputbookmark="",scope.selectedBookmark=null,scope.loading=!1,scope.showBookmarkInput=function(){scope.showBookmarkTag=!1,$timeout(function(){$(elem).find(".js-bookmark-input").focus()},0)},scope.checkKey=function(e){13===e.keyCode&&scope.saveBookmark()},scope.hideBookmarkInput=function(){scope.showBookmarkTag=!0,scope.inputbookmark=""},scope.selectBookmark=function(bookmark){scope.onSelectBookmark(bookmark),scope.selectedBookmark=bookmark},scope.saveBookmark=function(){scope.loading||(scope.loading=!0,scope.onSaveBookmark(scope.inputbookmark,function(){scope.hideBookmarkInput(),scope.loading=!1}))},scope.removeBookmark=function(bookmark){Alert.confirm({title:"Delete Bookmark",content:"Are you sure you want to delete this bookmark?"}).then(function(){scope.onDeleteBookmark(bookmark,$.noop)})}}}}]},{1:202}],201:[function(require,module){"use strict";var metricsWidget=require(1);module.exports=["alertService","utilsService","libraryService","constants","$injector","$timeout",function(Alert,Utils,LIB,constants,$injector,$timeout){return{template:metricsWidget,restrict:"A",replace:!0,scope:{apiMetrics:"="},link:function(scope,elem){function loadApiMetrics(){scope.$watch("apiMetrics",function(){scope.apiMetrics&&(scope.metricsLoader=!1,$timeout(function(){showGraph()},10))})}function prepareGraphData(){var rawGraphData=$.extend(!0,{},scope.apiMetrics),metrics=rawGraphData.range.stats;scope.modGraphData.length=0;for(var key in metrics){var series=[],stat=metrics[key];for(var date in stat)series.push([new Date(date).getTime(),stat[date]]);scope.modGraphData.push({name:key.charAt(0).toUpperCase()+key.slice(1).replace("_"," "),data:series,el:$("."+key+"-graph")})}scope.modGraphData.sort(function(a,b){return a.name>b.name})}function renderGraphs(){for(var i=0;i<scope.modGraphData.length;i++){var hcOptions=$.extend(!0,{},lineChartData);hcOptions.colors=[constants.charts.colorPalette[i]],hcOptions.series=[scope.modGraphData[i]],hcOptions.legend={enabled:!1},$injector.invoke(["chartService",function(hc){hc.drawChart({el:scope.modGraphData[i].el,options:hcOptions})}])}}function showGraph(){LIB.get("charts").then(function(){prepareGraphData(),renderGraphs()})}var lineChartData=_.cloneDeep(constants.charts.defaults.line);scope.metricsLoader=!0,scope.modGraphData=[],lineChartData.chart.height=100,lineChartData.yAxis.endOnTick=!1,lineChartData.yAxis.maxPadding=.7,lineChartData.xAxis.title.text="",lineChartData.yAxis.title.text="",lineChartData.xAxis.labels.enabled=!1,lineChartData.yAxis.labels.enabled=!1,lineChartData.tooltip={positioner:function(){return{x:0,y:-10}},shadow:!1,borderWidth:0,hideDelay:0,backgroundColor:"transparent"},loadApiMetrics(),scope.humanizeNumber=function(v){return Utils.humanizeNumber(v)},scope.getSize=function(mb){return 0==mb?mb:Utils.bytesToSize(1024*mb*1024)},$(elem).find(".w-graph").hover(function(){$(this).parent().find(".w-stat").addClass("v-hidden")},function(){$(this).parent().find(".w-stat").removeClass("v-hidden")})}}}]},{1:203}],202:[function(require,module){module.exports='<div class="bookmarks-wrap">\n<div class="btn-group" ng-show="showBookmarkTag">\n <button class="btn btn-default btn-sm dropdown-toggle btn-choose-bookmark" data-toggle="dropdown">\n <span class="b-name text-ellipsis">Bookmarks</span>\n<span class="caret"></span> \n</button>\n <a ng-click="showBookmarkInput()" ng-if="showBookmarkTag" class="btn btn-default btn-sm">\n<i class="fa fa-plus fa-fw"></i> \n</a> \n<ul class="dropdown-menu">\n<li ng-repeat="bookmark in bookmarks" ng-if="bookmarks.length">\n <a ng-click="selectBookmark(bookmark)" href="" title="{{bookmark.name}}">\n {{bookmark.name}}\n</a> \n<span class="btn-delete-bookmark" ng-click="removeBookmark(bookmark)"><i class="fa fa-times"></i></span> \n</li>\n<li ng-if="!bookmarks.length">\n<p> No bookmarks yet</p>\n</li>\n</ul>\n</div>\n<div class="input-group" ng-show="!showBookmarkTag">\n <input type="text" autofocus class="input-sm form-control js-bookmark-input" ng-model="inputbookmark" ng-value="inputbookmark" placeholder="Save bookmark as..." ng-keyup="checkKey($event)" /> \n<div class="input-group-btn">\n <button class="btn btn-default btn-sm" type="button" ng-click="hideBookmarkInput()" ng-disabled="loading">\n<i class="fa fa-times fa-fw"></i> \n</button>\n <button class="btn btn-primary btn-sm" type="button" ng-click="saveBookmark()" ng-disabled="loading">\n<i ng-if="!loading" class="fa fa-check fa-fw"></i> \n<i ng-if="loading" class="fa fa-spin fa-circle-o-notch fa-fw"></i> \n</button>\n</div>\n</div>\n</div>\n'},{}],203:[function(require,module){module.exports='<div class="widget-box acc-metrics-widget">\n<div class="w-head clearfix">\n<p>Last 30 Days</p>\n <a ui-sref="app.account.plans">Upgrade</a>\n\n</div>\n<div class="w-body">\n<div class="tab-loader" ng-if="metricsLoader">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div ng-hide="metricsLoader" class="animated fadeIn">\n<div class="w-block">\n<p class="w-stat">\n <span class="value">{{humanizeNumber(apiMetrics.range.overall.total_api_usage)}}</span>\n <span class="key">API calls made</span> \n</p>\n<div class="w-graph">\n\n<div class="api_usage-graph"></div>\n</div>\n</div>\n<div class="w-block mt10">\n<p class="w-stat">\n <span class="value">{{humanizeNumber(apiMetrics.range.overall.push_notifications)}}</span>\n <span class="key">push notifications sent</span> \n</p>\n<div class="w-graph">\n<div class="push_notifications-graph"></div>\n</div>\n</div>\n<div class="w-block mt10">\n<p class="w-stat">\n <span class="value">{{getSize(apiMetrics.range.overall.file_storage_used)}}</span>\n <span class="key">storage used</span> \n</p>\n</div>\n<div class="w-block">\n</div>\n</div>\n</div>\n<div class="w-foot">\n <a ui-sref="app.account.metrics">View full account metrics</a>\n</div>\n</div>'},{}],204:[function(require,module){"use strict";var menu=require(5),thirdParty=require(7),dataGridService=require(3),previousStateService=require(6),manageUtils=require(4),bookmarks=require(1),metricsWidget=require(2);module.exports=angular.module("built.global",[]).directive("bookmarks",bookmarks).directive("metricsWidget",metricsWidget).service("menuService",menu).service("manageUtils",manageUtils).service("thirdPartyService",thirdParty).service("previousStateService",previousStateService).service("dataGridService",dataGridService)},{1:200,2:201,3:205,4:206,5:207,6:208,7:209}],205:[function(require,module){"use strict";module.exports=[function(){function formatDate(date){return moment(new Date(date)).format("ddd MMM Do, YYYY, h:mm:ss a")}function isDate(key){var dateKeys=["created_at","updated_at"];return dateKeys.indexOf(key)>=0}this.getCell=function(gridItem,column){return isDate(column.key)?formatDate(gridItem[column.key]):gridItem[column.key]},this.addResponsiveAttrs=function(columns,attrs){_.map(columns,function(column){column.dataHide=attrs}),columns[0].dataHide="",columns[0].dataToggle=!0},this.initFootable=function(el){el.footable(),setTimeout(function(){el.trigger("footable_redraw")},1e3)},this.checkFilter=function(filterBy,previousFilter,currentPage,skip){return _.isEmpty(filterBy)&&(filterBy=void 0),filterBy!=previousFilter&&(previousFilter=filterBy,0!=currentPage)?(skip=0,currentPage=0,!0):void 0},this.selectRow=function(isSelected,gridItem,selectedRows){isSelected?selectedRows.push(gridItem):selectedRows.splice(selectedRows.indexOf(gridItem),1)},this.selectAllRows=function(areAllSelected,selectedRows,listRows){areAllSelected?selectedRows.push.apply(selectedRows,listRows):selectedRows.splice(0,selectedRows.length)},this.resetRows=function(areAllSelected,selectedRows){areAllSelected=!1,selectedRows.length=0}}]},{}],206:[function(require,module){"use strict";module.exports=["appCacheService","builtApi","alertService","$state","constants","utilsService",function(appCacheService,builtApi,Alert,$state,constants,Utils){function configureSelectField(field,typeData){return field.data_type="select",field.field_metadata.__blt_data={__blt_select:typeData},field}this.applications={getRestrictionMsg:function(isShared){return{title:isShared?"Access denied":"Upgrade your plan!",classes:isShared?"fa-exclamation-triangle txt-color-redLight":"fa-lock txt-color-green",content:isShared?"You do not have sufficient permissions to access this functionaliy. Please contact the owner of this application.":"This feature is not available in your current plan or your API limit for this feature is exceeded. Do you want to upgrade your plan?"}},checkRestriction:function(restricted,isShared){if(!restricted)return!0;var options=this.getRestrictionMsg(isShared);return isShared?Alert.confirm(_.extend({buttons:"[Dismiss]"},options)):Alert.confirm(options).then(function(){$state.go("app.account.plans")}),!1}},this.cache={clearAppHeaderKeys:function(){builtApi.removeHeaderKey("application_api_key"),builtApi.removeHeaderKey("tenant_uid")},clearAppRelatedCache:function(){appCacheService.remove("currentClass","currentObject","events","segBookmarks","currentTenant")}},this.klass={isAppUser:function(uid){return"built_io_application_user"===uid},isBltInstallation:function(uid){return"built_io_installation_data"===uid},schema:{addDeviceType:function(schema){var index=_.findIndex(schema,{uid:"device_type"});return schema[index]=configureSelectField(schema[index],constants.deviceType),schema},addTimezone:function(schema){var index=_.findIndex(schema,{uid:"timezone"}); return schema[index]=configureSelectField(schema[index],constants.timezones),schema},addPasswordField:function(schema){var index=_.findIndex(schema,{uid:"password"});return schema.splice(index+1,0,{display_name:"Password confirmation",uid:"password_confirmation",data_type:"password",field_metadata:{inbuilt_field:!0},unique:null,mandatory:!1,multiple:!1}),schema}}},this.setAppHeaders=function(app){var headers={application_api_key:app.api_key};Utils.isTenantSet(app)?(headers.tenant_uid=app.discrete_variables.tenant,appCacheService.set("currentTenant",headers.tenant_uid)):appCacheService.remove("currentTenant"),builtApi.setHeaders(headers)}}]},{}],207:[function(require,module){"use strict";module.exports=["$q","appCacheService","utilsService",function($q,appCacheService){function sortMenu(menu){return menu.sort(function(a,b){return a.order>b.order?1:a.order<b.order?-1:0}),menu}function addInitialMenuState(menu){return menu.forEach(function(menuItem){!menuItem.state&&menuItem.sub_menu&&menuItem.sub_menu.length&&(menuItem.state=menuItem.sub_menu[0].state)}),menu}function checkFeatures(menu){var features=appCacheService.get("serverConfig").features;return menu=menu.filter(function(m){return features[m.id]?features[m.id].enabled:!0})}function checkAPIRestriction(menu,apiRestriction){return menu.forEach(function(menuItem){_.has(apiRestriction,menuItem.id)&&apiRestriction[menuItem.id]===!0&&(menuItem.restrict=!0)}),menu}var menu=[],makeMenu=R.compose(checkFeatures,addInitialMenuState,sortMenu);this.getMenu=function(apiRestriction){var clonedMenu=_.map(menu,function(menuItem){return _.cloneDeep(menuItem)}),madeMenu=makeMenu(clonedMenu);return apiRestriction&&checkAPIRestriction(madeMenu,apiRestriction),clonedMenu},this.add=function(menuItem){menu.push(menuItem)}}]},{}],208:[function(require,module){"use strict";module.exports=["$state",function($state){var previousStateName="",previousParams="";this.go=function(fallbackStateName,fallbackParams){var state=_.isEmpty(previousStateName)?fallbackStateName:previousStateName,params=_.isEmpty(previousStateName)?fallbackParams:previousParams;$state.go(state,params)},this.set=function(stateName,params){previousStateName=stateName,previousParams=params}}]},{}],209:[function(require,module){"use strict";module.exports=["$q",function($q){var mapRetryCount=0,deferred=$q.defer();this.getMap=function(key){{var mapScript=window.location.protocol+"//www.google.com/jsapi"+key;$.getScript(mapScript).done(function(){google.load("maps","3",{other_params:"sensor=false&libraries=drawing",callback:function(){deferred.resolve(!0)}})}).fail(function(){3>mapRetryCount&&this.getMap(),mapRetryCount++})}return deferred.promise}}]},{}],210:[function(require,module){"use strict";module.exports=["$scope","$state","currentUser","builtApi","appCacheService","currentClass","currentApiHost","alertService","utilsService","modalService","appAclService","constants","previousStateService","manageUtils",function($scope,$state,currentUser,builtApi,appCacheService,currentClass,currentApiHost,Alert,Utils,Modal,appAclService,constants,previousState,manageUtils){function navigateToList(){previousState.go("app.dashboard.classes-objects-list.all",{class_uid:classUid,p:1})}var classUid=currentClass.uid,apiKey=$state.params.api_key;$scope.btnStatus=!1,$scope.viewonly=!1,$scope.mclass=currentClass,manageUtils.klass.isAppUser(currentClass.uid)&&($scope.mclass.schema=manageUtils.klass.schema.addDeviceType(currentClass.schema),$scope.mclass.schema=manageUtils.klass.schema.addPasswordField(currentClass.schema)),manageUtils.klass.isBltInstallation(currentClass.uid)&&($scope.mclass.schema=manageUtils.klass.schema.addDeviceType(currentClass.schema),$scope.mclass.schema=manageUtils.klass.schema.addTimezone(currentClass.schema)),$scope.mobject={ACL:constants.defaultACL,published:!0,__loc:null},$scope.apikey=apiKey,$scope.authtoken=currentUser.authtoken,$scope.apihost=currentApiHost.api_host,$scope.create=function(){$scope.btnStatus=!0;var params={options:{classUid:classUid},body:{class_uid:classUid,app_api_key:apiKey,object:$scope.mobject}};builtApi.Objects.addOne(params).then(function(data){Alert.notify({title:"Success",content:data.notice,type:"success"}),navigateToList()},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})}).finally(function(){$scope.btnStatus=!1})},$scope.cancel=function(){navigateToList()},$scope.configureObjAcl=function(){Modal.openModal({ACL:_.cloneDeep($scope.mobject.ACL),isClass:!0,esckey:!1,apiKey:apiKey,rights:["read","update","delete"]},appAclService.aclOverlayTemplate,appAclService.aclCtrl).then(function(ObjAcl){$scope.mobject.ACL=ObjAcl.ACL})}}]},{}],211:[function(require,module){module.exports='<section id="widget-grid" class="form-builder-widget-grid">\n \n<div class="row fb-row">\n \n<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fb-article">\n\n<div class="jarviswidget jarviswidget-color-blueDark jarviswidget-form-builder" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false">\n\n<header>\n<h2>New Object</h2>\n</header>\n \n\n<div>\n \n<div class="jarviswidget-editbox">\n \n <input class="form-control" type="text">\n</div>\n \n\n \n<div class="widget-body">\n<div class="widget-body-toolbar">\n<div class="button-wrap">\n <button ng-if="!singleton" ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n <button btn-loader="btnStatus" loading-text="Creating..." ng-click=\'create()\' class="btn btn-labeled btn-primary btn-sm pull-right ml10">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Create</span>\n</button>\n <button ng-click=\'configureObjAcl()\' class="btn btn-labeled bg-color-blue txt-color-white btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-lock"></i> \n</span> Configure ACL\n</button>\n</div>\n</div>\n<div formbuilder cls="mclass" classes="mclasses" obj="mobject" apikey="apikey" authtoken="authtoken" apihost="apihost" class="form-builder-wrap" viewonly="viewonly"></div>\n<div class="widget-footer">\n<div class="button-wrap button-wrap-bottom">\n <button btn-loader="btnStatus" loading-text="Creating..." ng-click=\'create()\' class="btn btn-labeled btn-primary btn-sm pull-right ml10">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Create</span>\n</button>\n <button ng-if="!singleton" ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>\n</div>\n \n</div>\n \n</div>\n \n</article>\n \n</div>\n \n</section>\n'},{}],212:[function(require,module){"use strict";module.exports=["$scope","$state","currentUser","builtApi","currentClass","currentObject","currentApiHost","alertService","utilsService","appAclService","modalService","constants","previousStateService","manageUtils",function($scope,$state,currentUser,builtApi,currentClass,currentObject,currentApiHost,Alert,Utils,appAclService,Modal,constants,previousState,manageUtils){function removeEmail(){delete $scope.mobject.email,$scope.mclass.schema.splice(_.findIndex($scope.mclass.schema,function(field){return"email"==field.uid}),1)}function navigateToList(){previousState.go("app.dashboard.classes-objects-list.all",{class_uid:classUid,p:1})}var classUid=$state.params.class_uid,objectUid=$state.params.obj_uid,apiKey=$state.params.api_key;$scope.viewonly=!1,$scope.mclass=_.cloneDeep(currentClass),$scope.mobject=_.cloneDeep(currentObject),manageUtils.klass.isAppUser($scope.mclass.uid)&&(_.isEmpty($scope.mobject.email)&&removeEmail(),$scope.mclass.schema=manageUtils.klass.schema.addDeviceType($scope.mclass.schema),$scope.mclass.schema=manageUtils.klass.schema.addPasswordField($scope.mclass.schema)),manageUtils.klass.isBltInstallation($scope.mclass.uid)&&($scope.mclass.schema=manageUtils.klass.schema.addDeviceType($scope.mclass.schema),$scope.mclass.schema=manageUtils.klass.schema.addTimezone($scope.mclass.schema)),$scope.mobject.ACL=$scope.mobject.ACL?$scope.mobject.ACL:_.cloneDeep(constants.defaultACL),$scope.apikey=apiKey,$scope.authtoken=currentUser.authtoken,$scope.apihost=currentApiHost.api_host,$scope.btnStatus=!1,$scope.save=function(){$scope.btnStatus=!0;var params={options:{classUid:classUid,objectUid:objectUid},body:{class_uid:classUid,app_api_key:apiKey,object_uid:objectUid,object:$scope.mobject}};builtApi.Objects.editOne(params).then(function(data){Alert.notify({title:data.notice,content:"Success",type:"success"}),navigateToList()},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})}).finally(function(){$scope.btnStatus=!1})},$scope.cancel=function(){navigateToList()},$scope.configureObjAcl=function(){Modal.openModal({ACL:$scope.mobject.ACL,esckey:!1,rights:["read","update","delete"]},appAclService.aclOverlayTemplate,appAclService.aclCtrl,{keyboard:!1}).then(function(res){$scope.mobject.ACL=res.ACL})}}]},{}],213:[function(require,module){module.exports='<section id="widget-grid" class="form-builder-widget-grid">\n \n<div class="row fb-row">\n \n<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fb-article">\n\n<div class="jarviswidget jarviswidget-color-blueDark jarviswidget-form-builder" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false">\n\n<header>\n<h2>{{mclass.title}}</h2>\n</header>\n \n\n<div>\n \n<div class="jarviswidget-editbox">\n \n <input class="form-control" type="text">\n</div>\n \n\n \n<div class="widget-body">\n<div class="widget-body-toolbar">\n<div class="button-wrap">\n <button btn-loader="btnStatus" loading-text="Saving..." ng-click=\'save()\' class="btn btn-labeled btn-primary btn-sm pull-right ml10">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Save</span>\n</button>\n <button ng-if="!singleton" ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n <button ng-click=\'configureObjAcl()\' class="btn btn-labeled bg-color-blue txt-color-white btn-sm pull-right">\n<span class="btn-label"><i class="fa fa-lock"></i> \n</span> Configure ACL\n</button>\n</div>\n</div>\n<div formbuilder cls="mclass" classes="mclasses" obj="mobject" apikey="apikey" authtoken="authtoken" apihost="apihost" class="form-builder-wrap" viewonly="viewonly">+</div>\n<div class="widget-footer">\n<div class="button-wrap button-wrap-bottom">\n <button btn-loader="btnStatus" loading-text="Saving..." ng-click=\'save()\' class="btn btn-labeled btn-primary btn-sm pull-right ml10">\n<span class="btn-label"><i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Save</span>\n</button>\n <button ng-if="!singleton" ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n \n</div>\n</div>\n</div>\n \n</div>\n \n</div>\n \n</article>\n \n</div>\n \n</section>\n'},{}],214:[function(require,module){"use strict";module.exports=["$scope","$state","$location","currentUser","currentClass","builtApi","appCacheService","$q","alertService","utilsService","constants","dataGridService","$stateParams","tip",function($scope,$state,$location,currentUser,currentClass,builtApi,appCacheService,$q,Alert,Utils,constants,dataGrid,$stateParams,TIP){function checkFirstObjectIfEmpty(){return _.isEmpty($scope.intermediateQuery[0]._value[0]._key)&&_.isEmpty($scope.intermediateQuery[0]._value[0]._value)}function deleteObject(gridItem){var index=$scope.listRows.indexOf(gridItem),uid=gridItem.uid;Alert.confirm({title:"Delete object",content:"Are you sure you want to delete this object?"}).then(function(){builtApi.Objects.deleteOne({options:{classUid:classUid,objectUid:uid}}).then(function(data){resetRows(),$scope.listRows.splice(index,1),$scope.myItemsTotalCount-=1,Alert.notify({title:data.notice,content:"Success",type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}function getObjects(){$scope.myFilterBy=null,$scope.myCurrentPage=0,$scope.onServerSideItemsRequested(0,void 0,void 0,void 0,void 0,$scope.myPageItemsCount,void 0)}function resetRows(){$scope.areAllSelected=!1,$scope.selectedRows.length=0}function navigateTo(act,params){$state.go("app.dashboard.classes-objects-"+act,params)}function formatClassResult(state){return" <small class='text-muted'>Class:</small> "+state.text}var classUid=($state.params.api_key,$state.params.class_uid),previousFilter=void 0,dataTableContainer=$(".data-tbl"),classSelectBox=$(".objects-wrap .js-class-select-box"),searchObjectSelct=$("#js-search-object-select");$scope.currentClass=currentClass,$scope.actions=["view","edit","delete"],$scope.loading=!0;var advancedSearchParams=void 0,viewQueryNow=!1,myFilterBy=$location.search().search||void 0;$scope.viewableQuery=null,$scope.advancedSearch=!1,$scope.getQueryNow=!1,$scope.intermediateQuery=[],$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.classColumns=[],$scope.selectedRows=[],$scope.queryObjectType="all",$scope.myFilterBy=myFilterBy,previousFilter=myFilterBy,searchObjectSelct.val($scope.queryObjectType).select2({containerCssClass:"select2-sm",data:[{id:"all",text:"all"},{id:"published",text:"published"},{id:"unpublished",text:"unpublished"}]}).on("change",function(e){$scope.queryObjectType=e.val}),currentClass.hasOwnProperty("options")&&$scope.classColumns.push({label:currentClass.options.title,key:currentClass.options.title}),$scope.classColumns.push({label:"UID",key:"uid"},{label:"Created at",key:"created_at"},{label:"Updated at",key:"updated_at"}),dataGrid.addResponsiveAttrs($scope.classColumns,"phone, tablet");var pagno=parseInt($location.search().p)-1;$scope.myPageItemsCount=constants.queryLimit,$scope.myCurrentPage=(0>pagno?0:pagno)||0,$scope.$watch("selectedRows.length",function(newLength){newLength>0?$("#bulkDelete").show():$("#bulkDelete").hide()}),$scope.toggleAdvancedSearch=function(){TIP.destroyAll($(".query-builder")),$scope.advancedSearch=!$scope.advancedSearch,0==$scope.advancedSearch&&(advancedSearchParams=null,$location.search({p:1}),$scope.queryObjectType="all",getObjects())},$scope.bulkDelete=function(){Alert.confirm({title:"Delete objects",content:"Are you sure you want to delete selected objects?"}).then(function(){builtApi.Objects.deleteSelected({options:{classUid:classUid,query:JSON.stringify({uid:{$in:_.pluck($scope.selectedRows,"uid")}})}}).then(function(data){$scope.myItemsTotalCount-=$scope.selectedRows.length,$scope.selectedRows.map(function(selectedRow){$scope.listRows.splice($scope.listRows.indexOf(selectedRow),1)}),resetRows(),Alert.notify({title:"Success",content:data.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})},$scope.getAdvancedSearchQuery=function(){checkFirstObjectIfEmpty()?getObjects():$scope.getQueryNow=!0},$scope.viewQuery=function(){$scope.getQueryNow=!0,viewQueryNow=!0},$scope.hideViewableQuery=function(){viewQueryNow=!1,$scope.viewableQuery=null},$scope.getQueryCallback=function(getQuery){getQuery.then(function(res){viewQueryNow?$scope.viewableQuery=JSON.stringify(res):(advancedSearchParams=res,getObjects())},function(){}).finally(function(){$scope.getQueryNow=!1})},$scope.onServerSideItemsRequested=function(currentPage,filterBy,filterByFields,orderBy,orderByReverse,myPageItemsCount){$scope.loading=!0;var skip=currentPage*myPageItemsCount;resetRows(),dataGrid.checkFilter(filterBy,previousFilter,$scope.mycurrentPage,skip);var params={options:{classUid:classUid,query:{skip:skip,limit:myPageItemsCount,include_count:!0}}};switch(filterBy&&(params.options.query.typeahead=filterBy),advancedSearchParams&&(params.options.query.query=JSON.stringify(advancedSearchParams),delete params.options.query.typeahead),$scope.queryObjectType){case"all":params.options.query.include_unpublished=!0;break;case"published":break;case"unpublished":params.options.query.include_unpublished=!0,params.options.query.published=!1}builtApi.Objects.getAll(params).then(function(data){$scope.listRows=data.objects,$scope.myItemsTotalCount=data.count,dataGrid.initFootable(dataTableContainer),$("[rel=tooltip]").tooltip();var queryParams={p:currentPage+1};queryParams.search=!$scope.advancedSearch&&filterBy?filterBy:null,_.extend($state.params,queryParams),$location.search(queryParams)}).finally(function(){$scope.loading=!1})},$scope.action=function(act,object){if("delete"===act)return void deleteObject(object);var params={class_uid:classUid};"create"===act?appCacheService.remove("currentObject"):(params.obj_uid=object.uid,appCacheService.set("currentObject",object)),navigateTo(act,params)},classSelectBox.select2({minimumInputLength:1,formatSelection:formatClassResult,escapeMarkup:function(m){return m},initSelection:function(element,callback){return callback({id:classUid,text:currentClass.title})},query:function(query){Utils.getClassSearch(builtApi,query.term)().then(query.callback)}}),classSelectBox.on("change",function(){appCacheService.set("currentClass",classSelectBox.select2("data")),$state.go("app.dashboard.classes-objects-list.all",{class_uid:$(this).select2("val"),objectsType:"all",p:1,search:null})})}]},{}],215:[function(require,module){module.exports='<div class="tab-pane fade active in">\n<div class="button-wrap">\n <a ng-click=\'action("create")\' class="btn btn-labeled btn-primary pull-left">\n<span class="btn-label"><i class="fa fa-plus-square"></i> \n</span> Create new object\n</a> \n<div class="pull-right">\n<div class="js-class-select-box"></div>\n</div>\n</div>\n<div class="data-tbl-wrap">\n<table tr-ng-grid="" items="listRows" selected-items="selectedRows" class="table data-tbl" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="myCurrentPage" filter-by="myFilterBy" on-data-required="onServerSideItemsRequested(myCurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-tools">\n<th colspan="100">\n<div class="row">\n<div class="col-md-6 col-xs-12">\n <button class="btn btn-danger dt-action-btn" id="bulkDelete" ng-click="bulkDelete()" ng-show="selectedRows.length" rel="tooltip" data-placement="right" data-original-title="<i class=\'fa fa-exclaimation-triangle text-danger\'></i> Delete selected objects" data-html="true">\n<i class="fa fa-trash-o"></i> \n</button>\n<form class="form-inline table-search-wrap" ng-hide="advancedSearch || selectedRows.length">\n<div tr-ng-grid-global-filter=""></div>\n</form>\n <a ng-click="toggleAdvancedSearch()" class="btn-advanced-search" ng-show="!selectedRows.length">\n <span ng-if="advancedSearch">Hide a</span><span ng-if="!advancedSearch">A</span>dvanced search\n</a> \n</div>\n<div class="col-md-6 col-xs-12">\n<span tr-ng-grid-pager=""></span> \n</div>\n</div>\n</th>\n</tr>\n<tr ng-show="advancedSearch" class="advanced-search-wrap">\n<th colspan="100">\n<legend class="mb0">Advanced search on <input type="hidden" id="js-search-object-select"/> objects:</legend>\n<div ng-class="{\'false-hidden\': viewableQuery}">\n<div objects-query-builder="intermediateQuery" cls="currentClass" get-query-now="getQueryNow" get-query-callback="getQueryCallback" class="qb-responsive"></div>\n<div class=\'button-wrap\'>\n <a class=\'btn btn-primary btn-sm\' ng-click="getAdvancedSearchQuery()">Get objects</a>\n <a class=\'btn btn-default btn-sm ml5\' ng-click="viewQuery()">View query</a>\n</div>\n</div>\n<div class="view-query-wrap" ng-class="{\'hidden\': !viewableQuery}">\n<textarea class="form-control mt10" rows="3" ng-model="viewableQuery"></textarea> \n</div>\n<div class=\'button-wrap\' ng-class="{\'hidden\': !viewableQuery}">\n <a class=\'btn btn-default btn-sm\' ng-click="hideViewableQuery()">Hide query</a>\n</div>\n</th>\n</tr>\n<tr class="dt-head-tr" ng-show="loading || listRows.length">\n<th class="dt-checkbox-th">\n<div class="checkbox dt-checkbox">\n <label>\n <input class="checkbox style-0" type="checkbox" ng-model="areAllSelected" ng-change="dataGrid.selectAllRows(areAllSelected, selectedRows, listRows)">\n<span></span> \n</label> \n</div>\n</th>\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}}\n</div>\n</th>\n<th class="dt-actions-th">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody ng-show="!loading">\n<tr>\n<td>\n<div class="checkbox dt-checkbox">\n <label>\n <input class="checkbox style-0" type="checkbox" ng-model="isSelected" ng-checked="selectedRows.indexOf(gridItem)>=0" ng-change="dataGrid.selectRow(isSelected, gridItem, selectedRows)">\n<span></span> \n</label> \n</div>\n</td>\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}">\n {{dataGrid.getCell(gridItem, column)}}\n</td>\n<td>\n<span title="{{act}}" rel="tooltip" data-placement="bottom" ng-repeat=\'act in actions\' ng-click=\'action(act, gridItem)\' class="hand fa fa-lg edit_evnt ml10 dt-action-item" ng-class="{\'fa-eye\':act == \'view\',\'fa-pencil\' : act == \'edit\', \'fa-trash-o\' : act == \'delete\'}"></span> \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table> \n<div class="tab-loader" ng-show="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="no-msg" ng-show="!loading && !listRows.length">\n No objects found.\n</div>\n</div>\n</div>'},{}],216:[function(require,module){"use strict";module.exports=["$scope","$state",function($scope,$state){$scope.objectsType="all";var classUid=$state.params.class_uid;$scope.getObjectsType=function(type){$state.go("app.dashboard.classes-objects-list."+type,{class_uid:classUid})},$scope.$watch("selectedRows.length",function(newLength){newLength>0?$("#bulkDelete").show():$("#bulkDelete").hide()})}]},{}],217:[function(require,module){module.exports='<div class="objects-wrap">\n \n<div ui-view>\n</div>\n</div>'},{}],218:[function(require,module){module.exports='<section id="widget-grid" class="form-builder-widget-grid">\n \n<div class="row fb-row">\n \n<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12 fb-article">\n\n<div class="jarviswidget jarviswidget-color-blueDark jarviswidget-form-builder" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false">\n\n<header>\n<h2>{{mclass.title}}</h2>\n</header>\n \n\n<div>\n \n<div class="jarviswidget-editbox">\n \n <input class="form-control" type="text">\n</div>\n \n\n \n<div class="widget-body">\n<div class="widget-body-toolbar">\n<div class="button-wrap">\n <a ng-if="!singleton" ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Close\n</a> \n\n</div>\n</div>\n<div formbuilder cls="mclass" obj="mobject" apikey="apikey" authtoken="authtoken" apihost="apihost" viewonly="viewonly" classes="mclasses" class="form-builder-wrap"></div>\n<div class="widget-footer">\n<div class="button-wrap button-wrap-bottom">\n <a ng-if="!singleton" ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Close\n</a> \n\n</div>\n</div>\n</div>\n \n</div>\n \n</div>\n \n</article>\n \n</div>\n \n</section>'},{}],219:[function(require,module){"use strict";module.exports=["$scope","$state","currentUser","appCacheService","currentApp","currentClass","currentObject","currentApiHost","alertService","utilsService","previousStateService",function($scope,$state,currentUser,appCacheService,currentApp,currentClass,currentObject,currentApiHost,Alert,Utils,previousState){function navigateToList(){previousState.go("app.dashboard.classes-objects-list.all",{class_uid:classUid,p:1})}var apiKey=$state.params.api_key,headers={};headers.application_api_key=apiKey;{var classUid=currentClass.uid;currentObject.uid}$scope.mclass=currentClass,$scope.mobject=_.cloneDeep(currentObject),$scope.apikey=apiKey,$scope.authtoken=currentUser.authtoken,$scope.apihost=currentApiHost.api_host,$scope.viewonly=!0,$scope.cancel=function(){navigateToList()}}]},{}],220:[function(require,module){"use strict";var angular=require(13),uiRouter=require(12),resolvers=require(1),createCtrl=require(2),editCtrl=require(4),viewCtrl=require(11),listCtrl=require(6),objectsCtrl=require(8),listTemplate=require(7),viewTemplate=require(10),createTemplate=require(3),editTemplate=require(5),objectsTemplate=require(9); module.exports=angular.module("built.objects",[uiRouter]).controller("createCtrl",createCtrl).controller("editCtrl",editCtrl).controller("viewCtrl",viewCtrl).controller("listCtrl",listCtrl).controller("objectsCtrl",objectsCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.classes-objects-list",{url:"/classes/:class_uid/objects/all",template:objectsTemplate,resolve:resolvers.resolve(["currentClass"]),"abstract":!0}).state("app.dashboard.classes-objects-list.all",{url:"?p&search",template:listTemplate,controller:"listCtrl",data:{breadcrumbs:[{state:"app.dashboard.classes-user-list",name:"Classes",params:{p:1}},{name:"{{currentClass.title}}"},{name:"Objects"},{name:"All"}]}}).state("app.dashboard.classes-objects-view",{url:"/classes/:class_uid/objects/:obj_uid/view",template:viewTemplate,resolve:resolvers.resolve(["currentClass","currentObject"]),controller:"viewCtrl",data:{breadcrumbs:[{state:"app.dashboard.classes-user-list",name:"Classes",params:{p:1}},{name:"{{currentClass.title}}"},{state:"app.dashboard.classes-objects-list.all",name:"Objects",params:{class_uid:"{{currentClass.uid}}",p:1}},{name:"{{currentObject.uid}}"},{name:"View"}]}}).state("app.dashboard.classes-objects-create",{url:"/classes/:class_uid/objects/create",template:createTemplate,resolve:resolvers.resolve(["currentClass"]),controller:"createCtrl",data:{breadcrumbs:[{state:"app.dashboard.classes-user-list",name:"Classes",params:{p:1}},{name:"{{currentClass.title}}"},{state:"app.dashboard.classes-objects-list.all",name:"Objects",params:{class_uid:"{{currentClass.uid}}",p:1}},{name:"Create"}]}}).state("app.dashboard.classes-objects-edit",{url:"/classes/:class_uid/objects/:obj_uid/edit",template:editTemplate,resolve:resolvers.resolve(["currentClass","currentObject"]),controller:"editCtrl",data:{breadcrumbs:[{state:"app.dashboard.classes-user-list",name:"Classes",params:{p:1}},{name:"{{currentClass.title}}"},{state:"app.dashboard.classes-objects-list.all",name:"Objects",params:{class_uid:"{{currentClass.uid}}",p:1}},{name:"{{currentObject.uid}}"},{name:"Edit"}]}})}])},{1:221,10:218,11:219,12:239,13:295,2:210,3:211,4:212,5:213,6:214,7:215,8:216,9:217}],221:[function(require,module){"use strict";var R=require(1),resolvers={currentApiHost:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("currentApiHost")||appCacheService.then("currentApiHost",builtApi.ApiHost.getApiHost())}],events:["appCacheService","builtApi","$stateParams",function(appCacheService,builtApi){var params={options:{query:{}}};return appCacheService.get("events")||appCacheService.then("events",builtApi.Analytics.getEvents(params))}],funnels:["appCacheService","builtApi",function(appCacheService,builtApi){return builtApi.Analytics.getAnalytics({options:{eventType:"analytics/funnels"}})}],segBookmarks:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("segBookmarks")||appCacheService.then("segBookmarks",builtApi.Analytics.getAnalytics({options:{eventType:"analytics/segments"}}))}],serverConfig:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("serverConfig")||appCacheService.then("serverConfig",builtApi.ServerConfig.getServerConfig())}],paymentHistory:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.then("paymentHistory",builtApi.Accounts.getPaymentHistory())}],plans:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("plans")||appCacheService.then("plans",builtApi.Plans.getPlans())}],billingInfo:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.then("billingInfo",builtApi.Accounts.getBillingInfo())}],appSettings:["builtApi",function(builtApi){return builtApi.Application.getAppSettings({options:{settingType:"settings"}})}],collaborators:["builtApi",function(builtApi){return builtApi.Application.getAppSettings({options:{settingType:"collaborators"}})}],tenants:["builtApi",function(builtApi){return builtApi.Tenants.getAll()}],integration:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("integration")||appCacheService.then("integration",builtApi.Integration.get())}],notificationCredentials:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("notificationCredentials")||appCacheService.then("notificationCredentials",builtApi.Notifications.getCredentialsDetails())}],currentUser:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("currentUser")||appCacheService.then("currentUser",builtApi.SystemUserSession.get())}],accounts:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("currentAccount")||appCacheService.then("currentAccount",builtApi.Accounts.getAccounts())}],apps:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.get("apps")||appCacheService.then("apps",builtApi.Application.getApps())}],accountApiMetrics:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.then("ApiMetrics",builtApi.ApiMetrics.get({options:{metricsType:"account_api_metrics"}}))}],applicationApiMetrics:["appCacheService","builtApi",function(appCacheService,builtApi){return appCacheService.then("applicationApiMetrics",builtApi.ApiMetrics.get({options:{metricsType:"application_api_metrics"}}))}],ccLogs:["builtApi","$stateParams",function(builtApi,$stateParams){return builtApi.Extensions.get({options:{paramId:"logs",query:{app_api_key:$stateParams.api_key}}})}],currentApp:["appCacheService","builtApi","$stateParams","utilsService","manageUtils",function(appCacheService,builtApi,$stateParams,Utils,manageUtils){builtApi.setHeaders({application_api_key:$stateParams.api_key});var app=appCacheService.get("currentApp");if(app)return app;var promise=appCacheService.then("currentApp",builtApi.Application.getApp());return promise.then(function(data){return manageUtils.setAppHeaders(data),data})}],currentClass:["builtApi","appCacheService","$stateParams",function(builtApi,appCacheService,$stateParams){var params={options:{classUid:$stateParams.class_uid}};return appCacheService.get("currentClass")||appCacheService.then("currentClass",builtApi.Classes.getOne(params))}],currentFieldTypes:["builtApi","appCacheService","$stateParams",function(builtApi,appCacheService){return appCacheService.get("currentFieldTypes")||appCacheService.then("currentFieldTypes",builtApi.FieldTypes.getDataTypes())}],currentObject:["appCacheService","builtApi","$stateParams","currentApp",function(appCacheService,builtApi,$stateParams){var params={options:{classUid:$stateParams.class_uid,objectUid:$stateParams.obj_uid,query:{include_unpublished:!0}}};return appCacheService.get("currentObject")||appCacheService.then("currentObject",builtApi.Objects.getOne(params))}],resolve:function(args){return R.pick(args)(this)}};module.exports=resolvers},{1:322}],222:[function(require,module){"use strict";var inviteUserTemplate=require(1);module.exports=["$scope","$state","$location","builtApi","alertService","utilsService","modalService","collaborators","currentUser","constants","dataGridService",function($scope,$state,$location,builtApi,Alert,Utils,Modal,collaborators,currentUser,constants,dataGrid){{var apiKey=$state.params.api_key;$(".data-tbl")}collaborators=collaborators.users,$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.classColumns=[{label:"Email",key:"email"}];var pagno=0;$scope.myPageItemsCount=constants.queryLimit,$scope.mycurrentPage=(0>pagno?0:pagno)||0,$scope.onServerSideItemsRequested=function(){$scope.listRows=_.map(collaborators,function(user){return user.email===currentUser.email&&(user.isCurrentUser=!0,user.is_owner&&($scope.isAdmin=!0)),user}),$scope.myItemsTotalCount=collaborators.length},$scope.inviteUsers=function(){Modal.openModal({emails:"",message:""},inviteUserTemplate,ModalInstanceCtrl).then(function(res){_.forEach(res.data.emails.split(","),function(email){$scope.listRows.push({email:email})}),Alert.notify({title:"Success",content:res.notice,type:"success"})})};var ModalInstanceCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.btnStatus=!1,$scope.ok=function(){$scope.btnStatus=!0,builtApi.Application.postAppSettings({options:{settingType:"invite"},body:{app_api_key:apiKey,emails:$scope.data.emails.split(","),message:$scope.data.message}}).then(function(res){$scope.btnStatus=!1,res.data=data,$modalInstance.close(res)},function(xhr){$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$scope.deleteCollaborator=function(collaborator,index){var collaboratorData={app_api_key:apiKey};_.isEqual(currentUser.email,collaborator.email)||(collaboratorData.unshare_from=collaborator.email),builtApi.Application.postAppSettings({options:{settingType:"unshare"},body:collaboratorData}).then(function(res){$scope.listRows.splice(index,1),Alert.notify({title:"Success",content:res.notice,type:"success"}),$state.go("app.applications",{api_key:apiKey})},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})}}]},{1:224}],223:[function(require,module){module.exports='<div class="button-wrap mb10">\n <a ng-click=\'inviteUsers()\' class="btn btn-labeled btn-primary pull-left">\n<span class="btn-label"><i class="fa fa-user"></i> \n</span> Invite Users\n</a> \n</div>\n<div class="data-tbl-wrap">\n<table tr-ng-grid="" items="listRows" class="table data-tbl" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="mycurrentPage" on-data-required="onServerSideItemsRequested(mycurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-head-tr">\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}} \n</div>\n</th>\n<th class="dt-actions-th">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" title="{{gridItem[column.label]}}">\n <span>{{gridItem[column.key]}} <span ng-if="gridItem.isCurrentUser">(You)</span></span>\n <span class="label label-success" ng-if="gridItem.is_owner">Owner</span>\n</td>\n<td>\n<span title="Delete" ng-click=\'deleteCollaborator(gridItem, $index)\' class="hand fa fa-trash-o fa-lg edit_evnt ml10 dt-action-item" ng-if="(isAdmin && !gridItem.isCurrentUser) || (!isAdmin &&gridItem.isCurrentUser)"></span> \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table>\n</div>\n\n\n\n'},{}],224:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h3 class="modal-title">Invite users</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Emails</label>\n<div class="col-md-10">\n<textarea placeholder="Enter Comma(,) separated Emails" ng-model="data.emails" class="form-control"></textarea> \n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Message</label>\n<div class="col-md-10">\n<textarea ng-model="data.message" class="form-control"></textarea> \n</div>\n</div>\n</fieldset>\n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <button btn-loader="btnStatus" loading-text="Sending..." type="submit" class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Send invitation\n</span> \n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>\n \n'},{}],225:[function(require,module){var traverse=require(1);module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","appSettings",function($scope,$location,$state,builtApi,Alert,Utils,appSettings){var apiKey=$state.params.api_key;appSettings=appSettings.app_settings,$scope.btnStatus=!1,$scope.uploadTypeVariable="",$scope.profileTypeVariable="",$scope.appSettings=_.cloneDeep(appSettings);var appSettingsArray=[];traverse($scope.appSettings.application_variables).forEach(function(){this.isLeaf&&appSettingsArray.push({key:this.key,value:$scope.appSettings.application_variables[this.key]})}),$scope.appSettingsVariables=appSettingsArray,$scope.appVariableKey="",$scope.appVariableValue="",$scope.removeAppVariable=function(appSetting){var index=$scope.appSettingsVariables.indexOf(appSetting);$scope.appSettingsVariables.splice(index,1)},$(".js-app-variables input").keyup(function(e){13===e.which&&Utils.sa($scope,function(){$scope.addNewAppVariable()})}),$("[rel=popover-hover]").popover({trigger:"hover"}),$scope.addNewAppVariable=function(){return $scope.appVariableKey?($scope.appSettingsVariables.push({key:$scope.appVariableKey,value:$scope.appVariableValue}),$scope.appVariableKey="",void($scope.appVariableValue="")):!1},$scope.saveGeneralSettings=function(){var tempAppSettingsObject={},tempAppSettingsArr=[];$scope.btnStatus=!0,$scope.addNewAppVariable(),$scope.addUploadType(),tempAppSettingsArr=$scope.appSettingsVariables.map(function(setting){tempAppSettingsObject[setting.key]=setting.value}),$scope.appSettings.application_variables=tempAppSettingsObject,builtApi.Application.postAppSettings({options:{settingType:"settings"},body:{app_api_key:apiKey,app_settings:$scope.appSettings}}).then(function(res){$scope.btnStatus=!1,Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){$scope.btnStatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$(".js-upload-type").keyup(function(e){13===e.which&&Utils.sa($scope,function(){$scope.addUploadType()})}),$scope.addUploadType=function(){$scope.uploadTypeVariable&&($scope.appSettings.upload_type_restriction.list.push($scope.uploadTypeVariable),$scope.uploadTypeVariable="")},$scope.removeUploadType=function(type){$scope.appSettings.upload_type_restriction.list.splice($scope.appSettings.upload_type_restriction.list.indexOf(type),1)},$(".js-Profile-type").keyup(function(e){13===e.which&&Utils.sa($scope,function(){$scope.addProfileType()})}),$scope.addProfileType=function(){$scope.profileTypeVariable&&($scope.appSettings.restricted_profile_update.keys.push($scope.profileTypeVariable),$scope.profileTypeVariable="")},$scope.removeProfileType=function(type){$scope.appSettings.restricted_profile_update.keys.splice($scope.appSettings.restricted_profile_update.keys.indexOf(type),1)}}]},{1:330}],226:[function(require,module){module.exports='<div class="well well-sm max-width-800">\n<legend class="pg-header">\n General settings\n</legend>\n<p class="pg-tagline">\n Configure general settings for this application.\n</p>\n\n<div class="form-horizontal settings-form">\n\n<fieldset>\n<legend>Client notifications</legend>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" name="allow_client_notification" type="radio" ng-model="appSettings.allow_client_notifications" ng-value="true">\n <span>Enable client notifications</span>\n</label> \n</div>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" name="allow_client_notification" type="radio" ng-model="appSettings.allow_client_notifications" ng-value="false">\n <span>Disable client notifications</span>\n</label> \n</div>\n</fieldset>\n\n<fieldset>\n<legend class="mtvl">Security</legend>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" type="radio" ng-value="false" ng-model="appSettings.hide_email">\n <span>Show emails in the entire application</span>\n</label> \n</div>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" type="radio" ng-value="true" ng-model="appSettings.hide_email">\n <span>Hide emails in the entire application</span>\n</label> \n</div>\n</fieldset>\n\n<fieldset>\n<legend>Tenants</legend>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" type="radio" ng-value="true" ng-model="appSettings.auto_create_tenants">\n <span>Create tenants automatically</span>\n</label> \n</div>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" type="radio" ng-value="false" ng-model="appSettings.auto_create_tenants">\n <span>Create tenants manually</span>\n</label> \n</div>\n</fieldset>\n\n\n<fieldset>\n\n<legend>Mail</legend>\n<p class="sub-legend"> Activation</p>\n\n<div class="radio">\n <label class="radio">\n <input class="radiobox style-0" type="radio" ng-value="true" ng-model="appSettings.activation_template.use">\n <span>Send activation mail</span>\n</label> \n</div>\n\n<div class="radio">\n <label class="radio">\n <input class="radiobox style-0" type="radio" ng-value="false" ng-model="appSettings.activation_template.use">\n <span>Don\'t send activation mail (Auto activate user)</span>\n</label> \n</div>\n<p class="sub-legend mt15"> Welcome</p>\n\n<div class="radio">\n <label class="radio">\n <input class="radiobox style-0" ng-model="appSettings.welcome_template.use" type="radio" ng-value="true">\n <span>Send welcome mail</span>\n</label> \n</div>\n\n<div class="radio">\n <label class="radio">\n <input class="radiobox style-0" ng-model="appSettings.welcome_template.use" type="radio" ng-value="false">\n <span>Don\'t send welcome mail</span>\n</label> \n</div>\n</fieldset>\n\n<fieldset>\n<legend>Permitted login schemes</legend>\n<p>\n Enable or disable various schemes for logging in to your app. To ensure security, select only the minimum required schemes." data-original-title="Permitted login schemes\n</p>\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="appSettings.login_schemes.traditional">\n <span>Traditional login</span>\n</label> \n</div>\n\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="appSettings.login_schemes.google">\n <span>Google</span>\n</label> \n</div>\n\n\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="appSettings.login_schemes.facebook">\n <span>Facebook</span>\n</label> \n</div>\n\n\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="appSettings.login_schemes.twitter">\n <span>Twitter</span>\n</label> \n</div>\n\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="appSettings.login_schemes.tibbr">\n <span>tibbr</span>\n</label> \n</div>\n\n\n<div class="checkbox">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="appSettings.login_schemes.anyauth">\n <span>AnyAuth login</span>\n</label> \n</div>\n</fieldset>\n \n<fieldset>\n<legend class="smart-form">\n Restrict user profile fields\n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="appSettings.restricted_profile_update.enabled" ng-change="appSettings.restricted_profile_update.enabled!=appSettings.restricted_profile_update.enabled"><i data-swchon-text="ON" data-swchoff-text="OFF"></i>\n</label> \n</legend>\n<p>\n You can whitelist or blacklist certain fields on the appliation user\'s profile. Doing so will result in the user being unable to update the restricted fields.\n</p>\n<div class="checkbox">\n <label>\n <input type="checkbox" ng-disabled="!appSettings.restricted_profile_update.enabled" class="checkbox style-0" ng-model="appSettings.restricted_profile_update.whitelist" ng-change="appSettings.restricted_profile_update.whitelist!=appSettings.restricted_profile_update.whitelist" />\n <span ng-if="appSettings.restricted_profile_update.whitelist">\n Whitelist: The application user can update only the following fields.\n</span> \n <span ng-if="!appSettings.restricted_profile_update.whitelist">\n Blacklist: The application user cannot update the following fields.\n</span> \n</label> \n</div>\n\n<div class="key-value-wrap">\n<div class="clearfix" ng-repeat="type in appSettings.restricted_profile_update.keys track by $index">\n <input type="text" placeholder="Add field name..." class="u-input" ng-model="appSettings.restricted_profile_update.keys[$index]" ng-value="appSettings.restricted_profile_update.keys[$index]" ng-disabled="!appSettings.restricted_profile_update.enabled">\n <a class="btn" ng-class="{\'disabled btn-default\':!appSettings.restricted_profile_update.enabled, \'btn-danger\':appSettings.restricted_profile_update.enabled}" ng-click="removeProfileType($index )">\n<i class="fa fa-trash-o"></i> \n</a> \n</div>\n\n<div class="clearfix">\n <input type="text" placeholder="Add field name..." class="app-key-input u-input js-Profile-type" ng-model="profileTypeVariable" ng-disabled="!appSettings.restricted_profile_update.enabled">\n <a ng-class="{\'disabled btn-default\':!appSettings.restricted_profile_update.enabled,\'bg-color-blue txt-color-white\': appSettings.restricted_profile_update.enabled}" class="btn" ng-click="addProfileType()">\n<i class="fa fa-plus"></i> \n</a> \n</div>\n</div>\n</fieldset>\n\n \n<fieldset>\n<legend class="smart-form">\n Upload file type restriction\n <label class="toggle">\n <input type="checkbox" name="checkbox-toggle" ng-model="appSettings.upload_type_restriction.enabled" ng-change="appSettings.upload_type_restriction.enabled!=appSettings.upload_type_restriction.enabled"><i data-swchon-text="ON" data-swchoff-text="OFF"></i>\n</label> \n \n</legend>\n<p>\n You can whitelist or blacklist certian file types. Uploading files with a restricted content-type results in an error.\n</p>\n<div class="checkbox">\n <label>\n <input type="checkbox" ng-disabled="!appSettings.upload_type_restriction.enabled" class="checkbox style-0" ng-model="appSettings.upload_type_restriction.whitelist" ng-change="appSettings.upload_type_restriction.whitelist!=appSettings.upload_type_restriction.whitelist" />\n <span ng-if="appSettings.upload_type_restriction.whitelist">\n Whitelist: Only files with following content-types are allowed.\n</span> \n <span ng-if="!appSettings.upload_type_restriction.whitelist">\n Blacklist: Files with the following content-types are not allowed.\n</span> \n</label> \n</div>\n \n<div class="key-value-wrap">\n<div class="clearfix" ng-repeat="type in appSettings.upload_type_restriction.list track by $index">\n <input type="text" placeholder="Eg: image/jpg" class="u-input" ng-model="appSettings.upload_type_restriction.list[$index]" ng-value="appSettings.upload_type_restriction.list[$index]" ng-disabled="!appSettings.upload_type_restriction.enabled">\n <a class="btn" ng-class="{\'disabled btn-default\':!appSettings.upload_type_restriction.enabled, \'btn-danger\': appSettings.upload_type_restriction.enabled}" ng-click="removeUploadType($index )">\n<i class="fa fa-trash-o"></i> \n</a> \n</div>\n\n<div class="clearfix">\n <input type="text" placeholder="Eg: image/jpg" class="app-key-input u-input js-upload-type" ng-model="uploadTypeVariable" ng-disabled="!appSettings.upload_type_restriction.enabled">\n <a ng-class="{\'disabled btn-default\':!appSettings.upload_type_restriction.enabled, \'bg-color-blue txt-color-white\': appSettings.upload_type_restriction.enabled}" class="btn" ng-click="addUploadType()">\n<i class="fa fa-plus"></i> \n</a> \n</div>\n</div>\n</fieldset>\n\n<fieldset>\n<legend>Application variables</legend>\n<p>\n Specify custom application variables in your application. These variables will be available globally in the application environment. For example, you may use these variables in mail templates or elsewhere in the application.\n</p>\n<div class="key-value-wrap">\n<div class="clearfix" ng-repeat="app in appSettingsVariables track by $index">\n <input type="text" placeholder="Key" class="u-input" ng-model="appSettingsVariables[$index].key" ng-value="appSettingsVariables[$index].key">\n\n <input type="text" placeholder="Value" class="u-input" ng-model="appSettingsVariables[$index].value" ng-value="appSettingsVariables[$index].value">\n\n <a class="btn btn-danger" ng-click="removeAppVariable(appSettingsVariables[$index])">\n<i class="fa fa-trash-o"></i> \n</a> \n</div>\n\n<div class="js-app-variables clearfix">\n <input type="text" placeholder="Key" class="app-key-input u-input" ng-model="appVariableKey">\n <input type="text" placeholder="Value" class="app-value-input u-input" ng-model="appVariableValue">\n\n <a class="btn bg-color-blue txt-color-white" ng-click="addNewAppVariable()">\n<i class="fa fa-plus"></i> \n</a> \n</div>\n</div>\n</fieldset>\n<div class="form-actions">\n <button btn-loader="btnStatus" loading-text="Saving..." class="btn btn-primary btn-labeled" ng-click="saveGeneralSettings()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">Save settings</span>\n</button>\n</div>\n</div>\n</div>'},{}],227:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","currentApp",function($scope,$location,$state,builtApi,Alert,Utils,currentApp){$scope.currentApp=currentApp,$scope.downloadUrl="/v1/applications/"+$state.params.api_key+"/export_postman_collection?APPLICATION_UID="+$state.params.api_key+"&APPLICATION_API_KEY="+$state.params.api_key,$scope.selectInput=function(event){$(event.currentTarget).select()}}]},{}],228:[function(require,module){module.exports='\n<section id="widget-grid" class="">\n\n \n<div class="row">\n\n \n<article class="col-sm-12 col-md-4">\n\n<div class="jarviswidget jarviswidget-color-blueDark">\n<header>\n<h2>Info</h2>\n</header>\n\n \n<div role="content">\n \n<div class="widget-body">\n<div class="form-horizontal settings-form s-info-form">\n<fieldset>\n<legend>Application Info</legend>\n<div class="form-group">\n <label class="col-md-4 control-label">Application Name</label>\n<div class="col-md-8">\n <input type="text" ng-click="selectInput($event)" readonly="" class="u-input form-control" type="text" ng-value="currentApp.name">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-4 control-label">Application UID</label>\n<div class="col-md-8">\n <input type="text" ng-click="selectInput($event)" readonly="" class="u-input form-control" type="text" ng-value="currentApp.uid">\n</div>\n</div>\n</fieldset>\n\n<fieldset>\n<legend>Application Keys</legend>\n<div class="form-group">\n <label class="col-md-4 control-label">API key</label>\n<div class="col-md-8">\n <input type="text" ng-click="selectInput($event)" readonly="" class="u-input form-control" type="text" ng-value="currentApp.api_key">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-4 control-label">Master key</label>\n<div class="col-md-8">\n <input type="text" ng-click="selectInput($event)" readonly="" class="u-input form-control" type="text" ng-value="currentApp.master_key">\n</div>\n</div>\n</fieldset>\n \n</div>\n</div>\n \n</div>\n \n</div>\n \n</article>\n \n \n<article class="col-sm-12 col-md-8">\n\n<div class="jarviswidget jarviswidget-color-blueDark">\n<header>\n<h2>Downloads</h2>\n</header>\n\n \n<div role="content">\n \n<div class="widget-body">\n<div class="form-horizontal">\n<fieldset>\n<legend>\n<h4>Postman collection</h4>\n</legend>\n \n<h5 class="mt0 mb20">\n <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en" target="_blank">Postman</a> is a chrome extension that allows you to make REST calls. It also supports <b>collections</b>, which is a packaged bunch of calls. You can import the <b>built.io</b> postman collection to help trying out the REST API.\n</h5>\n\n<p>Follow the steps below to import built.io postman collection to your postman extension.</p>\n\n<ol>\n<li>\n Export all the API calls related to your application in the form of postman collection from here.\n</li>\n<li>\n The collection will be downloaded in the form of a JSON file named as <i class="muted">your_application_name_postman_collection.json</i>.\n</li>\n<li>\n Import this JSON file inside the postman extension for Chrome, and start sending API calls to your application.\n</li>\n<li>\n Some of the requests might have data-placeholders, which are enclosed inside double-braces\n <code>{{place_holder_here}}</code>.\n</li>\n<li>\n You can set this placeholders inside your global configuration of postman or can be replaced with actual values.\n</li>\n</ol>\n</fieldset>\n<div class="form-actions">\n <a ng-href="{{downloadUrl}}" class="btn btn-labeled btn-primary">\n<span class="btn-label"><i class="fa fa-download"></i> \n</span> Download\n</a> \n</div>\n</div>\n</div>\n \n</div>\n \n</div>\n \n</article>\n \n</div>\n \n</section>\n\n' },{}],229:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","appSettings",function($scope,$location,$state,builtApi,Alert,Utils,appSettings){function defaultSMTPSettings(){$scope.appSettings={smtp_settings:{address:null,port:null,from:null,user_name:null,password:null,domain:null,transport_layer_security:!1}}}appSettings=appSettings.app_settings,$scope.apiKey=$state.params.api_key,$scope.btnStatus=!1,_.isEmpty(appSettings.smtp_settings)&&defaultSMTPSettings(),$scope.appSettings=_.cloneDeep(appSettings),$scope.revertSettings={smtp_settings:{reset:!1,save:!1},activation_template:{reset:!1,save:!1},welcome_template:{reset:!1,save:!1},forgot_password_template:{reset:!1,save:!1}},$scope.resetTemplateSettings=function(key){$scope.btnStatus=!0,$scope.revertSettings[key].reset=!0;var appSettings={};appSettings[key]=null,builtApi.Application.postAppSettings({options:{settingType:"settings/reset"},body:{scope:appSettings}}).then(function(res){$scope.revertSettings[key].reset=!1,$scope.btnStatus=!1,$scope.appSettings[key]=res.app_settings[key],Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){$scope.revertSettings[key].reset=!1,$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})},$scope.saveMailSettings=function(key){$scope.btnStatus=!0;var appSettings={};$scope.revertSettings[key].save=!0,appSettings[key]=$scope.appSettings[key],"smtp_settings"===key&&(appSettings[key].port=parseInt(appSettings[key].port)||appSettings[key].port),builtApi.Application.postAppSettings({options:{settingType:"settings"},body:{app_settings:appSettings}}).then(function(res){$scope.revertSettings[key].save=!1,$scope.btnStatus=!1,Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){$scope.revertSettings[key].save=!1,$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})}}]},{}],230:[function(require,module){module.exports='\n<section id="widget-grid" class="">\n\n \n<div class="row">\n\n \n<article class="col-sm-12 col-md-6 col-lg-6">\n\n<div class="jarviswidget jarviswidget-color-blueDark">\n<header>\n<h2>SMTP settings</h2>\n</header>\n\n \n<div role="content">\n \n<div class="widget-body">\n<div class="form-horizontal">\n\n<div class="alert alert-info">\n<p>Provide custom SMTP settings for mail sent by built.io to your application users.</p>\n</div>\n\n<div class="form-group">\n <label class="col-md-2 control-label">Address</label>\n<div class="col-md-10">\n <input type="text" class="u-input form-control" placeholder="<smtp.yourdomain.com>" ng-model="appSettings.smtp_settings.address" ng-value="appSettings.smtp_settings.address">\n</div>\n</div>\n\n<div class="form-group">\n <label class="col-md-2 control-label">Port</label>\n<div class="col-md-10">\n <input type="text" class="u-input form-control" placeholder="<your smtp port>" ng-model="appSettings.smtp_settings.port" ng-value="appSettings.smtp_settings.port">\n</div>\n</div>\n\n<div class="form-group">\n <label class="col-md-2 control-label">Sender Name</label>\n<div class="col-md-10">\n <input type="text" class="u-input form-control" placeholder="<Name to be displayed in the mail>" ng-model="appSettings.smtp_settings.from" ng-value="appSettings.smtp_settings.from">\n</div>\n</div>\n\n<div class="form-group">\n <label class="col-md-2 control-label">Userame</label>\n<div class="col-md-10">\n <input type="text" class="u-input form-control" placeholder="<your smtp username>" ng-model="appSettings.smtp_settings.user_name" ng-value="appSettings.smtp_settings.user_name">\n</div>\n</div>\n\n<div class="form-group">\n <label class="col-md-2 control-label">Password</label>\n<div class="col-md-10">\n <input type="password" class="u-input form-control" autocomplete="off" placeholder="<your smtp password>" ng-model="appSettings.smtp_settings.password" ng-value="appSettings.smtp_settings.password">\n</div>\n</div>\n\n<div class="form-group">\n <label class="col-md-2 control-label">Domain</label>\n<div class="col-md-10">\n <input type="text" class="u-input form-control" placeholder="<your smtp domain>" ng-model="appSettings.smtp_settings.domain" ng-value="appSettings.smtp_settings.domain">\n</div>\n</div>\n\n<fieldset>\n<legend>Network security</legend>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" type="radio" ng-model="appSettings.smtp_settings.transport_layer_security" ng-value="true">\n <span>Enable transport layer security.</span>\n</label> \n</div>\n\n<div class="radio">\n <label>\n <input class="radiobox style-0" type="radio" ng-model="appSettings.smtp_settings.transport_layer_security" ng-value="false">\n <span>Disable transport layer security</span>\n</label> \n</div>\n\n</fieldset>\n\n<div class="form-actions">\n<div class="button-wrap">\n <button btn-loader="revertSettings.smtp_settings.save" loading-text="Saving..." class="btn btn-labeled btn-primary btn-sm pull-right" data-loading-text="Saving..." ng-click="saveMailSettings(\'smtp_settings\')">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Save settings\n</span> \n</button>\n <button btn-loader="revertSettings.smtp_settings.reset" loading-text="Reseting..." class="btn btn-labeled btn-default btn-sm pull-left" data-loading-text="Reseting..." ng-click="resetTemplateSettings(\'smtp_settings\')">\n <span class="btn-label">\n<i class="fa fa-refresh"></i> \n</span> \n <span class="js-btn-text">Reset settings</span>\n</button>\n</div>\n</div>\n</div>\n</div>\n \n</div>\n \n</div>\n \n\n<div class="jarviswidget jarviswidget-color-blueDark">\n<header>\n<h2>Activation mail</h2>\n</header>\n\n \n<div role="content">\n \n<div class="widget-body">\n<div class="form-horizontal">\n<div class="alert alert-info mts mbm mail-tmpl-info">\n<p>Customize the activation mail that is sent to your application users. You can use variables in the templates. These variables can be your application variables as well as some predefined variables that are given below. You can also specify your application user values here such as firstname, lastname, email, activation_token, uid in the application user class.</p>\n<p class="mbs">\n <strong>Predefined variables:</strong>\n</p>\n<p class="mb0">\n <strong>{{</strong>confirm_link\n <strong>}}</strong> - The default confirmation link provided by built.io.</p>\n<p class="mb0">\n <strong>{{</strong>application_link\n <strong>}}</strong> - The application link that you can customize in <a class="bold-text" ng-href="#/dashboard/{{apiKey}}/settings/general">application variables</a>.</p>\n<p class="mb0">\n <strong>{{</strong>login_link\n <strong>}}</strong> - The link that your user may go to for logging into your application.</p>\n<p class="mbs mtm">\n <strong>Predefined user variables:</strong>\n</p>\n<p class="mb0">\n <strong>{{</strong>user.email\n <strong>}}</strong> - The user\'s email.</p>\n<p class="mb0">\n <strong>{{</strong>user.first_name\n <strong>}}</strong> - The user\'s first name.</p>\n<p class="mb0">\n <strong>{{</strong>user.last_name\n <strong>}}</strong> - The user\'s last name.</p>\n<p class="mb0">\n <strong>{{</strong>user.activation_token\n <strong>}}</strong> - The activation token for activating the user\'s account.</p>\n<p class="mb0">\n <strong>{{</strong>user.uid\n <strong>}}</strong> - The user\'s unique identifier.</p>\n</div>\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Subject</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="appSettings.activation_template.subject" ng-value="appSettings.activation_template.subject">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Reply to</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="appSettings.activation_template.reply_to" ng-value="appSettings.activation_template.reply_to">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Message</label>\n<div class="col-md-10">\n <textarea class="form-control" rows="6" ng-model="appSettings.activation_template.template">{{appSettings.activation_template.template}}</textarea>\n</div>\n</div>\n</fieldset>\n<div class="form-actions">\n<div class="button-wrap">\n <button btn-loader="revertSettings.activation_template.save" loading-text="Saving..." class="btn btn-labeled btn-primary btn-sm pull-right" data-loading-text="Saving..." ng-click="saveMailSettings(\'activation_template\')">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Save\n</span> \n</button>\n <button btn-loader="revertSettings.activation_template.reset" loading-text="Reseting..." class="btn btn-labeled btn-default btn-sm pull-left" data-loading-text="Reseting..." ng-click="resetTemplateSettings(\'activation_template\')">\n <span class="btn-label">\n<i class="fa fa-refresh"></i> \n</span> \n <span class="js-btn-text">Reset template</span>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n \n\n</article>\n \n\n\n \n<article class="col-sm-12 col-md-6 col-lg-6">\n<div class="jarviswidget jarviswidget-color-blueDark">\n<header>\n<h2>Welcome mail</h2>\n</header>\n\n \n<div role="content">\n \n<div class="widget-body">\n<div class="form-horizontal">\n<div class="alert alert-info mts mbm">\n<p>Customize the e-mail sent to your users when they verify their email address. The variables that can be used are the same as that of the activation template.</p>\n</div>\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Subject</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="appSettings.welcome_template.subject" ng-value="appSettings.welcome_template.subject">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Reply to</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="appSettings.welcome_template.reply_to" ng-value="appSettings.welcome_template.reply_to">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Message</label>\n<div class="col-md-10">\n <textarea class="form-control" rows="6" ng-model="appSettings.welcome_template.template">{{appSettings.welcome_template.template}}</textarea>\n</div>\n</div>\n</fieldset>\n<div class="form-actions">\n<div class="button-wrap">\n <button btn-loader="revertSettings.welcome_template.save" loading-text="Saving..." class="btn btn-labeled btn-primary btn-sm pull-right" data-loading-text="Saving..." ng-click="saveMailSettings(\'welcome_template\')">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Save\n</span> \n</button>\n <button btn-loader="revertSettings.welcome_template.reset" loading-text="Reseting..." class="btn btn-labeled btn-default btn-sm pull-left" data-loading-text="Reseting..." ng-click="resetTemplateSettings(\'welcome_template\')">\n <span class="btn-label">\n<i class="fa fa-refresh"></i> \n</span> \n <span class="js-btn-text">Reset template</span>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n \n\n<div class="jarviswidget jarviswidget-color-blueDark">\n<header>\n<h2>Forgot password mail</h2>\n</header>\n\n \n<div role="content">\n \n<div class="widget-body">\n<div class="form-horizontal settings-form">\n<div class="alert alert-info mts mbm">\n<p>Customize the forgot password template. The variables are same as in activation template. In addititon, you can specify additional variables as given below:</p>\n</div>\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Subject</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="appSettings.forgot_password_template.subject" ng-value="appSettings.forgot_password_template.subject">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Reply to</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="appSettings.forgot_password_template.reply_to" ng-value="appSettings.forgot_password_template.reply_to">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Message</label>\n<div class="col-md-10">\n <textarea class="form-control" rows="6" ng-model="appSettings.forgot_password_template.template">{{appSettings.forgot_password_template.template}}</textarea>\n</div>\n</div>\n</fieldset>\n<div class="form-actions">\n<div class="button-wrap">\n <button btn-loader="revertSettings.forgot_password_template.save" loading-text="Saving..." class="btn btn-labeled btn-primary btn-sm pull-right" data-loading-text="Saving..." ng-click="saveMailSettings(\'forgot_password_template\')">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Save\n</span> \n</button>\n <button btn-loader="revertSettings.forgot_password_template.reset" loading-text="Reseting..." class="btn btn-labeled btn-default btn-sm pull-left" data-loading-text="Reseting..." ng-click="resetTemplateSettings(\'forgot_password_template\')">\n <span class="btn-label">\n<i class="fa fa-refresh"></i> \n</span> \n <span class="js-btn-text">Reset template</span>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n \n \n</article>\n\n</div>\n \n</section>\n'},{}],231:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h3 class="modal-title">\n <span ng-if="!isTenantPresent">Add new tenant</span>\n <span ng-if="isTenantPresent">Edit tenant</span>\n</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">UID</label>\n<div class="col-md-10">\n <input type="text" class="form-control" ng-model="data.uid" ng-value="data.uid" ng-disabled="isTenantPresent">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Name</label>\n<div class="col-md-10">\n <input class="form-control" ng-model="data.name" ng-value="data.name">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Description</label>\n<div class="col-md-10">\n<textarea ng-model="data.description" ng-value="data.description" class="form-control"></textarea> \n</div>\n</div>\n</fieldset>\n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <button btn-loader="btnStatus" loading-text="Saving..." class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Done\n</span> \n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>\n \n'},{}],232:[function(require,module){module.exports='<div class="button-wrap mb10">\n <a ng-click="createNewTenant()" class="btn btn-labeled btn-primary pull-left">\n<span class="btn-label"><i class="fa fa-plus-square"></i> \n</span> Add a tenant\n</a> \n</div>\n\n<div class="data-tbl-wrap">\n<table tr-ng-grid="" items="listRows" class="table data-tbl" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="mycurrentPage" on-data-required="onServerSideItemsRequested(mycurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-head-tr" ng-show="listRows.length">\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}} \n</div>\n</th>\n<th class="dt-actions-th">\n<div class="tr-ng-title">\n Select Tenant\n</div>\n</th>\n<th class="dt-actions-th">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" title="{{gridItem[column.label]}}">\n \n <span>{{gridItem[column.key]}}</span>\n</td>\n<td>\n<div class="checkbox cf-radio mt0 mb0">\n <label>\n <input type="checkbox" class="checkbox style-0 js-tenant-checkbox" ng-model="gridItem.selectedTenant" ng-click="selectTenant($event, gridItem)"></input>\n<span></span> \n</label> \n</div>\n</td>\n<td>\n<span title="{{act}}" ng-repeat=\'act in actions\' ng-click=\'action(act, gridItem)\' class="hand fa fa-lg edit_evnt ml10 dt-action-item" ng-class="{\'fa-pencil\':act == \'edit\', \'fa-trash-o\' : act == \'delete\'}"></span> \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table>\n<div class="no-msg" ng-show="!listRows.length">\n No tenants created yet.\n</div>\n</div>\n\n\n\n'},{}],233:[function(require,module){"use strict";var tenantModal=require(1);module.exports=["$scope","$state","$location","builtApi","alertService","utilsService","modalService","currentUser","tenants","constants","dataGridService","manageUtils","appCacheService",function($scope,$state,$location,builtApi,Alert,Utils,Modal,currentUser,tenants,constants,dataGrid,manageUtils,appCacheService){function deleteTenant(tenant){Alert.confirm({title:"Delete tenant",content:"Are you sure you want to delete this tenant?"}).then(function(){builtApi.getHeaders().tenant_uid===tenant.uid&&(builtApi.removeHeaderKey("tenant_uid"),delete currentApp.discrete_variables.tenant,appCacheService.remove("currentTenant"),updateAppSettings(getAppSettings())),builtApi.Tenants.deleteTenant({options:{tenantUid:tenant.uid},body:{app_api_key:apiKey,authtoken:currentUser.authtoken,tenant_uid:tenant.uid}}).then(function(res){$scope.listRows.splice($scope.listRows.indexOf(tenant),1),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})})}function editTenant(tenant){var index=$scope.listRows.indexOf(tenant);Modal.openModal({uid:tenant.uid,name:tenant.name,description:tenant.description},tenantModal,editTenantModalCtrl).then(function(res){$scope.listRows.splice(index,1,res.tenant),Alert.notify({title:"Success",content:res.notice,type:"success"})})}function getAppSettings(){var app={api_key:currentApp.api_key},discreteVariables={tenant:"built_default_tenant"};return app.discrete_variables=_.extend({},currentApp.discrete_variables?currentApp.discrete_variables:{},discreteVariables),app}function updateAppSettings(app){return builtApi.Application.postAppSettings({options:{settingType:"settings"},body:{app_api_key:apiKey,app_settings:app}})}var apiKey=$state.params.api_key,dataTableContainer=$(".data-tbl"),currentApp=appCacheService.get("currentApp"),activeTenants="undefined"==typeof currentApp.discrete_variables.tenant||"built_default_tenant"===currentApp.discrete_variables.tenant?!1:!0;activeTenants&&($scope.selectedTenant=currentApp.discrete_variables.tenant),$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.actions=["edit","delete"],$scope.classColumns=[{label:"Tenant UID",key:"uid"},{label:"Tenant Name",key:"name"}],dataGrid.addResponsiveAttrs($scope.classColumns,"phone");var pagno=0;$scope.myPageItemsCount=constants.queryLimit,$scope.mycurrentPage=(0>pagno?0:pagno)||0,$scope.onServerSideItemsRequested=function(){$scope.listRows=tenants.map(function(tenant){return tenant.selectedTenant=tenant.uid===$scope.selectedTenant?!0:!1,tenant}),$scope.myItemsTotalCount=tenants.length,dataGrid.initFootable(dataTableContainer)},$scope.action=function(act,tenant){return"edit"===act?void editTenant(tenant):"delete"===act?void deleteTenant(tenant):void 0};var editTenantModalCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.isTenantPresent=!0,$scope.btnStatus=!1,$scope.ok=function(){$scope.btnStatus=!0,builtApi.Tenants.editTenant({options:{tenantUid:$scope.data.uid},body:{app_api_key:apiKey,authtoken:currentUser.authtoken,tenant:_.pick($scope.data,"name","description")}}).then(function(res){$scope.btnStatus=!1,res.data=data,$modalInstance.close(res)},function(xhr){$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$scope.selectTenant=function(e,tenant){var app=getAppSettings();builtApi.removeHeaderKey("tenant_uid"),e.currentTarget.checked&&($(".js-tenant-checkbox").prop("checked",!1),$(e.currentTarget).prop("checked",!0),app.discrete_variables.tenant=tenant.uid),manageUtils.setAppHeaders(app),updateAppSettings(app).then(function(){currentApp.discrete_variables.tenant=app.discrete_variables.tenant,Alert.notify({title:"Success",content:"Woot! Tenant was updated successfully.",type:"success"})},function(xhr){xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})},$scope.createNewTenant=function(){Modal.openModal({uid:"",name:"",description:""},tenantModal,newTenantModalCtrl).then(function(res){$scope.listRows.push(res.tenant),Alert.notify({title:"Success",content:res.notice,type:"success"})})};var newTenantModalCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.isTenantPresent=!1,$scope.btnStatus=!1,$scope.ok=function(){$scope.btnStatus=!0,builtApi.Tenants.addTenant({body:{app_api_key:apiKey,authtoken:currentUser.authtoken,tenant:$scope.data}}).then(function(res){$scope.btnStatus=!1,res.data=data,$modalInstance.close(res)},function(xhr){$scope.btnStatus=!1,xhr=xhr.entity,Alert.notify({title:xhr.error_message,content:Utils.parseError(xhr),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:231}],234:[function(require,module){"use strict";var angular=require(12),resolvers=(require(14),require(1)),generalCtrl=require(4),collaboratorsCtrl=require(2),mailCtrl=require(8),tenantsCtrl=require(11),infoCtrl=require(6),generalTemplate=require(5),collaboratorsTemplate=require(3),mailTemplate=require(9),tenantsTemplate=require(10),infoTemplate=require(7);require(13),module.exports=angular.module("built.settings",["ui.router"]).controller("generalCtrl",generalCtrl).controller("collaboratorsCtrl",collaboratorsCtrl).controller("mailCtrl",mailCtrl).controller("tenantsCtrl",tenantsCtrl).controller("infoCtrl",infoCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.general-settings",{url:"/settings/general",template:generalTemplate,resolve:resolvers.resolve(["appSettings"]),controller:"generalCtrl",data:{breadcrumbs:[{name:"Settings"},{name:"General"}]}}).state("app.dashboard.collaborators-settings",{url:"/settings/collaborators",template:collaboratorsTemplate,resolve:resolvers.resolve(["collaborators"]),controller:"collaboratorsCtrl",data:{breadcrumbs:[{name:"Settings"},{name:"Collaborators"}]}}).state("app.dashboard.mail-settings",{url:"/settings/mail",template:mailTemplate,resolve:resolvers.resolve(["appSettings"]),controller:"mailCtrl",data:{breadcrumbs:[{name:"Settings"},{name:"Mail"}]}}).state("app.dashboard.tenants-settings",{url:"/settings/tenants",template:tenantsTemplate,resolve:resolvers.resolve(["currentUser","tenants"]),controller:"tenantsCtrl",data:{breadcrumbs:[{name:"Settings"},{name:"Tenants"}]}}).state("app.dashboard.info-settings",{url:"/settings/info",template:infoTemplate,controller:"infoCtrl",data:{breadcrumbs:[{name:"Settings"},{name:"Download and Info."}]}}) }]).run(["$rootScope","menuService",function($rootScope,menu){var menuItem={id:"settings",title:"Settings",order:10,icon:"fa-gear",sub_menu:[{id:"general-settings",title:"General",state:"app.dashboard.general-settings"},{id:"collaborators-settings",title:"Collaborators",state:"app.dashboard.collaborators-settings"},{id:"mail-settings",title:"Mail",state:"app.dashboard.mail-settings"},{id:"tenants-settings",title:"Tenants",state:"app.dashboard.tenants-settings"},{id:"info-settings",title:"Download and Info.",state:"app.dashboard.info-settings"}]};menu.add(menuItem)}])},{1:221,10:232,11:233,12:295,13:291,14:294,2:222,3:223,4:225,5:226,6:227,7:228,8:229,9:230}],235:[function(require,module){"use strict";require(2);var uploadModalTemplate=require(1);module.exports=["$scope","$location","$state","builtApi","currentUser","currentApiHost","alertService","utilsService","modalService","appAclService","postMessageUploadService","constants","dataGridService","$timeout",function($scope,$location,$state,builtApi,currentUser,currentApiHost,Alert,Utils,Modal,appAclService,postMessageUploadService,constants,dataGrid,$timeout){function configureUploadAcl(upload){var modalData={ACL:_.cloneDeep(upload.ACL||{}),rights:["read","update","delete"]};Modal.openModal(modalData,appAclService.aclOverlayTemplate,appAclService.aclCtrl,{keyboard:!1}).then(function(res){params={},params.options={uploadUid:upload.uid},params.body={app_api_key:apiKey,upload_uid:upload.uid,upload:{ACL:res.ACL}},builtApi.File.updateUploadACl(params).then(function(res){upload.ACL=res.upload.ACL?res.upload.ACL:{},Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}function configureDefaultAcl(){var params={options:{uploadType:"default_acl"}};builtApi.File.getUpload(params).then(function(defaultAcl){var modalData={ACL:_.cloneDeep(defaultAcl.DEFAULT_ACL),isDefault:!0,rights:["create","read","update","delete"]};Modal.openModal(modalData,appAclService.aclOverlayTemplate,appAclService.aclCtrl,{keyboard:!1}).then(function(res){builtApi.File.postDefaultACl({body:{app_api_key:apiKey,DEFAULT_ACL:res.ACL}}).then(function(res){Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})})}function uploadFile(){Modal.openModal({tags:"",apiKey:apiKey,apihost:currentApiHost.api_host,randvalue:Utils.getRand(),authtoken:currentUser.authtoken,url:"uploads",tenant_uid:builtApi.getHeaders().tenant_uid||""},uploadModalTemplate,ModalInstanceCtrl,{size:"sm"}).then(function(res){res.upload.file={filename:res.upload.filename,url:res.upload.url,isImage:Utils.isImage(res.upload.filename),file_size:Utils.bytesToSize(res.upload.file_size)},$scope.listRows.unshift(res.upload),$scope.myItemsTotalCount=$scope.myItemsTotalCount+1,Alert.notify({title:"Success",content:res.notice,type:"success"})})}function deleteUpload(upload){var index=$scope.listRows.indexOf(upload);Alert.confirm({title:"Delete Upload",content:"Are you sure you want to delete this upload?"}).then(function(){params={},params.options={uploadUid:upload.uid},builtApi.File.deleteOne(params).then(function(data){$scope.selectedRows=[],$scope.listRows.splice(index,1),$scope.myItemsTotalCount=$scope.myItemsTotalCount-1,Alert.notify({title:"Success",content:data.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}function addAuthToken(url){return url+="?AUTHTOKEN="+$scope.authtoken}var previousFilter=void 0,apiKey=$state.params.api_key,dataTableContainer=$(".data-tbl");$scope.actions=["acl","delete"],$scope.authtoken=currentUser.authtoken,$scope.loading=!0,$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.classColumns=[{label:"File",key:"file"},{label:"UID",key:"uid"},{label:"Link To File",key:"url"}],dataGrid.addResponsiveAttrs($scope.classColumns,"phone, tablet");var pagno=parseInt($location.search().p)-1;$scope.myPageItemsCount=constants.queryLimit,$scope.mycurrentPage=(0>pagno?0:pagno)||0,$scope.onServerSideItemsRequested=function(currentPage,filterBy,filterByFields,orderBy,orderByReverse,myPageItemsCount){$scope.loading=!0;var skip=currentPage*myPageItemsCount;dataGrid.checkFilter(filterBy,previousFilter,$scope.mycurrentPage,skip);var params={options:{uploadType:"",query:{skip:skip,limit:myPageItemsCount,desc:"created_at",include_count:!0}}};filterBy&&(params.options.query.query={filename:{$regex:filterBy,$options:"i"}}),-1!=$state.current.name.indexOf("images")&&(params.options.uploadType="images"),-1!=$state.current.name.indexOf("videos")&&(params.options.uploadType="videos"),params.options.query.query=JSON.stringify(params.options.query.query),builtApi.File.getUpload(params).then(function(data){$scope.listRows=data.uploads.map(function(obj){var tempObject=obj;return tempObject.file={filename:obj.filename,url:addAuthToken(obj.url),isImage:Utils.isImage(obj.filename),file_size:Utils.getFileInfo(obj)},tempObject}),$scope.myItemsTotalCount=data.count,dataGrid.initFootable(dataTableContainer),$("[rel=tooltip]").tooltip(),$location.search({p:currentPage+1})}).finally(function(){$scope.loading=!1})},$scope.action=function(act,upload){return"defaultAcl"===act?void configureDefaultAcl():"acl"===act?void configureUploadAcl(upload):"upload"===act?void uploadFile():"delete"===act?void deleteUpload(upload):void 0};var ModalInstanceCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.progressstatus=!1,$timeout(function(){$("#js-upload-tags").select2({multiple:!0,tags:[],tokenSeparators:[]}).on("change",function(e){$scope.data.tags=e.val.join(","),$scope.$apply()})}),$scope.ok=function(){$(".js-upload-selector").val()?($scope.progressstatus=!0,$(".modal-body").find("form").trigger("submit"),postMessageUploadService.getPostMessage(data.randvalue).then(function(res){$scope.progressstatus=!1,$modalInstance.close(res)},function(xhr){$scope.progressstatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"}),$modalInstance.dismiss("cancel")})):Alert.notify({title:"Invalid input",content:"Oops! the input file is either blank or invalid",type:"error"})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:236,2:304}],236:[function(require,module){module.exports='<div class="modal-header">\n<h3 class="modal-title">Upload File</h3>\n</div>\n<div class="modal-body">\n<fieldset>\n<div ng-show="progressstatus" class="object-asset-progress">\n<div class="progress progress-striped active">\n<div class="progress-bar bg-color-darken" role="progressbar" style="width: 100%">\n Uploading...\n</div>\n</div>\n</div>\n<div class="form-group" ng-show="!progressstatus" file-upload authtoken="data.authtoken" url="data.url" apikey="data.apiKey" apihost="data.apihost" randvalue="data.randvalue">\n <input type="hidden" name="TENANT_UID" value="{{data.tenant_uid}}" ng-if="data.tenant_uid">\n <input type="file" class="btn btn-default js-upload-selector" name="upload[upload]" required>\n <input type="hidden" name="upload[tags]" ng-model="data.tags" ng-value="data.tags">\n</div>\n<div class="form-group">\n <label>Tags</label>\n<div type="hidden" id="js-upload-tags"/>\n</div>\n</fieldset>\n</div>\n<div class="modal-footer">\n<div class="button-wrap">\n <button btn-loader="progressstatus" loading-text="Uploading..." class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Upload\n</span> \n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>\n'},{}],237:[function(require,module){module.exports='<div class="button-wrap mb10">\n <a href="" ng-click="action(\'upload\')" class="btn btn-labeled btn-primary pull-left mr10">\n<span class="btn-label"><i class="fa fa-plus-square"></i> \n</span> Upload few file\n</a> \n <a href="" ng-click="action(\'defaultAcl\')" class="btn btn-labeled btn-default pull-left">\n<span class="btn-label"><i class="fa fa-lock"></i> \n</span> Configure default ACL\n</a> \n</div>\n\n<div class="data-tbl-wrap">\n<table tr-ng-grid="" items="listRows" class="table data-tbl" selected-items="selectedRows" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="mycurrentPage" on-data-required="onServerSideItemsRequested(mycurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-tools">\n<th colspan="100">\n<div class="row">\n<div class="col-md-4 col-xs-12">\n<form class="form-inline table-search-wrap" ng-show="!selectedRows.length">\n<div tr-ng-grid-global-filter=""></div>\n</form>\n</div>\n<div class="col-md-8 col-xs-12">\n<span tr-ng-grid-pager=""></span> \n</div>\n</div>\n</th>\n</tr>\n<tr class="dt-head-tr" ng-show="loading || listRows.length">\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}}\n</div>\n</th>\n<th class="dt-actions-th">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody ng-show="!loading">\n<tr>\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" title="" class="dt-uploads-td">\n\n <a ng-if="column.key===\'url\'" ng-href="{{dataGrid.getCell(gridItem, column)}}">Download</a>\n <span ng-if="column.key===\'uid\'">{{dataGrid.getCell(gridItem, column)}}</span>\n\n<div ng-if="column.key===\'file\'" class="media attachment-box">\n<div class="media-image attachment-preview pull-left">\n <a ng-hide="dataGrid.getCell(gridItem, column).isImage" href="{{dataGrid.getCell(gridItem, column).url}}" target="_blank">\n<i class="attachment-file-icon fa fa-file-text-o"></i> \n</a> \n <a ng-hide="!dataGrid.getCell(gridItem, column).isImage" href="{{dataGrid.getCell(gridItem, column).url}}" target="_blank" class="attachment-preview-link">\n <img ng-show="dataGrid.getCell(gridItem, column).isImage" ng-src="{{dataGrid.getCell(gridItem, column).url}}" alt="{{dataGrid.getCell(gridItem, column).filename}}" class="block-element">\n</a> \n</div>\n<div class="media-body attachment-info">\n<div class="attachment-name" title="{{dataGrid.getCell(gridItem, column).filename}}">{{dataGrid.getCell(gridItem, column).filename}}</div>\n<div class="attachment-size">{{dataGrid.getCell(gridItem, column).file_size}}</div>\n</div>\n</div>\n</td>\n<td>\n<span ng-repeat=\'act in actions\' ng-click=\'action(act, gridItem)\' class="hand fa fa-lg edit_evnt ml10 dt-action-item" ng-class="{\'fa-lock\':act == \'acl\', \'fa-trash-o\' : act == \'delete\'}" rel="tooltip" data-placement="bottom" ng-attr-data-original-title="{{act == \'acl\' ? \'Configure ACL\' : \'Delete upload\'}}"></span> \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table>\n<div class="tab-loader" ng-show="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="no-msg" ng-show="!loading && !listRows.length">\n No uploads found.\n</div>\n</div>'},{}],238:[function(require,module){"use strict";var angular=require(5),uploadsCtrl=(require(4),require(1),require(2)),uploadsTemplate=require(3);require(6),module.exports=angular.module("built.uploads",["ui.router"]).controller("uploadsCtrl",uploadsCtrl).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.all-uploads",{url:"/uploads/all?p",template:uploadsTemplate,controller:"uploadsCtrl",data:{breadcrumbs:[{name:"Uploads"},{name:"All"}]}}).state("app.dashboard.images-uploads",{url:"/uploads/images?p",template:uploadsTemplate,controller:"uploadsCtrl",data:{breadcrumbs:[{name:"Uploads"},{name:"Images"}]}}).state("app.dashboard.videos-uploads",{url:"/uploads/videos?p",template:uploadsTemplate,controller:"uploadsCtrl",data:{breadcrumbs:[{name:"Uploads"},{name:"Videos"}]}})}]).run(["$rootScope","menuService",function($rootScope,menu){var menuItem={id:"uploads",title:"Uploads",order:2,icon:"fa-upload",sub_menu:[{id:"all-uploads",title:"All",state:"app.dashboard.all-uploads"},{id:"images-uploads",title:"Images",state:"app.dashboard.images-uploads"},{id:"videos-uploads",title:"Videos",state:"app.dashboard.videos-uploads"}]};menu.add(menuItem)}])},{1:221,2:235,3:237,4:239,5:295,6:291}],239:[function(require,module,exports){"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return angular.forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&(parentParams=objectKeys(parents[i].params),parentParams.length))for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;ii>i;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"];break;case!0:surroundPattern=["?(",")?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),type=$$UMFP.type(regexp||"string")||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp)}),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash),segments.push(p.segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),param=addParameter(p.id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(config.strict===!1?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/\//g,"%2F"):val}function valFromString(val){return null!=val?val.toString().replace(/%2F/g,"/"):val}function regexpMatches(val){return this.pattern.test(val)}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:valFromString,is:regexpMatches,pattern:/[^/]*/},"int":{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return val===!0||val===!1},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^/]*/},any:{encode:angular.identity,decode:angular.identity,is:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function unwrapShorthand(config){var keys=isObject(config)?objectKeys(config):[],isShorthand=-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array");return isShorthand&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}function getType(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType?urlType:config.type?config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string}function getArrayMode(){var arrayDefaults={array:"search"===location?"auto":!1},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.$$fn)}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}function $replace(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}return value=$replace(value),isDefined(value)?self.type.decode(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}var self=this;config=unwrapShorthand(config),type=getType(config,type,location);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,"search"===location):type,"string"!==type.name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=getSquashPolicy(config,isOptional),replace=getReplace(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:undefined,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var isOptional,val,param,result=!0,self=this;return forEach(this.$$keys(),function(key){param=self[key],val=paramValues[key],isOptional=!val&&param.isOptional,result=result&&(isOptional||!!param.type.is(val))}),result},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:!0}function $get($location,$rootScope,$injector,$browser){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return handled?(isString(handled)&&$location.replace().url(handled),!0):!1}if(!evt||!evt.defaultPrevented){var ignoreUpdate=lastPushedUrl&&$location.url()===lastPushedUrl;if(lastPushedUrl=undefined,ignoreUpdate)return!0;var i,n=rules.length;for(i=0;n>i;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){return read?void(location=$location.url()):void($location.url()!==location&&($location.url(location),$location.replace())) },push:function(urlMatcher,params,options){$location.url(urlMatcher.format(params||{})),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled);var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;pathLength>i;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if("**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length)return!1;for(var i=0,l=globSegments.length;l>i;i++)"*"===globSegments[i]&&(segments[i]="*");return segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:options.notify})||""}],promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(promises).then(function(){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed"));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(){return $state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams),to=toState;var toPath=to.path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(!options.reload)for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldTriggerReload(to,from,locals,options))return to.self.reloadOnSearch!==!1&&$urlRouter.update(),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams).defaultPrevented)return $urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?TransitionSuperseded:($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),evt.defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){options=extend({relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);return isDefined(state)?$state.$current!==state?!1:params?equalForKeys(state.params.$$values(params),$stateParams):!0:undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);return isDefined(state)?isDefined($state.$current.includes[state.name])?params?equalForKeys(state.params.$$values(params),$stateParams,objectKeys(params)):!0:!1:undefined},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys(),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldTriggerReload(to,from,locals,options){return to!==from||(locals!==from.locals||options.reload)&&to.self.reloadOnSearch!==!1?void 0:!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){return state.parent&&state.parent.params?extend(state.parent.params.$$new(),state.ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,"abstract":!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){$timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){var promise=$animate.enter(element,null,target,cb);promise&&promise.then&&promise.then(cb)},leave:function(element,cb){var promise=$animate.leave(element,cb);promise&&promise.then&&promise.then(cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name];var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),inherited=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(inherited?inherited.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");return stateData&&stateData.state&&stateData.state.name?stateData.state:void 0}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name),params=null,base=stateContext(element)||$state.$current,newHref=null,isAnchor="A"===element.prop("tagName"),isForm="FORM"===element[0].nodeName,attr=isForm?"action":"href",nav=!0,options={relative:base,inherit:!0},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=angular.copy(newVal)),nav){newHref=$state.href(ref.state,params,options);var activeDirective=uiSrefActive[1]||uiSrefActive[0];return activeDirective&&activeDirective.$$setStateInfo(ref.state,params),null===newHref?(nav=!1,!1):void attrs.$set(attr,newHref)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal){newVal!==params&&update(newVal)},!0),params=angular.copy(scope.$eval(ref.paramExpr))),update(),isForm||element.bind("click",function(e){var button=e.which||e.button;if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){var transition=$timeout(function(){$state.go(ref.state,params,options)});e.preventDefault();var ignorePreventDefaultCount=isAnchor&&!newHref?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}})}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){isMatch()?$element.addClass(activeClass):$element.removeClass(activeClass)}function isMatch(){return"undefined"!=typeof $attrs.uiSrefActiveEq?state&&$state.is(state.name,params):state&&$state.includes(state.name,params)}var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActiveEq||$attrs.uiSrefActive||"",!1)($scope),this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element)),params=newParams,update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){var isFilter=function(state){return $state.is(state)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state){return $state.includes(state)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/,"-")}var split=reverseString(string).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;nPath>i;i++){paramName=paramNames[i];var param=this.params[paramName],paramVal=m[i+1];for(j=0;j<param.replace;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&param.array===!0&&(paramVal=decodePathArray(paramVal)),values[paramName]=param.value(paramVal)}for(;nTotal>i;i++)paramName=paramNames[i],values[paramName]=this.params[paramName].value(searchParams[paramName]);return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;nTotal>i;i++){var isPathParam=nPath>i,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=isDefaultValue?param.squash:!1,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1];if(squash===!1)null!=encoded&&(result+=isArray(encoded)?map(encoded,encodeDashes).join("-"):encodeURIComponent(encoded)),result+=nextSegment;else if(squash===!0){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment)}else{if(null==encoded||isDefaultValue&&squash!==!1)continue;isArray(encoded)||(encoded=[encoded]),encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+(name+"="+encoded),search=!0}}return result},Type.prototype.is=function(){return!0},Type.prototype.encode=function(val){return val},Type.prototype.decode=function(val){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$asArray=function(mode,isSearch){function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){val=arrayWrap(val);var result=map(val,callback);return allTruthyMode===!0?0===filter(result,falsey).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=arrayEqualsHandler(bindTo(type,"equals")),this.pattern=type.pattern,this.$arrayMode=mode}if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular)},{}],240:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/accounts"}),module.exports={getAccounts:function(){return client({params:{can_create:!0}}).then(util.wrapper("accounts"))},postPlans:function(args){return client({path:"/select_plan",method:"POST",entity:args.body}).then(util.wrapper())},getBillingInfo:function(){return client({path:"/get_billing_info"}).then(util.wrapper())},getPaymentHistory:function(){return client({path:"/payment_history"}).then(util.wrapper("payment_history"))}}},{1:255,2:259,3:270}],241:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2),client=client.wrap(pathPrefix,{prefix:"/events"}),funnel=client.wrap(pathPrefix,{prefix:"/analytics/funnels"}),segment=client.wrap(pathPrefix,{prefix:"/analytics/segments"});module.exports={getEvents:function(args){return client({params:args.options.query,headers:args.headers}).then(util.wrapper("events"))},getPropAnalytics:function(args){return args.options?args.options.eventUid=args.options.eventUid?"/"+args.options.eventUid:"":(args.options={},args.options.eventUid=""),client({path:args.options.eventUid,headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},deleteEvents:function(args){return client({path:"/"+args.options.eventUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())},editEvents:function(args){return client({path:"/"+args.options.eventUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},getAnalytics:function(args){return client({path:"/"+args.options.eventType,headers:args.headers}).then(util.wrapper())},postAnalytics:function(args){return client({path:"/"+args.options.eventType,headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},deleteFunnel:function(args){return funnel({path:"/"+args.options.funnelUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())},addFunnel:function(args){return funnel({headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},editFunnel:function(args){return funnel({path:"/"+args.options.funnelUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},deleteBookmarkSegment:function(args){return segment({path:"/"+args.options.segmentUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())}}},{1:255,2:259,3:270}],242:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/get_api_host"}),module.exports={getApiHost:function(){return client().then(util.wrapper())}}},{1:255,2:259,3:270}],243:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/api_metrics"}),module.exports={get:function(args){return client({path:"/"+args.options.metricsType,headers:args.headers,params:args.options.query||{}}).then(util.wrapper())}}},{1:255,2:259,3:270}],244:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2),user_session=client.wrap(pathPrefix,{prefix:"/application/users"});module.exports={login:function(args){return user_session({path:"/login",method:"POST",entity:args.body,headers:args.headers||{}}).then(util.wrapper())},get:function(args){return user_session({path:"/current",headers:args.headers}).then(util.wrapper("application_user"))},logout:function(args){return user_session({path:"/logout",headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())},resetPassword:function(args){return user_session({path:"/forgot_password/reset_password",method:"POST",entity:args.body,headers:args.headers||{}}).then(util.wrapper()) },activateAccount:function(args){return user_session({path:"/"+args.options.appUserUid+"/activate/"+args.options.authtoken}).then(util.wrapper())}}},{1:255,2:259,3:270}],245:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/applications"}),module.exports={getApp:function(args){return client({path:"/"+args.headers.application_api_key,headers:args.headers}).then(util.wrapper("application"))},getApps:function(){return client({params:{include_discrete_variables:!0}}).then(util.wrapper("applications"))},getAppSettings:function(args){return client({path:"/"+args.headers.application_api_key+"/"+args.options.settingType,headers:args.headers}).then(util.wrapper())},postAppSettings:function(args){return client({path:"/"+args.headers.application_api_key+"/"+args.options.settingType,method:"POST",headers:args.headers,entity:args.body}).then(util.wrapper())},addOne:function(args){return client({method:"POST",headers:args.headers,entity:args.body}).then(util.wrapper())},deleteOne:function(args){return client({path:"/"+args.options.appUid,headers:args.headers,method:"DELETE"}).then(util.wrapper())},transferOwnerShip:function(args){return client({method:"POST",path:"/"+args.options.appUid+"/transfer_ownership",headers:args.headers,entity:args.body}).then(util.wrapper())},editOne:function(args){return client({path:"/"+args.options.appUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},ownershipActivation:function(args){return client({method:"POST",path:"/"+args.options.authtoken+"/accept_application_ownership",headers:args.headers,entity:args.body}).then(util.wrapper())}}},{1:255,2:259,3:270}],246:[function(require,module){"use strict";var client=require(1),util=(require(3),require(2));module.exports={get:function(args){return client({path:"/query_bookmarks",headers:args.headers}).then(util.wrapper("query_bookmarks"))},"delete":function(args){return client({path:"/query_bookmarks/"+args.options.paramId,headers:args.headers,method:"DELETE",entity:args.body||"{}"}).then(util.wrapper())},add:function(args){return client({path:"/query_bookmarks",headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())}}},{1:255,2:259,3:270}],247:[function(require,module){"use strict";module.exports={Apihost:require(3),SystemUserSession:require(16),AppUserSession:require(5),Application:require(6),Classes:require(8),Objects:require(13),File:require(10),Notifications:require(12),FieldTypes:require(18),ServerConfig:require(15),Plans:require(14),Accounts:require(1),Tenants:require(17),Extensions:require(9),ApiMetrics:require(4),Integration:require(11),Bookmarks:require(7),Analytics:require(2)}},{1:240,10:250,11:251,12:252,13:253,14:254,15:256,16:257,17:258,18:260,2:241,3:242,4:243,5:244,6:245,7:246,8:248,9:249}],248:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/classes"}),module.exports={getAll:function(args){return args.options=args.options||{},client({headers:args.headers,params:args.options.query||{}}).then(util.wrapper())},getOne:function(args){return client({path:"/"+args.options.classUid,headers:args.headers}).then(util.wrapper("class"))},editOne:function(args){return client({path:"/"+args.options.classUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},addOne:function(args){return client({headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},deleteOne:function(args){return client({path:"/"+args.options.classUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())}}},{1:255,2:259,3:270}],249:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/cc"}),module.exports={get:function(args){return args.options.paramId=args.options.paramId||"",client({path:"/"+args.options.paramId,headers:args.headers,params:args.options.query||{}}).then(util.wrapper())},"delete":function(args){return client({path:"/"+args.options.paramId,headers:args.headers,method:"DELETE",entity:args.body||"{}"}).then(util.wrapper())},addDomain:function(args){return client({path:"/"+args.options.paramId,headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},state:function(args){return client({path:"/"+args.options.paramId,headers:args.headers,method:"POST",entity:"{}"}).then(util.wrapper())}}},{1:255,2:259,3:270}],250:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/uploads"}),module.exports={getUpload:function(args){return args.options.uploadType=args.options.uploadType||"",client({headers:args.headers,path:"/"+args.options.uploadType,params:args.options.query||{}}).then(util.wrapper())},deleteOne:function(args){return client({path:"/"+args.options.uploadUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())},deleteSelected:function(args){return client({headers:args.headers,params:{query:args.options.query},method:"DELETE",entity:"{}"}).then(util.wrapper())},postDefaultACl:function(args){return client({headers:args.headers,path:"/default_acl",method:"POST",entity:args.body}).then(util.wrapper())},updateUploadACl:function(args){return client({headers:args.headers,path:"/"+args.options.uploadUid,method:"PUT",entity:args.body}).then(util.wrapper())}}},{1:255,2:259,3:270}],251:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2),client=client.wrap(pathPrefix,{prefix:"/web_hooks"});module.exports={get:function(args){return client({headers:args.headers}).then(util.wrapper("web_hooks"))},put:function(args){return client({path:"/"+args.options.webHookUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},post:function(args){return client({headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},"delete":function(args){return client({path:"/"+args.options.hookUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())}}},{1:255,2:259,3:270}],252:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2),credentialsPrefix=client.wrap(pathPrefix,{prefix:"/notification_credentials/details"});client=client.wrap(pathPrefix,{prefix:"/notifications"}),module.exports={getAll:function(args){return client({path:"/"+args.options.pathId,headers:args.headers,params:args.options.query||{}}).then(util.wrapper())},addOne:function(args){return client({path:"/"+args.options.pathId,headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},editOne:function(args){return client({path:"/"+args.options.pathId+"/"+args.options.objectUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},deleteOne:function(args){return client({path:"/"+args.options.pathId+"/"+args.options.objectUid,headers:args.headers,method:"DELETE",entity:"{}"})},getCredentialsDetails:function(args){return credentialsPrefix({headers:args.headers}).then(util.wrapper("notification_credentials"))}}},{1:255,2:259,3:270}],253:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2),client=client.wrap(pathPrefix,{prefix:"/classes"});module.exports={getOne:function(args){return client({path:args.options.classUid+"/objects/"+args.options.objectUid,headers:args.headers,params:args.options.query}).then(util.wrapper("object"))},getAll:function(args){var apiUrl="/"+[args.options.classUid,"objects"].join("/");return client({path:apiUrl,headers:args.headers,params:args.options.query}).then(util.wrapper())},editOne:function(args){return client({path:args.options.classUid+"/objects/"+args.options.objectUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},addOne:function(args){return client({path:args.options.classUid+"/objects",headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())},deleteOne:function(args){return client({path:args.options.classUid+"/objects/"+args.options.objectUid,headers:args.headers,method:"DELETE",entity:"{}"}).then(util.wrapper())},deleteSelected:function(args){var apiUrl="/"+[args.options.classUid,"objects"].join("/");return client({path:apiUrl,headers:args.headers,params:{query:args.options.query},method:"DELETE",entity:"{}"}).then(util.wrapper())}}},{1:255,2:259,3:270}],254:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/plans"}),module.exports={getPlans:function(){return client().then(util.wrapper("plans"))}}},{1:255,2:259,3:270}],255:[function(require,module){"use strict";var rest=require(1),mime=require(3),pathPrefix=require(4),errorCode=require(2);rest=rest.wrap(mime,{mime:"application/json"}).wrap(pathPrefix,{prefix:"/v1"}).wrap(errorCode),module.exports=rest},{1:263,2:268,3:269,4:270}],256:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/admin/config"}),module.exports={getServerConfig:function(){return client().then(util.wrapper())}}},{1:255,2:259,3:270}],257:[function(require,module){var client=require(1),pathPrefix=require(3),util=require(2),user_session=client.wrap(pathPrefix,{prefix:"/user_session"}),user=client.wrap(pathPrefix,{prefix:"/user"});module.exports={login:function(args){return user_session({method:"POST",entity:args.body}).then(util.wrapper())},get:function(){return user({}).then(util.wrapper("user"))},logout:function(){return user_session({method:"DELETE",entity:"{}"})},postForgotPassword:function(args){return user({path:"/forgot_password",method:"POST",entity:args.body}).then(util.wrapper())},signUp:function(args){return user({method:"POST",entity:args.body}).then(util.wrapper())},update:function(args){return user({method:"PUT",entity:args.body}).then(util.wrapper())},resetPassword:function(args){return user({path:"/reset_password_submit",method:"POST",entity:args.body}).then(util.wrapper())},activateAccount:function(args){return client({path:"/activations/"+args.options.authtoken+"/activate"}).then(util.wrapper())}}},{1:255,2:259,3:270}],258:[function(require,module){"use strict";var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/tenants"}),module.exports={getAll:function(args){return client({headers:args.headers}).then(util.wrapper("tenants"))},editTenant:function(args){return client({path:"/"+args.options.tenantUid,headers:args.headers,method:"PUT",entity:args.body}).then(util.wrapper())},deleteTenant:function(args){return client({path:"/"+args.options.tenantUid,headers:args.headers,method:"DELETE",entity:args.body}).then(util.wrapper())},addTenant:function(args){return client({headers:args.headers,method:"POST",entity:args.body}).then(util.wrapper())}}},{1:255,2:259,3:270}],259:[function(require,module){module.exports={wrapper:function(wrap){return"undefined"!=typeof wrap?function(res){return res.entity[wrap]}:function(res){return res.entity}}}},{}],260:[function(require,module){var client=require(1),pathPrefix=require(3),util=require(2);client=client.wrap(pathPrefix,{prefix:"/applications/valid_field_types"}),module.exports={getDataTypes:function(){return client().then(util.wrapper("field_types"))}}},{1:255,2:259,3:270}],261:[function(require,module){function noop(){}var process=module.exports={};process.nextTick=function(){var canSetImmediate="undefined"!=typeof window&&window.setImmediate,canPost="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};if(canPost){var queue=[];return window.addEventListener("message",function(ev){var source=ev.source;if((source===window||null===source)&&"process-tick"===ev.data&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function(fn){queue.push(fn),window.postMessage("process-tick","*")}}return function(fn){setTimeout(fn,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")}},{}],262:[function(require,module){!function(define,location){"use strict";var undef;define(function(require){function buildUrl(template,params){var url,name,queryStringParams,re;if(url=template,queryStringParams={},params){for(name in params)re=new RegExp("\\{"+name+"\\}"),re.test(url)?url=url.replace(re,encodeURIComponent(params[name]),"g"):queryStringParams[name]=params[name];for(name in queryStringParams)url+=-1===url.indexOf("?")?"?":"&",url+=encodeURIComponent(name),null!==queryStringParams[name]&&void 0!==queryStringParams[name]&&(url+="=",url+=encodeURIComponent(queryStringParams[name]))}return url}function startsWith(str,test){return 0===str.indexOf(test)}function UrlBuilder(template,params){return this instanceof UrlBuilder?void(template instanceof UrlBuilder?(this._template=template.template,this._params=mixin({},this._params,params)):(this._template=(template||"").toString(),this._params=params||{})):new UrlBuilder(template,params)}var mixin,origin,urlRE,absoluteUrlRE,fullyQualifiedUrlRE;return mixin=require(1),urlRE=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,absoluteUrlRE=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,fullyQualifiedUrlRE=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,UrlBuilder.prototype={append:function(template,params){return new UrlBuilder(this._template+template,mixin({},this._params,params))},fullyQualify:function(){if(!location)return this;if(this.isFullyQualified())return this;var template=this._template;return startsWith(template,"//")?template=origin.protocol+template:startsWith(template,"/")?template=origin.origin+template:this.isAbsolute()||(template=origin.origin+origin.pathname.substring(0,origin.pathname.lastIndexOf("/")+1)),-1===template.indexOf("/",8)&&(template+="/"),new UrlBuilder(template,this._params)},isAbsolute:function(){return absoluteUrlRE.test(this.build())},isFullyQualified:function(){return fullyQualifiedUrlRE.test(this.build())},isCrossOrigin:function(){if(!origin)return!0;var url=this.parts();return url.protocol!==origin.protocol||url.hostname!==origin.hostname||url.port!==origin.port},parts:function(){var url,parts;return url=this.fullyQualify().build().match(urlRE),parts={href:url[0],protocol:url[1],host:url[3]||"",hostname:url[4]||"",port:url[6],pathname:url[7]||"",search:url[8]||"",hash:url[9]||""},parts.origin=parts.protocol+"//"+parts.host,parts.port=parts.port||("https:"===parts.protocol?"443":"http:"===parts.protocol?"80":""),parts},build:function(params){return buildUrl(this._template,mixin({},this._params,params))},toString:function(){return this.build()}},origin=location?new UrlBuilder(location.href).parts():undef,UrlBuilder})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)},"undefined"!=typeof window?window.location:void 0)},{1:281}],263:[function(require,module){!function(define){"use strict";define(function(require){var rest=require(1),browser=require(2);return rest.setPlatformDefaultClient(browser),rest})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:265,2:266}],264:[function(require,module){!function(define){"use strict";define(function(){return function(impl,target){return target&&(impl.skip=function(){return target}),impl.wrap=function(interceptor,config){return interceptor(impl,config)},impl.chain=function(){return"undefined"!=typeof console,impl.wrap.apply(this,arguments)},impl}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],265:[function(require,module){!function(define){"use strict";var undef;define(function(require){function defaultClient(){return target.apply(undef,arguments)}var client,target,platformDefault;return client=require(1),defaultClient.setDefaultClient=function(client){target=client},defaultClient.getDefaultClient=function(){return target},defaultClient.resetDefaultClient=function(){target=platformDefault},defaultClient.setPlatformDefaultClient=function(client){if(platformDefault)throw new Error("Unable to redefine platformDefaultClient");target=platformDefault=client},client(defaultClient)})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:264}],266:[function(require,module){!function(define,global){"use strict";define(function(require){function parseHeaders(raw){var headers={};return raw?(raw.trim().split(headerSplitRE).forEach(function(header){var boundary,name,value;boundary=header.indexOf(":"),name=normalizeHeaderName(header.substring(0,boundary).trim()),value=header.substring(boundary+1).trim(),headers[name]?Array.isArray(headers[name])?headers[name].push(value):headers[name]=[headers[name],value]:headers[name]=value}),headers):headers}function safeMixin(target,source){return Object.keys(source||{}).forEach(function(prop){if(source.hasOwnProperty(prop)&&prop in target)try{target[prop]=source[prop]}catch(e){}}),target}var when,UrlBuilder,normalizeHeaderName,responsePromise,client,headerSplitRE;return when=require(5),UrlBuilder=require(1),normalizeHeaderName=require(3),responsePromise=require(4),client=require(2),headerSplitRE=/[\r|\n]+/,client(function(request){return responsePromise.promise(function(resolve,reject){var client,method,url,headers,entity,headerName,response,XMLHttpRequest;if(request="string"==typeof request?{path:request}:request||{},response={request:request},request.canceled)return response.error="precanceled",void reject(response);if(XMLHttpRequest=request.engine||global.XMLHttpRequest,!XMLHttpRequest)return void reject({request:request,error:"xhr-not-available"});entity=request.entity,request.method=request.method||(entity?"POST":"GET"),method=request.method,url=new UrlBuilder(request.path||"",request.params).build();try{client=response.raw=new XMLHttpRequest,safeMixin(client,request.mixin),client.open(method,url,!0),safeMixin(client,request.mixin),headers=request.headers;for(headerName in headers)("Content-Type"!==headerName||"multipart/form-data"!==headers[headerName])&&client.setRequestHeader(headerName,headers[headerName]);request.canceled=!1,request.cancel=function(){request.canceled=!0,client.abort(),reject(response)},client.onreadystatechange=function(){request.canceled||client.readyState===(XMLHttpRequest.DONE||4)&&(response.status={code:client.status,text:client.statusText},response.headers=parseHeaders(client.getAllResponseHeaders()),response.entity=client.responseText,response.status.code>0?resolve(response):setTimeout(function(){resolve(response)},0))};try{client.onerror=function(){response.error="loaderror",reject(response)}}catch(e){}client.send(entity)}catch(e){response.error="loaderror",reject(response)}})})})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)},"undefined"!=typeof window?window:void 0)},{1:262,2:264,3:282,4:283,5:348}],267:[function(require,module){!function(define){"use strict";define(function(require){function defaultInitHandler(config){return config}function defaultRequestHandler(request){return request}function defaultResponseHandler(response){return response}function race(promisesOrValues){return when.promise(function(resolve,reject){promisesOrValues.forEach(function(promiseOrValue){when(promiseOrValue,resolve,reject)})})}function ComplexRequest(properties){return this instanceof ComplexRequest?void mixin(this,properties):new ComplexRequest(properties)}function interceptor(handlers){var initHandler,requestHandler,successResponseHandler,errorResponseHandler;return handlers=handlers||{},initHandler=handlers.init||defaultInitHandler,requestHandler=handlers.request||defaultRequestHandler,successResponseHandler=handlers.success||handlers.response||defaultResponseHandler,errorResponseHandler=handlers.error||function(){return when((handlers.response||defaultResponseHandler).apply(this,arguments),when.reject,when.reject)},function(target,config){function interceptedClient(request){var context,meta;return context={},meta={arguments:Array.prototype.slice.call(arguments),client:interceptedClient},request="string"==typeof request?{path:request}:request||{},request.originator=request.originator||interceptedClient,responsePromise(requestHandler.call(context,request,config,meta),function(request){var response,abort,next;return next=target,request instanceof ComplexRequest&&(abort=request.abort,next=request.client||next,response=request.response,request=request.request),response=response||when(request,function(request){return when(next(request),function(response){return successResponseHandler.call(context,response,config,meta)},function(response){return errorResponseHandler.call(context,response,config,meta)})}),abort?race([response,abort]):response},function(error){return when.reject({request:request,error:error})})}return"object"==typeof target&&(config=target),"function"!=typeof target&&(target=handlers.client||defaultClient),config=initHandler(config||{}),client(interceptedClient,target)}}var defaultClient,mixin,responsePromise,client,when;return defaultClient=require(2),mixin=require(3),responsePromise=require(4),client=require(1),when=require(5),interceptor.ComplexRequest=ComplexRequest,interceptor})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:264,2:265,3:281,4:283,5:348}],268:[function(require,module){!function(define){"use strict";define(function(require){var interceptor,when;return interceptor=require(1),when=require(2),interceptor({init:function(config){return config.code=config.code||400,config},response:function(response,config){return response.status&&response.status.code>=config.code?when.reject(response):response}})})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:267,2:348}],269:[function(require,module){!function(define){"use strict";define(function(require){var interceptor,mime,registry,noopConverter,when;return interceptor=require(1),mime=require(2),registry=require(3),when=require(4),noopConverter={read:function(obj){return obj},write:function(obj){return obj}},interceptor({init:function(config){return config.registry=config.registry||registry,config},request:function(request,config){var type,headers;return headers=request.headers||(request.headers={}),type=mime.parse(headers["Content-Type"]=headers["Content-Type"]||config.mime||"text/plain"),headers.Accept=headers.Accept||config.accept||type.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in request?config.registry.lookup(type).otherwise(function(){if(config.permissive)return noopConverter;throw"mime-unknown"}).then(function(converter){var client=config.client||request.originator;return when.attempt(converter.write,request.entity,{client:client,request:request,mime:type,registry:config.registry}).otherwise(function(){throw"mime-serialization"}).then(function(entity){return request.entity=entity,request})}):request},response:function(response,config){if(!(response.headers&&response.headers["Content-Type"]&&response.entity))return response;var type=mime.parse(response.headers["Content-Type"]);return config.registry.lookup(type).otherwise(function(){return noopConverter}).then(function(converter){var client=config.client||response.request&&response.request.originator;return when.attempt(converter.read,response.entity,{client:client,response:response,mime:type,registry:config.registry}).otherwise(function(e){throw response.error="mime-deserialization",response.cause=e,response}).then(function(entity){return response.entity=entity,response})})}})})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:267,2:272,3:273,4:348}],270:[function(require,module){!function(define){"use strict";define(function(require){function startsWith(str,prefix){return 0===str.indexOf(prefix)}function endsWith(str,suffix){return str.lastIndexOf(suffix)+suffix.length===str.length}var interceptor,UrlBuilder;return interceptor=require(2),UrlBuilder=require(1),interceptor({request:function(request,config){var path;return config.prefix&&!new UrlBuilder(request.path).isFullyQualified()&&(path=config.prefix,request.path&&(endsWith(path,"/")||startsWith(request.path,"/")||(path+="/"),path+=request.path),request.path=path),request}})})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:262,2:267}],271:[function(require,module){!function(define){"use strict";define(function(require){var interceptor,uriTemplate,mixin;return interceptor=require(1),uriTemplate=require(3),mixin=require(2),interceptor({init:function(config){return config.params=config.params||{},config.template=config.template||"",config},request:function(request,config){var template,params;return template=request.path||config.template,params=mixin({},request.params,config.params),request.path=uriTemplate.expand(template,params),delete request.params,request}})})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:267,2:281,3:285}],272:[function(require,module){!function(define){"use strict";var undef;define(function(){function parse(mime){var params,type;return params=mime.split(";"),type=params[0].trim().split("+"),{raw:mime,type:type[0],suffix:type[1]?"+"+type[1]:"",params:params.slice(1).reduce(function(params,pair){return pair=pair.split("="),params[pair[0].trim()]=pair[1]?pair[1].trim():undef,params},{})}}return{parse:parse}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],273:[function(require,module){!function(define){"use strict";define(function(require){function Registry(mimes){this.lookup=function(type){var parsed;return parsed="string"==typeof type?mime.parse(type):type,mimes[parsed.raw]?mimes[parsed.raw]:mimes[parsed.type+parsed.suffix]?mimes[parsed.type+parsed.suffix]:mimes[parsed.type]?mimes[parsed.type]:mimes[parsed.suffix]?mimes[parsed.suffix]:when.reject(new Error('Unable to locate converter for mime "'+parsed.raw+'"'))},this.delegate=function(type){return{read:function(){var args=arguments;return this.lookup(type).then(function(converter){return converter.read.apply(this,args)}.bind(this))}.bind(this),write:function(){var args=arguments;return this.lookup(type).then(function(converter){return converter.write.apply(this,args)}.bind(this))}.bind(this)}},this.register=function(type,converter){return mimes[type]=when(converter),mimes[type]},this.child=function(){return new Registry(Object.create(mimes))}}var mime,when,registry;return mime=require(1),when=require(7),registry=new Registry({}),registry.register("application/hal",require(2)),registry.register("application/json",require(3)),registry.register("application/x-www-form-urlencoded",require(4)),registry.register("multipart/form-data",require(5)),registry.register("text/plain",require(6)),registry.register("+json",registry.delegate("application/json")),registry})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:272,2:274,3:275,4:276,5:277,6:278,7:348}],274:[function(require,module){!function(define){"use strict";define(function(require){function defineProperty(obj,name,value){Object.defineProperty(obj,name,{value:value,configurable:!0,enumerable:!1,writeable:!0})}var pathPrefix,template,find,lazyPromise,responsePromise,when;return pathPrefix=require(1),template=require(2),find=require(3),lazyPromise=require(4),responsePromise=require(5),when=require(6),{read:function(str,opts){function deprecationWarning(relationship,deprecation){(deprecation&&console&&console.warn||console.log)&&(console.warn||console.log).call(console,"Relationship '"+relationship+"' is deprecated, see "+deprecation)}var client,console;return opts=opts||{},client=opts.client,console=opts.console||console,opts.registry.lookup(opts.mime.suffix).then(function(converter){return when(converter.read(str,opts)).then(function(root){return find.findProperties(root,"_embedded",function(embedded,resource,name){Object.keys(embedded).forEach(function(relationship){if(!(relationship in resource)){var related=responsePromise({entity:embedded[relationship]});defineProperty(resource,relationship,related)}}),defineProperty(resource,name,embedded)}),find.findProperties(root,"_links",function(links,resource,name){Object.keys(links).forEach(function(relationship){var link=links[relationship];relationship in resource||defineProperty(resource,relationship,responsePromise.make(lazyPromise(function(){return link.deprecation&&deprecationWarning(relationship,link.deprecation),link.templated===!0?template(client)({path:link.href}):client({path:link.href})})))}),defineProperty(resource,name,links),defineProperty(resource,"clientFor",function(relationship,clientOverride){var link=links[relationship];if(!link)throw new Error("Unknown relationship: "+relationship);return link.deprecation&&deprecationWarning(relationship,link.deprecation),link.templated===!0?template(clientOverride||client,{template:link.href}):pathPrefix(clientOverride||client,{prefix:link.href})}),defineProperty(resource,"requestFor",function(relationship,request,clientOverride){var client=this.clientFor(relationship,clientOverride);return client(request)})}),root})})},write:function(obj,opts){return opts.registry.lookup(opts.mime.suffix).then(function(converter){return converter.write(obj,opts)})}}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:270,2:271,3:279,4:280,5:283,6:348}],275:[function(require,module){!function(define){"use strict";define(function(){function createConverter(reviver,replacer){return{read:function(str){return JSON.parse(str,reviver)},write:function(obj){return JSON.stringify(obj,replacer)},extend:createConverter}}return createConverter()})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],276:[function(require,module){!function(define){"use strict";define(function(){function urlEncode(str){return str=encodeURIComponent(str),str.replace(encodedSpaceRE,"+")}function urlDecode(str){return str=str.replace(urlEncodedSpaceRE," "),decodeURIComponent(str)}function append(str,name,value){return Array.isArray(value)?value.forEach(function(value){str=append(str,name,value)}):(str.length>0&&(str+="&"),str+=urlEncode(name),void 0!==value&&null!==value&&(str+="="+urlEncode(value))),str}var encodedSpaceRE,urlEncodedSpaceRE;return encodedSpaceRE=/%20/g,urlEncodedSpaceRE=/\+/g,{read:function(str){var obj={};return str.split("&").forEach(function(entry){var pair,name,value;pair=entry.split("="),name=urlDecode(pair[0]),value=2===pair.length?urlDecode(pair[1]):null,name in obj?(Array.isArray(obj[name])||(obj[name]=[obj[name]]),obj[name].push(value)):obj[name]=value}),obj},write:function(obj){var str="";return Object.keys(obj).forEach(function(name){str=append(str,name,obj[name])}),str}}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],277:[function(require,module){!function(define){"use strict";define(function(){function isFormElement(object){return object&&1===object.nodeType&&"FORM"===object.tagName}function createFormDataFromObject(object){var value,formData=new FormData;for(var property in object)object.hasOwnProperty(property)&&(value=object[property],value instanceof File?formData.append(property,value,value.name):value instanceof Blob?formData.append(property,value):formData.append(property,String(value))); return formData}return{write:function(object){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(object instanceof FormData)return object;if(isFormElement(object))return new FormData(object);if("object"==typeof object&&null!==object)return createFormDataFromObject(object);throw new Error("Unable to create FormData from object "+object)}}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],278:[function(require,module){!function(define){"use strict";define(function(){return{read:function(str){return str},write:function(obj){return obj.toString()}}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],279:[function(require,module){!function(define){"use strict";define(function(){return{findProperties:function findProperties(obj,prop,callback){"object"==typeof obj&&null!==obj&&(prop in obj&&callback(obj[prop],obj,prop),Object.keys(obj).forEach(function(key){findProperties(obj[key],prop,callback)}))}}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],280:[function(require,module){!function(define){"use strict";define(function(require){function lazyPromise(work){var defer,started,resolver,promise,then;return defer=when.defer(),started=!1,resolver=defer.resolver,promise=defer.promise,then=promise.then,promise.then=function(){return started||(started=!0,when.attempt(work).then(resolver.resolve,resolver.reject)),then.apply(promise,arguments)},promise}var when;return when=require(1),lazyPromise})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:348}],281:[function(require,module){!function(define){"use strict";define(function(){function mixin(dest){var i,l,source,name;for(dest||(dest={}),i=1,l=arguments.length;l>i;i+=1){source=arguments[i];for(name in source)name in dest&&(dest[name]===source[name]||name in empty&&empty[name]===source[name])||(dest[name]=source[name])}return dest}var empty={};return mixin})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],282:[function(require,module){!function(define){"use strict";define(function(){function normalizeHeaderName(name){return name.toLowerCase().split("-").map(function(chunk){return chunk.charAt(0).toUpperCase()+chunk.slice(1)}).join("-")}return normalizeHeaderName})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],283:[function(require,module){!function(define){"use strict";define(function(require){function property(promise,name){return promise.then(function(value){return value&&value[name]},function(value){return when.reject(value&&value[name])})}function entity(){return property(this,"entity")}function status(){return property(property(this,"status"),"code")}function headers(){return property(this,"headers")}function header(headerName){return headerName=normalizeHeaderName(headerName),property(this.headers(),headerName)}function follow(rels){return rels=[].concat(rels),make(when.reduce(rels,function(response,rel){if("string"==typeof rel&&(rel={rel:rel}),"function"!=typeof response.entity.clientFor)throw new Error("Hypermedia response expected");var client=response.entity.clientFor(rel.rel);return client({params:rel.params})},this))}function make(promise){return promise.status=status,promise.headers=headers,promise.header=header,promise.entity=entity,promise.follow=follow,promise}function responsePromise(){return make(when.apply(when,arguments))}var when=require(2),normalizeHeaderName=require(1);return responsePromise.make=make,responsePromise.reject=function(val){return make(when.reject(val))},responsePromise.promise=function(func){return make(when.promise(func))},responsePromise})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:282,2:348}],284:[function(require,module){!function(define){"use strict";define(function(){function encode(str,allowed){if("string"!=typeof str)throw new Error("String required for URL encoding");return str.split("").map(function(char){if(allowed.hasOwnProperty(char))return char;var code=char.charCodeAt(0);return 127>=code?"%"+code.toString(16).toUpperCase():encodeURIComponent(char).toUpperCase()}).join("")}function makeEncoder(allowed){return allowed=allowed||charMap.unreserved,function(str){return encode(str,allowed)}}function decode(str){return decodeURIComponent(str)}var charMap;return charMap=function(){var strings={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return strings.genDelims=":/?#[]@",strings.subDelims="!$&'()*+,;=",strings.reserved=strings.genDelims+strings.subDelims,strings.unreserved=strings.alpha+strings.digit+"-._~",strings.url=strings.reserved+strings.unreserved,strings.scheme=strings.alpha+strings.digit+"+-.",strings.userinfo=strings.unreserved+strings.subDelims+":",strings.host=strings.unreserved+strings.subDelims,strings.port=strings.digit,strings.pchar=strings.unreserved+strings.subDelims+":@",strings.segment=strings.pchar,strings.path=strings.segment+"/",strings.query=strings.pchar+"/?",strings.fragment=strings.pchar+"/?",Object.keys(strings).reduce(function(charMap,set){return charMap[set]=strings[set].split("").reduce(function(chars,char){return chars[char]=!0,chars},{}),charMap},{})}(),{decode:decode,encode:makeEncoder(),encodeURL:makeEncoder(charMap.url),encodeScheme:makeEncoder(charMap.scheme),encodeUserInfo:makeEncoder(charMap.userinfo),encodeHost:makeEncoder(charMap.host),encodePort:makeEncoder(charMap.port),encodePathSegment:makeEncoder(charMap.segment),encodePath:makeEncoder(charMap.path),encodeQuery:makeEncoder(charMap.query),encodeFragment:makeEncoder(charMap.fragment)}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{}],285:[function(require,module){!function(define){"use strict";var undef;define(function(require){function apply(operation,expression,params){return expression.split(",").reduce(function(result,variable){var opts,value;if(opts={},"*"===variable.slice(-1)&&(variable=variable.slice(0,-1),opts.explode=!0),prefixRE.test(variable)){var prefix=prefixRE.exec(variable);variable=prefix[1],opts.maxLength=parseInt(prefix[2])}return variable=uriEncoder.decode(variable),value=params[variable],value===undef||null===value?result:("string"==typeof value?(opts.maxLength&&(value=value.slice(0,opts.maxLength)),result+=result.length?operation.separator:operation.first,operation.named&&(result+=operation.encoder(variable),result+=value.length?"=":operation.empty),result+=operation.encoder(value)):result+=Array.isArray(value)?value.reduce(function(result,value){return result.length?(result+=opts.explode?operation.separator:",",operation.named&&opts.explode&&(result+=operation.encoder(variable),result+=value.length?"=":operation.empty)):(result+=operation.first,operation.named&&(result+=operation.encoder(variable),result+=value.length?"=":operation.empty)),result+=operation.encoder(value)},""):Object.keys(value).reduce(function(result,name){return result.length?result+=opts.explode?operation.separator:",":(result+=operation.first,operation.named&&!opts.explode&&(result+=operation.encoder(variable),result+=value[name].length?"=":operation.empty)),result+=operation.encoder(name),result+=opts.explode?"=":",",result+=operation.encoder(value[name])},""),result)},"")}function expandExpression(expression,params){var operation;if(operation=operations[expression.slice(0,1)],operation?expression=expression.slice(1):operation=operations[""],operation.reserved)throw new Error("Reserved expression operations are not supported");return apply(operation,expression,params)}function expandTemplate(template,params){var start,end,uri;for(uri="",end=0;;){if(start=template.indexOf("{",end),-1===start){uri+=template.slice(end);break}uri+=template.slice(end,start),end=template.indexOf("}",start)+1,uri+=expandExpression(template.slice(start+1,end-1),params)}return uri}var uriEncoder,operations,prefixRE;return uriEncoder=require(1),prefixRE=/^([^:]*):([0-9]+)$/,operations={"":{first:"",separator:",",named:!1,empty:"",encoder:uriEncoder.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:uriEncoder.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:uriEncoder.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:uriEncoder.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:uriEncoder.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:uriEncoder.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:uriEncoder.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:uriEncoder.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},{expand:expandTemplate}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:284}],286:[function(){!function(a,b){"use strict";b.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(a,c,d){return{require:"?ngModel",link:function(e,f,g,h){function i(a,b){return b&&"function"==typeof b?function(c,d){a(c,d),b(c,d)}:a}function j(a,b){var c=a.sortable("option","helper");return"clone"===c||"function"==typeof c&&b.item.sortable.isCustomHelperUsed()}var k,l={},m={receive:null,remove:null,start:null,stop:null,update:null},n={helper:null};return b.extend(l,a,e.$eval(g.uiSortable)),b.element.fn&&b.element.fn.jquery?(h?(e.$watch(g.ngModel+".length",function(){c(function(){f.data("ui-sortable")&&f.sortable("refresh")})}),m.start=function(a,b){b.item.sortable={index:b.item.index(),cancel:function(){b.item.sortable._isCanceled=!0},isCanceled:function(){return b.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!b.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:b.item.sortable._isCustomHelperUsed}},m.activate=function(){k=f.contents();var a=f.sortable("option","placeholder");if(a&&a.element&&"function"==typeof a.element){var c=a.element();c=b.element(c);var d=f.find('[class="'+c.attr("class")+'"]');k=k.not(d)}},m.update=function(a,b){b.item.sortable.received||(b.item.sortable.dropindex=b.item.index(),b.item.sortable.droptarget=b.item.parent(),f.sortable("cancel")),j(f,b)&&!b.item.sortable.received&&(k=k.not(k.last())),k.appendTo(f),b.item.sortable.received&&!b.item.sortable.isCanceled()&&e.$apply(function(){h.$modelValue.splice(b.item.sortable.dropindex,0,b.item.sortable.moved)})},m.stop=function(a,b){!b.item.sortable.received&&"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()?e.$apply(function(){h.$modelValue.splice(b.item.sortable.dropindex,0,h.$modelValue.splice(b.item.sortable.index,1)[0])}):"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()||j(f,b)||k.appendTo(f)},m.receive=function(a,b){b.item.sortable.received=!0},m.remove=function(a,b){"dropindex"in b.item.sortable||(f.sortable("cancel"),b.item.sortable.cancel()),b.item.sortable.isCanceled()||e.$apply(function(){b.item.sortable.moved=h.$modelValue.splice(b.item.sortable.index,1)[0]})},n.helper=function(a){return a&&"function"==typeof a?function(b,c){var d=a(b,c);return c.sortable._isCustomHelperUsed=c!==d,d}:a},e.$watch(g.uiSortable,function(a){f.data("ui-sortable")&&b.forEach(a,function(a,b){m[b]?("stop"===b&&(a=i(a,function(){e.$apply()})),a=i(m[b],a)):n[b]&&(a=n[b](a)),f.sortable("option",b,a)})},!0),b.forEach(m,function(a,b){l[b]=i(a,l[b])})):d.info("ui.sortable: ngModel not provided!",f),void f.sortable(l)):void d.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular)},{}],287:[function(require,module){"use strict";module.exports=require(1)},{1:286}],288:[function(){angular.module("summernote",[]).controller("SummernoteController",["$scope","$attrs",function($scope,$attrs){"use strict";var currentElement,summernoteConfig=$scope.summernoteConfig||{};if(angular.isDefined($attrs.height)&&(summernoteConfig.height=$attrs.height),angular.isDefined($attrs.focus)&&(summernoteConfig.focus=!0),angular.isDefined($attrs.lang)){if(!angular.isDefined($.summernote.lang[$attrs.lang]))throw new Error('"'+$attrs.lang+'" lang file must be exist.');summernoteConfig.lang=$attrs.lang}summernoteConfig.oninit=$scope.init,summernoteConfig.onenter=function(evt){$scope.enter({evt:evt})},summernoteConfig.onfocus=function(evt){$scope.focus({evt:evt})},summernoteConfig.onblur=function(evt){$scope.blur({evt:evt})},summernoteConfig.onpaste=function(evt){$scope.paste({evt:evt})},summernoteConfig.onkeydown=function(evt){$scope.keydown({evt:evt})},angular.isDefined($attrs.onImageUpload)&&(summernoteConfig.onImageUpload=function(files,editor,welEditable){$scope.imageUpload({files:files,editor:editor,welEditable:welEditable})}),this.activate=function(scope,element,ngModel){var updateNgModel=function(){var newValue=element.code();ngModel&&ngModel.$viewValue!==newValue&&(ngModel.$setViewValue(newValue),("$apply"!==$scope.$$phase||"$digest"!==$scope.$$phase)&&scope.$apply())};summernoteConfig.onkeyup=function(evt){updateNgModel(),$scope.keyup({evt:evt})},element.summernote(summernoteConfig);var unwatchNgModel,editor$=element.next(".note-editor");editor$.find(".note-toolbar").click(function(){updateNgModel(),editor$.hasClass("codeview")?(editor$.on("keyup",updateNgModel),ngModel&&(unwatchNgModel=scope.$watch(function(){return ngModel.$modelValue},function(newValue){editor$.find(".note-codable").val(newValue)}))):(editor$.off("keyup",updateNgModel),angular.isFunction(unwatchNgModel)&&unwatchNgModel())}),ngModel&&(ngModel.$render=function(){element.code(ngModel.$viewValue||"")}),currentElement=element},$scope.$on("$destroy",function(){currentElement.destroy()})}]).directive("summernote",[function(){"use strict";return{restrict:"EA",transclude:!0,replace:!0,require:["summernote","^?ngModel"],controller:"SummernoteController",scope:{summernoteConfig:"=config",init:"&onInit",enter:"&onEnter",focus:"&onFocus",blur:"&onBlur",paste:"&onPaste",keyup:"&onKeyup",keydown:"&onKeydown",imageUpload:"&onImageUpload"},template:'<div class="summernote"></div>',link:function(scope,element,attrs,ctrls){var summernoteController=ctrls[0],ngModel=ctrls[1];summernoteController.activate(scope,element,ngModel)}}}])},{}],289:[function(require,module){"use strict";module.exports=require(1)},{1:288}],290:[function(){var TrNgGrid;!function(TrNgGrid){var tableDirective="trNgGrid",headerDirective="trNgGridHeader",headerDirectiveAttribute="tr-ng-grid-header";TrNgGrid.columnHeaderTemplateId=headerDirective+".html";var bodyDirective="trNgGridBody",bodyDirectiveAttribute="tr-ng-grid-body",footerDirective="trNgGridFooter",footerDirectiveAttribute="tr-ng-grid-footer",globalFilterDirective="trNgGridGlobalFilter",globalFilterDirectiveAttribute="tr-ng-grid-global-filter",pagerDirective="trNgGridPager",pagerDirectiveAttribute="tr-ng-grid-pager",columnDirective="trNgGridColumn",columnDirectiveAttribute="tr-ng-grid-column",sortDirective="trNgGridColumnSort",sortDirectiveAttribute="tr-ng-grid-column-sort";TrNgGrid.columnSortTemplateId=sortDirective+".html";var filterColumnDirective="trNgGridColumnFilter",filterColumnDirectiveAttribute="tr-ng-grid-column-filter";TrNgGrid.columnFilterTemplateId=filterColumnDirective+".html";var rowPageItemIndexAttribute="tr-ng-grid-row-page-item-index";TrNgGrid.tableCssClass="tr-ng-grid table table-bordered table-hover",TrNgGrid.cellCssClass="tr-ng-cell",TrNgGrid.columnHeaderContentsCssClass="tr-ng-column-header",TrNgGrid.titleCssClass="tr-ng-title",TrNgGrid.sortCssClass="tr-ng-sort",TrNgGrid.filterColumnCssClass="tr-ng-column-filter",TrNgGrid.filterInputWrapperCssClass="",TrNgGrid.sortActiveCssClass="tr-ng-sort-active text-info",TrNgGrid.sortInactiveCssClass="tr-ng-sort-inactive text-muted",TrNgGrid.sortReverseOrderCssClass="tr-ng-sort-order-reverse glyphicon glyphicon-chevron-up",TrNgGrid.sortNormalOrderCssClass="tr-ng-sort-order-normal glyphicon glyphicon-chevron-down",TrNgGrid.selectedRowCssClass="active",TrNgGrid.footerOpsContainerCssClass="tr-ng-grid-footer form-inline";var GridController=function(){function GridController($compile,$scope,$element,$attrs,$transclude,$parse,$timeout){var _this=this;this.$compile=$compile,this.$parse=$parse,this.$timeout=$timeout,this.gridElement=$element,this.internalScope=$scope,this.scheduledRecompilationDereg=null;var scopeOptionsIdentifier="gridOptions";this.gridOptions={items:[],selectedItems:[],filterBy:null,filterByFields:{},orderBy:null,orderByReverse:!1,pageItems:null,currentPage:0,totalItems:null,enableFiltering:!0,enableSorting:!0,enableSelections:!0,enableMultiRowSelections:!0,onDataRequiredDelay:10},this.gridOptions.onDataRequired=$attrs.onDataRequired?$scope.onDataRequired:null,this.gridOptions.gridColumnDefs=[],$scope[scopeOptionsIdentifier]=this.gridOptions,this.externalScope=this.internalScope.$parent,this.linkScope(this.internalScope,scopeOptionsIdentifier,$attrs),this.gridOptions.onDataRequired&&$scope.$watchCollection("[gridOptions.filterBy, gridOptions.filterByFields, gridOptions.orderBy, gridOptions.orderByReverse, gridOptions.currentPage]",function(){_this.dataRequestPromise&&(_this.$timeout.cancel(_this.dataRequestPromise),_this.dataRequestPromise=null);var delay=_.isEmpty(_this.gridOptions.filterBy)?_this.gridOptions.onDataRequiredDelay:1e3;_this.dataRequestPromise=_this.$timeout(function(){_this.dataRequestPromise=null,_this.gridOptions.onDataRequired(_this.gridOptions)},delay,!0)}),this.internalScope.$watch("enableMultiRowSelections",function(newValue,oldValue){newValue===oldValue||newValue||_this.gridOptions.selectedItems.length>1&&_this.gridOptions.selectedItems.splice(1)}),this.internalScope.$watch("enableSelections",function(newValue,oldValue){newValue===oldValue||newValue||(_this.gridOptions.selectedItems.splice(0),_this.gridOptions.enableMultiRowSelections=!1)})}return GridController.prototype.setColumnOptions=function(columnIndex,columnOptions){columnIndex>=this.gridOptions.gridColumnDefs.length?(this.gridOptions.gridColumnDefs.push({}),this.setColumnOptions(columnIndex,columnOptions)):this.gridOptions.gridColumnDefs[columnIndex]=columnOptions},GridController.prototype.toggleSorting=function(propertyName){this.gridOptions.orderBy!=propertyName?this.gridOptions.orderBy=propertyName:this.gridOptions.orderByReverse=!this.gridOptions.orderByReverse},GridController.prototype.setFilter=function(propertyName,filter){filter?this.gridOptions.filterByFields[propertyName]=filter:delete this.gridOptions.filterByFields[propertyName],this.gridOptions.filterByFields=$.extend({},this.gridOptions.filterByFields)},GridController.prototype.toggleItemSelection=function(item){if(this.gridOptions.enableSelections){var itemIndex=this.gridOptions.selectedItems.indexOf(item);itemIndex>=0?this.gridOptions.selectedItems.splice(itemIndex,1):(this.gridOptions.enableMultiRowSelections||this.gridOptions.selectedItems.splice(0),this.gridOptions.selectedItems.push(item))}},GridController.prototype.scheduleRecompilationOnAvailableItems=function(){var _this=this;this.scheduledRecompilationDereg||this.gridOptions.items&&this.gridOptions.items.length||(this.scheduledRecompilationDereg=this.internalScope.$watch("items.length",function(newLength){newLength>0&&(_this.scheduledRecompilationDereg(),_this.$compile(_this.gridElement)(_this.externalScope))}))},GridController.prototype.linkScope=function(scope,scopeTargetIdentifier,attrs){var target=scope[scopeTargetIdentifier];for(var propName in target){var attributeExists="undefined"!=typeof attrs[propName]&&null!=attrs[propName];if(attributeExists){var isArray=!1;"undefined"!=typeof scope[propName]&&null!=scope[propName]&&(target[propName]=scope[propName],isArray=target[propName]instanceof Array);var compiledAttr=this.$parse(attrs[propName]),dualDataBindingPossible=compiledAttr&&compiledAttr.assign;dualDataBindingPossible&&!function(propName){scope.$watch(scopeTargetIdentifier+"."+propName,function(newValue,oldValue){newValue!==oldValue&&(scope[propName]=target[propName])}),scope.$watch(propName,function(newValue,oldValue){newValue!==oldValue&&(target[propName]=scope[propName])})}(propName)}}},GridController.prototype.splitByCamelCasing=function(input){var splitInput=input.split(/(?=[A-Z])/);return splitInput.length&&splitInput[0].length&&(splitInput[0]=splitInput[0][0].toLocaleUpperCase()+splitInput[0].substr(1)),splitInput.join(" ")},GridController}();angular.module("trNgGrid",[]).directive(tableDirective,[function(){return{restrict:"A",scope:{items:"=",selectedItems:"=?",filterBy:"=?",filterByFields:"=?",orderBy:"=?",orderByReverse:"=?",pageItems:"=?",currentPage:"=?",totalItems:"=?",enableFiltering:"=?",enableSorting:"=?",enableSelections:"=?",enableMultiRowSelections:"=?",onDataRequired:"&",onDataRequiredDelay:"=?"},controller:["$compile","$scope","$element","$attrs","$transclude","$parse","$timeout",GridController],compile:function(templateElement){templateElement.addClass(TrNgGrid.tableCssClass);var insertFooterElement=!1,insertHeadElement=!1,tableHeadElement=templateElement.children("thead");0==tableHeadElement.length&&(tableHeadElement=$("<thead>"),insertHeadElement=!0);var tableHeadRowTemplate=tableHeadElement.children("tr");0==tableHeadRowTemplate.length&&(tableHeadRowTemplate=$("<tr>").appendTo(tableHeadElement)),tableHeadRowTemplate.attr(headerDirectiveAttribute,""),tableHeadRowTemplate.children("th[field-name]").attr(columnDirectiveAttribute,"");var tableBodyElement=templateElement.children("tbody");0===tableBodyElement.length&&(tableBodyElement=$("<tbody>").appendTo(templateElement));var tableBodyRowTemplate=tableBodyElement.children("tr");0===tableBodyRowTemplate.length&&(tableBodyRowTemplate=$("<tr>").appendTo(tableBodyElement)),tableBodyElement.attr(bodyDirectiveAttribute,"");var tableFooterElement=templateElement.children("tfoot");0==tableFooterElement.length&&(tableFooterElement=$("<tfoot>"),insertFooterElement=!0);var tableFooterRowTemplate=tableFooterElement.children("tr");if(0==tableFooterRowTemplate.length&&(tableFooterRowTemplate=$("<tr>").appendTo(tableFooterElement)),0==tableFooterRowTemplate.children("td").length){var fullTableLengthFooterCell=$("<td>").attr("colspan","999").appendTo(tableFooterRowTemplate);$("<div>").attr(footerDirectiveAttribute,"").appendTo(fullTableLengthFooterCell)}insertHeadElement&&templateElement.prepend(tableHeadElement),insertFooterElement&&tableFooterElement.insertBefore(tableBodyElement)}}}]).directive(headerDirective,["$compile",function($compile){return{restrict:"A",scope:!1,require:"^"+tableDirective,compile:function(){return{pre:function(scope,instanceElement,tAttrs,gridController){if(0==instanceElement.children("th").length)if(gridController.gridOptions.items&&gridController.gridOptions.items.length>0){var columnNames=[];for(var propName in gridController.gridOptions.items[0])propName.match(/^[_\$]/g)||columnNames.push(propName);for(var columnIndex=0;columnIndex<columnNames.length;columnIndex++){var headerCellElement=$("<th>").attr(columnDirectiveAttribute,"").attr("field-name",columnNames[columnIndex]).appendTo(instanceElement);$compile(headerCellElement)(scope)}}else gridController.scheduleRecompilationOnAvailableItems()}}}}}]).directive(columnDirective,["$compile",function($compile){return{restrict:"A",scope:!0,require:"^"+tableDirective,compile:function(){var columnIndex;return{pre:function(scope,instanceElement,tAttrs,controller){var isValid="TH"==instanceElement.prop("tagName");if(!isValid)throw"The template has an invalid header column template element. Column templates must be defined on TH elements inside THEAD/TR";if(columnIndex=instanceElement.parent().children("th").index(instanceElement),!(0>columnIndex)){scope.gridOptions=controller.gridOptions,scope.toggleSorting=function(propertyName){return controller.toggleSorting(propertyName)},scope.filter="",scope.$watch("filter",function(newValue,oldValue){newValue!==oldValue&&controller.setFilter(scope.currentGridColumnDef.fieldName,newValue)});var columnDefSetup=function(){scope.currentGridColumnDef.fieldName=tAttrs.fieldName,scope.currentGridColumnDef.displayName="undefined"==typeof tAttrs.displayName?controller.splitByCamelCasing(tAttrs.fieldName):tAttrs.displayName,scope.currentGridColumnDef.enableFiltering="true"==tAttrs.enableFiltering||"undefined"==typeof tAttrs.enableFiltering&&scope.gridOptions.enableFiltering,scope.currentGridColumnDef.enableSorting="true"==tAttrs.enableSorting||"undefined"==typeof tAttrs.enableSorting&&scope.gridOptions.enableSorting,scope.currentGridColumnDef.displayAlign=tAttrs.displayAlign,scope.currentGridColumnDef.displayFormat=tAttrs.displayFormat,scope.currentGridColumnDef.cellWidth=tAttrs.cellWidth,scope.currentGridColumnDef.cellHeight=tAttrs.cellHeight};scope.currentGridColumnDef={},columnDefSetup(),scope.$watchCollection("[gridOptions.enableFiltering,gridOptions.enableSorting]",function(){columnDefSetup()}),controller.setColumnOptions(columnIndex,scope.currentGridColumnDef),instanceElement.removeAttr(columnDirectiveAttribute)}},post:function(scope,instanceElement){if(scope.currentGridColumnDef){if(!scope.currentGridColumnDef.fieldName)throw"The column definition for trNgGrid must contain the field name";if(scope.currentGridColumnDef.cellWidth&&instanceElement.css("width",scope.currentGridColumnDef.cellWidth),scope.currentGridColumnDef.cellHeight&&instanceElement.css("height",scope.currentGridColumnDef.cellHeight),""==instanceElement.text()){var cellContentsElement=$("<div>").addClass(TrNgGrid.cellCssClass).addClass(TrNgGrid.columnHeaderContentsCssClass),tileElement=$("<div>").addClass(TrNgGrid.titleCssClass).text(scope.currentGridColumnDef.displayName).appendTo(cellContentsElement);$("<div>").attr(sortDirectiveAttribute,"").appendTo(tileElement),$("<div>").attr(filterColumnDirectiveAttribute,"").appendTo(cellContentsElement),instanceElement.append($compile(cellContentsElement)(scope))}}}}}}}]).directive(sortDirective,[function(){return{restrict:"A",replace:!0,templateUrl:TrNgGrid.columnSortTemplateId}}]).directive(filterColumnDirective,[function(){return{restrict:"A",replace:!0,templateUrl:TrNgGrid.columnFilterTemplateId}}]).filter("paging",function(){return function(input,gridOptions){if(input&&(gridOptions.totalItems=input.length),!gridOptions.pageItems||!input||0==input.length)return input;gridOptions.currentPage||(gridOptions.currentPage=0);var startIndex=gridOptions.currentPage*gridOptions.pageItems;startIndex>=input.length&&(gridOptions.currentPage=0,startIndex=0);var endIndex=gridOptions.currentPage*gridOptions.pageItems+gridOptions.pageItems;return input.slice(startIndex,endIndex)}}).directive(bodyDirective,["$compile",function($compile){return{restrict:"A",scope:!0,require:"^"+tableDirective,replace:!0,compile:function(templateElement){var bodyOriginalTemplateRow=templateElement.children("tr");return templateElement.contents().remove(),{post:function(scope,compiledInstanceElement,tAttrs,controller){scope.gridOptions=controller.gridOptions,scope.toggleItemSelection=function(item){return controller.toggleItemSelection(item)};var ngRepeatAttrValue="gridItem in gridOptions.items";scope.gridOptions.onDataRequired||(ngRepeatAttrValue+=" | filter:gridOptions.filterBy | filter:gridOptions.filterByFields | orderBy:gridOptions.orderBy:gridOptions.orderByReverse | paging:gridOptions");var bodyTemplateRow=bodyOriginalTemplateRow.clone(!0);bodyTemplateRow.attr("ng-repeat",ngRepeatAttrValue),bodyTemplateRow.attr("ng-click")||bodyTemplateRow.attr("ng-click","toggleItemSelection(gridItem)"),bodyTemplateRow.attr("ng-class","{'"+TrNgGrid.selectedRowCssClass+"':gridOptions.selectedItems.indexOf(gridItem)>=0}"),bodyTemplateRow.attr(rowPageItemIndexAttribute,"{{$index}}"),angular.forEach(scope.gridOptions.gridColumnDefs,function(columnOptions,index){var cellTemplateElement=bodyTemplateRow.children("td:nth-child("+(index+1)+")"),cellTemplateFieldName=cellTemplateElement.attr("field-name"),createInnerCellContents=!1;if(cellTemplateFieldName!==columnOptions.fieldName){createInnerCellContents=!0;var newCellTemplateElement=$("<td>");0==cellTemplateElement.length?bodyTemplateRow.append(newCellTemplateElement):cellTemplateElement.before(newCellTemplateElement),cellTemplateElement=newCellTemplateElement}else createInnerCellContents=""==cellTemplateElement.text();if(createInnerCellContents){var cellContentsElement=$("<div>").addClass(TrNgGrid.cellCssClass);if(columnOptions.fieldName){cellContentsElement.attr("field-name",columnOptions.fieldName);var cellContentsElementText="{{gridItem."+columnOptions.fieldName;columnOptions.displayFormat&&("|"!=columnOptions.displayFormat[0]&&"."!=columnOptions.displayFormat[0]&&(cellContentsElementText+=" | "),cellContentsElementText+=columnOptions.displayFormat),cellContentsElementText+="}}",cellContentsElement.text(cellContentsElementText)}else cellContentsElement.text("Invalid column match inside the table body");cellTemplateElement.append(cellContentsElement)}columnOptions.displayAlign&&cellTemplateElement.addClass("text-"+columnOptions.displayAlign),columnOptions.cellWidth&&cellTemplateElement.css("width",columnOptions.cellWidth),columnOptions.cellHeight&&cellTemplateElement.css("height",columnOptions.cellHeight)}),compiledInstanceElement.append($compile(bodyTemplateRow)(scope)),compiledInstanceElement.removeAttr(bodyDirectiveAttribute),compiledInstanceElement.children("td["+columnDirectiveAttribute+"]").removeAttr(columnDirectiveAttribute)}}}}}]).directive(footerDirective,[function(){return{restrict:"A",scope:!1,require:"^"+tableDirective,replace:!0,template:'<div class="'+TrNgGrid.footerOpsContainerCssClass+'"><span '+globalFilterDirectiveAttribute+'=""/><span '+pagerDirectiveAttribute+'=""/></div>'}}]).directive(globalFilterDirective,[function(){return{restrict:"A",replace:!0,scope:!0,require:"^"+tableDirective,template:function(){return'<div class="icon-addon addon-md" ng-show="gridOptions.enableFiltering"><input type="text" placeholder="Search" class="form-control" ng-model="gridOptions.filterBy"><label class="fa fa-search"></label></div>'},compile:function(){return{pre:function(scope,compiledInstanceElement,tAttrs,controller){scope.gridOptions=controller.gridOptions},post:function(){}}}}}]).directive(pagerDirective,[function(){var setupScope=function(scope,controller){scope.gridOptions=controller.gridOptions,scope.isPaged=!!scope.gridOptions.pageItems,scope.totalItemsCount="undefined"!=typeof scope.gridOptions.totalItems&&null!=scope.gridOptions.totalItems?scope.gridOptions.totalItems:scope.gridOptions.items?scope.gridOptions.items.length:0,scope.startItemIndex=scope.isPaged?scope.gridOptions.pageItems*scope.gridOptions.currentPage:0,scope.endItemIndex=scope.isPaged?scope.startItemIndex+scope.gridOptions.pageItems-1:scope.totalItemsCount-1,scope.endItemIndex>=scope.totalItemsCount&&(scope.endItemIndex=scope.totalItemsCount-1),scope.endItemIndex<scope.startItemIndex&&(scope.endItemIndex=scope.startItemIndex),scope.lastPageIndex=scope.totalItemsCount&&scope.isPaged?Math.floor(scope.totalItemsCount/scope.gridOptions.pageItems)+(scope.totalItemsCount%scope.gridOptions.pageItems?0:-1):0,scope.pageIndexes=[];for(var pageIndex=0;pageIndex<=scope.lastPageIndex;pageIndex++)scope.pageIndexes.push(pageIndex);scope.pageSelectionActive=scope.pageIndexes.length>1,scope.pageCanGoBack=scope.isPaged&&scope.gridOptions.currentPage>0,scope.pageCanGoForward=scope.isPaged&&scope.gridOptions.currentPage<scope.lastPageIndex,scope.navigateToPage=function($event,pageIndex){scope.gridOptions.currentPage=pageIndex,$event.preventDefault(),$event.stopPropagation()},scope.switchPageSelection=function($event,pageSelectionActive){scope.pageSelectionActive=pageSelectionActive,$event&&($event.preventDefault(),$event.stopPropagation())}};return{restrict:"A",scope:!0,require:"^"+tableDirective,template:function(){return'<div class="tr-ng-grid-pager form-group tr-ng-grid-custom-pager"><div class="pager-buttons btn-group" ng-show="totalItemsCount"><button class="btn btn-default" ng-disabled="!pageCanGoBack" ng-click="navigateToPage($event, gridOptions.currentPage - 1)" title="Previous Page"><i class="fa fa-chevron-left"></i></button><button class="btn btn-default" ng-disabled="!pageCanGoForward" ng-click="navigateToPage($event, gridOptions.currentPage + 1)" title="Next Page"><i class="fa fa-chevron-right"></i></button></div><div class="pager-select" ng-show="totalItemsCount"><select class="form-control" ng-model="gridOptions.currentPage" ng-options="pageIndex as (pageIndex+1) for pageIndex in pageIndexes"></select></div><div class="pager-status"><p ng-show="totalItemsCount">Showing <span class="txt-color-darken">{{startItemIndex+1}}</span>&nbsp;to&nbsp;<span class="txt-color-darken">{{endItemIndex+1}}</span>&nbsp;of&nbsp;<span class="text-primary">{{totalItemsCount}}</span>&nbsp;entries</p><p ng-hide="totalItemsCount">No items to display</p></div></div>' },replace:!0,link:{pre:function(scope,compiledInstanceElement,tAttrs,controller){setupScope(scope,controller)},post:function(scope,instanceElement,tAttrs,controller){scope.$watchCollection("[gridOptions.currentPage, gridOptions.items.length, gridOptions.totalItems, gridOptions.pageItems]",function(){setupScope(scope,controller)})}}}}]).run(["$templateCache",function($templateCache){$templateCache.put(TrNgGrid.columnFilterTemplateId,"<div ng-show='currentGridColumnDef.enableFiltering' class='"+TrNgGrid.filterColumnCssClass+"'><div class='"+TrNgGrid.filterInputWrapperCssClass+"'><input class='form-control input-sm' type='text' ng-model='filter'/></div></div>"),$templateCache.put(TrNgGrid.columnSortTemplateId,"<div ng-show='currentGridColumnDef.enableSorting' ng-click='toggleSorting(currentGridColumnDef.fieldName)' title='Sort' class='"+TrNgGrid.sortCssClass+"'><div ng-class=\"{'"+TrNgGrid.sortActiveCssClass+"':gridOptions.orderBy==currentGridColumnDef.fieldName,'"+TrNgGrid.sortInactiveCssClass+"':gridOptions.orderBy!=currentGridColumnDef.fieldName,'"+TrNgGrid.sortNormalOrderCssClass+"':gridOptions.orderBy!=currentGridColumnDef.fieldName||!gridOptions.orderByReverse,'"+TrNgGrid.sortReverseOrderCssClass+"':gridOptions.orderBy==currentGridColumnDef.fieldName&&gridOptions.orderByReverse}\"></div></div>")}])}(TrNgGrid||(TrNgGrid={}))},{}],291:[function(require,module){"use strict";module.exports=require(1)},{1:290}],292:[function(){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){k?(k=!1,i(),c.css({height:0})):(c.css({height:c[0].scrollHeight+"px"}),c[0].offsetWidth,c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i))}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=a.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=a.select=function(e,f){function g(){l||(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth,angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)):h(e,i.currentSlide),i.currentSlide=e,k=m,d())}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.isActive=function(a){return i.currentSlide===a},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var d={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.createParser=function(a){var c=[],e=a.split("");return angular.forEach(d,function(b,d){var f=a.indexOf(d);if(f>-1){a=a.split(""),e[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+d.length;h>g;g++)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+e.join("")+"$"),map:b(c,"index")}},this.parse=function(b,d){if(!angular.isString(b))return b;d=a.DATETIME_FORMATS[d]||d,this.parsers[d]||(this.parsers[d]=this.createParser(d));var e=this.parsers[d],f=e.regex,g=e.map,h=b.match(f);if(h&&h.length){for(var i,j={year:1900,month:0,date:1,hours:0},k=1,l=h.length;l>k;k++){var m=g[k-1];m.apply&&m.apply.call(j,h[k])}return c(j.year,j.month,j.date)&&(i=new Date(j.year,j.month,j.date,j.hours)),i}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),angular.forEach(["minDate","maxDate"],function(a){j[a]&&(h.$parent.$watch(b(j[a]),function(b){h[a]=b}),r.attr(l(a),a))}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){a&&a.isDefaultPrevented()||b.$apply(function(){b.isOpen=!1})},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c} }function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!y||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?v||(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return v=null,u&&(g.cancel(u),u=null),b.tt_content?(r(),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),z(),b.tt_isOpen=!0,b.$digest(),z):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),v=null,b.tt_animation?u||(u=g(s,500)):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){u=null,t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=angular.isDefined(d[l+"Enable"]),z=function(){var a=j.positionElements(c,t,b.tt_placement,w);a.top+="px",a.left+="px",t.css(a)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var A=function(){c.unbind(x.show,k),c.unbind(x.hide,m)};d.$observe(l+"Trigger",function(a){A(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m))});var B=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(B)?!!B:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),A(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=i.$new();i.$on("$destroy",function(){w.$destroy()});var x="typeahead-"+w.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":x});var y=angular.element("<div typeahead-popup></div>");y.attr({id:x,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&y.attr("template-url",k.typeaheadTemplateUrl);var z=function(){w.matches=[],w.activeIdx=-1,j.attr("aria-expanded",!1)},A=function(a){return x+"-option-"+a};w.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",A(a))});var B=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){w.activeIdx=0,w.matches.length=0;for(var e=0;e<c.length;e++)b[v.itemName]=c[e],w.matches.push({id:A(e),label:v.viewMapper(w,b),model:c[e]});w.query=a,w.position=t?f.offset(j):f.position(j),w.position.top=w.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else z();d&&q(i,!1)},function(){z(),q(i,!1)})};z(),w.query=void 0;var C;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(C&&d.cancel(C),C=d(function(){B(a)},o)):B(a):(q(i,!1),z()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),w.select=function(a){var b,c,e={};e[v.itemName]=c=w.matches[a].model,b=v.modelMapper(i,e),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,e)}),z(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==w.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(w.activeIdx=(w.activeIdx+1)%w.matches.length,w.$digest()):38===a.which?(w.activeIdx=(w.activeIdx?w.activeIdx:w.matches.length)-1,w.$digest()):13===a.which||9===a.which?w.$apply(function(){w.select(w.activeIdx)}):27===a.which&&(a.stopPropagation(),z(),w.$digest()))}),j.bind("blur",function(){m=!1});var D=function(a){j[0]!==a.target&&(z(),w.$digest())};e.bind("click",D),i.$on("$destroy",function(){e.unbind("click",D)});var E=a(y)(w);t?e.find("body").append(E):j.after(E)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n<div class="panel-heading">\n<h4 class="panel-title">\n <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n</h4>\n</div>\n<div class="panel-collapse" collapse="!isOpen">\n<div class="panel-body" ng-transclude></div>\n</div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n <button ng-show="closeable" type="button" class="close" ng-click="close()">\n <span aria-hidden="true">&times;</span>\n <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n<ol class="carousel-indicators" ng-show="slides.length> 1">\n<li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n</ol>\n<div class="carousel-inner" ng-transclude></div>\n <a class="left carousel-control" ng-click="prev()" ng-show="slides.length>1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n <a class="right carousel-control" ng-click="next()" ng-show="slides.length>1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n<daypicker ng-switch-when="day" tabindex="0"></daypicker>\n<monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n<yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n<thead>\n<tr>\n<th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n<th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n<th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n</tr>\n<tr>\n<th ng-show="showWeeks" class="text-center"></th>\n<th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat="row in rows track by $index">\n<td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n<td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n</td>\n</tr>\n</tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n<thead>\n<tr>\n<th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n<th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n<th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat="row in rows track by $index">\n<td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n</td>\n</tr>\n</tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n<li ng-transclude></li>\n<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n <span class="btn-group">\n <button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n <button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n</span> \n <button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n<thead>\n<tr>\n<th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n<th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n<th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat="row in rows track by $index">\n<td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n</td>\n</tr>\n</tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n ng-class="{in: animate}"\n ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n<div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n<li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n<li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n<li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n<li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n<li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n<li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n<div class="arrow"></div>\n\n<div class="popover-inner">\n<h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n<div class="popover-content" ng-bind="content"></div>\n</div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n <span class="sr-only">({{ $index<value ? \'*\' : \' \' }})</span>\n</i> \n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div>\n<ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n<div class="tab-content">\n<div class="tab-pane" \n ng-repeat="tab in tabs" \n ng-class="{active: tab.active}"\n tab-content-transclude="tab">\n</div>\n</div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n<tbody>\n<tr class="text-center">\n<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n<td>&nbsp;</td>\n<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n<td ng-show="showMeridian"></td>\n</tr>\n<tr>\n<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n <input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n</td>\n<td>:</td>\n<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n <input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n</td>\n<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n</tr>\n<tr class="text-center">\n<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n<td>&nbsp;</td>\n<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n<td ng-show="showMeridian"></td>\n</tr>\n</tbody>\n</table>\n') }]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n<li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n<div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n</li>\n</ul>')}])},{}],293:[function(require,module){module.exports=require(1)},{1:292}],294:[function(require,module,exports){"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function arraySearch(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&parents[i].params.length){parentParams=parents[i].params;for(var j in parentParams)arraySearch(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]])}return extend({},inherited,newParams)}function normalize(keys,values){var normalized={};return forEach(keys,function(name){var value=values[name];normalized[name]=null!=value?String(value):null}),normalized}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,cycle.indexOf(key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=!0,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$values?(merged=merge(values,parent.$$values),done()):(extend(promises,parent.$$promises),parent.then(done,fail));for(var i=0,ii=plan.length;ii>i;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern){function addParameter(id){if(!/^\w+(-+\w+)*$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(names[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");names[id]=!0,params.push(id)}function quoteRegExp(string){return string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var m,placeholder=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,names={},compiled="^",last=0,segments=this.segments=[],params=this.params=[];this.source=pattern;for(var id,regexp,segment;(m=placeholder.exec(pattern))&&(id=m[2]||m[3],regexp=m[4]||("*"==m[1]?".*":"[^/]*"),segment=pattern.substring(last,m.index),!(segment.indexOf("?")>=0));)compiled+=quoteRegExp(segment)+"("+regexp+")",addParameter(id),segments.push(segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),forEach(search.substring(1).split(/[&?]/),addParameter)}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+"$",segments.push(segment),this.regexp=new RegExp(compiled),this.prefix=segments[0]}function $UrlMatcherFactory(){this.compile=function(pattern){return new UrlMatcher(pattern)},this.isMatcher=function(o){return isObject(o)&&isFunction(o.exec)&&isFunction(o.format)&&isFunction(o.concat)},this.$get=function(){return this}}function $UrlRouterProvider($urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:!0}var rules=[],otherwise=null;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function($location,$rootScope,$injector){function update(evt){function check(rule){var handled=rule($injector,$location);return handled?(isString(handled)&&$location.replace().url(handled),!0):!1}if(!evt||!evt.defaultPrevented){var i,n=rules.length;for(i=0;n>i;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}return $rootScope.$on("$locationChangeSuccess",update),{sync:function(){update()}}}]}function $StateProvider($urlRouterProvider,$urlMatcherFactory,$locationProvider){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;pathLength>i;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));if(states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{location:!1})}]),queue[name])for(var i=0;i<queue[name].length;i++)registerState(queue[name][i]);return state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if("**"===globSegments[0]&&(segments=segments.slice(segments.indexOf(globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(segments.indexOf(globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length)return!1;for(var i=0,l=globSegments.length;l>i;i++)"*"===globSegments[i]&&(segments[i]="*");return segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$location,$urlRouter,$browser){function syncUrl(){$location.url()!==currentLocation&&($location.url(currentLocation),$location.replace())}function resolveState(state,params,paramsAreFiltered,inherited,dst){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params,params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:!1})||""}],promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(promises).then(function(){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed")),currentLocation=$location.url(),baseHref=$browser.baseHref();return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(){$state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!1})},$state.go=function(to,params,options){return this.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options};if(evt=$rootScope.$broadcast("$stateNotFound",redirect,from.self,fromParams),evt.defaultPrevented)return syncUrl(),TransitionAborted;if(evt.retry){if(options.$retry)return syncUrl(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),syncUrl(),retryTransition}if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(options.relative)throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'");throw new Error("No such state '"+to+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),to=toState;var keep,state,toPath=to.path,locals=root.locals,toLocals=[];for(keep=0,state=toPath[keep];state&&state===fromPath[keep]&&equalForKeys(toParams,fromParams,state.ownParams)&&!options.reload;keep++,state=toPath[keep])locals=toLocals[keep]=state.locals;if(shouldTriggerReload(to,from,locals,options))return to.self.reloadOnSearch!==!1&&syncUrl(),$state.transition=null,$q.when($state.current);if(toParams=normalize(to.params,toParams||{}),options.notify&&(evt=$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams),evt.defaultPrevented))return syncUrl(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);if($state.transition!==transition)return TransitionSuperseded;$state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null;var toNav=to.navigable;return options.location&&toNav&&($location.url(toNav.url.format(toNav.locals.globals.$stateParams)),"replace"===options.location&&$location.replace()),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),currentLocation=$location.url(),$state.current},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),syncUrl(),$q.reject(error))});return transition},$state.is=function(stateOrName,params){var state=findState(stateOrName);return isDefined(state)?$state.$current!==state?!1:isDefined(params)&&null!==params?angular.equals($stateParams,params):!0:undefined},$state.includes=function(stateOrName,params){if(isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName);if(!isDefined(state))return undefined;if(!isDefined($state.$current.includes[state.name]))return!1;var validParams=!0;return angular.forEach(params,function(value,key){isDefined($stateParams[key])&&$stateParams[key]===value||(validParams=!1)}),validParams},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!1,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;params=inheritParams($stateParams,params||{},$state.$current,state);var nav=state&&options.lossy?state.navigable:state,url=nav&&nav.url?nav.url.format(normalize(state.params,params||{})):null;return!$locationProvider.html5Mode()&&url&&(url="#"+$locationProvider.hashPrefix()+url),"/"!==baseHref&&($locationProvider.html5Mode()?url=baseHref.slice(0,-1)+url:options.absolute&&(url=baseHref.slice(1)+url)),options.absolute&&url&&(url=$location.protocol()+"://"+$location.host()+(80==$location.port()||443==$location.port()?"":":"+$location.port())+(!$locationProvider.html5Mode()&&url?"/":"")+url),url},$state.get=function(stateOrName,context){if(!isDefined(stateOrName)){var list=[];return forEach(states,function(state){list.push(state.self)}),list}var state=findState(stateOrName,context);return state&&state.self?state.self:null},$state}function shouldTriggerReload(to,from,locals,options){return to!==from||(locals!==from.locals||options.reload)&&to.self.reloadOnSearch!==!1?void 0:!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url;if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1)):(state.parent.navigable||root).url.concat(url);if($urlMatcherFactory.isMatcher(url)||null==url)return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},params:function(state){if(!state.params)return state.url?state.url.parameters():state.parent.params;if(!isArray(state.params))throw new Error("Invalid params in state '"+state+"'");if(state.url)throw new Error("Both params and url specicified in state '"+state+"'");return state.params},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},ownParams:function(state){if(!state.parent)return state.params;var paramNames={};forEach(state.params,function(p){paramNames[p]=!0}),forEach(state.parent.params,function(p){if(!paramNames[p])throw new Error("Missing required parameter '"+p+"' in state '"+state.name+"'");paramNames[p]=!1});var ownParams=[];return forEach(paramNames,function(own,p){own&&ownParams.push(p)}),ownParams},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,"abstract":!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){$timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){$animate.enter(element,null,target,cb)},leave:function(element,cb){$animate.leave(element,cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope=scope.$new(),name=currentEl&&currentEl.data("$uiViewName"),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});latestLocals=$state.$current.locals[clone.data("$uiViewName")],currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var name=attrs.uiView||attrs.name||"",inherited=$element.inheritedData("$uiView");name.indexOf("@")<0&&(name=name+"@"+(inherited?inherited.state.name:"")),$element.data("$uiViewName",name);var current=$state.$current,locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function parseStateRef(ref){var parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");return stateData&&stateData.state&&stateData.state.name?stateData.state:void 0}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref),params=null,base=stateContext(element)||$state.$current,isForm="FORM"===element[0].nodeName,attr=isForm?"action":"href",nav=!0,options={relative:base},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=newVal),nav){var newHref=$state.href(ref.state,params,options);return uiSrefActive&&uiSrefActive.$$setStateInfo(ref.state,params),newHref?void(element[0][attr]=newHref):(nav=!1,!1)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal){newVal!==params&&update(newVal)},!0),params=scope.$eval(ref.paramExpr)),update(),isForm||element.bind("click",function(e){var button=e.which||e.button;button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target")||($timeout(function(){$state.go(ref.state,params,options)}),e.preventDefault())})}}}function $StateActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){$state.$current.self===state&&matchesParams()?$element.addClass(activeClass):$element.removeClass(activeClass)}function matchesParams(){return!params||equalForKeys(params,$stateParams)}var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActive||"",!1)($scope),this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element)),params=newParams,update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){return function(state){return $state.is(state)}}function $IncludedByStateFilter($state){return function(state){return $state.includes(state)}}function $RouteProvider($stateProvider,$urlRouterProvider){function onEnterRoute($$state){this.locals=$$state.locals.globals,this.params=this.locals.$stateParams}function onExitRoute(){this.locals=null,this.params=null}function when(url,route){if(null!=route.redirectTo){var handler,redirect=route.redirectTo;if(isString(redirect))handler=redirect;else{if(!isFunction(redirect))throw new Error("Invalid 'redirectTo' in when()");handler=function(params,$location){return redirect(params,$location.path(),$location.search())}}$urlRouterProvider.when(url,handler)}else $stateProvider.state(inherit(route,{parent:null,name:"route:"+encodeURIComponent(url),url:url,onEnter:onEnterRoute,onExit:onExitRoute}));return routes.push(route),this}function $get($state,$rootScope,$routeParams){function stateAsRoute(state){return""!==state.name?state:undefined}var $route={routes:routes,params:$routeParams,current:undefined};return $rootScope.$on("$stateChangeStart",function(ev,to,toParams,from){$rootScope.$broadcast("$routeChangeStart",stateAsRoute(to),stateAsRoute(from))}),$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from){$route.current=stateAsRoute(to),$rootScope.$broadcast("$routeChangeSuccess",stateAsRoute(to),stateAsRoute(from)),copy(toParams,$route.params)}),$rootScope.$on("$stateChangeError",function(ev,to,toParams,from,fromParams,error){$rootScope.$broadcast("$routeChangeError",stateAsRoute(to),stateAsRoute(from),error)}),$route}var routes=[];onEnterRoute.$inject=["$$state"],this.when=when,this.$get=$get,$get.$inject=["$state","$rootScope","$routeParams"]}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory),UrlMatcher.prototype.concat=function(pattern){return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;var i,params=this.params,nTotal=params.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;nPath>i;i++)values[params[i]]=m[i+1];for(;nTotal>i;i++)values[params[i]]=searchParams[params[i]];return values},UrlMatcher.prototype.parameters=function(){return this.params},UrlMatcher.prototype.format=function(values){var segments=this.segments,params=this.params;if(!values)return segments.join("");var i,search,value,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;nPath>i;i++)value=values[params[i]],null!=value&&(result+=encodeURIComponent(value)),result+=segments[i+1];for(;nTotal>i;i++)value=values[params[i]],null!=value&&(result+=(search?"&":"?")+params[i]+"="+encodeURIComponent(value),search=!0);return result},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),$UrlRouterProvider.$inject=["$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll"],$ViewDirectiveFill.$inject=["$compile","$controller","$state"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter),$RouteProvider.$inject=["$stateProvider","$urlRouterProvider"],angular.module("ui.router.compat").provider("$route",$RouteProvider).directive("ngView",$ViewDirective) }(window,window.angular)},{}],295:[function(require,module){require(1),module.exports=angular},{1:296}],296:[function(){!function(window,document,undefined){"use strict";function minErr(module){return function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments,stringify=function(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?JSON.stringify(obj):obj};for(message=prefix+template.replace(/\{\d+\}/g,function(match){var arg,index=+match.slice(1,-1);return index+2<templateArgs.length?(arg=templateArgs[index+2],"function"==typeof arg?arg.toString().replace(/?\{[\s\S]*$/,""):"undefined"==typeof arg?"undefined":"string"!=typeof arg?toJson(arg):arg):match}),message=message+"\nhttp://errors.angularjs.org/1.2.23/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(stringify(arguments[i]));return new Error(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return 1===obj.nodeType&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key);else if(isArray(obj)||isArrayLike(obj))for(key=0;key<obj.length;key++)iterator.call(context,obj[key],key);else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key);return obj}function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57==digit)return uid[index]="A",uid.join("");if(90!=digit)return uid[index]=String.fromCharCode(digit+1),uid.join("");uid[index]="0"}return uid.unshift("0"),uid.join("")}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){var h=dst.$$hashKey;return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst[key]=value})}),setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!=value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function map(obj,iterator,context){var results=[];return forEach(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results}function includes(array,obj){return-1!=indexOf(array,obj)}function indexOf(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1}function arrayRemove(array,value){var index=indexOf(array,value);return index>=0&&array.splice(index,1),value}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)){var index=indexOf(stackSource,source);if(-1!==index)return stackDest[index];stackSource.push(source),stackDest.push(destination)}var result;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)result=copy(source[i],null,stackSource,stackDest),isObject(source[i])&&(stackSource.push(source[i]),stackDest.push(result)),destination.push(result)}else{var h=destination.$$hashKey;isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]});for(var key in source)result=copy(source[key],null,stackSource,stackDest),isObject(source[key])&&(stackSource.push(source[key]),stackDest.push(result)),destination[key]=result;setHashKey(destination,h)}}else destination=source,source&&(isArray(source)?destination=copy(source,[],stackSource,stackDest):isDate(source)?destination=new Date(source.getTime()):isRegExp(source)?(destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex):isObject(source)&&(destination=copy(source,{},stackSource,stackDest)));return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0;i<src.length;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)!hasOwnProperty.call(src,key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?isNaN(o1.getTime())&&isNaN(o2.getTime())||o1.getTime()===o2.getTime():!1;if(isRegExp(o1)&&isRegExp(o2))return o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,curryArgs.concat(slice.call(arguments,0))):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:JSON.stringify(obj,toJsonReplacer,pretty?" ":null)}function fromJson(json){return isString(json)?JSON.parse(json):json}function toBoolean(value){if("function"==typeof value)value=!0;else if(value&&0!==value.length){var v=lowercase(""+value);value=!("f"==v||"0"==v||"false"==v||"no"==v||"n"==v||"[]"==v)}else value=!1;return value}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var TEXT_NODE=3,elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===TEXT_NODE?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function angularInit(element,bootstrap){function append(element){element&&elements.push(element)}var appElement,module,elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;forEach(names,function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),element.querySelectorAll&&(forEach(element.querySelectorAll("."+name),append),forEach(element.querySelectorAll("."+name+"\\:"),append),forEach(element.querySelectorAll("["+name+"]"),append))}),forEach(elements,function(element){if(!appElement){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?(appElement=element,module=(match[2]||"").replace(/\s+/g,",")):forEach(element.attributes,function(attr){!appElement&&names[attr.name]&&(appElement=element,module=attr.value)})}}),appElement&&bootstrap(appElement,module?[module]:[])}function bootstrap(element,modules){var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),modules.unshift("ng");var injector=createInjector(modules);return injector.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),void(angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)}),doBootstrap()}))}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){jQuery=window.jQuery,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),jqLitePatchJQueryRemove("remove",!0,!0,!1),jqLitePatchJQueryRemove("empty",!1,!1,!1),jqLitePatchJQueryRemove("html",!1,!1,!0)):jqLite=JQLite,angular.element=jqLite}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockElements(nodes){var startNode=nodes[0],endNode=nodes[nodes.length-1];if(startNode===endNode)return jqLite(startNode);var element=startNode,elements=[element];do{if(element=element.nextSibling,!element)break;elements.push(element)}while(element!==endNode);return jqLite(elements)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod){return function(){return invokeQueue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],runBlocks=[],config=invokeLater("$injector","invoke"),moduleInstance={_invokeQueue:invokeQueue,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},$$minErr:minErr,$$csp:csp}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,required:requiredDirective,ngRequired:requiredDirective,ngValue:ngValueDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLitePatchJQueryRemove(name,dispatchThis,filterElems,getterIfNoArguments){function removePatch(param){var set,setIndex,setLength,element,childIndex,childLength,children,list=filterElems&&param?[this.filter(param)]:[this],fireEvent=dispatchThis;if(!getterIfNoArguments||null!=param)for(;list.length;)for(set=list.shift(),setIndex=0,setLength=set.length;setLength>setIndex;setIndex++)for(element=jqLite(set[setIndex]),fireEvent?element.triggerHandler("$destroy"):fireEvent=!fireEvent,childIndex=0,childLength=(children=element.children()).length;childLength>childIndex;childIndex++)list.push(jQuery(children[childIndex]));return originalJqFn.apply(this,arguments)}var originalJqFn=jQuery.fn[name];originalJqFn=originalJqFn.$original||originalJqFn,removePatch.$original=originalJqFn,jQuery.fn[name]=removePatch}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,j,jj,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML="<div>&#160;</div>"+wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],tmp.removeChild(tmp.firstChild),i=wrap[0];i--;)tmp=tmp.lastChild;for(j=0,jj=tmp.childNodes.length;jj>j;++j)nodes.push(tmp.childNodes[j]);tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",nodes}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:jqLiteBuildFragment(html,context)}function JQLite(element){if(element instanceof JQLite)return element;if(isString(element)&&(element=trim(element)),!(this instanceof JQLite)){if(isString(element)&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}if(isString(element)){jqLiteAddNodes(this,jqLiteParseHTML(element));var fragment=jqLite(document.createDocumentFragment());fragment.append(this)}else jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element){jqLiteRemoveData(element);for(var i=0,children=element.childNodes||[];i<children.length;i++)jqLiteDealoc(children[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");handle&&(isUndefined(type)?forEach(events,function(eventHandler,type){removeEventListenerFn(element,type,eventHandler),delete events[type]}):forEach(type.split(" "),function(type){isUndefined(fn)?(removeEventListenerFn(element,type,events[type]),delete events[type]):arrayRemove(events[type]||[],fn)}))}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=jqCache[expandoId];if(expandoStore){if(name)return void delete jqCache[expandoId].data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,key,value){var expandoId=element.ng339,expandoStore=jqCache[expandoId||-1];return isDefined(value)?(expandoStore||(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={}),void(expandoStore[key]=value)):expandoStore&&expandoStore[key]}function jqLiteData(element,key,value){var data=jqLiteExpandoStore(element,"data"),isSetter=isDefined(value),keyDefined=!isSetter&&isDefined(key),isSimpleGetter=keyDefined&&!isObject(key);if(data||isSimpleGetter||jqLiteExpandoStore(element,"data",data={}),isSetter)data[key]=value;else{if(!keyDefined)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements){elements=elements.nodeName||!isDefined(elements.length)||isWindow(elements)?[elements]:elements;for(var i=0;i<elements.length;i++)root.push(elements[i])}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){9==element.nodeType&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||11===element.nodeType&&element.host}}function jqLiteEmpty(element){for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);for(;element.firstChild;)element.removeChild(element.firstChild)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[element.nodeName]&&booleanAttr}function createEventHandler(element,events){var eventHandler=function(event,type){if(event.preventDefault||(event.preventDefault=function(){event.returnValue=!1}),event.stopPropagation||(event.stopPropagation=function(){event.cancelBubble=!0}),event.target||(event.target=event.srcElement||document),isUndefined(event.defaultPrevented)){var prevent=event.preventDefault;event.preventDefault=function(){event.defaultPrevented=!0,prevent.call(event)},event.defaultPrevented=!1}event.isDefaultPrevented=function(){return event.defaultPrevented||event.returnValue===!1};var eventHandlersCopy=shallowCopy(events[type||event.type]||[]);forEach(eventHandlersCopy,function(fn){fn.call(element,event)}),8>=msie?(event.preventDefault=null,event.stopPropagation=null,event.isDefaultPrevented=null):(delete event.preventDefault,delete event.stopPropagation,delete event.isDefaultPrevented)};return eventHandler.elem=element,eventHandler}function hashKey(obj,nextUidFn){var key,objType=typeof obj;return"function"==objType||"object"==objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():key===undefined&&(key=obj.$$hashKey=(nextUidFn||nextUid)()):key=obj,objType+":"+key}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function annotate(fn){var $inject,fnText,argDecl,last;return"function"==typeof fn?($inject=fn.$inject)||($inject=[],fn.length&&(fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})),fn.$inject=$inject):isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0),$inject}function createInjector(modulesToLoad){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function factory(name,factoryFn){return provider(name,{$get:factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val))}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,invokeQueue,i,ii,runBlocks=[];return forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{if(isString(module))for(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),invokeQueue=moduleFn._invokeQueue,i=0,ii=invokeQueue.length;ii>i;i++){var invokeArgs=invokeQueue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}else isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+"<- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals){var length,i,key,args=[],$inject=annotate(fn);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals){var instance,returnedValue,Constructor=function(){};return Constructor.prototype=(isArray(Type)?Type[Type.length-1]:Type).prototype,instance=new Constructor,returnedValue=invoke(Type,instance,locals),isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(){throw $injectorMinErr("unpr","Unknown provider: {0}",path.join("<- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(servicename){var provider=providerInjector.get(servicename+providerSuffix);return instanceInjector.invoke(provider.$get,provider)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return forEach(list,function(element){result||"a"!==lowercase(element.nodeName)||(result=element)}),result}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?elm.scrollIntoView():(elm=getFirstAnchor(document.getElementsByName(hash)))?elm.scrollIntoView():"top"===hash&&$window.scrollTo(0,0):$window.scrollTo(0,0)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(){$rootScope.$evalAsync(scroll)}),scroll}]}function $$AsyncCallbackProvider(){this.$get=["$$rAF","$timeout",function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn)}:function(fn){return $timeout(fn,0,!1)}}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function fireUrlChange(){newLocation=null,lastBrowserUrl!=self.url()&&(lastBrowserUrl=self.url(),forEach(urlChangeListeners,function(listener){listener(self.url())}))}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var lastBrowserUrl=location.href,baseElement=document.find("base"),newLocation=null;self.url=function(url,replace){if(location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){if(lastBrowserUrl==url)return;
return lastBrowserUrl=url,$sniffer.history?replace?history.replaceState(null,"",url):(history.pushState(null,"",url),baseElement.attr("href",baseElement.attr("href"))):(newLocation=url,replace?location.replace(url):location.href=url),self}return newLocation||location.href.replace(/%27/g,"'")};var urlChangeListeners=[],urlChangeInit=!1;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",fireUrlChange),$sniffer.hashchange?jqLite(window).on("hashchange",fireUrlChange):self.addPollFn(fireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=unescape(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=unescape(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=escape(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=escape(name)+"="+escape(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!isUndefined(value))return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"A",directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$http,$templateCache,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){3==node.nodeType&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=node=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);return safeAddClass($compileNodes,"ng-scope"),function(scope,cloneConnectFn,transcludeControllers,parentBoundTranscludeFn){assertArg(scope,"scope");var $linkNode=cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes;forEach(transcludeControllers,function(instance,name){$linkNode.data("$"+name+"Controller",instance)});for(var i=0,ii=$linkNode.length;ii>i;i++){var node=$linkNode[i],nodeType=node.nodeType;(1===nodeType||9===nodeType)&&$linkNode.eq(i).data("$scope",scope)}return cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,n,childBoundTranscludeFn,nodeListLength=nodeList.length,stableNodeList=new Array(nodeListLength);for(i=0;nodeListLength>i;i++)stableNodeList[i]=nodeList[i];for(i=0,n=0,ii=linkFns.length;ii>i;n++)node=stableNodeList[n],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),jqLite.data(node,"$scope",childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&safeAddClass(attrs.$$element,"ng-scope"),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),linkFns.push(nodeLinkFn,childLinkFn),linkFnFound=linkFnFound||nodeLinkFn||childLinkFn,previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers){var scopeCreated=!1;transcludedScope||(transcludedScope=scope.$new(),transcludedScope.$$transcluded=!0,scopeCreated=!0);var clone=transcludeFn(transcludedScope,cloneFn,controllers,previousBoundTranscludeFn);return scopeCreated&&clone.on("$destroy",function(){transcludedScope.$destroy()}),clone};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName_(node).toLowerCase()),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;if(attr=nAttrs[j],!msie||msie>=8||attr.specified){name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=snake_case(ngAttrName.substr(6),"-"));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}}if(className=node.className,isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case 3:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1==node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value,retrievalMethod="data",optional=!1;if(isString(require)){for(;"^"==(value=require.charAt(0))||"?"==value;)require=require.substr(1),"^"==value&&(retrievalMethod="inheritedData"),optional=optional||"?"==value;if(value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require]),value=value||$element[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(directiveName,require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn){var transcludeControllers;return arguments.length<2&&(cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers)}var attrs,$element,i,ii,linkFn,controller,isolateScope,transcludeFn,elementControllers={};if(attrs=compileNode===linkNode?templateAttrs:shallowCopy(templateAttrs,new Attributes(jqLite(linkNode),templateAttrs.$attr)),$element=attrs.$$element,newIsolateScopeDirective){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/;isolateScope=scope.$new(!0),!templateDirective||templateDirective!==newIsolateScopeDirective&&templateDirective!==newIsolateScopeDirective.$$originalDirective?$element.data("$isolateScopeNoTemplate",isolateScope):$element.data("$isolateScope",isolateScope),safeAddClass($element,"ng-isolate-scope"),forEach(newIsolateScopeDirective.scope,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName,optional="?"==match[2],mode=match[1];switch(isolateScope.$$isolateBindings[scopeName]=mode+attrName,mode){case"@":attrs.$observe(attrName,function(value){isolateScope[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateScope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=isolateScope[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateScope[scopeName]=parentGet(scope),isolateScope.$watch(function(){var parentValue=parentGet(scope);return compare(parentValue,isolateScope[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateScope[scopeName]):isolateScope[scopeName]=parentValue),lastValue=parentValue},null,parentGet.literal);break;case"&":parentGet=$parse(attrs[attrName]),isolateScope[scopeName]=function(locals){return parentGet(scope,locals)};break;default:throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",newIsolateScopeDirective.name,scopeName,definition)}})}for(transcludeFn=boundTranscludeFn&&controllersBoundTransclude,controllerDirectives&&forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance),directive.controllerAs&&(locals.$scope[directive.controllerAs]=controllerInstance)}),i=0,ii=preLinkFns.length;ii>i;i++)try{linkFn=preLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)try{linkFn=postLinkFns[i],linkFn(linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(newScopeDirective=newScopeDirective||directive,directive.templateUrl||(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode),isObject(directiveValue)&&(newIsolateScopeDirective=directive))),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:jqLite(trim(directiveValue)),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst.class=(dst.class?dst.class+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=extend({},origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl;return $compileNode.empty(),$http.get($sce.getTrustedResourceUrl(templateUrl),{cache:$templateCache}).success(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:jqLite(trim(content)),compileNode=$template[0],1!=$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}).error(function(response,code,headers,config){throw $compileMinErr("tpload","Failed to load template: {0}",config.url)}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;linkQueue?(linkQueue.push(scope),linkQueue.push(node),linkQueue.push(rootElement),linkQueue.push(childBoundTranscludeFn)):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var parent=templateNode.parent(),hasCompileParent=parent.length;return hasCompileParent&&safeAddClass(templateNode.parent(),"ng-binding"),function(scope,node){var parent=node.parent(),bindings=parent.data("$binding")||[];bindings.push(interpolateFn),parent.data("$binding",bindings),hasCompileParent||safeAddClass(parent,"ng-binding"),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"FORM"==tag&&"action"==attrNormalizedName||"IMG"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name){var interpolateFn=$interpolate(value,!0);if(interpolateFn){if("multiple"===name&&"SELECT"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");interpolateFn=$interpolate(attr[name],!0,getTrustedContext(node,name)),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1;break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),newNode[jqLite.expando]=firstElementToRemove[jqLite.expando];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}var Attributes=function(element,attr){this.$$element=element,this.$attr=attr||{}};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses),toRemove=tokenDifference(oldClasses,newClasses);0===toAdd.length?$animate.removeClass(this.$$element,toRemove):0===toRemove.length?$animate.addClass(this.$$element,toAdd):$animate.setClass(this.$$element,toAdd,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key);booleanKey&&(this.$$element.prop(key,value),attrName=booleanKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),("A"===nodeName&&"href"===key||"IMG"===nodeName&&"src"===key)&&(this[key]=value=$$sanitizeUri(value,"src"===key)),writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[key],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers={}),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||fn(attrs[key])}),fn}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol) },NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function $ControllerProvider(){var controllers={},CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals){var instance,match,constructor,identifier;if(isString(expression)&&(match=expression.match(CNTRL_REG),constructor=match[1],identifier=match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||getter($window,constructor,!0),assertArgFn(expression,constructor,!0)),instance=$injector.instantiate(expression,locals),identifier){if(!locals||"object"!=typeof locals.$scope)throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",constructor||expression.name,identifier);locals.$scope[identifier]=instance}return instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(){$log.error.apply($log,arguments)}}]}function parseHeaders(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){return headersObj||(headersObj=parseHeaders(headers)),name?headersObj[lowercase(name)]||null:headersObj}}function transformData(data,headers,fns){return isFunction(fns)?fns(data,headers):(forEach(fns,function(fn){data=fn(data,headers)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var JSON_START=/^\s*(\[|\{[^\{])/,JSON_END=/[\}\]]\s*$/,PROTECTION_PREFIX=/^\)\]\}',?\n/,CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},defaults=this.defaults={transformResponse:[function(data){return isString(data)&&(data=data.replace(PROTECTION_PREFIX,""),JSON_START.test(data)&&JSON_END.test(data)&&(data=fromJson(data))),data}],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},interceptorFactories=this.interceptors=[],responseInterceptorFactories=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response,{data:transformData(response.data,response.headers,config.transformResponse)});return isSuccess(response.status)?resp:$q.reject(resp)}function mergeHeaders(config){function execHeaders(headers){var headerContent;forEach(headers,function(headerFn,header){isFunction(headerFn)&&(headerContent=headerFn(),null!=headerContent?headers[header]=headerContent:delete headers[header])})}var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return execHeaders(reqHeaders),reqHeaders}var config={method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},headers=mergeHeaders(requestConfig);extend(config,requestConfig),config.headers=headers,config.method=uppercase(config.method);var serverRequest=function(config){headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData,headers).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData,reqHeaders){function done(status,response,headersString,statusText){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),resolvePromise(response,status,headersString,statusText),$rootScope.$$phase||$rootScope.$apply()}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function removePendingReq(){var idx=indexOf($http.pendingRequests,config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache)if(cachedResp=cache.get(url),isDefined(cachedResp)){if(isPromiseLike(cachedResp))return cachedResp.then(removePendingReq,removePendingReq),cachedResp;isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK")}else cache.put(url,promise);if(isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(isDate(v)?v=v.toISOString():isObject(v)&&(v=toJson(v))),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),parts.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+parts.join("&")),url}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),forEach(responseInterceptorFactories,function(interceptorFactory,index){var responseFn=isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory);reversedInterceptors.splice(index,0,{response:function(response){return responseFn($q.when(response))},responseError:function(response){return responseFn($q.reject(response))}})}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put"),$http.defaults=defaults,$http}]}function createXhr(method){if(8>=msie&&(!method.match(/^(get|post|head|put|delete|options)$/i)||!window.XMLHttpRequest))return new window.ActiveXObject("Microsoft.XMLHTTP");if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw minErr("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),8>=msie&&(script.onreadystatechange=function(){isString(script.readyState)&&/loaded|complete/.test(script.readyState)&&(script.onreadystatechange=null,callback({type:"load"}))}),rawDocument.body.appendChild(script),callback}var ABORTED=-1;return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){status=ABORTED,jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),status=1223===status?204:status,statusText=statusText||"",callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}var status;if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr(method);if(xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onreadystatechange=function(){if(xhr&&4==xhr.readyState){var responseHeaders=null,response=null,statusText="";status!==ABORTED&&(responseHeaders=xhr.getAllResponseHeaders(),response="response"in xhr?xhr.response:xhr.responseText),status===ABORTED&&10>msie||(statusText=xhr.statusText),completeRequest(callback,status||xhr.status,response,responseHeaders,statusText)}},withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function $interpolate(text,mustHaveExpression,trustedContext){for(var startIndex,endIndex,fn,exp,index=0,parts=[],length=text.length,hasInterpolation=!1,concat=[];length>index;)-1!=(startIndex=text.indexOf(startSymbol,index))&&-1!=(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))?(index!=startIndex&&parts.push(text.substring(index,startIndex)),parts.push(fn=$parse(exp=text.substring(startIndex+startSymbolLength,endIndex))),fn.exp=exp,index=endIndex+endSymbolLength,hasInterpolation=!0):(index!=length&&parts.push(text.substring(index)),index=length);if((length=parts.length)||(parts.push(""),length=1),trustedContext&&parts.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required. See http://docs.angularjs.org/api/ng.$sce",text);return!mustHaveExpression||hasInterpolation?(concat.length=length,fn=function(context){try{for(var part,i=0,ii=length;ii>i;i++){if("function"==typeof(part=parts[i]))if(part=part(context),part=trustedContext?$sce.getTrusted(trustedContext,part):$sce.valueOf(part),null==part)part="";else switch(typeof part){case"string":break;case"number":part=""+part;break;default:part=toJson(part)}concat[i]=part}return concat.join("")}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},fn.exp=text,fn.parts=parts,fn):void 0}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length;return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q",function($rootScope,$window,$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,deferred=$q.defer(),promise=deferred.promise,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj,appBase){var parsedUrl=urlResolve(absoluteUrl,appBase);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj,appBase){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl,appBase);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this,appBase),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$rewrite=function(url){var appUrl,prevAppUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?appBaseNoFile+appUrl:appBaseNoFile==url+"/"?appBaseNoFile:void 0}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this,appBase),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url),withoutHashUrl="#"==withoutBaseUrl.charAt(0)?beginsWith(hashPrefix,withoutBaseUrl):this.$$html5?withoutBaseUrl:"";if(!isString(withoutHashUrl))throw $locationMinErr("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',url,hashPrefix);parseAppUrl(withoutHashUrl,this,appBase),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$rewrite=function(url){return stripHash(appBase)==stripHash(url)?url:void 0}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$rewrite=function(url){var appUrl;return appBase==stripHash(url)?url:(appUrl=beginsWith(appBaseNoFile,url))?appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"?appBaseNoFile:void 0},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode=!1;this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isDefined(mode)?(html5Mode=mode,this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function($rootScope,$browser,$sniffer,$rootElement){function afterLocationChange(oldUrl){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();html5Mode?(appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url):(appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl),$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parse($location.$$rewrite(initialUrl));var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(!event.ctrlKey&&!event.metaKey&&2!=event.which){for(var elm=jqLite(event.target);"a"!==lowercase(elm[0].nodeName);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href");if(isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),!IGNORE_URI_REGEXP.test(absHref)){if(LocationMode===LocationHashbangInHtml5Url){var href=elm.attr("href")||elm.attr("xlink:href");if(href&&href.indexOf("://")<0){var prefix="#"+hashPrefix;if("/"==href[0])absHref=appBase+prefix+href;else if("#"==href[0])absHref=appBase+prefix+($location.path()||"/")+href;else{var stack=$location.path().split("/"),parts=href.split("/");2!==stack.length||stack[1]||(stack.length=1);for(var i=0;i<parts.length;i++)"."!=parts[i]&&(".."==parts[i]?stack.pop():parts[i].length&&stack.push(parts[i]));absHref=appBase+prefix+stack.join("/")}}}var rewrittenUrl=$location.$$rewrite(absHref);absHref&&!elm.attr("target")&&rewrittenUrl&&!event.isDefaultPrevented()&&(event.preventDefault(),rewrittenUrl!=$browser.url()&&($location.$$parse(rewrittenUrl),$rootScope.$apply(),window.angular["ff-684208-preventDefault"]=!0))}}}),$location.absUrl()!=initialUrl&&$browser.url($location.absUrl(),!0),$browser.onUrlChange(function(newUrl){$location.absUrl()!=newUrl&&($rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();$location.$$parse(newUrl),$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl).defaultPrevented?($location.$$parse(oldUrl),$browser.url(oldUrl)):afterLocationChange(oldUrl)}),$rootScope.$$phase||$rootScope.$digest())});var changeCounter=0;return $rootScope.$watch(function(){var oldUrl=$browser.url(),currentReplace=$location.$$replace;return changeCounter&&oldUrl==$location.absUrl()||(changeCounter++,$rootScope.$evalAsync(function(){$rootScope.$broadcast("$locationChangeStart",$location.absUrl(),oldUrl).defaultPrevented?$location.$$parse(oldUrl):($browser.url($location.absUrl(),currentReplace),afterLocationChange(oldUrl))})),$location.$$replace=!1,changeCounter}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.document&&obj.location&&obj.alert&&obj.setInterval)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||BIND&&obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function setter(obj,path,setValue,fullExp,options){options=options||{};for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=obj[key];propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj,obj.then&&options.unwrapPromises&&(promiseWarning(fullExp),"$$v"in obj||!function(promise){promise.then(function(val){promise.$$v=val})}(obj),obj.$$v===undefined&&(obj.$$v={}),obj=obj.$$v)}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj,fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,options){return ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp),options.unwrapPromises?function(scope,locals){var promise,pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key1?null==pathVal?undefined:(pathVal=pathVal[key1],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key2?null==pathVal?undefined:(pathVal=pathVal[key2],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key3?null==pathVal?undefined:(pathVal=pathVal[key3],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),key4?null==pathVal?undefined:(pathVal=pathVal[key4],pathVal&&pathVal.then&&(promiseWarning(fullExp),"$$v"in pathVal||(promise=pathVal,promise.$$v=undefined,promise.then(function(val){promise.$$v=val})),pathVal=pathVal.$$v),pathVal):pathVal):pathVal):pathVal):pathVal)}:function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;return null==pathVal?pathVal:(pathVal=pathVal[key0],key1?null==pathVal?undefined:(pathVal=pathVal[key1],key2?null==pathVal?undefined:(pathVal=pathVal[key2],key3?null==pathVal?undefined:(pathVal=pathVal[key3],key4?null==pathVal?undefined:pathVal=pathVal[key4]:pathVal):pathVal):pathVal):pathVal)}}function getterFn(path,options,fullExp){if(getterFnCache.hasOwnProperty(path))return getterFnCache[path];var fn,pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,options):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,options)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="var p;\n";forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp),code+="if(s == null) return undefined;\ns="+(index?"s":'((k&&k.hasOwnProperty("'+key+'"))?k:s)')+'["'+key+'"];\n'+(options.unwrapPromises?'if (s && s.then) {\n pw("'+fullExp.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")}),code+="return s;";var evaledFnGetter=new Function("s","k","pw",code);evaledFnGetter.toString=valueFn(code),fn=options.unwrapPromises?function(scope,locals){return evaledFnGetter(scope,locals,promiseWarning)}:evaledFnGetter}return"hasOwnProperty"!==path&&(getterFnCache[path]=fn),fn}function $ParseProvider(){var cache={},$parseOptions={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(value){return isDefined(value)?($parseOptions.unwrapPromises=!!value,this):$parseOptions.unwrapPromises},this.logPromiseWarnings=function(value){return isDefined(value)?($parseOptions.logPromiseWarnings=value,this):$parseOptions.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function($filter,$sniffer,$log){return $parseOptions.csp=$sniffer.csp,promiseWarning=function(fullExp){$parseOptions.logPromiseWarnings&&!promiseWarningCache.hasOwnProperty(fullExp)&&(promiseWarningCache[fullExp]=!0,$log.warn("[$parse] Promise found in the expression `"+fullExp+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(exp){var parsedExpression;switch(typeof exp){case"string":if(cache.hasOwnProperty(exp))return cache[exp];var lexer=new Lexer($parseOptions),parser=new Parser(lexer,$filter,$parseOptions);return parsedExpression=parser.parse(exp),"hasOwnProperty"!==exp&&(cache[exp]=parsedExpression),parsedExpression;case"function":return exp;default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function defaultCallback(value){return value}function defaultErrback(reason){return reject(reason)}function all(promises){var deferred=defer(),counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,ref(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var defer=function(){var value,deferred,pending=[];return deferred={resolve:function(val){if(pending){var callbacks=pending;pending=undefined,value=ref(val),callbacks.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],value.then(callback[0],callback[1],callback[2])})}},reject:function(reason){deferred.resolve(createInternalRejectedPromise(reason))},notify:function(progress){if(pending){var callbacks=pending;pending.length&&nextTick(function(){for(var callback,i=0,ii=callbacks.length;ii>i;i++)callback=callbacks[i],callback[2](progress)})}},promise:{then:function(callback,errback,progressback){var result=defer(),wrappedCallback=function(value){try{result.resolve((isFunction(callback)?callback:defaultCallback)(value)) }catch(e){result.reject(e),exceptionHandler(e)}},wrappedErrback=function(reason){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}},wrappedProgressback=function(progress){try{result.notify((isFunction(progressback)?progressback:defaultCallback)(progress))}catch(e){exceptionHandler(e)}};return pending?pending.push([wrappedCallback,wrappedErrback,wrappedProgressback]):value.then(wrappedCallback,wrappedErrback,wrappedProgressback),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback){function makePromise(value,resolved){var result=defer();return resolved?result.resolve(value):result.reject(value),result.promise}function handleCallback(value,isResolved){var callbackOutput=null;try{callbackOutput=(callback||defaultCallback)()}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)}return this.then(function(value){return handleCallback(value,!0)},function(error){return handleCallback(error,!1)})}}}},ref=function(value){return isPromiseLike(value)?value:{then:function(callback){var result=defer();return nextTick(function(){result.resolve(callback(value))}),result.promise}}},reject=function(reason){var result=defer();return result.reject(reason),result.promise},createInternalRejectedPromise=function(reason){return{then:function(callback,errback){var result=defer();return nextTick(function(){try{result.resolve((isFunction(errback)?errback:defaultErrback)(reason))}catch(e){result.reject(e),exceptionHandler(e)}}),result.promise}}},when=function(value,callback,errback,progressback){var done,result=defer(),wrappedCallback=function(value){try{return(isFunction(callback)?callback:defaultCallback)(value)}catch(e){return exceptionHandler(e),reject(e)}},wrappedErrback=function(reason){try{return(isFunction(errback)?errback:defaultErrback)(reason)}catch(e){return exceptionHandler(e),reject(e)}},wrappedProgressback=function(progress){try{return(isFunction(progressback)?progressback:defaultCallback)(progress)}catch(e){exceptionHandler(e)}};return nextTick(function(){ref(value).then(function(value){done||(done=!0,result.resolve(ref(value).then(wrappedCallback,wrappedErrback,wrappedProgressback)))},function(reason){done||(done=!0,result.resolve(wrappedErrback(reason)))},function(progress){done||result.notify(wrappedProgressback(progress))})}),result.promise};return{defer:defer,reject:reject,when:when,all:all}}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||$window.mozRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.mozCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function compileToFn(exp,name){var fn=$parse(exp);return assertArgFn(fn,name),fn}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}Scope.prototype={constructor:Scope,$new:function(isolate){var child;return isolate?(child=new Scope,child.$root=this.$root,child.$$asyncQueue=this.$$asyncQueue,child.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=nextUid(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),child=new this.$$childScopeClass),child.this=child,child.$parent=this,child.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=child,this.$$childTail=child):this.$$childHead=this.$$childTail=child,child},$watch:function(watchExp,listener,objectEquality){var scope=this,get=compileToFn(watchExp,"watch"),array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};if(lastDirtyWatch=null,!isFunction(listener)){var listenFn=compileToFn(listener||noop,"listener");watcher.fn=function(newVal,oldVal,scope){listenFn(scope)}}if("string"==typeof watchExp&&get.constant){var originalFn=watcher.fn;watcher.fn=function(newVal,oldVal,scope){originalFn.call(this,newVal,oldVal,scope),arrayRemove(array,watcher)}}return array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchCollection:function(obj,listener){function $watchCollectionWatch(){newValue=objGetter(self);var newLength,key,bothNaN;if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)bothNaN=oldValue[i]!==oldValue[i]&&newValue[i]!==newValue[i],bothNaN||oldValue[i]===newValue[i]||(changeDetected++,oldValue[i]=newValue[i])}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,oldValue.hasOwnProperty(key)?(bothNaN=oldValue[key]!==oldValue[key]&&newValue[key]!==newValue[key],bothNaN||oldValue[key]===newValue[key]||(changeDetected++,oldValue[key]=newValue[key])):(oldLength++,oldValue[key]=newValue[key],changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)oldValue.hasOwnProperty(key)&&!newValue.hasOwnProperty(key)&&(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,objGetter=$parse(obj),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch($watchCollectionWatch,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,logMsg,asyncTask,asyncQueue=this.$$asyncQueue,postDigestQueue=this.$$postDigestQueue,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression)}catch(e){clearPhase(),$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),logMsg=isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,logMsg+="; newVal: "+toJson(value)+"; oldVal: "+toJson(last),watchLog[logIdx].push(logMsg))}catch(e){clearPhase(),$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,toJson(watchLog))}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope&&(forEach(this.$$listenerCount,bind(null,decrementListenerCount,this)),parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=noop,this.$on=this.$watch=function(){return noop})}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr){$rootScope.$$phase||$rootScope.$$asyncQueue.length||$browser.defer(function(){$rootScope.$$asyncQueue.length&&$rootScope.$digest()}),this.$$asyncQueue.push({scope:this,expression:expr})},$$postDigest:function(fn){this.$$postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){namedListeners[indexOf(namedListeners,listener)]=null,decrementListenerCount(self,1,name)}},$emit:function(name){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event;scope=scope.$parent}while(scope);return event},$broadcast:function(name){for(var listeners,i,length,target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event}};var $rootScope=new Scope;return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return msie&&!(msie>=8)||(normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex))?uri:"unsafe:"+normalizedVal}}}function escapeForRegexp(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher. String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy. URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sniffer","$sceDelegate",function($parse,$sniffer,$sceDelegate){if(enabled&&$sniffer.msie&&$sniffer.msieDocumentMode<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode. You can fix this by adding the text <!doctype html> to the top of your HTML document. See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:function(self,locals){return sce.getTrusted(type,parsed(self,locals))}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},documentMode=document.documentMode,vendorRegex=/^(Moz|webkit|O|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hashchange:"onhashchange"in $window&&(!documentMode||documentMode>7),hasEvent:function(event){if("input"==event&&9==msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android,msie:msie,msieDocumentMode:documentMode}}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function($rootScope,$browser,$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,deferred=$q.defer(),promise=deferred.promise,skipApply=isDefined(invokeApply)&&!invokeApply;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var comparatorType=typeof comparator,predicates=[];predicates.check=function(value){for(var j=0;j<predicates.length;j++)if(!predicates[j](value))return!1;return!0},"function"!==comparatorType&&(comparator="boolean"===comparatorType&&comparator?function(obj,text){return angular.equals(obj,text)}:function(obj,text){if(obj&&text&&"object"==typeof obj&&"object"==typeof text){for(var objKey in obj)if("$"!==objKey.charAt(0)&&hasOwnProperty.call(obj,objKey)&&comparator(obj[objKey],text[objKey]))return!0;return!1}return text=(""+text).toLowerCase(),(""+obj).toLowerCase().indexOf(text)>-1});var search=function(obj,text){if("string"==typeof text&&"!"===text.charAt(0))return!search(obj,text.substr(1));switch(typeof obj){case"boolean":case"number":case"string":return comparator(obj,text);case"object":switch(typeof text){case"object":return comparator(obj,text);default:for(var objKey in obj)if("$"!==objKey.charAt(0)&&search(obj[objKey],text))return!0}return!1;case"array":for(var i=0;i<obj.length;i++)if(search(obj[i],text))return!0;return!1;default:return!1}};switch(typeof expression){case"boolean":case"number":case"string":expression={$:expression};case"object":for(var key in expression)!function(path){"undefined"!=typeof expression[path]&&predicates.push(function(value){return search("$"==path?value:value&&value[path],expression[path])})}(key);break;case"function":predicates.push(expression);break;default:return array}for(var filtered=[],j=0;j<array.length;j++){var value=array[j];predicates.check(value)&&filtered.push(value)}return filtered}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,2).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(null==number||!isFinite(number)||isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?(numStr="0",number=0):(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&number>-1&&1>number&&(formatedText=number.toFixed(fractionSize));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(formatedText),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object){return toJson(object,!0)}}function limitToFilter(){return function(input,limit){if(!isArray(input)&&!isString(input))return input;if(limit=1/0===Math.abs(Number(limit))?Number(limit):int(limit),isString(input))return limit?limit>=0?input.slice(0,limit):input.slice(limit,input.length):"";var i,n,out=[];for(limit>input.length?limit=input.length:limit<-input.length&&(limit=-input.length),limit>0?(i=0,n=limit):(i=input.length+limit,n=input.length);n>i;i++)out.push(input[i]);return out}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return toBoolean(descending)?function(a,b){return comp(b,a)}:comp}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1==t2?(isDate(v1)&&isDate(v2)&&(v1=v1.valueOf(),v2=v2.valueOf()),"string"==t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}if(!isArray(array))return array;if(!sortPredicate)return array;sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],sortPredicate=map(sortPredicate,function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),get=$parse(predicate),get.constant)){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});for(var arrayCopy=[],i=0;i<array.length;i++)arrayCopy.push(array[i]);return arrayCopy.sort(reverseComparator(comparator,reverseOrder))}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs,$scope,$animate){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$animate.removeClass(element,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey),$animate.addClass(element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}var form=this,parentForm=element.parent().controller("form")||nullFormCtrl,invalidCount=0,errors=form.$error={},controls=[];form.$name=attrs.name||attrs.ngForm,form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,parentForm.$addControl(form),element.addClass(PRISTINE_CLASS),toggleValidCss(!0),form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(errors,function(queue,validationToken){form.$setValidity(validationToken,!0,control)}),arrayRemove(controls,control)},form.$setValidity=function(validationToken,isValid,control){var queue=errors[validationToken];if(isValid)queue&&(arrayRemove(queue,control),queue.length||(invalidCount--,invalidCount||(toggleValidCss(isValid),form.$valid=!0,form.$invalid=!1),errors[validationToken]=!1,toggleValidCss(!0,validationToken),parentForm.$setValidity(validationToken,!0,form)));else{if(invalidCount||toggleValidCss(isValid),queue){if(includes(queue,control))return}else errors[validationToken]=queue=[],invalidCount++,toggleValidCss(!1,validationToken),parentForm.$setValidity(validationToken,!1,form);queue.push(control),form.$valid=!1,form.$invalid=!0}},form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.removeClass(element,DIRTY_CLASS),$animate.addClass(element,PRISTINE_CLASS),form.$dirty=!1,form.$pristine=!0,forEach(controls,function(control){control.$setPristine() })}}function validate(ctrl,validatorName,validity,value){return ctrl.$setValidity(validatorName,validity),validity?value:undefined}function testFlags(validity,flags){var i,flag;if(flags)for(i=0;i<flags.length;++i)if(flag=flags[i],validity[flag])return!0;return!1}function addNativeHtml5Validators(ctrl,validatorName,badFlags,ignoreFlags,validity){if(isObject(validity)){ctrl.$$hasNativeValidators=!0;var validator=function(value){return ctrl.$error[validatorName]||testFlags(validity,ignoreFlags)||!testFlags(validity,badFlags)?value:void ctrl.$setValidity(validatorName,!1)};ctrl.$parsers.push(validator)}}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){var validity=element.prop(VALIDITY_STATE_PROPERTY),placeholder=element[0].placeholder,noevent={},type=lowercase(element[0].type);if(ctrl.$$validityState=validity,!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(!composing){var value=element.val();if(msie&&"input"===(ev||noevent).type&&element[0].placeholder!==placeholder)return void(placeholder=element[0].placeholder);"password"!==type&&toBoolean(attr.ngTrim||"T")&&(value=trim(value));var revalidate=validity&&ctrl.$$hasNativeValidators;(ctrl.$viewValue!==value||""===value&&revalidate)&&(scope.$$phase?ctrl.$setViewValue(value):scope.$apply(function(){ctrl.$setViewValue(value)}))}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(){timeout||(timeout=$browser.defer(function(){listener(),timeout=null}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener()}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)};var patternValidator,match,pattern=attr.ngPattern;if(pattern){var validateRegex=function(regexp,value){return validate(ctrl,"pattern",ctrl.$isEmpty(value)||regexp.test(value),value)};match=pattern.match(/^\/(.*)\/([gim]*)$/),match?(pattern=new RegExp(match[1],match[2]),patternValidator=function(value){return validateRegex(pattern,value)}):patternValidator=function(value){var patternObj=scope.$eval(pattern);if(!patternObj||!patternObj.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",pattern,patternObj,startingTag(element));return validateRegex(patternObj,value)},ctrl.$formatters.push(patternValidator),ctrl.$parsers.push(patternValidator)}if(attr.ngMinlength){var minlength=int(attr.ngMinlength),minLengthValidator=function(value){return validate(ctrl,"minlength",ctrl.$isEmpty(value)||value.length>=minlength,value)};ctrl.$parsers.push(minLengthValidator),ctrl.$formatters.push(minLengthValidator)}if(attr.ngMaxlength){var maxlength=int(attr.ngMaxlength),maxLengthValidator=function(value){return validate(ctrl,"maxlength",ctrl.$isEmpty(value)||value.length<=maxlength,value)};ctrl.$parsers.push(maxLengthValidator),ctrl.$formatters.push(maxLengthValidator)}}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(textInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$parsers.push(function(value){var empty=ctrl.$isEmpty(value);return empty||NUMBER_REGEXP.test(value)?(ctrl.$setValidity("number",!0),""===value?null:empty?value:parseFloat(value)):(ctrl.$setValidity("number",!1),undefined)}),addNativeHtml5Validators(ctrl,"number",numberBadFlags,null,ctrl.$$validityState),ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?"":""+value}),attr.min){var minValidator=function(value){var min=parseFloat(attr.min);return validate(ctrl,"min",ctrl.$isEmpty(value)||value>=min,value)};ctrl.$parsers.push(minValidator),ctrl.$formatters.push(minValidator)}if(attr.max){var maxValidator=function(value){var max=parseFloat(attr.max);return validate(ctrl,"max",ctrl.$isEmpty(value)||max>=value,value)};ctrl.$parsers.push(maxValidator),ctrl.$formatters.push(maxValidator)}ctrl.$formatters.push(function(value){return validate(ctrl,"number",ctrl.$isEmpty(value)||isNumber(value),value)})}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var urlValidator=function(value){return validate(ctrl,"url",ctrl.$isEmpty(value)||URL_REGEXP.test(value),value)};ctrl.$formatters.push(urlValidator),ctrl.$parsers.push(urlValidator)}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){textInputType(scope,element,attr,ctrl,$sniffer,$browser);var emailValidator=function(value){return validate(ctrl,"email",ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value),value)};ctrl.$formatters.push(emailValidator),ctrl.$parsers.push(emailValidator)}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid()),element.on("click",function(){element[0].checked&&scope.$apply(function(){ctrl.$setViewValue(attr.value)})}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function checkboxInputType(scope,element,attr,ctrl){var trueValue=attr.ngTrueValue,falseValue=attr.ngFalseValue;isString(trueValue)||(trueValue=!0),isString(falseValue)||(falseValue=!1),element.on("click",function(){scope.$apply(function(){ctrl.$setViewValue(element[0].checked)})}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value!==trueValue},ctrl.$formatters.push(function(value){return value===trueValue}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){if(isArray(classVal))return classVal;if(isString(classVal))return classVal.split(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes}return classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||{},classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toRemove=digestClassCounts(toRemove,-1),toAdd=digestClassCounts(toAdd,1),0===toAdd.length?$animate.removeClass(element,toRemove):0===toRemove.length?$animate.addClass(element,toAdd):$animate.setClass(element,toAdd,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}var VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,nodeName_,slice=[].slice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=["0","0","0"];msie=int((/msie (\d+)/.exec(lowercase(navigator.userAgent))||[])[1]),isNaN(msie)&&(msie=int((/trident\/.*; rv:(\d+)/.exec(lowercase(navigator.userAgent))||[])[1])),noop.$inject=[],identity.$inject=[];var isArray=function(){return isFunction(Array.isArray)?Array.isArray:function(value){return"[object Array]"===toString.call(value)}}(),trim=function(){return String.prototype.trim?function(value){return isString(value)?value.trim():value}:function(value){return isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value}}();nodeName_=9>msie?function(element){return element=element.nodeName?element:element[0],element.scopeName&&"HTML"!=element.scopeName?uppercase(element.scopeName+":"+element.nodeName):element.nodeName}:function(element){return element.nodeName?element.nodeName:element[0].nodeName};var csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},SNAKE_CASE_REGEXP=/[A-Z]/g,version={full:"1.2.23",major:1,minor:2,dot:23,codeName:"superficial-malady"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=window.document.addEventListener?function(element,type,fn){element.addEventListener(type,fn,!1)}:function(element,type,fn){element.attachEvent("on"+type,fn)},removeEventListenerFn=window.document.removeEventListener?function(element,type,fn){element.removeEventListener(type,fn,!1)}:function(element,type,fn){element.detachEvent("on"+type,fn)},SPECIAL_CHARS_REGEXP=(JQLite._data=function(node){return this.cache[node[this.expando]]||{}},/([\:\-\_]+(.))/g),MOZ_HACK_REGEXP=/^moz([A-Z])/,jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[uppercase(value)]=!0}),forEach({data:jqLiteData,removeData:jqLiteRemoveData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value)){var val;return 8>=msie&&(val=element.currentStyle&&element.currentStyle[name],""===val&&(val="auto")),val=val||element.style[name],8>=msie&&(val=""===val?undefined:val),val}element.style[name]=value},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){var textProp=NODE_TYPE_TEXT_PROPERTY[element.nodeType];return isUndefined(value)?textProp?element[textProp]:"":void(element[textProp]=value)}var NODE_TYPE_TEXT_PROPERTY=[];return 9>msie?(NODE_TYPE_TEXT_PROPERTY[1]="innerText",NODE_TYPE_TEXT_PROPERTY[3]="nodeValue"):NODE_TYPE_TEXT_PROPERTY[1]=NODE_TYPE_TEXT_PROPERTY[3]="textContent",getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if("SELECT"===nodeName_(element)&&element.multiple){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;for(var i=0,childNodes=element.childNodes;i<childNodes.length;i++)jqLiteDealoc(childNodes[i]);element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,dealoc:jqLiteDealoc,on:function onFn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var events=jqLiteExpandoStore(element,"events"),handle=jqLiteExpandoStore(element,"handle");events||jqLiteExpandoStore(element,"events",events={}),handle||jqLiteExpandoStore(element,"handle",handle=createEventHandler(element,events)),forEach(type.split(" "),function(type){var eventFns=events[type];if(!eventFns){if("mouseenter"==type||"mouseleave"==type){var contains=document.body.contains||document.body.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};events[type]=[];var eventmap={mouseleave:"mouseout",mouseenter:"mouseover"};onFn(element,eventmap[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!contains(target,related))&&handle(event,type)})}else addEventListenerFn(element,type,handle),events[type]=[];eventFns=events[type]}eventFns.push(fn)})},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){1===element.nodeType&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){forEach(new JQLite(node),function(child){(1===element.nodeType||11===element.nodeType)&&element.appendChild(child)})},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode)[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:function(element){jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)},after:function(element,newElement){var index=element,parent=element.parentNode;forEach(new JQLite(newElement),function(node){parent.insertBefore(node,index.nextSibling),index=node})},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){if(element.nextElementSibling)return element.nextElementSibling;for(var elm=element.nextSibling;null!=elm&&1!==elm.nodeType;)elm=elm.nextSibling;return elm},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,eventFns=(jqLiteExpandoStore(element,"events")||{})[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0;i<this.length;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector"),$animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function($timeout,$$asyncCallback){function async(fn){fn&&$$asyncCallback(fn)}return{enter:function(element,parent,after,done){after?after.after(element):(parent&&parent[0]||(parent=after.parent()),parent.append(element)),async(done)},leave:function(element,done){element.remove(),async(done)},move:function(element,parent,after,done){this.enter(element,parent,after,done)},addClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),async(done)},removeClass:function(element,className,done){className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),async(done)},setClass:function(element,add,remove,done){forEach(element,function(element){jqLiteAddClass(element,add),jqLiteRemoveClass(element,remove)}),async(done)},enabled:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^(x[\:\-_]|data[\:\-_])/i,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");LocationHashbangInHtml5Url.prototype=LocationHashbangUrl.prototype=LocationHtml5Url.prototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url,replace){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return match[1]&&this.path(decodeURIComponent(match[1])),(match[2]||match[1])&&this.search(match[3]||""),this.hash(match[5]||"",replace),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search))this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",identity),replace:function(){return this.$$replace=!0,this}};var promiseWarning,$parseMinErr=minErr("$parse"),promiseWarningCache={},CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,OPERATORS={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:noop,"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"^":function(self,locals,a,b){return a(self,locals)^b(self,locals)},"=":noop,"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"&":function(self,locals,a,b){return a(self,locals)&b(self,locals)},"|":function(self,locals,a,b){return b(self,locals)(self,locals,a(self,locals))},"!":function(self,locals,a){return!a(self,locals)}},ESCAPE={n:"\n",f:"\f",r:"\r",t:" ",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.ch=undefined,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var ch2=this.ch+this.peek(),ch3=ch2+this.peek(2),fn=OPERATORS[this.ch],fn2=OPERATORS[ch2],fn3=OPERATORS[ch3];fn3?(this.tokens.push({index:this.index,text:ch3,fn:fn3}),this.index+=3):fn2?(this.tokens.push({index:this.index,text:ch2,fn:fn2}),this.index+=2):fn?(this.tokens.push({index:this.index,text:this.ch,fn:fn}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(chars){return-1!==chars.indexOf(this.ch)},was:function(chars){return-1!==chars.indexOf(this.lastCh)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||" "===ch||"\n"===ch||""===ch||" "===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}number=1*number,this.tokens.push({index:start,text:number,literal:!0,constant:!0,fn:function(){return number}})},readIdent:function(){for(var lastDot,peekIndex,methodName,ch,parser=this,ident="",start=this.index;this.index<this.text.length&&(ch=this.text.charAt(this.index),"."===ch||this.isIdent(ch)||this.isNumber(ch));)"."===ch&&(lastDot=this.index),ident+=ch,this.index++;if(lastDot)for(peekIndex=this.index;peekIndex<this.text.length;){if(ch=this.text.charAt(peekIndex),"("===ch){methodName=ident.substr(lastDot-start+1),ident=ident.substr(0,lastDot-start),this.index=peekIndex;break}if(!this.isWhitespace(ch))break;peekIndex++}var token={index:start,text:ident};if(OPERATORS.hasOwnProperty(ident))token.fn=OPERATORS[ident],token.literal=!0,token.constant=!0;else{var getter=getterFn(ident,this.options,this.text);token.fn=extend(function(self,locals){return getter(self,locals)},{assign:function(self,value){return setter(self,ident,value,parser.text,parser.options)}})}this.tokens.push(token),methodName&&(this.tokens.push({index:lastDot,text:"."}),this.tokens.push({index:lastDot+1,text:methodName}))},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,string:string,literal:!0,constant:!0,fn:function(){return string}});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=extend(function(){return 0},{constant:!0}),Parser.prototype={constructor:Parser,parse:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;if(this.expect("("))primary=this.filterChain(),this.consume(")");else if(this.expect("["))primary=this.arrayDeclaration();else if(this.expect("{"))primary=this.object();else{var token=this.expect();primary=token.fn,primary||this.throwError("not a primary expression",token),primary.literal=!!token.literal,primary.constant=!!token.constant}for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){if(this.tokens.length>0){var token=this.tokens[0],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},consume:function(e1){this.expect(e1)||this.throwError("is unexpected, expecting ["+e1+"]",this.peek())},unaryFn:function(fn,right){return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant})},ternaryFn:function(left,middle,right){return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})},binaryFn:function(left,fn,right){return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0;i<statements.length;i++){var statement=statements[i];statement&&(value=statement(self,locals))}return value}},filterChain:function(){for(var token,left=this.expression();;){if(!(token=this.expect("|")))return left;left=this.binaryFn(left,token.fn,this.filter())}},filter:function(){for(var token=this.expect(),fn=this.$filter(token.text),argsFn=[];;){if(!(token=this.expect(":"))){var fnInvoke=function(self,locals,input){for(var args=[input],i=0;i<argsFn.length;i++)args.push(argsFn[i](self,locals));return fn.apply(self,args)};return function(){return fnInvoke}}argsFn.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),function(scope,locals){return left.assign(scope,right(scope,locals),locals) }):left},ternary:function(){var middle,token,left=this.logicalOR();return(token=this.expect("?"))?(middle=this.assignment(),(token=this.expect(":"))?this.ternaryFn(left,middle,this.assignment()):void this.throwError("expected :",token)):left},logicalOR:function(){for(var token,left=this.logicalAND();;){if(!(token=this.expect("||")))return left;left=this.binaryFn(left,token.fn,this.logicalAND())}},logicalAND:function(){var token,left=this.equality();return(token=this.expect("&&"))&&(left=this.binaryFn(left,token.fn,this.logicalAND())),left},equality:function(){var token,left=this.relational();return(token=this.expect("==","!=","===","!=="))&&(left=this.binaryFn(left,token.fn,this.equality())),left},relational:function(){var token,left=this.additive();return(token=this.expect("<",">","<=",">="))&&(left=this.binaryFn(left,token.fn,this.relational())),left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.fn,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.fn,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.fn,this.unary()):(token=this.expect("!"))?this.unaryFn(token.fn,this.unary()):this.primary()},fieldAccess:function(object){var parser=this,field=this.expect().text,getter=getterFn(field,this.options,this.text);return extend(function(scope,locals,self){return getter(self||object(scope,locals))},{assign:function(scope,value,locals){var o=object(scope,locals);return o||object.assign(scope,o={}),setter(o,field,value,parser.text,parser.options)}})},objectIndex:function(obj){var parser=this,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,p,o=obj(self,locals),i=indexFn(self,locals);return ensureSafeMemberName(i,parser.text),o?(v=ensureSafeObject(o[i],parser.text),v&&v.then&&parser.options.unwrapPromises&&(p=v,"$$v"in v||(p.$$v=undefined,p.then(function(val){p.$$v=val})),v=v.$$v),v):undefined},{assign:function(self,value,locals){var key=ensureSafeMemberName(indexFn(self,locals),parser.text),o=ensureSafeObject(obj(self,locals),parser.text);return o||obj.assign(self,o={}),o[key]=value}})},functionCall:function(fn,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var parser=this;return function(scope,locals){for(var args=[],context=contextGetter?contextGetter(scope,locals):scope,i=0;i<argsFn.length;i++)args.push(argsFn[i](scope,locals));var fnPtr=fn(scope,locals,context)||noop;ensureSafeObject(context,parser.text),ensureSafeFunction(fnPtr,parser.text);var v=fnPtr.apply?fnPtr.apply(context,args):fnPtr(args[0],args[1],args[2],args[3],args[4]);return ensureSafeObject(v,parser.text)}},arrayDeclaration:function(){var elementFns=[],allConstant=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var elementFn=this.expression();elementFns.push(elementFn),elementFn.constant||(allConstant=!1)}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0;i<elementFns.length;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:allConstant})},object:function(){var keyValues=[],allConstant=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var token=this.expect(),key=token.string||token.text;this.consume(":");var value=this.expression();keyValues.push({key:key,value:value}),value.constant||(allConstant=!1)}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0;i<keyValues.length;i++){var keyValue=keyValues[i];object[keyValue.key]=keyValue.value(self,locals)}return object},{literal:!0,constant:allConstant})}};var getterFnCache={},$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href,!0);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return 8>=msie&&(attr.href||attr.name||attr.$set("href",""),element.append(document.createComment("IE fix"))),attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop};FormController.$inject=["$element","$attrs","$scope","$animate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(){return{pre:function(scope,formElement,attr,controller){if(!attr.action){var preventDefaultListener=function(event){event.preventDefault?event.preventDefault():event.returnValue=!1};addEventListenerFn(formElement[0],"submit",preventDefaultListener),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",preventDefaultListener)},0,!1)})}var parentFormCtrl=formElement.parent().controller("form"),alias=attr.name||attr.ngForm;alias&&setter(scope,alias,controller,alias),parentFormCtrl&&formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),alias&&setter(scope,alias,undefined,alias),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,inputType={text:textInputType,number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},numberBadFlags=["badInput"],inputDirective=["$browser","$sniffer",function($browser,$sniffer){return{restrict:"E",require:"?ngModel",link:function(scope,element,attr,ctrl){ctrl&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrl,$sniffer,$browser)}}}],VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate){function toggleValidCss(isValid,validationErrorKey){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",$animate.removeClass($element,(isValid?INVALID_CLASS:VALID_CLASS)+validationErrorKey),$animate.addClass($element,(isValid?VALID_CLASS:INVALID_CLASS)+validationErrorKey)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=$attr.name;var ngModelGet=$parse($attr.ngModel),ngModelSet=ngModelGet.assign;if(!ngModelSet)throw minErr("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element));this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,invalidCount=0,$error=this.$error={};$element.addClass(PRISTINE_CLASS),toggleValidCss(!0),this.$setValidity=function(validationErrorKey,isValid){$error[validationErrorKey]!==!isValid&&(isValid?($error[validationErrorKey]&&invalidCount--,invalidCount||(toggleValidCss(!0),this.$valid=!0,this.$invalid=!1)):(toggleValidCss(!1),this.$invalid=!0,this.$valid=!1,invalidCount++),$error[validationErrorKey]=!isValid,toggleValidCss(isValid,validationErrorKey),parentForm.$setValidity(validationErrorKey,isValid,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setViewValue=function(value){this.$viewValue=value,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()),forEach(this.$parsers,function(fn){value=fn(value)}),this.$modelValue!==value&&(this.$modelValue=value,ngModelSet($scope,value),forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}}))};var ctrl=this;$scope.$watch(function(){var value=ngModelGet($scope);if(ctrl.$modelValue!==value){var formatters=ctrl.$formatters,idx=formatters.length;for(ctrl.$modelValue=value;idx--;)value=formatters[idx](value);ctrl.$viewValue!==value&&(ctrl.$viewValue=value,ctrl.$render())}return value})}],ngModelDirective=function(){return{require:["ngModel","^?form"],controller:NgModelController,link:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;formCtrl.$addControl(modelCtrl),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})}}},ngChangeDirective=valueFn({require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),requiredDirective=function(){return{require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){attr.required=!0;var validator=function(value){return attr.required&&ctrl.$isEmpty(value)?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),value)};ctrl.$formatters.push(validator),ctrl.$parsers.unshift(validator),attr.$observe("required",function(){validator(ctrl.$viewValue)})}}}},ngListDirective=function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){var match=/\/(.*)\//.exec(attr.ngList),separator=match&&new RegExp(match[1])||attr.ngList||",",parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trim(value))}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(", "):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=ngDirective({compile:function(templateElement){return templateElement.addClass("ng-binding"),function(scope,element,attr){element.data("$binding",attr.ngBind),scope.$watch(attr.ngBind,function(value){element.text(value==undefined?"":value)})}}}),ngBindTemplateDirective=["$interpolate",function($interpolate){return function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));element.addClass("ng-binding").data("$binding",interpolateFn),attr.$observe("ngBindTemplate",function(value){element.text(value)})}}],ngBindHtmlDirective=["$sce","$parse",function($sce,$parse){return{compile:function(tElement){return tElement.addClass("ng-binding"),function(scope,element,attr){function getStringValue(){return(parsed(scope)||"").toString()}element.data("$binding",attr.ngBindHtml);var parsed=$parse(attr.ngBindHtml);scope.$watch(getStringValue,function(){element.html($sce.getTrustedHtml(parsed(scope))||"")})}}}}],ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{scope:!0,controller:"@",priority:500}}],ngEventDirectives={};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(name){var directiveName=directiveNormalize("ng-"+name);ngEventDirectives[directiveName]=["$parse",function($parse){return{compile:function($element,attr){var fn=$parse(attr[directiveName]);return function(scope,element){element.on(lowercase(name),function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}}]});var ngIfDirective=["$animate",function($animate){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){toBoolean(value)?childScope||(childScope=$scope.$new(),$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)})):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockElements(block.clone),$animate.leave(previousElements,function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$http","$templateCache","$anchorScroll","$animate","$sce",function($http,$templateCache,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement,function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element,afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded"),scope.$eval(onloadExp)}}).error(function(){thisChangeId===changeCounter&&cleanupLastIncludeContent()}),scope.$emit("$includeContentRequested")):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g;return{restrict:"EA",link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),isWhen=/^when(Minus)?(.+)$/;forEach(attr,function(expression,attributeName){isWhen.test(attributeName)&&(whens[lowercase(attributeName.replace("when","").replace("Minus","-"))]=element.attr(attr.$attr[attributeName]))}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,startSymbol+numberExp+"-"+offset+endSymbol))}),scope.$watch(function(){var value=parseFloat(scope.$eval(numberExp));return isNaN(value)?"":(value in whens||(value=$locale.pluralCat(value-offset)),whensExpFns[value](scope,element,!0))},function(newVal){element.text(newVal)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){function getBlockStart(block){return block.clone[0]}function getBlockEnd(block){return block.clone[block.clone.length-1]}var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var trackByExp,trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,lhs,rhs,valueIdentifier,keyIdentifier,expression=$attr.ngRepeat,match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),hashFnLocals={$id:hashKey};if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);if(lhs=match[1],rhs=match[2],trackByExp=match[3],trackByExp?(trackByExpGetter=$parse(trackByExp),trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)}):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),match=lhs.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);valueIdentifier=match[3]||match[1],keyIdentifier=match[2];var lastBlockMap={};$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,arrayLength,childScope,key,value,trackById,trackByIdFn,collectionKeys,block,elementsToRemove,previousNode=$element[0],nextBlockMap={},nextBlockOrder=[];if(isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(key in collection)collection.hasOwnProperty(key)&&"$"!=key.charAt(0)&&collectionKeys.push(key);collectionKeys.sort()}for(arrayLength=collectionKeys.length,length=nextBlockOrder.length=collectionKeys.length,index=0;length>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),assertNotHasOwnProperty(trackById,"`track by` id"),lastBlockMap.hasOwnProperty(trackById))block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap.hasOwnProperty(trackById))throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",expression,trackById);nextBlockOrder[index]={id:trackById},nextBlockMap[trackById]=!1}for(key in lastBlockMap)lastBlockMap.hasOwnProperty(key)&&(block=lastBlockMap[key],elementsToRemove=getBlockElements(block.clone),$animate.leave(elementsToRemove),forEach(elementsToRemove,function(element){element[NG_REMOVED]=!0}),block.scope.$destroy());for(index=0,length=collectionKeys.length;length>index;index++){if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],nextBlockOrder[index-1]&&(previousNode=getBlockEnd(nextBlockOrder[index-1])),block.scope){childScope=block.scope,nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockElements(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block)}else childScope=$scope.$new();childScope[valueIdentifier]=value,keyIdentifier&&(childScope[keyIdentifier]=key),childScope.$index=index,childScope.$first=0===index,childScope.$last=index===arrayLength-1,childScope.$middle=!(childScope.$first||childScope.$last),childScope.$odd=!(childScope.$even=0===(1&index)),block.scope||$transclude(childScope,function(clone){clone[clone.length++]=document.createComment(" end ngRepeat: "+expression+" "),$animate.enter(clone,null,jqLite(previousNode)),previousNode=clone,block.scope=childScope,block.clone=clone,nextBlockMap[block.id]=block})}lastBlockMap=nextBlockMap})}}}],ngShowDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[toBoolean(value)?"removeClass":"addClass"](element,"ng-hide")})}}],ngHideDirective=["$animate",function($animate){return function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[toBoolean(value)?"addClass":"removeClass"](element,"ng-hide")})}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousElements=[],selectedScopes=[];scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousElements.length;ii>i;++i)previousElements[i].remove();for(previousElements.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=selectedElements[i];selectedScopes[i].$destroy(),previousElements[i]=selected,$animate.leave(selected,function(){previousElements.splice(i,1)})}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&(scope.$eval(attr.change),forEach(selectedTranscludes,function(selectedTransclude){var selectedScope=scope.$new();selectedScopes.push(selectedScope),selectedTransclude.transclude(selectedScope,function(caseElement){var anchor=selectedTransclude.element;selectedElements.push(caseElement),$animate.enter(caseElement,anchor.parent(),anchor)})}))})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:800,require:"^ngSwitch",link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove())},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue==value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=shallowCopy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function getSelectedSet(){var selectedSet=!1;if(multiple){var modelValue=ctrl.$modelValue;if(trackFn&&isArray(modelValue)){selectedSet=new HashMap([]);for(var locals={},trackIndex=0;trackIndex<modelValue.length;trackIndex++)locals[valueName]=modelValue[trackIndex],selectedSet.put(trackFn(scope,locals),modelValue[trackIndex])}else selectedSet=new HashMap(modelValue)}return selectedSet}function render(){var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionGroups={"":[]},optionGroupNames=[""],modelValue=ctrl.$modelValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,locals={},selectedSet=getSelectedSet();for(index=0;length=keys.length,length>index;index++){if(key=index,keyName){if(key=keys[index],"$"===key.charAt(0))continue;locals[keyName]=key}if(locals[valueName]=values[key],optionGroupName=groupByFn(scope,locals)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),multiple)selected=isDefined(selectedSet.remove(trackFn?trackFn(scope,locals):valueFn(scope,locals)));else{if(trackFn){var modelCast={};modelCast[valueName]=modelValue,selected=trackFn(scope,modelCast)===trackFn(scope,locals)}else selected=modelValue===valueFn(scope,locals);selectedSet=selectedSet||selected}label=displayFn(scope,locals),label=isDefined(label)?label:"",optionGroup.push({id:trackFn?trackFn(scope,locals):keyName?keys[index]:index,label:label,selected:selected})}for(multiple||(nullOption||null===modelValue?optionGroups[""].unshift({id:"",label:"",selected:!selectedSet}):selectedSet||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&lastElement.text(existingOption.label=option.label),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&(lastElement.prop("selected",existingOption.selected=option.selected),msie&&lastElement.prop("selected",existingOption.selected))):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).prop("selected",option.selected).attr("selected",option.selected).text(option.label),existingOptions.push(existingOption={element:element,label:option.label,id:option.id,selected:option.selected}),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)existingOptions.pop().element.remove()}for(;optionGroupsCache.length>groupIndex;)optionGroupsCache.pop()[0].element.remove()}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,optionGroupsCache=[[{element:selectElement,label:""}]];nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",function(){scope.$apply(function(){var optionGroup,key,value,optionElement,index,groupIndex,length,groupLength,trackIndex,collection=valuesFn(scope)||[],locals={}; if(multiple){for(value=[],groupIndex=0,groupLength=optionGroupsCache.length;groupLength>groupIndex;groupIndex++)for(optionGroup=optionGroupsCache[groupIndex],index=1,length=optionGroup.length;length>index;index++)if((optionElement=optionGroup[index].element)[0].selected){if(key=optionElement.val(),keyName&&(locals[keyName]=key),trackFn)for(trackIndex=0;trackIndex<collection.length&&(locals[valueName]=collection[trackIndex],trackFn(scope,locals)!=key);trackIndex++);else locals[valueName]=collection[key];value.push(valueFn(scope,locals))}}else if(key=selectElement.val(),"?"==key)value=undefined;else if(""===key)value=null;else if(trackFn){for(trackIndex=0;trackIndex<collection.length;trackIndex++)if(locals[valueName]=collection[trackIndex],trackFn(scope,locals)==key){value=valueFn(scope,locals);break}}else locals[valueName]=collection[key],keyName&&(locals[keyName]=key),value=valueFn(scope,locals);ctrl.$setViewValue(value),render()})}),ctrl.$render=render,scope.$watchCollection(valuesFn,render),multiple&&scope.$watchCollection(function(){return ctrl.$modelValue},render)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound?element.prop("selected",!1):selectCtrl=nullSelectCtrl,interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),newVal!==oldVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal)}):selectCtrl.addOption(attr.value),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!0});window.angular.bootstrap||(bindJQuery(),publishExternalAPI(angular),jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>')},{}],297:[function(require,module){"use strict";module.exports=require(1)},{1:298}],298:[function(require,module,exports){!function(root,factory){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(momentjs,$,exports){root.daterangepicker=factory(root,exports,momentjs,$)});else if("undefined"!=typeof exports){var jQuery,momentjs=require(1);try{jQuery=$}catch(err){if(jQuery=window.jQuery,!jQuery)throw new Error("jQuery dependency not found")}factory(root,exports,momentjs,jQuery)}else root.daterangepicker=factory(root,{},root.moment,root.jQuery||root.Zepto||root.ender||root.$)}(window,function(root,daterangepicker,moment,$){var DateRangePicker=function(element,options,cb){this.parentEl="body",this.element=$(element),this.isShowing=!1;var DRPTemplate='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>';("object"!=typeof options||null===options)&&(options={}),this.parentEl=$("object"==typeof options&&options.parentEl&&$(options.parentEl).length?options.parentEl:this.parentEl),this.container=$(DRPTemplate).appendTo(this.parentEl),this.setOptions(options,cb);var c=this.container;$.each(this.buttonClasses,function(idx,val){c.find("button").addClass(val)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",$.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",$.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this))};DateRangePicker.prototype={constructor:DateRangePicker,setOptions:function(options,callback){if(this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData()._week.dow},this.cb=function(){},"string"==typeof options.format&&(this.format=options.format),"string"==typeof options.separator&&(this.separator=options.separator),"string"==typeof options.startDate&&(this.startDate=moment(options.startDate,this.format)),"string"==typeof options.endDate&&(this.endDate=moment(options.endDate,this.format)),"string"==typeof options.minDate&&(this.minDate=moment(options.minDate,this.format)),"string"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate,this.format)),"object"==typeof options.startDate&&(this.startDate=moment(options.startDate)),"object"==typeof options.endDate&&(this.endDate=moment(options.endDate)),"object"==typeof options.minDate&&(this.minDate=moment(options.minDate)),"object"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate)),"string"==typeof options.applyClass&&(this.applyClass=options.applyClass),"string"==typeof options.cancelClass&&(this.cancelClass=options.cancelClass),"object"==typeof options.dateLimit&&(this.dateLimit=options.dateLimit),"object"==typeof options.locale&&("object"==typeof options.locale.daysOfWeek&&(this.locale.daysOfWeek=options.locale.daysOfWeek.slice()),"object"==typeof options.locale.monthNames&&(this.locale.monthNames=options.locale.monthNames.slice()),"number"==typeof options.locale.firstDay&&(this.locale.firstDay=options.locale.firstDay),"string"==typeof options.locale.applyLabel&&(this.locale.applyLabel=options.locale.applyLabel),"string"==typeof options.locale.cancelLabel&&(this.locale.cancelLabel=options.locale.cancelLabel),"string"==typeof options.locale.fromLabel&&(this.locale.fromLabel=options.locale.fromLabel),"string"==typeof options.locale.toLabel&&(this.locale.toLabel=options.locale.toLabel),"string"==typeof options.locale.weekLabel&&(this.locale.weekLabel=options.locale.weekLabel),"string"==typeof options.locale.customRangeLabel&&(this.locale.customRangeLabel=options.locale.customRangeLabel)),"string"==typeof options.opens&&(this.opens=options.opens),"boolean"==typeof options.showWeekNumbers&&(this.showWeekNumbers=options.showWeekNumbers),"string"==typeof options.buttonClasses&&(this.buttonClasses=[options.buttonClasses]),"object"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses),"boolean"==typeof options.showDropdowns&&(this.showDropdowns=options.showDropdowns),"boolean"==typeof options.singleDatePicker&&(this.singleDatePicker=options.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof options.timePicker&&(this.timePicker=options.timePicker),"number"==typeof options.timePickerIncrement&&(this.timePickerIncrement=options.timePickerIncrement),"boolean"==typeof options.timePicker12Hour&&(this.timePicker12Hour=options.timePicker12Hour),0!=this.locale.firstDay)for(var iterator=this.locale.firstDay;iterator>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),iterator--;var start,end,range;if("undefined"==typeof options.startDate&&"undefined"==typeof options.endDate&&$(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.separator);start=end=null,2==split.length?(start=moment(split[0],this.format),end=moment(split[1],this.format)):this.singleDatePicker&&(start=moment(val,this.format),end=moment(val,this.format)),null!==start&&null!==end&&(this.startDate=start,this.endDate=end)}if("object"==typeof options.ranges){for(range in options.ranges)start=moment(options.ranges[range][0]),end=moment(options.ranges[range][1]),this.minDate&&start.isBefore(this.minDate)&&(start=moment(this.minDate)),this.maxDate&&end.isAfter(this.maxDate)&&(end=moment(this.maxDate)),this.minDate&&end.isBefore(this.minDate)||this.maxDate&&start.isAfter(this.maxDate)||(this.ranges[range]=[start,end]);var list="<ul>";for(range in this.ranges)list+="<li>"+range+"</li>";list+="<li>"+this.locale.customRangeLabel+"</li>",list+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(list)}if("function"==typeof callback&&(this.cb=callback),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.addClass("single"),this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.timePicker?this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide():this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.removeClass("single"),this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},"right"==this.opens||"center"==this.opens){var left=this.container.find(".calendar.left"),right=this.container.find(".calendar.right");right.hasClass("single")&&(right.removeClass("single"),left.addClass("single")),left.removeClass("left").addClass("right"),right.removeClass("right").addClass("left"),this.singleDatePicker&&(left.show(),right.hide())}"undefined"!=typeof options.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(startDate){"string"==typeof startDate&&(this.startDate=moment(startDate,this.format)),"object"==typeof startDate&&(this.startDate=moment(startDate)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},setEndDate:function(endDate){"string"==typeof endDate&&(this.endDate=moment(endDate,this.format)),"object"==typeof endDate&&(this.endDate=moment(endDate)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var dateString=this.element.val().split(this.separator),start=null,end=null;2===dateString.length&&(start=moment(dateString[0],this.format),end=moment(dateString[1],this.format)),(this.singleDatePicker||null===start||null===end)&&(start=moment(this.element.val(),this.format),end=start),end.isBefore(start)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=start,this.endDate=end,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var parentOffset={top:0,left:0},parentRightEdge=$(window).width();this.parentEl.is("body")||(parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left),"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,left:this.element.offset().left-parentOffset.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.isShowing||(this.element.addClass("active"),this.container.show(),this.move(),this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.isShowing=!0,this.element.trigger("show.daterangepicker",this))},outsideClick:function(e){var target=$(e.target);target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-date").length||this.hide()},hide:function(){this.isShowing&&($(document).off("mousedown.daterangepicker").off("click.daterangepicker","[data-toggle=dropdown]").off("focusin.daterangepicker"),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.isShowing=!1,this.element.trigger("hide.daterangepicker",this))},enterRange:function(e){var label=e.target.innerHTML;if(label==this.locale.customRangeLabel)this.updateView();else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(e){var el=$(e.target),date=moment(el.val(),this.format);if(date.isValid()){var startDate,endDate;"daterangepicker_start"===el.attr("name")?(startDate=date,endDate=this.endDate):(startDate=this.startDate,endDate=date),this.setCustomDates(startDate,endDate)}},inputsKeydown:function(e){13===e.keyCode&&(this.inputsChanged(e),this.notify())},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)):this.element.is("input")&&this.element.val(this.endDate.format(this.format))},clickRange:function(e){var label=e.target.innerHTML;if(this.chosenLabel=label,label==this.locale.customRangeLabel)this.showCalendars();else{var dates=this.ranges[label];this.startDate=dates[0],this.endDate=dates[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(e){var cal=$(e.target).parents(".calendar");cal.hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var cal=$(e.target).parents(".calendar");cal.hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},hoverDate:function(e){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar");cal.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[row][col].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[row][col].format(this.format))},setCustomDates:function(startDate,endDate){if(this.chosenLabel=this.locale.customRangeLabel,startDate.isAfter(endDate)){var difference=this.endDate.diff(this.startDate);endDate=moment(startDate).add(difference,"ms")}this.startDate=startDate,this.endDate=endDate,this.updateView(),this.updateCalendars()},clickDate:function(e){var startDate,endDate,title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal=$(e.target).parents(".calendar");if(cal.hasClass("left")){if(startDate=this.leftCalendar.calendar[row][col],endDate=this.endDate,"object"==typeof this.dateLimit){var maxDate=moment(startDate).add(this.dateLimit).startOf("day");endDate.isAfter(maxDate)&&(endDate=maxDate)}}else if(startDate=this.startDate,endDate=this.rightCalendar.calendar[row][col],"object"==typeof this.dateLimit){var minDate=moment(endDate).subtract(this.dateLimit).startOf("day");startDate.isBefore(minDate)&&(startDate=minDate)}this.singleDatePicker&&cal.hasClass("left")?endDate=startDate.clone():this.singleDatePicker&&cal.hasClass("right")&&(startDate=endDate.clone()),cal.find("td").removeClass("active"),$(e.target).addClass("active"),this.setCustomDates(startDate,endDate),this.timePicker||endDate.endOf("day"),this.singleDatePicker&&!this.timePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight),month=parseInt(cal.find(".monthselect").val(),10),year=cal.find(".yearselect").val();this[leftOrRight+"Calendar"].month.month(month).year(year),this.updateCalendars()},updateTime:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left"),hour=parseInt(cal.find(".hourselect").val(),10),minute=parseInt(cal.find(".minuteselect").val(),10);if(this.timePicker12Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&12>hour&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}if(isLeft){var start=this.startDate.clone();start.hour(hour),start.minute(minute),this.startDate=start,this.leftCalendar.month.hour(hour).minute(minute),this.singleDatePicker&&(this.endDate=start.clone())}else{var end=this.endDate.clone();end.hour(hour),end.minute(minute),this.endDate=end,this.singleDatePicker&&(this.startDate=end.clone()),this.rightCalendar.month.hour(hour).minute(minute)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate,"left")),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate,"right")),this.container.find(".ranges li").removeClass("active");var customRange=!0,i=0;for(var range in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])&&(customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")&&(customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html()),i++;customRange&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())},buildCalendar:function(month,year,hour,minute,side){var i,daysInMonth=moment([year,month]).daysInMonth(),firstDay=moment([year,month,1]),lastDay=moment([year,month,daysInMonth]),lastMonth=moment(firstDay).subtract(1,"month").month(),lastYear=moment(firstDay).subtract(1,"month").year(),daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth(),dayOfWeek=firstDay.day(),calendar=[];for(calendar.firstDay=firstDay,calendar.lastDay=lastDay,i=0;6>i;i++)calendar[i]=[];var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;startDay>daysInLastMonth&&(startDay-=7),dayOfWeek==this.locale.firstDay&&(startDay=daysInLastMonth-6);var col,row,curDate=moment([lastYear,lastMonth,startDay,12,minute]);for(i=0,col=0,row=0;42>i;i++,col++,curDate=moment(curDate).add(24,"hour"))i>0&&col%7===0&&(col=0,row++),calendar[row][col]=curDate.clone().hour(hour),curDate.hour(12),this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&"left"==side&&(calendar[row][col]=this.minDate.clone()),this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&"right"==side&&(calendar[row][col]=this.maxDate.clone());return calendar},renderDropdowns:function(selected,minDate,maxDate){for(var currentMonth=selected.month(),currentYear=selected.year(),maxYear=maxDate&&maxDate.year()||currentYear+5,minYear=minDate&&minDate.year()||currentYear-50,monthHtml='<select class="monthselect">',inMinYear=currentYear==minYear,inMaxYear=currentYear==maxYear,m=0;12>m;m++)(!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())&&(monthHtml+="<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>");monthHtml+="</select>";for(var yearHtml='<select class="yearselect">',y=minYear;maxYear>=y;y++)yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>";return yearHtml+="</select>",monthHtml+yearHtml},renderCalendar:function(calendar,selected,minDate,maxDate,side){var html='<div class="calendar-date">';html+='<table class="table-condensed">',html+="<thead>",html+="<tr>",this.showWeekNumbers&&(html+="<th></th>"),html+=!minDate||minDate.isBefore(calendar.firstDay)?'<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");this.showDropdowns&&(dateHtml=this.renderDropdowns(calendar[1][1],minDate,maxDate)),html+='<th colspan="5" class="month">'+dateHtml+"</th>",html+=!maxDate||maxDate.isAfter(calendar.lastDay)?'<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",html+="</tr>",html+="<tr>",this.showWeekNumbers&&(html+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"}),html+="</tr>",html+="</thead>",html+="<tbody>";for(var row=0;6>row;row++){html+="<tr>",this.showWeekNumbers&&(html+='<td class="week">'+calendar[row][0].week()+"</td>");for(var col=0;7>col;col++){var cname="available ";cname+=calendar[row][col].month()==calendar[1][1].month()?"":"off",minDate&&calendar[row][col].isBefore(minDate,"day")||maxDate&&calendar[row][col].isAfter(maxDate,"day")?cname=" off disabled ":calendar[row][col].format("YYYY-MM-DD")==selected.format("YYYY-MM-DD")?(cname+=" active ",calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(cname+=" start-date "),calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(cname+=" end-date ")):calendar[row][col]>=this.startDate&&calendar[row][col]<=this.endDate&&(cname+=" in-range ",calendar[row][col].isSame(this.startDate)&&(cname+=" start-date "),calendar[row][col].isSame(this.endDate)&&(cname+=" end-date "));var title="r"+row+"c"+col;html+='<td class="'+cname.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+title+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>",html+="</table>",html+="</div>";var i;if(this.timePicker){html+='<div class="calendar-time">',html+='<select class="hourselect">';var min_hour=0,max_hour=23;minDate&&("left"==side||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==minDate.format("YYYY-MM-DD")&&(min_hour=minDate.hour(),selected.hour()<min_hour&&selected.hour(min_hour),this.timePicker12Hour&&min_hour>=12&&selected.hour()>=12&&(min_hour-=12),this.timePicker12Hour&&12==min_hour&&(min_hour=1)),maxDate&&("right"==side||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==maxDate.format("YYYY-MM-DD")&&(max_hour=maxDate.hour(),selected.hour()>max_hour&&selected.hour(max_hour),this.timePicker12Hour&&max_hour>=12&&selected.hour()>=12&&(max_hour-=12));var start=0,end=23,selected_hour=selected.hour();for(this.timePicker12Hour&&(start=1,end=12,selected_hour>=12&&(selected_hour-=12),0===selected_hour&&(selected_hour=12)),i=start;end>=i;i++)html+=i==selected_hour?'<option value="'+i+'" selected="selected">'+i+"</option>":min_hour>i||i>max_hour?'<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>":'<option value="'+i+'">'+i+"</option>";html+="</select> : ",html+='<select class="minuteselect">';var min_minute=0,max_minute=59;for(minDate&&("left"==side||this.singleDatePicker)&&selected.format("YYYY-MM-DD h A")==minDate.format("YYYY-MM-DD h A")&&(min_minute=minDate.minute(),selected.minute()<min_minute&&selected.minute(min_minute)),maxDate&&("right"==side||this.singleDatePicker)&&selected.format("YYYY-MM-DD h A")==maxDate.format("YYYY-MM-DD h A")&&(max_minute=maxDate.minute(),selected.minute()>max_minute&&selected.minute(max_minute)),i=0;60>i;i+=this.timePickerIncrement){var num=i;10>num&&(num="0"+num),html+=i==selected.minute()?'<option value="'+i+'" selected="selected">'+num+"</option>":min_minute>i||i>max_minute?'<option value="'+i+'" disabled="disabled" class="disabled">'+num+"</option>":'<option value="'+i+'">'+num+"</option>"}if(html+="</select> ",this.timePicker12Hour){html+='<select class="ampmselect">';var am_html="",pm_html="";minDate&&("left"==side||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==minDate.format("YYYY-MM-DD")&&minDate.hour()>=12&&(am_html=' disabled="disabled" class="disabled"'),maxDate&&("right"==side||this.singleDatePicker)&&selected.format("YYYY-MM-DD")==maxDate.format("YYYY-MM-DD")&&maxDate.hour()<12&&(pm_html=' disabled="disabled" class="disabled"'),html+=selected.hour()>=12?'<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>":'<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>",html+="</select>"}html+="</div>"}return html},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},$.fn.daterangepicker=function(options,cb){return this.each(function(){var el=$(this);el.data("daterangepicker")&&el.data("daterangepicker").remove(),el.data("daterangepicker",new DateRangePicker(el,options,cb)) }),this}})},{1:314}],299:[function(require,module){"use strict";module.exports=require(1)},{1:300}],300:[function(require,module,exports){!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["third-party-modules/jquery","third-party-modules/moment"],b);else if("object"==typeof exports)b($,require(1));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");b(a.jQuery,moment)}}(this,function(a,b){"use strict";if("undefined"==typeof b)throw new Error("momentjs is required");var c=0,d=function(d,e){var f,g=a.fn.datetimepicker.defaults,h={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},i=this,j=!1,k=function(){var f,j,k=!1;if(i.options=a.extend({},g,e),i.options.icons=a.extend({},h,i.options.icons),i.element=a(d),m(),!i.options.pickTime&&!i.options.pickDate)throw new Error("Must choose at least one picker");if(i.id=c++,b.locale(i.options.language),i.date=b(),i.unset=!1,i.isInput=i.element.is("input"),i.component=!1,i.element.hasClass("input-group")&&(i.component=i.element.find(0===i.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),i.format=i.options.format,f=b().localeData(),i.format||(i.format=i.options.pickDate?f.longDateFormat("L"):"",i.options.pickDate&&i.options.pickTime&&(i.format+=" "),i.format+=i.options.pickTime?f.longDateFormat("LT"):"",i.options.useSeconds&&(-1!==f.longDateFormat("LT").indexOf(" A")?i.format=i.format.split(" A")[0]+":ss A":i.format+=":ss")),i.use24hours=i.format.toLowerCase().indexOf("a")<0&&i.format.indexOf("h")<0,i.component&&(k=i.component.find("span")),i.options.pickTime&&k&&k.addClass(i.options.icons.time),i.options.pickDate&&k&&(k.removeClass(i.options.icons.time),k.addClass(i.options.icons.date)),i.options.widgetParent="string"==typeof i.options.widgetParent&&i.options.widgetParent||i.element.parents().filter(function(){return"scroll"===a(this).css("overflow-y")}).get(0)||"body",i.widget=a(Q()).appendTo(i.options.widgetParent),i.minViewMode=i.options.minViewMode||0,"string"==typeof i.minViewMode)switch(i.minViewMode){case"months":i.minViewMode=1;break;case"years":i.minViewMode=2;break;default:i.minViewMode=0}if(i.viewMode=i.options.viewMode||0,"string"==typeof i.viewMode)switch(i.viewMode){case"months":i.viewMode=1;break;case"years":i.viewMode=2;break;default:i.viewMode=0}i.viewMode=Math.max(i.viewMode,i.minViewMode),i.options.disabledDates=O(i.options.disabledDates),i.options.enabledDates=O(i.options.enabledDates),i.startViewMode=i.viewMode,i.setMinDate(i.options.minDate),i.setMaxDate(i.options.maxDate),r(),s(),u(),v(),w(),q(),E(),l().prop("disabled")||F(),""!==i.options.defaultDate&&""===l().val()&&i.setValue(i.options.defaultDate),1!==i.options.minuteStepping&&(j=i.options.minuteStepping,i.date.minutes(Math.round(i.date.minutes()/j)*j%60).seconds(0))},l=function(){var a;if(i.isInput)return i.element;if(a=i.element.find(".datepickerinput"),0===a.size())a=i.element.find("input");else if(!a.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return a},m=function(){var a;a=i.element.is("input")?i.element.data():i.element.find("input").data(),void 0!==a.dateFormat&&(i.options.format=a.dateFormat),void 0!==a.datePickdate&&(i.options.pickDate=a.datePickdate),void 0!==a.datePicktime&&(i.options.pickTime=a.datePicktime),void 0!==a.dateUseminutes&&(i.options.useMinutes=a.dateUseminutes),void 0!==a.dateUseseconds&&(i.options.useSeconds=a.dateUseseconds),void 0!==a.dateUsecurrent&&(i.options.useCurrent=a.dateUsecurrent),void 0!==a.calendarWeeks&&(i.options.calendarWeeks=a.calendarWeeks),void 0!==a.dateMinutestepping&&(i.options.minuteStepping=a.dateMinutestepping),void 0!==a.dateMindate&&(i.options.minDate=a.dateMindate),void 0!==a.dateMaxdate&&(i.options.maxDate=a.dateMaxdate),void 0!==a.dateShowtoday&&(i.options.showToday=a.dateShowtoday),void 0!==a.dateCollapse&&(i.options.collapse=a.dateCollapse),void 0!==a.dateLanguage&&(i.options.language=a.dateLanguage),void 0!==a.dateDefaultdate&&(i.options.defaultDate=a.dateDefaultdate),void 0!==a.dateDisableddates&&(i.options.disabledDates=a.dateDisableddates),void 0!==a.dateEnableddates&&(i.options.enabledDates=a.dateEnableddates),void 0!==a.dateIcons&&(i.options.icons=a.dateIcons),void 0!==a.dateUsestrict&&(i.options.useStrict=a.dateUsestrict),void 0!==a.dateDirection&&(i.options.direction=a.dateDirection),void 0!==a.dateSidebyside&&(i.options.sideBySide=a.dateSidebyside),void 0!==a.dateDaysofweekdisabled&&(i.options.daysOfWeekDisabled=a.dateDaysofweekdisabled)},n=function(){var b,c="absolute",d=i.component?i.component.offset():i.element.offset(),e=a(window);i.width=i.component?i.component.outerWidth():i.element.outerWidth(),d.top=d.top+i.element.outerHeight(),"up"===i.options.direction?b="top":"bottom"===i.options.direction?b="bottom":"auto"===i.options.direction&&(b=d.top+i.widget.height()>e.height()+e.scrollTop()&&i.widget.height()+i.element.outerHeight()<d.top?"top":"bottom"),"top"===b?(d.bottom=e.height()-d.top+i.element.outerHeight()+3,i.widget.addClass("top").removeClass("bottom")):(d.top+=1,i.widget.addClass("bottom").removeClass("top")),void 0!==i.options.width&&i.widget.width(i.options.width),"left"===i.options.orientation&&(i.widget.addClass("left-oriented"),d.left=d.left-i.widget.width()+20),J()&&(c="fixed",d.top-=e.scrollTop(),d.left-=e.scrollLeft()),e.width()<d.left+i.widget.outerWidth()?(d.right=e.width()-d.left-i.width,d.left="auto",i.widget.addClass("pull-right")):(d.right="auto",i.widget.removeClass("pull-right")),i.widget.css("top"===b?{position:c,bottom:d.bottom,top:"auto",left:d.left,right:d.right}:{position:c,top:d.top,bottom:"auto",left:d.left,right:d.right})},o=function(a,c){(!b(i.date).isSame(b(a))||j)&&(j=!1,i.element.trigger({type:"dp.change",date:b(i.date),oldDate:b(a)}),"change"!==c&&i.element.change())},p=function(a){j=!0,i.element.trigger({type:"dp.error",date:b(a,i.format,i.options.useStrict)})},q=function(a){b.locale(i.options.language);var c=a;c||(c=l().val(),c&&(i.date=b(c,i.format,i.options.useStrict)),i.date||(i.date=b())),i.viewDate=b(i.date).startOf("month"),t(),x()},r=function(){b.locale(i.options.language);var c,d=a("<tr>"),e=b.weekdaysMin();if(i.options.calendarWeeks===!0&&d.append('<th class="cw">#</th>'),0===b().localeData()._week.dow)for(c=0;7>c;c++)d.append('<th class="dow">'+e[c]+"</th>");else for(c=1;8>c;c++)d.append(7===c?'<th class="dow">'+e[0]+"</th>":'<th class="dow">'+e[c]+"</th>");i.widget.find(".datepicker-days thead").append(d)},s=function(){b.locale(i.options.language);var a,c="",d=b.monthsShort();for(a=0;12>a;a++)c+='<span class="month">'+d[a]+"</span>";i.widget.find(".datepicker-months td").append(c)},t=function(){if(i.options.pickDate){b.locale(i.options.language);var c,d,e,f,g,h,j,k,l,m=i.viewDate.year(),n=i.viewDate.month(),o=i.options.minDate.year(),p=i.options.minDate.month(),q=i.options.maxDate.year(),r=i.options.maxDate.month(),s=[],t=b.months();for(i.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),i.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),i.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),i.widget.find(".datepicker-days th:eq(1)").text(t[n]+" "+m),d=b(i.viewDate,i.format,i.options.useStrict).subtract(1,"months"),j=d.daysInMonth(),d.date(j).startOf("week"),(m===o&&p>=n||o>m)&&i.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(m===q&&n>=r||m>q)&&i.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),e=b(d).add(42,"d");d.isBefore(e);){if(d.weekday()===b().startOf("week").weekday()&&(f=a("<tr>"),s.push(f),i.options.calendarWeeks===!0&&f.append('<td class="cw">'+d.week()+"</td>")),g="",d.year()<m||d.year()===m&&d.month()<n?g+=" old":(d.year()>m||d.year()===m&&d.month()>n)&&(g+=" new"),d.isSame(b({y:i.date.year(),M:i.date.month(),d:i.date.date()}))&&(g+=" active"),(M(d,"day")||!N(d))&&(g+=" disabled"),i.options.showToday===!0&&d.isSame(b(),"day")&&(g+=" today"),i.options.daysOfWeekDisabled)for(h=0;h<i.options.daysOfWeekDisabled.length;h++)if(d.day()===i.options.daysOfWeekDisabled[h]){g+=" disabled";break}f.append('<td class="day'+g+'">'+d.date()+"</td>"),c=d.date(),d.add(1,"d"),c===d.date()&&d.add(1,"d")}for(i.widget.find(".datepicker-days tbody").empty().append(s),l=i.date.year(),t=i.widget.find(".datepicker-months").find("th:eq(1)").text(m).end().find("span").removeClass("active"),l===m&&t.eq(i.date.month()).addClass("active"),o>m-1&&i.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),m+1>q&&i.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),h=0;12>h;h++)m===o&&p>h||o>m?a(t[h]).addClass("disabled"):(m===q&&h>r||m>q)&&a(t[h]).addClass("disabled");for(s="",m=10*parseInt(m/10,10),k=i.widget.find(".datepicker-years").find("th:eq(1)").text(m+"-"+(m+9)).parents("table").find("td"),i.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>m&&i.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),m+9>q&&i.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),m-=1,h=-1;11>h;h++)s+='<span class="year'+(-1===h||10===h?" old":"")+(l===m?" active":"")+(o>m||m>q?" disabled":"")+'">'+m+"</span>",m+=1;k.html(s)}},u=function(){b.locale(i.options.language);var a,c,d,e=i.widget.find(".timepicker .timepicker-hours table"),f="";if(e.parent().hide(),i.use24hours)for(a=0,c=0;6>c;c+=1){for(f+="<tr>",d=0;4>d;d+=1)f+='<td class="hour">'+P(a.toString())+"</td>",a++;f+="</tr>"}else for(a=1,c=0;3>c;c+=1){for(f+="<tr>",d=0;4>d;d+=1)f+='<td class="hour">'+P(a.toString())+"</td>",a++;f+="</tr>"}e.html(f)},v=function(){var a,b,c=i.widget.find(".timepicker .timepicker-minutes table"),d="",e=0,f=i.options.minuteStepping;for(c.parent().hide(),1===f&&(f=5),a=0;a<Math.ceil(60/f/4);a++){for(d+="<tr>",b=0;4>b;b+=1)60>e?(d+='<td class="minute">'+P(e.toString())+"</td>",e+=f):d+="<td></td>";d+="</tr>"}c.html(d)},w=function(){var a,b,c=i.widget.find(".timepicker .timepicker-seconds table"),d="",e=0;for(c.parent().hide(),a=0;3>a;a++){for(d+="<tr>",b=0;4>b;b+=1)d+='<td class="second">'+P(e.toString())+"</td>",e+=5;d+="</tr>"}c.html(d)},x=function(){if(i.date){var a=i.widget.find(".timepicker span[data-time-component]"),b=i.date.hours(),c=i.date.format("A");i.use24hours||(0===b?b=12:12!==b&&(b%=12),i.widget.find(".timepicker [data-action=togglePeriod]").text(c)),a.filter("[data-time-component=hours]").text(P(b)),a.filter("[data-time-component=minutes]").text(P(i.date.minutes())),a.filter("[data-time-component=seconds]").text(P(i.date.second()))}},y=function(c){c.stopPropagation(),c.preventDefault(),i.unset=!1;var d,e,f,g,h=a(c.target).closest("span, td, th"),j=b(i.date);if(1===h.length&&!h.is(".disabled"))switch(h[0].nodeName.toLowerCase()){case"th":switch(h[0].className){case"picker-switch":E(1);break;case"prev":case"next":f=R.modes[i.viewMode].navStep,"prev"===h[0].className&&(f=-1*f),i.viewDate.add(f,R.modes[i.viewMode].navFnc),t()}break;case"span":h.is(".month")?(d=h.parent().find("span").index(h),i.viewDate.month(d)):(e=parseInt(h.text(),10)||0,i.viewDate.year(e)),i.viewMode===i.minViewMode&&(i.date=b({y:i.viewDate.year(),M:i.viewDate.month(),d:i.viewDate.date(),h:i.date.hours(),m:i.date.minutes(),s:i.date.seconds()}),K(),o(j,c.type)),E(-1),t();break;case"td":h.is(".day")&&(g=parseInt(h.text(),10)||1,d=i.viewDate.month(),e=i.viewDate.year(),h.is(".old")?0===d?(d=11,e-=1):d-=1:h.is(".new")&&(11===d?(d=0,e+=1):d+=1),i.date=b({y:e,M:d,d:g,h:i.date.hours(),m:i.date.minutes(),s:i.date.seconds()}),i.viewDate=b({y:e,M:d,d:Math.min(28,g)}),t(),K(),o(j,c.type))}},z={incrementHours:function(){L("add","hours",1)},incrementMinutes:function(){L("add","minutes",i.options.minuteStepping)},incrementSeconds:function(){L("add","seconds",1)},decrementHours:function(){L("subtract","hours",1)},decrementMinutes:function(){L("subtract","minutes",i.options.minuteStepping)},decrementSeconds:function(){L("subtract","seconds",1)},togglePeriod:function(){var a=i.date.hours();a>=12?a-=12:a+=12,i.date.hours(a)},showPicker:function(){i.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),i.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){i.widget.find(".timepicker .timepicker-picker").hide(),i.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){i.widget.find(".timepicker .timepicker-picker").hide(),i.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){i.widget.find(".timepicker .timepicker-picker").hide(),i.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);i.use24hours||(i.date.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),i.date.hours(c),z.showPicker.call(i)},selectMinute:function(b){i.date.minutes(parseInt(a(b.target).text(),10)),z.showPicker.call(i)},selectSecond:function(b){i.date.seconds(parseInt(a(b.target).text(),10)),z.showPicker.call(i)}},A=function(c){var d=b(i.date),e=a(c.currentTarget).data("action"),f=z[e].apply(i,arguments);return B(c),i.date||(i.date=b({y:1970})),K(),x(),o(d,c.type),f},B=function(a){a.stopPropagation(),a.preventDefault()},C=function(a){27===a.keyCode&&i.hide()},D=function(c){b.locale(i.options.language);var d=a(c.target),e=b(i.date),f=b(d.val(),i.format,i.options.useStrict);f.isValid()&&!M(f)&&N(f)?(q(),i.setValue(f),o(e,c.type),K()):(i.viewDate=e,i.unset=!0,o(e,c.type),p(f))},E=function(a){a&&(i.viewMode=Math.max(i.minViewMode,Math.min(2,i.viewMode+a))),i.widget.find(".datepicker > div").hide().filter(".datepicker-"+R.modes[i.viewMode].clsName).show()},F=function(){var b,c,d,e,f;i.widget.on("click",".datepicker *",a.proxy(y,this)),i.widget.on("click","[data-action]",a.proxy(A,this)),i.widget.on("mousedown",a.proxy(B,this)),i.element.on("keydown",a.proxy(C,this)),i.options.pickDate&&i.options.pickTime&&i.widget.on("click.togglePicker",".accordion-toggle",function(g){if(g.stopPropagation(),b=a(this),c=b.closest("ul"),d=c.find(".in"),e=c.find(".collapse:not(.in)"),d&&d.length){if(f=d.data("collapse"),f&&f.transitioning)return;d.collapse("hide"),e.collapse("show"),b.find("span").toggleClass(i.options.icons.time+" "+i.options.icons.date),i.component&&i.component.find("span").toggleClass(i.options.icons.time+" "+i.options.icons.date)}}),i.isInput?i.element.on({click:a.proxy(i.show,this),focus:a.proxy(i.show,this),change:a.proxy(D,this),blur:a.proxy(i.hide,this)}):(i.element.on({change:a.proxy(D,this)},"input"),i.component?(i.component.on("click",a.proxy(i.show,this)),i.component.on("mousedown",a.proxy(B,this))):i.element.on("click",a.proxy(i.show,this)))},G=function(){a(window).on("resize.datetimepicker"+i.id,a.proxy(n,this)),i.isInput||a(document).on("mousedown.datetimepicker"+i.id,a.proxy(i.hide,this))},H=function(){i.widget.off("click",".datepicker *",i.click),i.widget.off("click","[data-action]"),i.widget.off("mousedown",i.stopEvent),i.options.pickDate&&i.options.pickTime&&i.widget.off("click.togglePicker"),i.isInput?i.element.off({focus:i.show,change:D,click:i.show,blur:i.hide}):(i.element.off({change:D},"input"),i.component?(i.component.off("click",i.show),i.component.off("mousedown",i.stopEvent)):i.element.off("click",i.show))},I=function(){a(window).off("resize.datetimepicker"+i.id),i.isInput||a(document).off("mousedown.datetimepicker"+i.id)},J=function(){if(i.element){var b,c=i.element.parents(),d=!1;for(b=0;b<c.length;b++)if("fixed"===a(c[b]).css("position")){d=!0;break}return d}return!1},K=function(){b.locale(i.options.language);var a="";i.unset||(a=b(i.date).format(i.format)),l().val(a),i.element.data("date",a),i.options.pickTime||i.hide()},L=function(a,c,d){b.locale(i.options.language);var e;return"add"===a?(e=b(i.date),23===e.hours()&&e.add(d,c),e.add(d,c)):e=b(i.date).subtract(d,c),M(b(e.subtract(d,c)))||M(e)?void p(e.format(i.format)):("add"===a?i.date.add(d,c):i.date.subtract(d,c),void(i.unset=!1))},M=function(a,c){b.locale(i.options.language);var d=b(i.options.maxDate,i.format,i.options.useStrict),e=b(i.options.minDate,i.format,i.options.useStrict);return c&&(d=d.endOf(c),e=e.startOf(c)),a.isAfter(d)||a.isBefore(e)?!0:i.options.disabledDates===!1?!1:i.options.disabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a){return b.locale(i.options.language),i.options.enabledDates===!1?!0:i.options.enabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){var c,d={},e=0;for(c=0;c<a.length;c++)f=b.isMoment(a[c])||a[c]instanceof Date?b(a[c]):b(a[c],i.format,i.options.useStrict),f.isValid()&&(d[f.format("YYYY-MM-DD")]=!0,e++);return e>0?d:!1},P=function(a){return a=a.toString(),a.length>=2?a:"0"+a},Q=function(){var a='<thead><tr><th class="prev">&lsaquo;</th><th colspan="'+(i.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th></tr></thead>',b='<tbody><tr><td colspan="'+(i.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',c='<div class="datepicker-days"><table class="table-condensed">'+a+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+a+b+'</table></div><div class="datepicker-years"><table class="table-condensed">'+a+b+"</table></div>",d="";return i.options.pickDate&&i.options.pickTime?(d='<div class="bootstrap-datetimepicker-widget'+(i.options.sideBySide?" timepicker-sbs":"")+(i.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',d+=i.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+c+'</div><div class="col-sm-6 timepicker">'+S.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(i.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+c+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+i.options.icons.time+'"></span></a></li><li'+(i.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+S.getTemplate()+"</div></li></ul>",d+="</div>"):i.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+S.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+c+"</div></div>"},R={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},S={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};S.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+i.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(i.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+i.options.icons.up+'"></span></a>':"")+"</td>"+(i.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+i.options.icons.up+'"></span></a></td>':"")+(i.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+S.hourTemplate+'</td><td class="separator">:</td><td>'+(i.options.useMinutes?S.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(i.options.useSeconds?'<td class="separator">:</td><td>'+S.secondTemplate+"</td>":"")+(i.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+i.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(i.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+i.options.icons.down+'"></span></a>':"")+"</td>"+(i.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+i.options.icons.down+'"></span></a></td>':"")+(i.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(i.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},i.destroy=function(){H(),I(),i.widget.remove(),i.element.removeData("DateTimePicker"),i.component&&i.component.removeData("DateTimePicker")},i.show=function(a){if(!l().prop("disabled")){if(i.options.useCurrent&&""===l().val()){if(1!==i.options.minuteStepping){var c=b(),d=i.options.minuteStepping;c.minutes(Math.round(c.minutes()/d)*d%60).seconds(0),i.setValue(c.format(i.format))}else i.setValue(b().format(i.format));o("",a.type)}a&&"click"===a.type&&i.isInput&&i.widget.hasClass("picker-open")||(i.widget.hasClass("picker-open")?(i.widget.hide(),i.widget.removeClass("picker-open")):(i.widget.show(),i.widget.addClass("picker-open")),i.height=i.component?i.component.outerHeight():i.element.outerHeight(),n(),i.element.trigger({type:"dp.show",date:b(i.date)}),G(),a&&B(a))}},i.disable=function(){var a=l();a.prop("disabled")||(a.prop("disabled",!0),H())},i.enable=function(){var a=l();a.prop("disabled")&&(a.prop("disabled",!1),F())},i.hide=function(){var a,c,d=i.widget.find(".collapse");for(a=0;a<d.length;a++)if(c=d.eq(a).data("collapse"),c&&c.transitioning)return;i.widget.hide(),i.widget.removeClass("picker-open"),i.viewMode=i.startViewMode,E(),i.element.trigger({type:"dp.hide",date:b(i.date)}),I()},i.setValue=function(a){b.locale(i.options.language),a?i.unset=!1:(i.unset=!0,K()),a=b.isMoment(a)?a.locale(i.options.language):a instanceof Date?b(a):b(a,i.format,i.options.useStrict),a.isValid()?(i.date=a,K(),i.viewDate=b({y:i.date.year(),M:i.date.month()}),t(),x()):p(a)},i.getDate=function(){return i.unset?null:b(i.date)},i.setDate=function(a){var c=b(i.date);i.setValue(a?a:null),o(c,"function")},i.setDisabledDates=function(a){i.options.disabledDates=O(a),i.viewDate&&q()},i.setEnabledDates=function(a){i.options.enabledDates=O(a),i.viewDate&&q()},i.setMaxDate=function(a){void 0!==a&&(i.options.maxDate=b.isMoment(a)||a instanceof Date?b(a):b(a,i.format,i.options.useStrict),i.viewDate&&q())},i.setMinDate=function(a){void 0!==a&&(i.options.minDate=b.isMoment(a)||a instanceof Date?b(a):b(a,i.format,i.options.useStrict),i.viewDate&&q())},k()};a.fn.datetimepicker=function(b){return this.each(function(){var c=a(this),e=c.data("DateTimePicker");e||c.data("DateTimePicker",new d(this,b))})},a.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:b({y:1900}),maxDate:b().add(100,"y"),showToday:!0,collapse:!0,language:b.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}})},{1:314}],301:[function(require,module){"use strict";module.exports=require(1)},{1:302}],302:[function(){!function(a){return a.easyPieChart=function(b,c){var d,e,f,g,h,i,j,k,l=this;return this.el=b,this.$el=a(b),this.$el.data("easyPieChart",this),this.init=function(){var b,d;return l.options=a.extend({},a.easyPieChart.defaultOptions,c),b=parseInt(l.$el.data("percent"),10),l.percentage=0,l.canvas=a("<canvas width='"+l.options.size+"' height='"+l.options.size+"'></canvas>").get(0),l.$el.append(l.canvas),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(l.canvas),l.ctx=l.canvas.getContext("2d"),window.devicePixelRatio>1&&(d=window.devicePixelRatio,a(l.canvas).css({width:l.options.size,height:l.options.size}),l.canvas.width*=d,l.canvas.height*=d,l.ctx.scale(d,d)),l.ctx.translate(l.options.size/2,l.options.size/2),l.ctx.rotate(l.options.rotate*Math.PI/180),l.$el.addClass("easyPieChart"),l.$el.css({width:l.options.size,height:l.options.size,lineHeight:""+l.options.size+"px"}),l.update(b),l},this.update=function(a){return a=parseFloat(a)||0,l.options.animate===!1?f(a):e(l.percentage,a),l},j=function(){var a,b,c;for(l.ctx.fillStyle=l.options.scaleColor,l.ctx.lineWidth=1,c=[],a=b=0;24>=b;a=++b)c.push(d(a));return c},d=function(a){var b;b=a%6===0?0:.017*l.options.size,l.ctx.save(),l.ctx.rotate(a*Math.PI/12),l.ctx.fillRect(l.options.size/2-b,0,.05*-l.options.size+b,1),l.ctx.restore()},k=function(){var a;a=l.options.size/2-l.options.lineWidth/2,l.options.scaleColor!==!1&&(a-=.08*l.options.size),l.ctx.beginPath(),l.ctx.arc(0,0,a,0,2*Math.PI,!0),l.ctx.closePath(),l.ctx.strokeStyle=l.options.trackColor,l.ctx.lineWidth=l.options.lineWidth,l.ctx.stroke()},i=function(){l.options.scaleColor!==!1&&j(),l.options.trackColor!==!1&&k()},f=function(b){var c;i(),l.ctx.strokeStyle=a.isFunction(l.options.barColor)?l.options.barColor(b):l.options.barColor,l.ctx.lineCap=l.options.lineCap,l.ctx.lineWidth=l.options.lineWidth,c=l.options.size/2-l.options.lineWidth/2,l.options.scaleColor!==!1&&(c-=.08*l.options.size),l.ctx.save(),l.ctx.rotate(-Math.PI/2),l.ctx.beginPath(),l.ctx.arc(0,0,c,0,2*Math.PI*b/100,!1),l.ctx.stroke(),l.ctx.restore()},h=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),e=function(a,b){var c,d;l.options.onStart.call(l),l.percentage=b,d=Date.now(),c=function(){var e,j;return j=Date.now()-d,j<l.options.animate&&h(c),l.ctx.clearRect(-l.options.size/2,-l.options.size/2,l.options.size,l.options.size),i.call(l),e=[g(j,a,b-a,l.options.animate)],l.options.onStep.call(l,e),f.call(l,e),j>=l.options.animate?l.options.onStop.call(l):void 0},h(c)},g=function(a,b,c,d){var e,f;return e=function(a){return Math.pow(a,2)},f=function(a){return 1>a?e(a):2-e(a/2*-2+2)},a/=d/2,c/2*f(a)+b},this.init()},a.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:!1,onStart:a.noop,onStop:a.noop,onStep:a.noop},void(a.fn.easyPieChart=function(b){return a.each(this,function(c,d){var e,f;return e=a(d),e.data("easyPieChart")?void 0:(f=a.extend({},b,e.data()),e.data("easyPieChart",new a.easyPieChart(d,f)))})})}(jQuery)},{}],303:[function(){!function(e,t){function a(){var e=this;e.id=null,e.busy=!1,e.start=function(t,a){e.busy||(e.stop(),e.id=setTimeout(function(){t(),e.id=null,e.busy=!1},a),e.busy=!0)},e.stop=function(){null!==e.id&&(clearTimeout(e.id),e.id=null,e.busy=!1)}}function o(o,i,n){var r=this;r.id=n,r.table=o,r.options=i,r.breakpoints=[],r.breakpointNames="",r.columns={},r.plugins=t.footable.plugins.load(r);var l=r.options,d=l.classes,s=l.events,u=l.triggers,f=0;return r.timers={resize:new a,register:function(e){return r.timers[e]=new a,r.timers[e]}},r.init=function(){var a=e(t),o=e(r.table);if(t.footable.plugins.init(r),o.hasClass(d.loaded))return void r.raise(s.alreadyInitialized);r.raise(s.initializing),o.addClass(d.loading),o.find(l.columnDataSelector).each(function(){var e=r.getColumnData(this);r.columns[e.index]=e});for(var i in l.breakpoints)r.breakpoints.push({name:i,width:l.breakpoints[i]}),r.breakpointNames+=i+" ";r.breakpoints.sort(function(e,t){return e.width-t.width}),o.unbind(u.initialize).bind(u.initialize,function(){o.removeData("footable_info"),o.data("breakpoint",""),o.trigger(u.resize),o.removeClass(d.loading),o.addClass(d.loaded).addClass(d.main),r.raise(s.initialized)}).unbind(u.redraw).bind(u.redraw,function(){r.redraw()}).unbind(u.resize).bind(u.resize,function(){r.resize()}).unbind(u.expandFirstRow).bind(u.expandFirstRow,function(){o.find(l.toggleSelector).first().not("."+d.detailShow).trigger(u.toggleRow)}).unbind(u.expandAll).bind(u.expandAll,function(){o.find(l.toggleSelector).not("."+d.detailShow).trigger(u.toggleRow)}).unbind(u.collapseAll).bind(u.collapseAll,function(){o.find("."+d.detailShow).trigger(u.toggleRow)}),o.trigger(u.initialize),a.bind("resize.footable",function(){r.timers.resize.stop(),r.timers.resize.start(function(){r.raise(u.resize)},l.delay)})},r.addRowToggle=function(){if(l.addRowToggle){var t=e(r.table),a=!1;t.find("span."+d.toggle).remove();for(var o in r.columns){var i=r.columns[o];if(i.toggle){a=!0;var n="> tbody > tr:not(."+d.detail+",."+d.disabled+") > td:nth-child("+(parseInt(i.index,10)+1)+")";return void t.find(n).not("."+d.detailCell).prepend(e(l.toggleHTMLElement).addClass(d.toggle))}}a||t.find("> tbody > tr:not(."+d.detail+",."+d.disabled+") > td:first-child").not("."+d.detailCell).prepend(e(l.toggleHTMLElement).addClass(d.toggle))}},r.setColumnClasses=function(){$table=e(r.table);for(var t in r.columns){var a=r.columns[t];if(null!==a.className){var o="",i=!0;e.each(a.matches,function(e,t){i||(o+=", "),o+="> tbody > tr:not(."+d.detail+") > td:nth-child("+(parseInt(t,10)+1)+")",i=!1}),$table.find(o).not("."+d.detailCell).addClass(a.className)}}},r.bindToggleSelectors=function(){var t=e(r.table);r.hasAnyBreakpointColumn()&&(t.find(l.toggleSelector).unbind(u.toggleRow).bind(u.toggleRow,function(){var t=e(this).is("tr")?e(this):e(this).parents("tr:first");r.toggleDetail(t)}),t.find(l.toggleSelector).unbind("click.footable").bind("click.footable",function(a){t.is(".breakpoint")&&e(a.target).is("td,."+d.toggle)&&e(this).trigger(u.toggleRow)}))},r.parse=function(e,t){var a=l.parsers[t.type]||l.parsers.alpha;return a(e)},r.getColumnData=function(t){var a=e(t),o=a.data("hide"),i=a.index();o=o||"",o=jQuery.map(o.split(","),function(e){return jQuery.trim(e)});var n={index:i,hide:{},type:a.data("type")||"alpha",name:a.data("name")||e.trim(a.text()),ignore:a.data("ignore")||!1,toggle:a.data("toggle")||!1,className:a.data("class")||null,matches:[],names:{},group:a.data("group")||null,groupName:null};if(null!==n.group){var d=e(r.table).find('> thead > tr.footable-group-row > th[data-group="'+n.group+'"], > thead > tr.footable-group-row > td[data-group="'+n.group+'"]').first();n.groupName=r.parse(d,{type:"alpha"})}var u=parseInt(a.prev().attr("colspan")||0,10);f+=u>1?u-1:0;var p=parseInt(a.attr("colspan")||0,10),c=n.index+f;if(p>1){var g=a.data("names");g=g||"",g=g.split(",");for(var b=0;p>b;b++)n.matches.push(b+c),g.length>b&&(n.names[b+c]=g[b])}else n.matches.push(c);n.hide.default="all"===a.data("hide")||e.inArray("default",o)>=0;var h=!1;for(var m in l.breakpoints)n.hide[m]="all"===a.data("hide")||e.inArray(m,o)>=0,h=h||n.hide[m];n.hasBreakpoint=h;var v=r.raise(s.columnData,{column:{data:n,th:t}});return v.column.data},r.getViewportWidth=function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)},r.calculateWidth=function(e,t){return jQuery.isFunction(l.calculateWidthOverride)?l.calculateWidthOverride(e,t):(t.viewportWidth<t.width&&(t.width=t.viewportWidth),t.parentWidth<t.width&&(t.width=t.parentWidth),t)},r.hasBreakpointColumn=function(e){for(var t in r.columns)if(r.columns[t].hide[e]){if(r.columns[t].ignore)continue;return!0}return!1},r.hasAnyBreakpointColumn=function(){for(var e in r.columns)if(r.columns[e].hasBreakpoint)return!0;return!1},r.resize=function(){var t=e(r.table);if(t.is(":visible")&&r.hasAnyBreakpointColumn()){var a={width:t.width(),viewportWidth:r.getViewportWidth(),parentWidth:t.parent().width()};a=r.calculateWidth(t,a);var o=t.data("footable_info");if(t.data("footable_info",a),r.raise(s.resizing,{old:o,info:a}),!o||o&&o.width&&o.width!==a.width){for(var i,n=null,l=0;r.breakpoints.length>l;l++)if(i=r.breakpoints[l],i&&i.width&&a.width<=i.width){n=i;break}var d=null===n?"default":n.name,f=r.hasBreakpointColumn(d),p=t.data("breakpoint");t.data("breakpoint",d).removeClass("default breakpoint").removeClass(r.breakpointNames).addClass(d+(f?" breakpoint":"")),d!==p&&(t.trigger(u.redraw),r.raise(s.breakpoint,{breakpoint:d,info:a})) }r.raise(s.resized,{old:o,info:a})}},r.redraw=function(){r.addRowToggle(),r.bindToggleSelectors(),r.setColumnClasses();var t=e(r.table),a=t.data("breakpoint"),o=r.hasBreakpointColumn(a);t.find("> tbody > tr:not(."+d.detail+")").data("detail_created",!1).end().find("> thead > tr:last-child > th").each(function(){var o=r.columns[e(this).index()],i="",n=!0;e.each(o.matches,function(e,t){n||(i+=", ");var a=t+1;i+="> tbody > tr:not(."+d.detail+") > td:nth-child("+a+")",i+=", > tfoot > tr:not(."+d.detail+") > td:nth-child("+a+")",i+=", > colgroup > col:nth-child("+a+")",n=!1}),i+=', > thead > tr[data-group-row="true"] > th[data-group="'+o.group+'"]';var l=t.find(i).add(this);if(""!==a&&(o.hide[a]===!1?l.addClass("footable-visible").show():l.removeClass("footable-visible").hide()),1===t.find("> thead > tr.footable-group-row").length){var s=t.find('> thead > tr:last-child > th[data-group="'+o.group+'"]:visible, > thead > tr:last-child > th[data-group="'+o.group+'"]:visible'),u=t.find('> thead > tr.footable-group-row > th[data-group="'+o.group+'"], > thead > tr.footable-group-row > td[data-group="'+o.group+'"]'),f=0;e.each(s,function(){f+=parseInt(e(this).attr("colspan")||1,10)}),f>0?u.attr("colspan",f).show():u.hide()}}).end().find("> tbody > tr."+d.detailShow).each(function(){r.createOrUpdateDetailRow(this)}),t.find("> tbody > tr."+d.detailShow+":visible").each(function(){var t=e(this).next();t.hasClass(d.detail)&&(o?t.show():t.hide())}),t.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column"),t.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column"),t.find("> thead > tr, > tbody > tr").find("> th.footable-visible:last, > td.footable-visible:last").addClass("footable-last-column").end().find("> th.footable-visible:first, > td.footable-visible:first").addClass("footable-first-column"),r.raise(s.redrawn)},r.toggleDetail=function(t){var a=t.jquery?t:e(t),o=a.next();a.hasClass(d.detailShow)?(a.removeClass(d.detailShow),o.hasClass(d.detail)&&o.hide(),r.raise(s.rowCollapsed,{row:a[0]})):(r.createOrUpdateDetailRow(a[0]),a.addClass(d.detailShow).next().show(),r.raise(s.rowExpanded,{row:a[0]}))},r.removeRow=function(t){var a=t.jquery?t:e(t);a.hasClass(d.detail)&&(a=a.prev());var o=a.next();a.data("detail_created")===!0&&o.remove(),a.remove(),r.raise(s.rowRemoved)},r.appendRow=function(t){var a=t.jquery?t:e(t);e(r.table).find("tbody").append(a),r.redraw()},r.getColumnFromTdIndex=function(t){var a=null;for(var o in r.columns)if(e.inArray(t,r.columns[o].matches)>=0){a=r.columns[o];break}return a},r.createOrUpdateDetailRow=function(t){var a,o=e(t),i=o.next(),n=[];if(o.data("detail_created")===!0)return!0;if(o.is(":hidden"))return!1;if(r.raise(s.rowDetailUpdating,{row:o,detail:i}),o.find("> td:hidden").each(function(){var t=e(this).index(),a=r.getColumnFromTdIndex(t),o=a.name;return a.ignore===!0?!0:(t in a.names&&(o=a.names[t]),n.push({name:o,value:r.parse(this,a),display:e.trim(e(this).html()),group:a.group,groupName:a.groupName}),!0)}),0===n.length)return!1;var u=o.find("> td:visible").length,f=i.hasClass(d.detail);return f||(i=e('<tr class="'+d.detail+'"><td class="'+d.detailCell+'"><div class="'+d.detailInner+'"></div></td></tr>'),o.after(i)),i.find("> td:first").attr("colspan",u),a=i.find("."+d.detailInner).empty(),l.createDetail(a,n,l.createGroupedDetail,l.detailSeparator,d),o.data("detail_created",!0),r.raise(s.rowDetailUpdated,{row:o,detail:i}),!f},r.raise=function(t,a){r.options.debug===!0&&e.isFunction(r.options.log)&&r.options.log(t,"event"),a=a||{};var o={ft:r};e.extend(!0,o,a);var i=e.Event(t,o);return i.ft||e.extend(!0,i,o),e(r.table).trigger(i),i},r.reset=function(){var t=e(r.table);t.removeData("footable_info").data("breakpoint","").removeClass(d.loading).removeClass(d.loaded),t.find(l.toggleSelector).unbind(u.toggleRow).unbind("click.footable"),t.find("> tbody > tr").removeClass(d.detailShow),t.find("> tbody > tr."+d.detail).remove(),r.raise(s.reset)},r.init(),r}t.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(t){return e(t).data("value")||e.trim(e(t).text())},numeric:function(t){var a=e(t).data("value")||e(t).text().replace(/[^0-9.\-]/g,"");return a=parseFloat(a),isNaN(a)&&(a=0),a}},addRowToggle:!0,calculateWidthOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",columnDataSelector:"> thead > tr:last-child > th, > thead > tr:last-child > td",detailSeparator:":",toggleHTMLElement:"<span />",createGroupedDetail:function(e){for(var t={_none:{name:null,data:[]}},a=0;e.length>a;a++){var o=e[a].group;null!==o?(o in t||(t[o]={name:e[a].groupName||e[a].group,data:[]}),t[o].data.push(e[a])):t._none.data.push(e[a])}return t},createDetail:function(e,t,a,o,i){var n=a(t);for(var r in n)if(0!==n[r].data.length){"_none"!==r&&e.append('<div class="'+i.detailInnerGroup+'">'+n[r].name+"</div>");for(var l=0;n[r].data.length>l;l++){var d=n[r].data[l].name?o:"";e.append('<div class="'+i.detailInnerRow+'"><div class="'+i.detailInnerName+'">'+n[r].data[l].name+d+'</div><div class="'+i.detailInnerValue+'">'+n[r].data[l].display+"</div></div>")}}},classes:{main:"footable",loading:"footable-loading",loaded:"footable-loaded",toggle:"footable-toggle",disabled:"footable-disabled",detail:"footable-row-detail",detailCell:"footable-row-detail-cell",detailInner:"footable-row-detail-inner",detailInnerRow:"footable-row-detail-row",detailInnerGroup:"footable-row-detail-group",detailInnerName:"footable-row-detail-name",detailInnerValue:"footable-row-detail-value",detailShow:"footable-detail-show"},triggers:{initialize:"footable_initialize",resize:"footable_resize",redraw:"footable_redraw",toggleRow:"footable_toggle_row",expandFirstRow:"footable_expand_first_row",expandAll:"footable_expand_all",collapseAll:"footable_collapse_all"},events:{alreadyInitialized:"footable_already_initialized",initializing:"footable_initializing",initialized:"footable_initialized",resizing:"footable_resizing",resized:"footable_resized",redrawn:"footable_redrawn",breakpoint:"footable_breakpoint",columnData:"footable_column_data",rowDetailUpdating:"footable_row_detail_updating",rowDetailUpdated:"footable_row_detail_updated",rowCollapsed:"footable_row_collapsed",rowExpanded:"footable_row_expanded",rowRemoved:"footable_row_removed",reset:"footable_reset"},debug:!1,log:null},version:{major:0,minor:5,toString:function(){return t.footable.version.major+"."+t.footable.version.minor},parse:function(e){return version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(e),{major:parseInt(version[1],10)||0,minor:parseInt(version[2],10)||0,patch:parseInt(version[3],10)||0}}},plugins:{_validate:function(a){if(!e.isFunction(a))return t.footable.options.debug===!0&&void 0,!1;var o=new a;return"string"!=typeof o.name?(t.footable.options.debug===!0&&void 0,!1):e.isFunction(o.init)?(t.footable.options.debug===!0&&void 0,!0):(t.footable.options.debug===!0&&void 0,!1)},registered:[],register:function(a,o){t.footable.plugins._validate(a)&&(t.footable.plugins.registered.push(a),"object"==typeof o&&e.extend(!0,t.footable.options,o))},load:function(e){var a,o,i=[];for(o=0;t.footable.plugins.registered.length>o;o++)try{a=t.footable.plugins.registered[o],i.push(new a(e))}catch(n){t.footable.options.debug===!0&&void 0}return i},init:function(e){for(var a=0;e.plugins.length>a;a++)try{e.plugins[a].init(e)}catch(o){t.footable.options.debug===!0&&void 0}}}};var i=0;e.fn.footable=function(a){a=a||{};var n=e.extend(!0,{},t.footable.options,a);return this.each(function(){i++;var t=new o(this,n,i);e(this).data("footable",t)})}}(jQuery,window)},{}],304:[function(require,module){"use strict";module.exports=require(1)},{1:303}],305:[function(){!function(){function t(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t}function e(){var t,e,i=arguments,n={},o=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?o(t[n]||{},i):e[n]);return t};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;e>t;t++)n=o(n,i[t]);return n}function i(t,e){return parseInt(t,e||10)}function n(t){return"string"==typeof t}function o(t){return t&&"object"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"number"==typeof t}function a(t){return ue.log(t)/ue.LN10}function l(t){return ue.pow(10,t)}function h(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function c(t){return t!==G&&null!==t}function d(t,e,i){var r,s;if(n(e))c(i)?t.setAttribute(e,i):t&&t.getAttribute&&(s=t.getAttribute(e));else if(c(e)&&o(e))for(r in e)t.setAttribute(r,e[r]);return s}function p(t){return r(t)?t:[t]}function u(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],e!==G&&null!==e)return e}function f(e,i){Ae&&!Be&&i&&i.opacity!==G&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function g(e,i,n,o,r){var s=de.createElement(e);return i&&t(s,i),r&&f(s,{padding:0,border:Ke,margin:0}),n&&f(s,n),o&&o.appendChild(s),s}function m(e,i){var n=function(){return G};return n.prototype=new e,t(n.prototype,i),n}function y(t,e,n,o){var r=ce.numberFormat,s=F.lang,a=+t||0,l=-1===e?((""+a).split(".")[1]||"").length:isNaN(e=xe(e))?2:e,h=void 0===n?s.decimalPoint:n,c=void 0===o?s.thousandsSep:o,d=0>a?"-":"",p=i(a=xe(a).toFixed(l))+"",u=p.length>3?p.length%3:0;return r!==y?r(t,e,n,o):d+(u?p.substr(0,u)+c:"")+p.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+c)+(l?h+xe(a-p).toFixed(l).slice(2):"")}function v(t,e){return Array((e||2)+1-(t+"").length).join(0)+t}function x(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}}function b(t,e){var i,n=/f$/,o=/\.([0-9])/,r=F.lang;return n.test(t)?(i=t.match(o),i=i?i[1]:-1,null!==e&&(e=y(e,i,r.decimalPoint,t.indexOf(",")>-1?r.thousandsSep:""))):e=j(t,e),e}function k(t,e){for(var i,n,o,r,s,a,l,h="{",c=!1,d=[];-1!==(l=t.indexOf(h));){if(i=t.slice(0,l),c){for(n=i.split(":"),o=n.shift().split("."),s=o.length,a=e,r=0;s>r;r++)a=a[o[r]];n.length&&(a=b(n.join(":"),a)),d.push(a)}else d.push(i);t=t.slice(l+1),c=!c,h=c?"}":"{"}return d.push(t),d.join("")}function w(t){return ue.pow(10,ge(ue.log(t)/ue.LN10))}function S(t,e,i,n){var o,r;for(i=u(i,1),o=t/i,e||(e=[1,2,2.5,5,10],n===!1&&(1===i?e=[1,2,5,10]:i>.1||(e=[1/i]))),r=0;r<e.length&&(t=e[r],o>(e[r]+(e[r+1]||e[r]))/2);r++);return t*=i}function T(t,e){var i,n,o=t.length;for(n=0;o>n;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;o>n;n++)delete t[n].ss_i}function P(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function A(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function C(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function L(t){N||(N=g(Ne)),t&&N.appendChild(t),N.innerHTML=""}function M(t){return parseFloat(t.toPrecision(14))}function D(t,e){V=u(t,e.animation)}function I(){var t=F.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";$=F.global.Date||window.Date,J=6e4*(t&&F.global.timezoneOffset||0),q=t?$.UTC:function(t,e,i,n,o,r){return new $(t,e,u(i,1),u(n,0),u(o,0),u(r,0)).getTime()},Q=e+"Minutes",te=e+"Hours",ee=e+"Day",ie=e+"Date",ne=e+"Month",oe=e+"FullYear",re=i+"Minutes",se=i+"Hours",ae=i+"Date",le=i+"Month",he=i+"FullYear"}function B(t){return F=e(!0,F,t),I(),F}function O(){return F}function z(){}function R(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function H(){this.init.apply(this,arguments)}function X(){this.init.apply(this,arguments)}function E(t,e,i,n,o){var r=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=o,this.alignOptions={align:e.align||(r?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":i?"bottom":"top"),y:u(e.y,r?4:i?14:-6),x:u(e.x,r?i?-6:6:0)},this.textAlign=e.textAlign||(r?i?"right":"left":"center")}var G,W,Y,N,F,j,V,_,U,Z,K,$,q,J,Q,te,ee,ie,ne,oe,re,se,ae,le,he,ce,de=document,pe=window,ue=Math,fe=ue.round,ge=ue.floor,me=ue.ceil,ye=ue.max,ve=ue.min,xe=ue.abs,be=ue.cos,ke=ue.sin,we=ue.PI,Se=2*we/360,Te=navigator.userAgent,Pe=pe.opera,Ae=/msie/i.test(Te)&&!Pe,Ce=8===de.documentMode,Le=/AppleWebKit/.test(Te),Me=/Firefox/.test(Te),De=/(Mobile|Android|Windows Phone)/.test(Te),Ie="http://www.w3.org/2000/svg",Be=!!de.createElementNS&&!!de.createElementNS(Ie,"svg").createSVGRect,Oe=Me&&parseInt(Te.split("Firefox/")[1],10)<4,ze=!Be&&!Ae&&!!de.createElement("canvas").getContext,Re={},He=0,Xe=function(){return G},Ee=[],Ge=0,We="Highcharts",Ye="4.0.4",Ne="div",Fe="absolute",je="relative",Ve="hidden",_e="highcharts-",Ue="visible",Ze="px",Ke="none",$e="M",qe="L",Je=/^[0-9]+$/,Qe="",ti="hover",ei="select",ii="stroke-width",ni={};pe.Highcharts?Z(16,!0):ce=pe.Highcharts={},j=function(e,i,n){if(!c(i)||isNaN(i))return"Invalid date";e=u(e,"%Y-%m-%d %H:%M:%S");var o,r=new $(i-J),s=r[te](),a=r[ee](),l=r[ie](),h=r[ne](),d=r[oe](),p=F.lang,f=p.weekdays,g=t({a:f[a].substr(0,3),A:f[a],d:v(l),e:l,b:p.shortMonths[h],B:p.months[h],m:v(h+1),y:(""+d).substr(2,2),Y:d,H:v(s),I:v(s%12||12),l:s%12||12,M:v(r[Q]()),p:12>s?"AM":"PM",P:12>s?"am":"pm",S:v(r.getSeconds()),L:v(fe(i%1e3),3)},ce.dateFormats);for(o in g)for(;-1!==e.indexOf("%"+o);)e=e.replace("%"+o,"function"==typeof g[o]?g[o](i):g[o]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},Z=function(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;pe.console&&void 0},U={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31556952e3},_={init:function(t,e,i){e=e||"";var n,o,r,s,a,l=t.shift,h=e.indexOf("C")>-1,c=h?7:3,d=e.split(" "),p=[].concat(i),u=function(t){for(r=t.length;r--;)t[r]===$e&&t.splice(r+1,0,t[r+1],t[r+2],t[r+1],t[r+2])};if(h&&(u(d),u(p)),t.isArea&&(s=d.splice(d.length-6,6),a=p.splice(p.length-6,6)),l<=p.length/c&&d.length===p.length)for(;l--;)p=[].concat(p).splice(0,c).concat(p);if(t.shift=0,d.length)for(n=p.length;d.length<n;)o=[].concat(d).splice(d.length-c,c),h&&(o[c-6]=o[c-2],o[c-5]=o[c-1]),d=d.concat(o);return s&&(d=d.concat(s),p=p.concat(a)),[d,p]},step:function(t,e,i,n){var o,r=[],s=t.length;if(1===i)r=n;else if(s===e.length&&1>i)for(;s--;)o=parseFloat(t[s]),r[s]=isNaN(o)?t[s]:i*parseFloat(e[s]-o)+o;else r=e;return r}},function(e){pe.HighchartsAdapter=pe.HighchartsAdapter||e&&{init:function(t){var i=e.fx;e.extend(e.easing,{easeOutQuad:function(t,e,i,n,o){return-n*(e/=o)*(e-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,n){var o,r=i.step;"cur"===n?r=i.prototype:"_default"===n&&e.Tween&&(r=e.Tween.propHooks[n],n="set"),o=r[n],o&&(r[n]=function(e){var i;return e=t?e:this,"align"!==e.prop?(i=e.elem,i.attr?i.attr(e.prop,"cur"===n?G:e.now):o.apply(this,arguments)):void 0})}),x(e.cssHooks.opacity,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),this.addAnimSetter("d",function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))}),this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){var i,n=t.length;for(i=0;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i},e.fn.highcharts=function(){var t,e,i,o="Chart",r=arguments;return this[0]&&(n(r[0])&&(o=r[0],r=Array.prototype.slice.call(r,1)),t=r[0],t!==G&&(t.chart=t.chart||{},t.chart.renderTo=this[0],i=new ce[o](t,r[1]),e=this),t===G&&(e=Ee[d(this[0],"data-highcharts-chart")])),e}},addAnimSetter:function(t,i){e.Tween?e.Tween.propHooks[t]={set:i}:e.fx.step[t]=i},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(t,e){for(var i=[],n=0,o=t.length;o>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var o=de.removeEventListener?"removeEventListener":"detachEvent";de[o]&&t&&!t[o]&&(t[o]=function(){}),e(t).unbind(i,n)},fireEvent:function(i,n,o,r){var s,a=e.Event(n),l="detached"+n;!Ae&&o&&(delete o.layerX,delete o.layerY,delete o.returnValue),t(a,o),i[n]&&(i[l]=i[n],i[n]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(s=!0)}}}),e(i).trigger(a),i[l]&&(i[n]=i[l],i[l]=null),!r||a.isDefaultPrevented()||s||r(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===G&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,i,n){var o=e(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),o.stop(),i.opacity!==G&&t.attr&&(i.opacity+="px"),t.hasAnim=1,o.animate(i,n)},stop:function(t){t.hasAnim&&e(t).stop()}}}(pe.jQuery);var oi=pe.HighchartsAdapter,ri=oi||{};oi&&oi.init.call(oi,_);var si=ri.adapterRun,ai=ri.getScript,li=ri.inArray,hi=ri.each,ci=ri.grep,di=ri.offset,pi=ri.map,ui=ri.addEvent,fi=ri.removeEvent,gi=ri.fireEvent,mi=ri.washMouseEvent,yi=ri.animate,vi=ri.stop,xi={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};F={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#8085e8","#8d4653","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(xi,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":y(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Fe,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Fe,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:je,top:"45%"},style:{position:Fe,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Be,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:De?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var bi=F.plotOptions,ki=bi.line;I();var wi=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Si=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Ti=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Pi=function(t){function n(t){t&&t.stops?h=pi(t.stops,function(t){return Pi(t[1])}):(l=wi.exec(t),l?c=[i(l[1]),i(l[2]),i(l[3]),parseFloat(l[4],10)]:(l=Si.exec(t),l?c=[i(l[1],16),i(l[2],16),i(l[3],16),1]:(l=Ti.exec(t),l&&(c=[i(l[1]),i(l[2]),i(l[3]),1]))))}function o(i){var n;return h?(n=e(t),n.stops=[].concat(n.stops),hi(h,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=c&&!isNaN(c[0])?"rgb"===i?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===i?c[3]:"rgba("+c.join(",")+")":t,n}function r(t){if(h)hi(h,function(e){e.brighten(t)});else if(s(t)&&0!==t){var e;for(e=0;3>e;e++)c[e]+=i(255*t),c[e]<0&&(c[e]=0),c[e]>255&&(c[e]=255)}return this}function a(t){return c[3]=t,this}var l,h,c=[];return n(t),{get:o,brighten:r,rgba:c,setOpacity:a}};z.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow","HcTextStroke"],init:function(t,e){var i=this;i.element="span"===e?g(e):de.createElementNS(Ie,e),i.renderer=t},animate:function(t,i,n){var o=u(i,V,!0);return vi(this),o?(o=e(o,{}),n&&(o.complete=n),yi(this,t,o)):(this.attr(t),n&&n()),this},colorGradient:function(t,i,n){var o,s,a,l,h,d,p,u,f,g,m,y=this.renderer,v=[];if(t.linearGradient?s="linearGradient":t.radialGradient&&(s="radialGradient"),s){a=t[s],l=y.gradients,d=t.stops,f=n.radialReference,r(a)&&(t[s]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&f&&!c(a.gradientUnits)&&(a=e(a,{cx:f[0]-f[2]/2+a.cx*f[2],cy:f[1]-f[2]/2+a.cy*f[2],r:a.r*f[2],gradientUnits:"userSpaceOnUse"}));for(g in a)"id"!==g&&v.push(g,a[g]);for(g in d)v.push(d[g]);v=v.join(","),l[v]?m=l[v].attr("id"):(a.id=m=_e+He++,l[v]=h=y.createElement(s).attr(a).add(y.defs),h.stops=[],hi(d,function(t){var e;0===t[1].indexOf("rgba")?(o=Pi(t[1]),p=o.get("rgb"),u=o.get("a")):(p=t[1],u=1),e=y.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":u}).add(h),h.stops.push(e)})),n.setAttribute(i,"url("+y.url+"#"+m+")")}},attr:function(t,e){var i,n,o,r,s=this.element,a=this;if("string"==typeof t&&e!==G&&(i=t,t={},t[i]=e),"string"==typeof t)a=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(i in t)n=t[i],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(o||(this.symbolAttr(t),o=!0),r=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),r||(this[i+"Setter"]||this._defaultSetter).call(this,n,i,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,n);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return a},updateShadows:function(t,e){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(t,"height"===t?ye(e-(i[n].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,i=d(e,"class")||"";return-1===i.indexOf(t)&&d(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;hi(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=u(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Ke)},crisp:function(t){var e,i,n=this,o={},r=t.strokeWidth||n.strokeWidth||0;i=fe(r)%2/2,t.x=ge(t.x||n.x||0)+i,t.y=ge(t.y||n.y||0)+i,t.width=ge((t.width||n.width||0)-2*i),t.height=ge((t.height||n.height||0)-2*i),t.strokeWidth=r;for(e in t)n[e]!==t[e]&&(n[e]=o[e]=t[e]);return o},css:function(e){var n,o,r,s=this,a=s.styles,l={},h=s.element,c="",p=!a;if(e&&e.color&&(e.fill=e.color),a)for(o in e)e[o]!==a[o]&&(l[o]=e[o],p=!0);if(p){if(n=s.textWidth=e&&e.width&&"text"===h.nodeName.toLowerCase()&&i(e.width),a&&(e=t(a,l)),s.styles=e,n&&(ze||!Be&&s.renderer.forExport)&&delete e.width,Ae&&!Be)f(s.element,e);else{r=function(t,e){return"-"+e.toLowerCase()};for(o in e)c+=o.replace(/([A-Z])/g,r)+":"+e[o]+";";d(h,"style",c)}n&&s.added&&s.renderer.buildText(s)}return s},on:function(t,e){var i=this,n=i.element;return Y&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=$.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===Te.indexOf("Android")||$.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;return t.inverted=!0,t.updateTransform(),t},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,o=e.scaleX,r=e.scaleY,s=e.inverted,a=e.rotation,l=e.element;s&&(i+=e.attr("width"),n+=e.attr("height")),t=["translate("+i+","+n+")"],s?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(l.getAttribute("x")||0)+" "+(l.getAttribute("y")||0)+")"),(c(o)||c(r))&&t.push("scale("+u(o,1)+" "+u(r,1)+")"),t.length&&l.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var o,r,s,a,l,c={},d=this.renderer,p=d.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,(!i||n(i))&&(this.alignTo=l=i||"renderer",h(p,this),p.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,l=this.alignTo),i=u(i,d[l],d),o=t.align,r=t.verticalAlign,s=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),("right"===o||"center"===o)&&(s+=(i.width-(t.width||0))/{right:1,center:2}[o]),c[e?"translateX":"x"]=fe(s),("bottom"===r||"middle"===r)&&(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[r]||1)),c[e?"translateY":"y"]=fe(a),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(){var e,i,n,o=this,r=o.bBox,s=o.renderer,a=o.rotation,l=o.element,h=o.styles,c=a*Se,d=o.textStr;if((""===d||Je.test(d))&&(n="num."+(""+d).length+(h?"|"+h.fontSize+"|"+h.fontFamily:"")),n&&(r=s.cache[n]),!r){if(l.namespaceURI===Ie||s.forExport){try{r=l.getBBox?t({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight}}catch(p){}(!r||r.width<0)&&(r={width:0,height:0})}else r=o.htmlGetBBox();s.isSVG&&(e=r.width,i=r.height,Ae&&h&&"11px"===h.fontSize&&"16.9"===i.toPrecision(3)&&(r.height=i=14),a&&(r.width=xe(i*ke(c))+xe(e*be(c)),r.height=xe(i*be(c))+xe(e*ke(c)))),o.bBox=r,n&&(s.cache[n]=r)}return r},show:function(t){return t&&this.element.namespaceURI===Ie?this.element.removeAttribute("visibility"):this.attr({visibility:t?"inherit":Ue}),this},hide:function(){return this.attr({visibility:Ve})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,n,o,r,s,a=this.renderer,l=t||a,h=l.element||a.box,p=this.element,u=this.zIndex;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&a.buildText(this),u&&(l.handleZ=!0,u=i(u)),l.handleZ)for(e=h.childNodes,r=0;r<e.length;r++)if(n=e[r],o=d(n,"zIndex"),n!==p&&(i(o)>u||!c(u)&&c(o))){h.insertBefore(p,n),s=!0;break}return s||h.appendChild(p),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,o=n.element||{},r=n.shadows,s=n.renderer.isSVG&&"SPAN"===o.nodeName&&n.parentGroup;if(o.onclick=o.onmouseout=o.onmouseover=o.onmousemove=o.point=null,vi(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(o),r&&hi(r,function(t){n.safeRemoveChild(t)});s&&s.div&&0===s.div.childNodes.length;)t=s.parentGroup,n.safeRemoveChild(s.div),delete s.div,s=t;n.alignTo&&h(n.renderer.alignedObjects,n);for(e in n)delete n[e];return null},shadow:function(t,e,i){var n,o,r,s,a,l,h=[],c=this.element;if(t){for(s=u(t.width,3),a=(t.opacity||.15)/s,l=this.parentInverted?"(-1,-1)":"("+u(t.offsetX,1)+", "+u(t.offsetY,1)+")",n=1;s>=n;n++)o=c.cloneNode(0),r=2*s+1-2*n,d(o,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":r,transform:"translate"+l,fill:Ke}),i&&(d(o,"height",ye(d(o,"height")-r,0)),o.cutHeight=r),e?e.element.appendChild(o):c.parentNode.insertBefore(o,c),h.push(o);this.shadows=h}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){var e=u(this[t],this.element?this.element.getAttribute(t):null,0);return/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=i(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=de.createElementNS(Ie,"title"),this.element.appendChild(e)),e.textContent=u(t,"").replace(/<[^>]*>/g,"")},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},zIndexSetter:function(t,e,i){i.setAttribute(e,t),this[e]=t},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}},z.prototype.yGetter=z.prototype.xGetter,z.prototype.translateXSetter=z.prototype.translateYSetter=z.prototype.rotationSetter=z.prototype.verticalAlignSetter=z.prototype.scaleXSetter=z.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},z.prototype["stroke-widthSetter"]=z.prototype.strokeSetter=function(t,e,i){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],z.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)};var Ai=function(){this.init.apply(this,arguments)};Ai.prototype={Element:z,init:function(t,e,i,n,o){var r,s,a,l=this,h=location;r=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n)),s=r.element,t.appendChild(s),-1===t.innerHTML.indexOf("xmlns")&&d(s,"xmlns",Ie),l.isSVG=!0,l.box=s,l.boxWrapper=r,l.alignedObjects=[],l.url=(Me||Le)&&de.getElementsByTagName("base").length?h.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",a=this.createElement("desc").add(),a.element.appendChild(de.createTextNode("Created with "+We+" "+Ye)),l.defs=this.createElement("defs").add(),l.forExport=o,l.gradients={},l.cache={},l.setSize(e,i,!1);var c,p;Me&&t.getBoundingClientRect&&(l.subPixelFix=c=function(){f(t,{left:0,top:0}),p=t.getBoundingClientRect(),f(t,{left:me(p.left)-p.left+Ze,top:me(p.top)-p.top+Ze})},c(),ui(pe,"resize",c))},getStyle:function(e){return this.style=t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this,e=t.defs;return t.box=null,t.boxWrapper=t.boxWrapper.destroy(),C(t.gradients||{}),t.gradients=null,e&&(t.defs=e.destroy()),t.subPixelFix&&fi(pe,"resize",t.subPixelFix),t.alignedObjects=null,null },createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e,n,o,r=t.element,s=this,a=s.forExport,l=""+u(t.textStr,""),h=-1!==l.indexOf("<"),c=r.childNodes,p=d(r,"x"),g=t.styles,m=t.textWidth,y=g&&g.lineHeight,v=g&&g.HcTextStroke,x=c.length,b=function(t){return y?i(y):s.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:g&&g.fontSize||s.style.fontSize||12,t).h};x--;)r.removeChild(c[x]);return h||v||-1!==l.indexOf(" ")?(n=/<.*style="([^"]+)".*>/,o=/<.*href="(http[^"]+)".*>/,m&&!t.added&&this.box.appendChild(r),e=h?l.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[l],""===e[e.length-1]&&e.pop(),void hi(e,function(e,i){var l,h=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=e.split("|||"),hi(l,function(e){if(""!==e||1===l.length){var c,u={},y=de.createElementNS(Ie,"tspan");if(n.test(e)&&(c=e.match(n)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),d(y,"style",c)),o.test(e)&&!a&&(d(y,"onclick",'location.href="'+e.match(o)[1]+'"'),f(y,{cursor:"pointer"})),e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==e){if(y.appendChild(de.createTextNode(e)),h?u.dx=0:i&&null!==p&&(u.x=p),d(y,u),r.appendChild(y),!h&&i&&(!Be&&a&&f(y,{display:"block"}),d(y,"dy",b(y))),m)for(var v,x,k,w=e.replace(/([^\^])-/g,"$1- ").split(" "),S=l.length>1||w.length>1&&"nowrap"!==g.whiteSpace,T=g.HcHeight,P=[],A=b(y),C=1;S&&(w.length||P.length);)delete t.bBox,k=t.getBBox(),x=k.width,!Be&&s.forExport&&(x=s.measureSpanWidth(y.firstChild.data,t.styles)),v=x>m,v&&1!==w.length?(y.removeChild(y.firstChild),P.unshift(w.pop())):(w=P,P=[],w.length&&(C++,T&&C*A>T?(w=["..."],t.attr("title",t.textStr)):(y=de.createElementNS(Ie,"tspan"),d(y,{dy:A,x:p}),c&&d(y,"style",c),r.appendChild(y))),x>m&&(m=x)),w.length&&y.appendChild(de.createTextNode(w.join(" ").replace(/- /g,"-")));h++}}})})):void r.appendChild(de.createTextNode(l))},button:function(i,n,o,r,s,a,l,h,c){var d,p,u,f,g,m,y=this.label(i,n,o,c,null,null,null,null,"button"),v=0,x={x1:0,y1:0,x2:0,y2:1};return s=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:x,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s),u=s.style,delete s.style,a=e(s,{stroke:"#68A",fill:{linearGradient:x,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),f=a.style,delete a.style,l=e(s,{stroke:"#68A",fill:{linearGradient:x,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),g=l.style,delete l.style,h=e(s,{style:{color:"#CCC"}},h),m=h.style,delete h.style,ui(y.element,Ae?"mouseover":"mouseenter",function(){3!==v&&y.attr(a).css(f)}),ui(y.element,Ae?"mouseout":"mouseleave",function(){3!==v&&(d=[s,a,l][v],p=[u,f,g][v],y.attr(d).css(p))}),y.setState=function(t){y.state=v=t,t?2===t?y.attr(l).css(g):3===t&&y.attr(h).css(m):y.attr(s).css(u)},y.on("click",function(){3!==v&&r.call(y)}).attr(s).css(t({cursor:"default"},u))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=fe(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=fe(t[2])+e%2/2),t},path:function(e){var i={fill:Ke};return r(e)?i.d=e:o(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){var n=o(t)?t:{x:t,y:e,r:i},r=this.createElement("circle");return r.xSetter=function(t){this.element.setAttribute("cx",t)},r.ySetter=function(t){this.element.setAttribute("cy",t)},r.attr(n)},arc:function(t,e,i,n,r,s){var a;return o(t)&&(e=t.y,i=t.r,n=t.innerR,r=t.start,s=t.end,t=t.x),a=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:r||0,end:s||0}),a.r=i,a},rect:function(t,e,i,n,r,s){r=o(t)?t.r:r;var a=this.createElement("rect"),l=o(t)?t:t===G?{}:{x:t,y:e,width:ye(i,0),height:ye(n,0)};return s!==G&&(l.strokeWidth=s,l=a.crisp(l)),r&&(l.r=r),a.rSetter=function(t){d(this.element,{rx:t,ry:t})},a.attr(l)},setSize:function(t,e,i){var n=this,o=n.alignedObjects,r=o.length;for(n.width=t,n.height=e,n.boxWrapper[u(i,!0)?"animate":"attr"]({width:t,height:e});r--;)o[r].align()},g:function(t){var e=this.createElement("g");return c(t)?e.attr({"class":_e+t}):e},image:function(e,i,n,o,r){var s,a={preserveAspectRatio:Ke};return arguments.length>1&&t(a,{x:i,y:n,width:o,height:r}),s=this.createElement("image").attr(a),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,i,n,o,r,s){var a,l,h,c,d,p=this.symbols[e],u=p&&p(fe(i),fe(n),o,r,s),f=/^url\((.*?)\)$/;return u?(a=this.path(u),t(a,{symbolName:e,x:i,y:n,width:o,height:r}),s&&t(a,s)):f.test(e)&&(d=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(fe((o-e[0])/2),fe((r-e[1])/2)))},h=e.match(f)[1],c=Re[h]||s&&s.width&&s.height&&[s.width,s.height],a=this.image(h).attr({x:i,y:n}),a.isImg=!0,c?d(a,c):(a.attr({width:0,height:0}),l=g("img",{onload:function(){d(a,Re[h]=[this.width,this.height])},src:h}))),a},symbols:{circle:function(t,e,i,n){var o=.166*i;return[$e,t+i/2,e,"C",t+i+o,e,t+i+o,e+n,t+i/2,e+n,"C",t-o,e+n,t-o,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[$e,t,e,qe,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[$e,t+i/2,e,qe,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[$e,t,e,qe,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[$e,t+i/2,e,qe,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,o){var r=o.start,s=o.r||i||n,a=o.end-.001,l=o.innerR,h=o.open,c=be(r),d=ke(r),p=be(a),u=ke(a),f=o.end-r<we?0:1;return[$e,t+s*c,e+s*d,"A",s,s,0,f,1,t+s*p,e+s*u,h?$e:qe,t+l*p,e+l*u,"A",l,l,0,f,0,t+l*c,e+l*d,h?"":"Z"]},callout:function(t,e,i,n,o){var r,s=6,a=6,l=ve(o&&o.r||0,i,n),h=l+a,c=o&&o.anchorX,d=o&&o.anchorY,p=fe(o.strokeWidth||0)%2/2;return t+=p,e+=p,r=["M",t+l,e,"L",t+i-l,e,"C",t+i,e,t+i,e,t+i,e+l,"L",t+i,e+n-l,"C",t+i,e+n,t+i,e+n,t+i-l,e+n,"L",t+l,e+n,"C",t,e+n,t,e+n,t,e+n-l,"L",t,e+l,"C",t,e,t,e,t+l,e],c&&c>i&&d>e+h&&e+n-h>d?r.splice(13,3,"L",t+i,d-a,t+i+s,d,t+i,d+a,t+i,e+n-l):c&&0>c&&d>e+h&&e+n-h>d?r.splice(33,3,"L",t,d+a,t-s,d,t,d-a,t,e+l):d&&d>n&&c>t+h&&t+i-h>c?r.splice(23,3,"L",c+a,e+n,c,e+n+s,c-a,e+n,t+l,e+n):d&&0>d&&c>t+h&&t+i-h>c&&r.splice(3,3,"L",c-a,e,c,e-s,c+a,e,i-l,e),r}},clipRect:function(t,e,i,n){var o,r=_e+He++,s=this.createElement("clipPath").attr({id:r}).add(this.defs);return o=this.rect(t,e,i,n,0).add(s),o.id=r,o.clipPath=s,o},text:function(t,e,i,n){var o,r=this,s=ze||!Be&&r.forExport,a={};return n&&!r.forExport?r.html(t,e,i):(a.x=Math.round(e||0),i&&(a.y=Math.round(i)),(t||0===t)&&(a.text=t),o=r.createElement("text").attr(a),s&&o.css({position:Fe}),n||(o.xSetter=function(t,e,i){var n,o,r=i.getElementsByTagName("tspan"),s=i.getAttribute(e);for(o=0;o<r.length;o++)n=r[o],n.getAttribute(e)===s&&n.setAttribute(e,t);i.setAttribute(e,t)}),o)},fontMetrics:function(t,e){t=t||this.style.fontSize,e&&pe.getComputedStyle&&(e=e.element||e,t=pe.getComputedStyle(e,"").fontSize),t=/px/.test(t)?i(t):/em/.test(t)?12*parseFloat(t):12;var n=24>t?t+4:fe(1.2*t),o=fe(.8*n);return{h:n,b:o,f:t}},label:function(i,n,o,r,s,a,l,h,d){function p(){var e,i,n=P.element.style;m=(void 0===y||void 0===v||T.styles.textAlign)&&P.textStr&&P.getBBox(),T.width=(y||m.width||0)+2*C+L,T.height=(v||m.height||0)+2*C,k=C+S.fontMetrics(n&&n.fontSize,P).b,w&&(g||(e=fe(-A*C),i=h?-k:0,T.box=g=r?S.symbol(r,e,i,T.width,T.height,D):S.rect(e,i,T.width,T.height,0,D[ii]),g.attr("fill",Ke).add(T)),g.isImg||g.attr(t({width:fe(T.width),height:fe(T.height)},D)),D=null)}function u(){var t,e=T.styles,i=e&&e.textAlign,n=L+C*(1-A);t=h?0:k,c(y)&&m&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(y-m.width)),(n!==P.x||t!==P.y)&&(P.attr("x",n),t!==G&&P.attr("y",t)),P.x=n,P.y=t}function f(t,e){g?g.attr(t,e):D[t]=e}var g,m,y,v,x,b,k,w,S=this,T=S.g(d),P=S.text("",0,0,l).attr({zIndex:1}),A=0,C=3,L=0,M=0,D={};T.onAdd=function(){P.add(T),T.attr({text:i||0===i?i:"",x:n,y:o}),g&&c(s)&&T.attr({anchorX:s,anchorY:a})},T.widthSetter=function(t){y=t},T.heightSetter=function(t){v=t},T.paddingSetter=function(t){c(t)&&t!==C&&(C=t,u())},T.paddingLeftSetter=function(t){c(t)&&t!==L&&(L=t,u())},T.alignSetter=function(t){A={left:0,center:.5,right:1}[t]},T.textSetter=function(t){t!==G&&P.textSetter(t),p(),u()},T["stroke-widthSetter"]=function(t,e){t&&(w=!0),M=t%2/2,f(e,t)},T.strokeSetter=T.fillSetter=T.rSetter=function(t,e){"fill"===e&&t&&(w=!0),f(e,t)},T.anchorXSetter=function(t,e){s=t,f(e,t+M-x)},T.anchorYSetter=function(t,e){a=t,f(e,t-b)},T.xSetter=function(t){T.x=t,A&&(t-=A*((y||m.width)+C)),x=fe(t),T.attr("translateX",x)},T.ySetter=function(t){b=T.y=fe(t),T.attr("translateY",b)};var I=T.css;return t(T,{css:function(t){if(t){var i={};t=e(t),hi(T.textProps,function(e){t[e]!==G&&(i[e]=t[e],delete t[e])}),P.css(i)}return I.call(T,t)},getBBox:function(){return{width:m.width+2*C,height:m.height+2*C,x:m.x-C,y:m.y-C}},shadow:function(t){return g&&g.shadow(t),T},destroy:function(){fi(T.element,"mouseenter"),fi(T.element,"mouseleave"),P&&(P=P.destroy()),g&&(g=g.destroy()),z.prototype.destroy.call(T),T=S=p=u=f=null}})}},W=Ai,t(z.prototype,{htmlCss:function(e){var i=this,n=i.element,o=e&&"SPAN"===n.tagName&&e.width;return o&&(delete e.width,i.textWidth=o,i.updateTransform()),i.styles=t(i.styles,e),f(i.element,e),i},htmlGetBBox:function(){var t=this,e=t.element,i=t.bBox;return i||("text"===e.nodeName&&(e.style.position=Fe),i=t.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),i},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var t=this,e=t.renderer,n=t.element,o=t.translateX||0,r=t.translateY||0,s=t.x||0,a=t.y||0,l=t.textAlign||"left",h={left:0,center:.5,right:1}[l],d=t.shadows;if(f(n,{marginLeft:o,marginTop:r}),d&&hi(d,function(t){f(t,{marginLeft:o+1,marginTop:r+1})}),t.inverted&&hi(n.childNodes,function(t){e.invertChild(t,n)}),"SPAN"===n.tagName){var p,g,m=t.rotation,y=i(t.textWidth),v=[m,l,n.innerHTML,t.textWidth].join(",");v!==t.cTT&&(g=e.fontMetrics(n.style.fontSize).b,c(m)&&t.setSpanRotation(m,h,g),p=u(t.elemWidth,n.offsetWidth),p>y&&/[ \-]/.test(n.textContent||n.innerText)&&(f(n,{width:y+Ze,display:"block",whiteSpace:"normal"}),p=y),t.getSpanCorrection(p,g,h,m,l)),f(n,{left:s+(t.xCorr||0)+Ze,top:a+(t.yCorr||0)+Ze}),Le&&(g=n.offsetHeight),t.cTT=v}},setSpanRotation:function(t,e,i){var n={},o=Ae?"-ms-transform":Le?"-webkit-transform":Me?"MozTransform":Pe?"-o-transform":"";n[o]=n.transform="rotate("+t+"deg)",n[o+(Me?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",f(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),t(Ai.prototype,{html:function(e,i,n){var o=this.createElement("span"),r=o.element,s=o.renderer;return o.textSetter=function(t){t!==r.innerHTML&&delete this.bBox,r.innerHTML=this.textStr=t},o.xSetter=o.ySetter=o.alignSetter=o.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),o[e]=t,o.htmlUpdateTransform()},o.attr({text:e,x:fe(i),y:fe(n)}).css({position:Fe,whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),o.css=o.htmlCss,s.isSVG&&(o.add=function(e){var i,n,a=s.box.parentNode,l=[];if(this.parentGroup=e,e){if(i=e.div,!i){for(n=e;n;)l.push(n),n=n.parentGroup;hi(l.reverse(),function(e){var n;i=e.div=e.div||g(Ne,{className:d(e.element,"class")},{position:Fe,left:(e.translateX||0)+Ze,top:(e.translateY||0)+Ze},i||a),n=i.style,t(e,{translateXSetter:function(t,i){n.left=t+Ze,e[i]=t,e.doTransform=!0},translateYSetter:function(t,i){n.top=t+Ze,e[i]=t,e.doTransform=!0},visibilitySetter:function(t,e){n[e]=t}})})}}else i=a;return i.appendChild(r),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o}),o}});var Ci,Li;if(!Be&&!ze){Li={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],o=["position: ",Fe,";"],r=e===Ne;("shape"===e||r)&&o.push("left:0;top:0;width:1px;height:1px;"),o.push("visibility: ",r?Ve:Ue),n.push(' style="',o.join(""),'"/>'),e&&(n=r||"span"===e||"img"===e?n.join(""):t.prepVML(n),i.element=g(n)),i.renderer=t},add:function(t){var e=this,i=e.renderer,n=e.element,o=i.box,r=t&&t.inverted,s=t?t.element||t:o;return r&&i.invertChild(n,s),s.appendChild(n),e.added=!0,e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform(),e.onAdd&&e.onAdd(),e},updateTransform:z.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=be(t*Se),i=ke(t*Se);f(this.element,{filter:t?"progid:DXImageTransform.Microsoft.Matrix(M11="+e+", M12="+-i+", M21="+i+", M22="+e+", sizingMethod='auto expand')":Ke})},getSpanCorrection:function(t,e,i,n,o){var r,s=n?be(n*Se):1,a=n?ke(n*Se):0,l=u(this.elemHeight,this.element.offsetHeight),h=o&&"left"!==o;this.xCorr=0>s&&-t,this.yCorr=0>a&&-l,r=0>s*a,this.xCorr+=a*e*(r?1-i:i),this.yCorr-=s*e*(n?r?i:1-i:1),h&&(this.xCorr-=t*i*(0>s?-1:1),n&&(this.yCorr-=l*i*(0>a?-1:1)),f(this.element,{textAlign:o}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)s(t[e])?i[e]=fe(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i,n=this;return t?(e=t.members,h(e,n),e.push(n),n.destroyClip=function(){h(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:Ce?"inherit":"rect(auto)"}),n.css(i)},css:z.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&L(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),z.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=pe.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var n;return t=t.split(/[ ,]/),n=t.length,(9===n||11===n)&&(t[n-4]=t[n-2]=i(t[n-2])-10*e),t.join(" ")},shadow:function(t,e,n){var o,r,s,a,l,h,c,d=[],p=this.element,f=this.renderer,m=p.style,y=p.path;if(y&&"string"!=typeof y.value&&(y="x"),l=y,t){for(h=u(t.width,3),c=(t.opacity||.15)/h,o=1;3>=o;o++)a=2*h+1-2*o,n&&(l=this.cutOffPath(y.value,a+.5)),s=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',p.style.cssText,'" />'],r=g(f.prepVML(s),null,{left:i(m.left)+u(t.offsetX,1),top:i(m.top)+u(t.offsetY,1)}),n&&(r.cutOff=a+1),s=['<stroke color="',t.color||"black",'" opacity="',c*o,'"/>'],g(f.prepVML(s),null,null,r),e?e.element.appendChild(r):p.parentNode.insertBefore(r,p),d.push(r);this.shadows=d}return this},updateShadows:Xe,setAttr:function(t,e){Ce?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){var n=i.getElementsByTagName("stroke")[0]||g(this.renderer.prepVML(["<stroke/>"]),null,null,i);n[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n,o=this.shadows;if(t=t||[],this.d=t.join&&t.join(" "),i.path=t=this.pathToVML(t),o)for(n=o.length;n--;)o[n].path=o[n].cutOff?this.cutOffPath(t,o[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled=t!==Ke,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},opacitySetter:Xe,rotationSetter:function(t,e,i){var n=i.style;this[e]=n[e]=t,n.left=-fe(ke(t*Se)+1)+Ze,n.top=fe(be(t*Se))+Ze},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,s(t)&&(t+=Ze),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t=Ue),this.shadows&&hi(this.shadows,function(i){i.style[e]=t}),"DIV"===i.nodeName&&(t=t===Ve?"-999em":0,Ce||(i.style[e]=t?Ue:Ve),e="top"),i.style[e]=t},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}},ce.VMLElement=Li=m(z,Li),Li.prototype.ySetter=Li.prototype.widthSetter=Li.prototype.heightSetter=Li.prototype.xSetter;var Mi={Element:Li,isIE8:Te.indexOf("MSIE 8.0")>-1,init:function(e,i,n,o){var r,s,a,l=this;if(l.alignedObjects=[],r=l.createElement(Ne).css(t(this.getStyle(o),{position:je})),s=r.element,e.appendChild(r.element),l.isVML=!0,l.box=s,l.boxWrapper=r,l.cache={},l.setSize(i,n,!1),!de.namespaces.hcv){de.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{de.createStyleSheet().cssText=a}catch(h){de.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,r){var s=this.createElement(),a=o(e);return t(s,{members:[],left:(a?e.x:e)+1,top:(a?e.y:i)+1,width:(a?e.width:n)-1,height:(a?e.height:r)-1,getCSS:function(e){var i=e.element,n=i.nodeName,o="shape"===n,r=e.inverted,s=this,a=s.top-(o?i.offsetTop:0),l=s.left,h=l+s.width,c=a+s.height,d={clip:"rect("+fe(r?l:a)+"px,"+fe(r?c:h)+"px,"+fe(r?h:c)+"px,"+fe(r?a:l)+"px)"};return!r&&Ce&&"DIV"===n&&t(d,{width:h+Ze,height:c+Ze}),d},updateClipping:function(){hi(s.members,function(t){t.element&&t.css(s.getCSS(t))})}})},color:function(t,e,i,n){var o,r,s,a=this,l=/^rgba/,h=Ke;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var c,d,p,u,f,m,y,v,x,b,k,w,S=t.linearGradient||t.radialGradient,T="",P=t.stops,A=[],C=function(){r=['<fill colors="'+A.join(",")+'" opacity="',v,'" o:opacity2="',y,'" type="',s,'" ',T,'focus="100%" method="any" />'],g(a.prepVML(r),null,null,e)};if(k=P[0],w=P[P.length-1],k[0]>0&&P.unshift([0,k[1]]),w[0]<1&&P.push([1,w[1]]),hi(P,function(t,e){l.test(t[1])?(o=Pi(t[1]),c=o.get("rgb"),d=o.get("a")):(c=t[1],d=1),A.push(100*t[0]+"% "+c),e?(v=d,x=c):(y=d,b=c)}),"fill"===i)if("gradient"===s)p=S.x1||S[0]||0,u=S.y1||S[1]||0,f=S.x2||S[2]||0,m=S.y2||S[3]||0,T='angle="'+(90-180*ue.atan((m-u)/(f-p))/we)+'"',C();else{var L,M=S.r,D=2*M,I=2*M,B=S.cx,O=S.cy,z=e.radialReference,R=function(){z&&(L=n.getBBox(),B+=(z[0]-L.x)/L.width-.5,O+=(z[1]-L.y)/L.height-.5,D*=z[2]/L.width,I*=z[2]/L.height),T='src="'+F.global.VMLRadialGradientURL+'" size="'+D+","+I+'" origin="0.5,0.5" position="'+B+","+O+'" color2="'+b+'" ',C()};n.added?R():n.onAdd=R,h=x}else h=c}else if(l.test(t)&&"IMG"!==e.tagName)o=Pi(t),r=["<",i,' opacity="',o.get("a"),'"/>'],g(this.prepVML(r),null,null,e),h=o.get("rgb");else{var H=e.getElementsByTagName(i);H.length&&(H[0].opacity=1,H[0].type="solid"),h=t}return h},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),i?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e)):t=t.replace("<","<hcv:"),t},text:Ai.prototype.html,path:function(e){var i={coordsize:"10 10"};return r(e)?i.d=e:o(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){var n=this.symbol("circle");return o(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e,i;return t&&(i={className:_e+t,"class":_e+t}),e=this.createElement(Ne).attr(i)},image:function(t,e,i,n,o){var r=this.createElement("img").attr({src:t});return arguments.length>1&&r.attr({x:e,y:i,width:n,height:o}),r},createElement:function(t){return"rect"===t?this.symbol(t):Ai.prototype.createElement.call(this,t)},invertChild:function(t,e){var n=this,o=e.style,r="IMG"===t.tagName&&t.style;f(t,{flip:"x",left:i(o.width)-(r?i(r.top):1),top:i(o.height)-(r?i(r.left):1),rotation:-90}),hi(t.childNodes,function(e){n.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,o){var r,s=o.start,a=o.end,l=o.r||i||n,h=o.innerR,c=be(s),d=ke(s),p=be(a),u=ke(a);return a-s===0?["x"]:(r=["wa",t-l,e-l,t+l,e+l,t+l*c,e+l*d,t+l*p,e+l*u],o.open&&!h&&r.push("e",$e,t,e),r.push("at",t-h,e-h,t+h,e+h,t+h*p,e+h*u,t+h*c,e+h*d,"x","e"),r.isArc=!0,r)},circle:function(t,e,i,n,o){return o&&(i=n=2*o.r),o&&o.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,o){return Ai.prototype.symbols[c(o)&&o.r?"callout":"square"].call(0,t,e,i,n,o)}}};ce.VMLRenderer=Ci=function(){this.init.apply(this,arguments)},Ci.prototype=e(Ai.prototype,Mi),W=Ci}Ai.prototype.measureSpanWidth=function(t,e){var i,n=de.createElement("span"),o=de.createTextNode(t);return n.appendChild(o),f(n,e),this.box.appendChild(n),i=n.offsetWidth,L(n),i};var Di,Ii;ze&&(ce.CanVGRenderer=Di=function(){Ie="http://www.w3.org/1999/xhtml"},Di.prototype.symbols={},Ii=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&ai(n,t),e.push(i)}}}(),W=Di),R.prototype={addLabel:function(){var e,i,n,o,r=this,a=r.axis,h=a.options,d=a.chart,p=a.horiz,f=a.categories,g=a.names,m=r.pos,y=h.labels,v=y.rotation,x=a.tickPositions,b=p&&f&&!y.step&&!y.staggerLines&&!y.rotation&&d.plotWidth/x.length||!p&&(d.margin[3]||.33*d.chartWidth),k=m===x[0],w=m===x[x.length-1],S=f?u(f[m],g[m],m):m,T=r.label,P=x.info;a.isDatetimeAxis&&P&&(o=h.dateTimeLabelFormats[P.higherRanks[m]||P.unitName]),r.isFirst=k,r.isLast=w,e=a.labelFormatter.call({axis:a,chart:d,isFirst:k,isLast:w,dateTimeLabelFormat:o,value:a.isLog?M(l(S)):S}),i=b&&{width:ye(1,fe(b-2*(y.padding||10)))+Ze},c(T)?T&&T.attr({text:e}).css(i):(n={align:a.labelAlign},s(v)&&(n.rotation=v),b&&y.ellipsis&&(i.HcHeight=a.len/x.length),r.label=T=c(e)&&y.enabled?d.renderer.text(e,0,0,y.useHTML).attr(n).css(t(i,y.style)).add(a.labelGroup):null,a.tickBaseline=d.renderer.fontMetrics(y.style.fontSize,T).b,v&&2===a.side&&(a.tickBaseline*=be(v*Se))),r.yOffset=T?u(y.y,a.tickBaseline+(2===a.side?8:-(T.getBBox().height/2))):0},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,i=e.horiz,n=e.options,o=n.labels,r=i?t.width:t.height,s=i?o.x-r*{left:0,center:.5,right:1}[e.labelAlign]:0,a=i?r+s:r;return[s,a]},handleOverflow:function(t,e){var i,n,o,r,s,a=!0,l=this.axis,h=this.isFirst,c=this.isLast,d=l.horiz,p=d?e.x:e.y,u=l.reversed,f=l.tickPositions,g=this.getLabelSides(),m=g[0],y=g[1],v=this.label.line,x=v||0,b=l.labelEdge,k=l.justifyLabels&&(h||c);if(b[x]===G||p+m>b[x]?b[x]=p+y:k||(a=!1),k){s=l.justifyToPlot,i=s?l.pos:0,n=s?i+l.len:l.chart.chartWidth;do t+=h?1:-1,o=l.ticks[f[t]];while(f[t]&&(!o||!o.label||o.label.line!==v));r=o&&o.label.xy&&o.label.xy.x+o.getLabelSides()[h?0:1],h&&!u||c&&u?i>p+m&&(p=i-m,o&&p+y>r&&(a=!1)):p+y>n&&(p=n-y,o&&r>p+m&&(a=!1)),e.x=p}return a},getPosition:function(t,e,i,n){var o=this.axis,r=o.chart,s=n&&r.oldChartHeight||r.chartHeight;return{x:t?o.translate(e+i,null,null,n)+o.transB:o.left+o.offset+(o.opposite?(n&&r.oldChartWidth||r.chartWidth)-o.right-o.left:0),y:t?s-o.bottom+o.offset-(o.opposite?o.height:0):s-o.translate(e+i,null,null,n)-o.transB}},getLabelPosition:function(t,e,i,n,o,r,s,a){var l=this.axis,h=l.transA,c=l.reversed,d=l.staggerLines;return t=t+o.x-(r&&n?r*h*(c?-1:1):0),e=e+this.yOffset-(r&&!n?r*h*(c?1:-1):0),d&&(i.line=s/(a||1)%d,e+=i.line*(l.labelOffset/d)),{x:t,y:e}},getMarkPath:function(t,e,i,n,o,r){return r.crispLine([$e,t,e,qe,t+(o?0:-i),e+(o?i:0)],n)},render:function(t,e,i){var n,o,r,s=this,a=s.axis,l=a.options,h=a.chart,c=h.renderer,d=a.horiz,p=s.type,f=s.label,g=s.pos,m=l.labels,y=s.gridLine,v=p?p+"Grid":"grid",x=p?p+"Tick":"tick",b=l[v+"LineWidth"],k=l[v+"LineColor"],w=l[v+"LineDashStyle"],S=l[x+"Length"],T=l[x+"Width"]||0,P=l[x+"Color"],A=l[x+"Position"],C=s.mark,L=m.step,M=!0,D=a.tickmarkOffset,I=s.getPosition(d,g,D,e),B=I.x,O=I.y,z=d&&B===a.pos+a.len||!d&&O===a.pos?-1:1;i=u(i,1),this.isActive=!0,b&&(n=a.getPlotLinePath(g+D,b*z,e,!0),y===G&&(r={stroke:k,"stroke-width":b},w&&(r.dashstyle=w),p||(r.zIndex=1),e&&(r.opacity=0),s.gridLine=y=b?c.path(n).attr(r).add(a.gridGroup):null),!e&&y&&n&&y[s.isNew?"attr":"animate"]({d:n,opacity:i})),T&&S&&("inside"===A&&(S=-S),a.opposite&&(S=-S),o=s.getMarkPath(B,O,S,T*z,d,c),C?C.animate({d:o,opacity:i}):s.mark=c.path(o).attr({stroke:P,"stroke-width":T,opacity:i}).add(a.axisGroup)),f&&!isNaN(B)&&(f.xy=I=s.getLabelPosition(B,O,f,d,m,D,t,L),s.isFirst&&!s.isLast&&!u(l.showFirstLabel,1)||s.isLast&&!s.isFirst&&!u(l.showLastLabel,1)?M=!1:a.isRadial||m.step||m.rotation||e||0===i||(M=s.handleOverflow(t,I)),L&&t%L&&(M=!1),M&&!isNaN(I.y)?(I.opacity=i,f[s.isNew?"attr":"animate"](I),s.isNew=!1):f.attr("y",-9999))},destroy:function(){C(this,this.axis)}},ce.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},ce.PlotLineOrBand.prototype={render:function(){var t,i,n,o,r,s,l=this,h=l.axis,d=h.horiz,p=(h.pointRange||0)/2,u=l.options,f=u.label,g=l.label,m=u.width,y=u.to,v=u.from,x=c(v)&&c(y),b=u.value,k=u.dashStyle,w=l.svgElem,S=[],T=u.color,C=u.zIndex,L=u.events,M={},D=h.chart.renderer;if(h.isLog&&(v=a(v),y=a(y),b=a(b)),m)S=h.getPlotLinePath(b,m),M={stroke:T,"stroke-width":m},k&&(M.dashstyle=k);else{if(!x)return;v=ye(v,h.min-p),y=ve(y,h.max+p),S=h.getPlotBandPath(v,y,u),T&&(M.fill=T),u.borderWidth&&(M.stroke=u.borderColor,M["stroke-width"]=u.borderWidth)}if(c(C)&&(M.zIndex=C),w)S?w.animate({d:S},null,w.onGetPath):(w.hide(),w.onGetPath=function(){w.show()},g&&(l.label=g=g.destroy()));else if(S&&S.length&&(l.svgElem=w=D.path(S).attr(M).add(),L)){t=function(t){w.on(t,function(e){L[t].apply(l,[e])})};for(i in L)t(i)}return f&&c(f.text)&&S&&S.length&&h.width>0&&h.height>0?(f=e({align:d&&x&&"center",x:d?!x&&4:10,verticalAlign:!d&&x&&"middle",y:d?x?16:10:x?6:-4,rotation:d&&!x&&90},f),g||(M={align:f.textAlign||f.align,rotation:f.rotation},c(C)&&(M.zIndex=C),l.label=g=D.text(f.text,0,0,f.useHTML).attr(M).css(f.style).add()),n=[S[1],S[4],x?S[6]:S[1]],o=[S[2],S[5],x?S[7]:S[2]],r=P(n),s=P(o),g.align(f,!1,{x:r,y:s,width:A(n)-r,height:A(o)-s}),g.show()):g&&g.hide(),l},destroy:function(){h(this.axis.plotLinesAndBands,this),delete this.axis,C(this)}},K={getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e),n=this.getPlotLinePath(t);return n&&i?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new ce.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,o=e.length;o--;)e[o].id===t&&e[o].destroy();hi([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(o=e.length;o--;)e[o].id===t&&h(e,e[o])})}},H.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:xi,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return y(this.total,-1)},style:xi.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.horiz=t.inverted?!i:i,n.isXAxis=i,n.coll=i?"xAxis":"yAxis",n.opposite=e.opposite,n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(e);var o=this.options,r=o.type,s="datetime"===r;n.labelFormatter=o.labels.formatter||n.defaultLabelFormatter,n.userOptions=e,n.minPixelPadding=0,n.chart=t,n.reversed=o.reversed,n.zoomEnabled=o.zoomEnabled!==!1,n.categories=o.categories||"category"===r,n.names=[],n.isLog="logarithmic"===r,n.isDatetimeAxis=s,n.isLinked=c(o.linkedTo),n.tickmarkOffset=n.categories&&"between"===o.tickmarkPlacement&&1===u(o.tickInterval,1)?.5:0,n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=o.minRange||o.maxZoom,n.range=o.range,n.offset=o.offset||0,n.stacks={},n.oldStacks={},n.max=null,n.min=null,n.crosshair=u(o.crosshair,p(t.options.tooltip.crosshairs)[i?0:1],!1);var h,d=n.options.events;-1===li(n,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,n):t.axes.push(n),t[n.coll].push(n)),n.series=n.series||[],t.inverted&&i&&n.reversed===G&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine;for(h in d)ui(n,h,d[h]);n.isLog&&(n.val2lin=a,n.lin2val=l)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(F[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,o=i.categories,r=this.dateTimeLabelFormat,s=F.lang.numericSymbols,a=s&&s.length,l=i.options.labels.format,h=i.isLog?n:i.tickInterval;if(l)e=k(l,this);else if(o)e=n;else if(r)e=j(r,n);else if(a&&h>=1e3)for(;a--&&e===G;)t=Math.pow(1e3,a+1),t>h||null===s[a]||(e=y(n/t,-1)+s[a]);return e===G&&(e=xe(n)<1e4?y(n,-1,G,""):y(n,0)),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),hi(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,o,r,s=i.options,a=s.threshold;t.hasVisibleSeries=!0,t.isLog&&0>=a&&(a=null),t.isXAxis?(n=i.xData,n.length&&(t.dataMin=ve(u(t.dataMin,n[0]),P(n)),t.dataMax=ye(u(t.dataMax,n[0]),A(n)))):(i.getExtremes(),r=i.dataMax,o=i.dataMin,c(o)&&c(r)&&(t.dataMin=ve(u(t.dataMin,o),o),t.dataMax=ye(u(t.dataMax,r),r)),c(a)&&(t.dataMin<a?t.dataMax<a&&(t.dataMax=a,t.ignoreMaxPadding=!0):(t.dataMin=a,t.ignoreMinPadding=!0)))}})},translate:function(t,e,i,n,o,r){var a,l=this,h=1,c=0,d=n?l.oldTransA:l.transA,p=n?l.oldMin:l.min,u=l.minPixelPadding,f=(l.options.ordinal||l.isLog&&o)&&l.lin2val;return d||(d=l.transA),i&&(h*=-1,c=l.len),l.reversed&&(h*=-1,c-=h*(l.sector||l.len)),e?(t=t*h+c,t-=u,a=t/d+p,f&&(a=l.lin2val(a))):(f&&(t=l.val2lin(t)),"between"===r&&(r=.5),a=h*(t-p)*d+c+h*u+(s(r)?d*r*l.pointRange:0)),a},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,o){var r,s,a,l,h,c=this,d=c.chart,p=c.left,f=c.top,g=i&&d.oldChartHeight||d.chartHeight,m=i&&d.oldChartWidth||d.chartWidth,y=c.transB;return o=u(o,c.translate(t,null,null,i)),r=a=fe(o+y),s=l=fe(g-o-y),isNaN(o)?h=!0:c.horiz?(s=f,l=g-c.bottom,(p>r||r>p+c.width)&&(h=!0)):(r=p,a=m-c.right,(f>s||s>f+c.height)&&(h=!0)),h&&!n?null:d.renderer.crispLine([$e,r,s,qe,a,l],e||1)},getLinearTickPositions:function(t,e,i){var n,o,r=M(ge(e/t)*t),a=M(me(i/t)*t),l=[];if(e===i&&s(e))return[e];for(n=r;a>=n&&(l.push(n),n=M(n+t),n!==o);)o=n;return l},getMinorTickPositions:function(){var t,e,i,n=this,o=n.options,r=n.tickPositions,s=n.minorTickInterval,a=[];if(n.isLog)for(i=r.length,e=1;i>e;e++)a=a.concat(n.getLogTickPositions(s,r[e-1],r[e],!0));else if(n.isDatetimeAxis&&"auto"===o.minorTickInterval)a=a.concat(n.getTimeTicks(n.normalizeTimeTickInterval(s),n.min,n.max,o.startOfWeek)),a[0]<n.min&&a.shift();else for(t=n.min+(r[0]-n.min)%s;t<=n.max;t+=s)a.push(t);return a},adjustForMinRange:function(){var t,e,i,n,o,r,s,a,l=this,h=l.options,d=l.min,p=l.max,f=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===G&&!l.isLog&&(c(h.min)||c(h.max)?l.minRange=null:(hi(l.series,function(t){for(o=t.xData,r=t.xIncrement?1:o.length-1,i=r;i>0;i--)n=o[i]-o[i-1],(e===G||e>n)&&(e=n)}),l.minRange=ve(5*e,l.dataMax-l.dataMin))),p-d<l.minRange){var g=l.minRange;t=(g-p+d)/2,s=[d-t,u(h.min,d-t)],f&&(s[2]=l.dataMin),d=A(s),a=[d+g,u(h.max,d+g)],f&&(a[2]=l.dataMax),p=P(a),g>p-d&&(s[0]=p-g,s[1]=u(h.min,p-g),d=A(s)) }l.min=d,l.max=p},setAxisTranslation:function(t){var e,i,o=this,r=o.max-o.min,s=o.axisPointRange||0,a=0,l=0,h=o.linkedParent,d=!!o.categories,p=o.transA;(o.isXAxis||d||s)&&(h?(a=h.minPointOffset,l=h.pointRangePadding):hi(o.series,function(t){var i=d?1:o.isXAxis?t.pointRange:o.axisPointRange||0,h=t.options.pointPlacement,p=t.closestPointRange;i>r&&(i=0),s=ye(s,i),a=ye(a,n(h)?0:i/2),l=ye(l,"on"===h?0:i),!t.noSharedTooltip&&c(p)&&(e=c(e)?ve(e,p):p)}),i=o.ordinalSlope&&e?o.ordinalSlope/e:1,o.minPointOffset=a*=i,o.pointRangePadding=l*=i,o.pointRange=ve(s,r),o.closestPointRange=e),t&&(o.oldTransA=p),o.translationSlope=o.transA=p=o.len/(r+l||1),o.transB=o.horiz?o.left:o.bottom,o.minPixelPadding=p*a},setTickPositions:function(t){var e,i,n,o,r=this,l=r.chart,h=r.options,d=h.startOnTick,p=h.endOnTick,f=r.isLog,g=r.isDatetimeAxis,m=r.isXAxis,y=r.isLinked,v=r.options.tickPositioner,x=h.maxPadding,b=h.minPadding,k=h.tickInterval,T=h.minTickInterval,P=h.tickPixelInterval,A=r.categories;if(y?(r.linkedParent=l[r.coll][h.linkedTo],i=r.linkedParent.getExtremes(),r.min=u(i.min,i.dataMin),r.max=u(i.max,i.dataMax),h.type!==r.linkedParent.options.type&&Z(11,1)):(r.min=u(r.userMin,h.min,r.dataMin),r.max=u(r.userMax,h.max,r.dataMax)),f&&(t||ve(r.min,u(r.dataMin,r.min))>0||Z(10,1),r.min=M(a(r.min)),r.max=M(a(r.max))),r.range&&c(r.max)&&(r.userMin=r.min=ye(r.min,r.max-r.range),r.userMax=r.max,r.range=null),r.beforePadding&&r.beforePadding(),r.adjustForMinRange(),A||r.axisPointRange||r.usePercentage||y||!c(r.min)||!c(r.max)||(e=r.max-r.min,e&&(c(h.min)||c(r.userMin)||!b||r.dataMin>=0&&r.ignoreMinPadding||(r.min-=e*b),c(h.max)||c(r.userMax)||!x||r.dataMax<=0&&r.ignoreMaxPadding||(r.max+=e*x))),s(h.floor)&&(r.min=ye(r.min,h.floor)),s(h.ceiling)&&(r.max=ve(r.max,h.ceiling)),r.min===r.max||void 0===r.min||void 0===r.max?r.tickInterval=1:y&&!k&&P===r.linkedParent.options.tickPixelInterval?r.tickInterval=r.linkedParent.tickInterval:(r.tickInterval=u(k,A?1:(r.max-r.min)*P/ye(r.len,P)),c(k)||r.len>=P||this.isRadial||this.isLog||A||!d||!p||(o=!0,r.tickInterval/=4)),m&&!t&&hi(r.series,function(t){t.processData(r.min!==r.oldMin||r.max!==r.oldMax)}),r.setAxisTranslation(!0),r.beforeSetTickPositions&&r.beforeSetTickPositions(),r.postProcessTickInterval&&(r.tickInterval=r.postProcessTickInterval(r.tickInterval)),r.pointRange&&(r.tickInterval=ye(r.pointRange,r.tickInterval)),!k&&r.tickInterval<T&&(r.tickInterval=T),g||f||k||(r.tickInterval=S(r.tickInterval,null,w(r.tickInterval),u(h.allowDecimals,!(r.tickInterval>1&&r.tickInterval<5&&r.max>1e3&&r.max<9999)))),r.minorTickInterval="auto"===h.minorTickInterval&&r.tickInterval?r.tickInterval/5:h.minorTickInterval,r.tickPositions=n=h.tickPositions?[].concat(h.tickPositions):v&&v.apply(r,[r.min,r.max]),n||(!r.ordinalPositions&&(r.max-r.min)/r.tickInterval>ye(2*r.len,200)&&Z(19,!0),n=g?r.getTimeTicks(r.normalizeTimeTickInterval(r.tickInterval,h.units),r.min,r.max,h.startOfWeek,r.ordinalPositions,r.closestPointRange,!0):f?r.getLogTickPositions(r.tickInterval,r.min,r.max):r.getLinearTickPositions(r.tickInterval,r.min,r.max),o&&n.splice(1,n.length-2),r.tickPositions=n),!y){var C,L=n[0],D=n[n.length-1],I=r.minPointOffset||0;d?r.min=L:r.min-I>L&&n.shift(),p?r.max=D:r.max+I<D&&n.pop(),0===n.length&&c(L)&&n.push((D+L)/2),1===n.length&&(C=xe(r.max)>1e13?1:.001,r.min-=C,r.max+=C)}},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&this.options.alignTicks!==!1&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this,e=t.chart,i=t._maxTicksKey,n=t.tickPositions,o=e.maxTicks;if(o&&o[i]&&!t.isDatetimeAxis&&!t.categories&&!t.isLinked&&t.options.alignTicks!==!1&&this.min!==G){var r,s=t.tickAmount,a=n.length;if(t.tickAmount=r=o[i],r>a){for(;n.length<r;)n.push(M(n[n.length-1]+t.tickInterval));t.transA*=(a-1)/(r-1),t.max=n[n.length-1]}c(s)&&r!==s&&(t.isDirty=!0)}},setScale:function(){var t,e,i,n,o=this,r=o.stacks;if(o.oldMin=o.min,o.oldMax=o.max,o.oldAxisLength=o.len,o.setAxisSize(),n=o.len!==o.oldAxisLength,hi(o.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),n||i||o.isLinked||o.forceRedraw||o.userMin!==o.oldUserMin||o.userMax!==o.oldUserMax){if(!o.isXAxis)for(t in r)for(e in r[t])r[t][e].total=null,r[t][e].cum=0;o.forceRedraw=!1,o.getSeriesExtremes(),o.setTickPositions(),o.oldUserMin=o.userMin,o.oldUserMax=o.userMax,o.isDirty||(o.isDirty=n||o.min!==o.oldMin||o.max!==o.oldMax)}else if(!o.isXAxis){o.oldStacks&&(r=o.stacks=o.oldStacks);for(t in r)for(e in r[t])r[t][e].cum=r[t][e].total}o.setMaxTicks()},setExtremes:function(e,i,n,o,r){var s=this,a=s.chart;n=u(n,!0),r=t(r,{min:e,max:i}),gi(s,"setExtremes",r,function(){s.userMin=e,s.userMax=i,s.eventArgs=r,s.isDirtyExtremes=!0,n&&a.redraw(o)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,o=this.options;return this.allowZoomOutside||(c(i)&&t<=ve(i,u(o.min,i))&&(t=G),c(n)&&e>=ye(n,u(o.max,n))&&(e=G)),this.displayBtn=t!==G||e!==G,this.setExtremes(t,e,!1,G,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=e.offsetRight||0,o=this.horiz,r=u(e.width,t.plotWidth-i+n),s=u(e.height,t.plotHeight),a=u(e.top,t.plotTop),l=u(e.left,t.plotLeft+i),h=/%$/;h.test(s)&&(s=parseInt(s,10)/100*t.plotHeight),h.test(a)&&(a=parseInt(a,10)/100*t.plotHeight+t.plotTop),this.left=l,this.top=a,this.width=r,this.height=s,this.bottom=t.chartHeight-s-a,this.right=t.chartWidth-r-l,this.len=ye(o?r:s,0),this.pos=o?l:a},getExtremes:function(){var t=this,e=t.isLog;return{min:e?M(l(t.min)):t.min,max:e?M(l(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=i?l(e.min):e.min,o=i?l(e.max):e.max;return n>t||null===t?t=n:t>o&&(t=o),e.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e,i=(u(t,0)-90*this.side+720)%360;return e=i>15&&165>i?"right":i>195&&345>i?"left":"center"},getOffset:function(){var t,e,i,n,o,r,s,a,l,h,d,p,f,g,m,y=this,v=y.chart,x=v.renderer,b=y.options,k=y.tickPositions,w=y.ticks,S=y.horiz,T=y.side,P=v.inverted?[1,0,3,2][T]:T,A=0,C=0,L=b.title,M=b.labels,D=0,I=v.axisOffset,B=v.clipOffset,O=[-1,1,1,-1][T],z=1,H=u(M.maxStaggerLines,5);if(y.hasData=t=y.hasVisibleSeries||c(y.min)&&c(y.max)&&!!k,y.showAxis=e=t||u(b.showEmpty,!0),y.staggerLines=y.horiz&&M.staggerLines,y.axisGroup||(y.gridGroup=x.g("grid").attr({zIndex:b.gridZIndex||1}).add(),y.axisGroup=x.g("axis").attr({zIndex:b.zIndex||2}).add(),y.labelGroup=x.g("axis-labels").attr({zIndex:M.zIndex||7}).addClass(_e+y.coll.toLowerCase()+"-labels").add()),t||y.isLinked){if(y.labelAlign=u(M.align||y.autoLabelAlign(M.rotation)),hi(k,function(t){w[t]?w[t].addLabel():w[t]=new R(y,t)}),y.horiz&&!y.staggerLines&&H&&!M.rotation){for(s=y.reversed?[].concat(k).reverse():k;H>z;){for(a=[],l=!1,r=0;r<s.length;r++)h=s[r],d=w[h].label&&w[h].label.getBBox(),f=d?d.width:0,g=r%z,f&&(p=y.translate(h),a[g]!==G&&p<a[g]&&(l=!0),a[g]=p+f);if(!l)break;z++}z>1&&(y.staggerLines=z)}hi(k,function(t){(0===T||2===T||{1:"left",3:"right"}[T]===y.labelAlign)&&(D=ye(w[t].getLabelSize(),D))}),y.staggerLines&&(D*=y.staggerLines,y.labelOffset=D)}else for(o in w)w[o].destroy(),delete w[o];L&&L.text&&L.enabled!==!1&&(y.axisTitle||(y.axisTitle=x.text(L.text,0,0,L.useHTML).attr({zIndex:7,rotation:L.rotation||0,align:L.textAlign||{low:"left",middle:"center",high:"right"}[L.align]}).addClass(_e+this.coll.toLowerCase()+"-title").css(L.style).add(y.axisGroup),y.axisTitle.isNew=!0),e&&(A=y.axisTitle.getBBox()[S?"height":"width"],i=L.offset,C=c(i)?0:u(L.margin,S?5:10)),y.axisTitle[e?"show":"hide"]()),y.offset=O*u(b.offset,I[T]),m=2===T?y.tickBaseline:0,n=D+C+(D&&O*(S?u(M.y,y.tickBaseline+8):M.x)-m),y.axisTitleMargin=u(i,n),I[T]=ye(I[T],y.axisTitleMargin+A+O*y.offset,n),B[P]=ye(B[P],2*ge(b.lineWidth/2))},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,o=this.horiz,r=this.left+(i?this.width:0)+n,s=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine([$e,o?this.left:r,o?s:this.top,qe,o?e.chartWidth-this.right:r,o?s:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,n=this.top,o=this.len,r=this.options.title,s=t?e:n,a=this.opposite,l=this.offset,h=i(r.style.fontSize||12),c={low:s+(t?0:o),middle:s+o/2,high:s+(t?o:0)}[r.align],d=(t?n+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?h:0);return{x:t?c:d+(a?this.width:0)+l+(r.x||0),y:t?d-(a?this.height:0)+l:c+(r.y||0)}},render:function(){var t,e,i,n,o=this,r=o.horiz,s=o.reversed,a=o.chart,h=a.renderer,d=o.options,p=o.isLog,u=o.isLinked,f=o.tickPositions,g=o.axisTitle,m=o.ticks,y=o.minorTicks,v=o.alternateBands,x=d.stackLabels,b=d.alternateGridColor,k=o.tickmarkOffset,w=d.lineWidth,S=a.hasRendered,T=S&&c(o.oldMin)&&!isNaN(o.oldMin),P=o.hasData,A=o.showAxis,C=d.labels.overflow,L=o.justifyLabels=r&&C!==!1;o.labelEdge.length=0,o.justifyToPlot="justify"===C,hi([m,y,v],function(t){var e;for(e in t)t[e].isActive=!1}),(P||u)&&(o.minorTickInterval&&!o.categories&&hi(o.getMinorTickPositions(),function(t){y[t]||(y[t]=new R(o,t,"minor")),T&&y[t].isNew&&y[t].render(null,!0),y[t].render(null,!1,1)}),f.length&&(t=f.slice(),(r&&s||!r&&!s)&&t.reverse(),L&&(t=t.slice(1).concat([t[0]])),hi(t,function(e,i){L&&(i=i===t.length-1?0:i+1),u&&(e<o.min||e>o.max)||(m[e]||(m[e]=new R(o,e)),T&&m[e].isNew&&m[e].render(i,!0,.1),m[e].render(i))}),k&&0===o.min&&(m[-1]||(m[-1]=new R(o,-1,null,!0)),m[-1].render(-1))),b&&hi(f,function(t,e){e%2===0&&t<o.max&&(v[t]||(v[t]=new ce.PlotLineOrBand(o)),i=t+k,n=f[e+1]!==G?f[e+1]+k:o.max,v[t].options={from:p?l(i):i,to:p?l(n):n,color:b},v[t].render(),v[t].isActive=!0)}),o._addedPlotLB||(hi((d.plotLines||[]).concat(d.plotBands||[]),function(t){o.addPlotBandOrLine(t)}),o._addedPlotLB=!0)),hi([m,y,v],function(t){var e,i,n=[],o=V?V.duration||500:0,r=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==v&&a.hasRendered&&o?o&&setTimeout(r,o):r()}),w&&(e=o.getLinePath(w),o.axisLine?o.axisLine.animate({d:e}):o.axisLine=h.path(e).attr({stroke:d.lineColor,"stroke-width":w,zIndex:7}).add(o.axisGroup),o.axisLine[A?"show":"hide"]()),g&&A&&(g[g.isNew?"attr":"animate"](o.getTitlePosition()),g.isNew=!1),x&&x.enabled&&o.renderStackTotals(),o.isDirty=!1},redraw:function(){this.render(),hi(this.plotLinesAndBands,function(t){t.render()}),hi(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i,n=this,o=n.stacks,r=n.plotLinesAndBands;t||fi(n);for(e in o)C(o[e]),o[e]=null;for(hi([n.ticks,n.minorTicks,n.alternateBands],function(t){C(t)}),i=r.length;i--;)r[i].destroy();hi(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(t){n[t]&&(n[t]=n[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair){if((c(e)||!u(this.crosshair.snap,!0))===!1)return void this.hideCrosshair();var i,n,o=this.crosshair,r=o.animation;if(u(o.snap,!0)?c(e)&&(n=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:u(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,n),null===i)return void this.hideCrosshair();if(this.cross)this.cross.attr({visibility:Ue})[r?"animate":"attr"]({d:i},r);else{var s={"stroke-width":o.width||1,stroke:o.color||"#C0C0C0",zIndex:o.zIndex||2};o.dashStyle&&(s.dashstyle=o.dashStyle),this.cross=this.chart.renderer.path(i).attr(s).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}},t(H.prototype,K),H.prototype.getTimeTicks=function(e,i,n,o){var r,s,a=[],l={},h=F.global.useUTC,d=new $(i-J),p=e.unitRange,f=e.count;if(c(i)){p<U.second||(d.setMilliseconds(0),d.setSeconds(p<U.minute?f*ge(d.getSeconds()/f):0)),p<U.minute||d[re](p<U.hour?f*ge(d[Q]()/f):0),p<U.hour||d[se](p<U.day?f*ge(d[te]()/f):0),p<U.day||d[ae](p<U.month?f*ge(d[ie]()/f):1),p<U.month||(d[le](p<U.year?f*ge(d[ne]()/f):0),s=d[oe]()),p<U.year||(s-=s%f,d[he](s)),p===U.week&&d[ae](d[ie]()-d[ee]()+u(o,1)),r=1,J&&(d=new $(d.getTime()+J)),s=d[oe]();for(var g=d.getTime(),m=d[ne](),y=d[ie](),v=(U.day+(h?J:60*d.getTimezoneOffset()*1e3))%U.day;n>g;)a.push(g),p===U.year?g=q(s+r*f,0):p===U.month?g=q(s,m+r*f):h||p!==U.day&&p!==U.week?g+=p*f:g=q(s,m,y+r*f*(p===U.day?1:7)),r++;a.push(g),hi(ci(a,function(t){return p<=U.hour&&t%U.day===v}),function(t){l[t]="day"})}return a.info=t(e,{higherRanks:l,totalRange:p*f}),a},H.prototype.normalizeTimeTickInterval=function(t,e){var i,n,o=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=o[o.length-1],s=U[r[0]],a=r[1];for(n=0;n<o.length;n++)if(r=o[n],s=U[r[0]],a=r[1],o[n+1]){var l=(s*a[a.length-1]+U[o[n+1][0]])/2;if(l>=t)break}return s===U.year&&5*s>t&&(a=[1,2,5]),i=S(t/s,a,"year"===r[0]?ye(w(t/s),1):1),{unitRange:s,count:i,unitName:r[0]}},H.prototype.getLogTickPositions=function(t,e,i,n){var o=this,r=o.options,s=o.len,h=[];if(n||(o._minorAutoInterval=null),.5>t)if(.08>t){var c=l(e),d=l(i),p=r[n?"minorTickInterval":"tickInterval"],f="auto"===p?null:p,g=r.tickPixelInterval/(n?5:1),m=n?s/o.tickPositions.length:s;t=u(f,o._minorAutoInterval,(d-c)*g/(m||1)),t=S(t,null,w(t)),h=pi(o.getLinearTickPositions(t,c,d),a),n||(o._minorAutoInterval=t/5)}else{var y,v,x,b,k,T,P,A=ge(e);for(y=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],v=A;i+1>v&&!P;v++)for(b=y.length,x=0;b>x&&!P;x++)k=a(l(v)*y[x]),e>=k||n&&T>i||T===G||h.push(T),T>i&&(P=!0),T=k}else t=fe(t),h=o.getLinearTickPositions(t,e,i);return n||(o.tickInterval=t),h};var Bi=ce.Tooltip=function(){this.init.apply(this,arguments)};Bi.prototype={init:function(t,e){var n=e.borderWidth,o=e.style,r=i(o.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":n,r:e.borderRadius,zIndex:8}).css(o).css({padding:0}).add().attr({y:-9999}),ze||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,i,n,o){var r=this,s=r.now,a=r.options.animation!==!1&&!r.isHidden&&(xe(e-s.x)>1||xe(i-s.y)>1),l=r.followPointer||r.len>1;t(s,{x:a?(2*s.x+e)/3:e,y:a?(s.y+i)/2:i,anchorX:l?G:a?(2*s.anchorX+n)/3:n,anchorY:l?G:a?(s.anchorY+o)/2:o}),r.label.attr(s),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){r&&r.move(e,i,n,o)},32))},hide:function(t){var e,i=this;clearTimeout(this.hideTimer),this.isHidden||(e=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){i.label.fadeOut(),i.isHidden=!0},u(t,this.options.hideDelay,500)),e&&hi(e,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var i,n,o=this.chart,r=o.inverted,s=o.plotTop,a=0,l=0;return t=p(t),i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===G&&(e=o.pointer.normalize(e)),i=[e.chartX-o.plotLeft,e.chartY-s]),i||(hi(t,function(t){n=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!r&&n?n.top-s:0)}),a/=t.length,l/=t.length,i=[r?o.plotWidth-l:a,this.shared&&!r&&t.length>1&&e?e.chartY-s:r?o.plotHeight-a:l]),pi(i,fe)},getPosition:function(t,e,i){var n,o=this.chart,r=this.distance,s={},a=["y",o.chartHeight,e,i.plotY+o.plotTop],l=["x",o.chartWidth,t,i.plotX+o.plotLeft],h=i.ttBelow||o.inverted&&!i.negative||!o.inverted&&i.negative,c=function(t,e,i,n){var o=n-r>i,a=e>n+r+i,l=n-r-i,c=n+r;if(h&&a)s[t]=c;else if(!h&&o)s[t]=l;else if(o)s[t]=l;else{if(!a)return!1;s[t]=c}},d=function(t,e,i,n){return r>n||n>e-r?!1:void(s[t]=i/2>n?1:n>e-i/2?e-i-2:n-i/2)},p=function(t){var e=a;a=l,l=e,n=t},u=function(){c.apply(0,a)!==!1?d.apply(0,l)!==!1||n||(p(!0),u()):n?s.x=s.y=0:(p(!0),u())};return(o.inverted||this.len>1)&&p(),u(),s},defaultFormatter:function(t){var e,i=this.points||p(this),n=i[0].series;return e=[t.tooltipHeaderFormatter(i[0])],hi(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,o,r,s,a,l=this,h=l.chart,c=l.label,d=l.options,f={},g=[],m=d.formatter||l.defaultFormatter,y=h.hoverPoints,v=l.shared;clearTimeout(this.hideTimer),l.followPointer=p(t)[0].series.tooltipOptions.followPointer,o=l.getAnchor(t,e),i=o[0],n=o[1],!v||t.series&&t.series.noSharedTooltip?f=t.getLabelConfig():(h.hoverPoints=t,y&&hi(y,function(t){t.setState()}),hi(t,function(t){t.setState(ti),g.push(t.getLabelConfig())}),f={x:t[0].category,y:t[0].y},f.points=g,this.len=g.length,t=t[0]),r=m.call(f,l),a=t.series,this.distance=u(a.tooltipOptions.distance,16),r===!1?this.hide():(l.isHidden&&(vi(c),c.attr("opacity",1).show()),c.attr({text:r}),s=d.borderColor||t.color||a.color||"#606060",c.attr({stroke:s}),l.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow}),this.isHidden=!1),gi(h,"tooltipRefresh",{text:r,x:i+h.plotLeft,y:n+h.plotTop,borderColor:s})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(fe(n.x),fe(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)},tooltipHeaderFormatter:function(t){var e,i=t.series,n=i.tooltipOptions,o=n.dateTimeLabelFormats,r=n.xDateFormat,a=i.xAxis,l=a&&"datetime"===a.options.type&&s(t.key),h=n.headerFormat,c=a&&a.closestPointRange;if(l&&!r){if(c){for(e in U)if(U[e]>=c||U[e]<=U.day&&t.key%U[e]>0){r=o[e];break}}else r=o.day;r=r||o.year}return l&&r&&(h=h.replace("{point.key}","{point.key:"+r+"}")),k(h,{point:t,series:i})}};var Oi;Y=de.documentElement.ontouchstart!==G;var zi=ce.Pointer=function(t,e){this.init(t,e)};if(zi.prototype={init:function(t,e){var i,n,o=e.chart,r=o.events,s=ze?"":o.zoomType,a=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(s),this.zoomY=n=/y/.test(s),this.zoomHor=i&&!a||n&&a,this.zoomVert=n&&!a||i&&a,this.hasZoom=i||n,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},ce.Tooltip&&e.tooltip.enabled&&(t.tooltip=new Bi(t,e.tooltip),this.followTouchMove=e.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(e,i){var n,o,r;return e=e||window.event,e=mi(e),e.target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,i||(this.chartPosition=i=di(this.chart.container)),r.pageX===G?(n=ye(e.x,e.clientX-i.left),o=e.y):(n=r.pageX-i.left,o=r.pageY-i.top),t(e,{chartX:fe(n),chartY:fe(o)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return hi(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,o,r,s,a=this,l=a.chart,h=l.series,c=l.tooltip,d=l.hoverPoint,p=l.hoverSeries,f=l.chartWidth,g=a.getIndex(t);if(c&&a.options.tooltip.shared&&(!p||!p.noSharedTooltip)){for(n=[],o=h.length,r=0;o>r;r++)h[r].visible&&h[r].options.enableMouseTracking!==!1&&!h[r].noSharedTooltip&&h[r].singularTooltips!==!0&&h[r].tooltipPoints.length&&(i=h[r].tooltipPoints[g],i&&i.series&&(i._dist=xe(g-i.clientX),f=ve(f,i._dist),n.push(i)));for(o=n.length;o--;)n[o]._dist>f&&n.splice(o,1);n.length&&n[0].clientX!==a.hoverX&&(c.refresh(n,t),a.hoverX=n[0].clientX)}e=p&&p.tooltipOptions.followPointer,p&&p.tracker&&!e?(i=p.tooltipPoints[g],i&&i!==d&&i.onMouseOver(t)):c&&e&&!c.isHidden&&(s=c.getAnchor([{}],t),c.updatePosition({plotX:s[0],plotY:s[1]})),c&&!a._onDocumentMouseMove&&(a._onDocumentMouseMove=function(t){Ee[Oi]&&Ee[Oi].pointer.onDocumentMouseMove(t)},ui(de,"mousemove",a._onDocumentMouseMove)),hi(l.axes,function(e){e.drawCrosshair(t,u(i,d))})},reset:function(t,e){var i=this,n=i.chart,o=n.hoverSeries,r=n.hoverPoint,s=n.tooltip,a=s&&s.shared?n.hoverPoints:r;t=t&&s&&a,t&&p(a)[0].plotX===G&&(t=!1),t?(s.refresh(a),r&&r.setState(r.state,!0)):(r&&r.onMouseOut(),o&&o.onMouseOut(),s&&s.hide(e),i._onDocumentMouseMove&&(fi(de,"mousemove",i._onDocumentMouseMove),i._onDocumentMouseMove=null),hi(n.axes,function(t){t.hideCrosshair()}),i.hoverX=null)},scaleGroups:function(t,e){var i,n=this.chart;hi(n.series,function(o){i=t||o.getPlotBox(),o.xAxis&&o.xAxis.zoomEnabled&&(o.group.attr(i),o.markerGroup&&(o.markerGroup.attr(i),o.markerGroup.clip(e?n.clipRect:null)),o.dataLabelsGroup&&o.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,o=n.options.chart,r=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,h=n.plotLeft,c=n.plotTop,d=n.plotWidth,p=n.plotHeight,u=this.mouseDownX,f=this.mouseDownY,g=o.panKey&&t[o.panKey+"Key"];h>r?r=h:r>h+d&&(r=h+d),c>s?s=c:s>c+p&&(s=c+p),this.hasDragged=Math.sqrt(Math.pow(u-r,2)+Math.pow(f-s,2)),this.hasDragged>10&&(e=n.isInsidePlot(u-h,f-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!g&&(this.selectionMarker||(this.selectionMarker=n.renderer.rect(h,c,a?1:d,l?1:p,0).attr({fill:o.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&a&&(i=r-u,this.selectionMarker.attr({width:xe(i),x:(i>0?0:i)+u})),this.selectionMarker&&l&&(i=s-f,this.selectionMarker.attr({height:xe(i),y:(i>0?0:i)+f})),e&&!this.selectionMarker&&o.panning&&n.pan(t,o.panning))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var o,r={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},s=this.selectionMarker,a=s.attr?s.attr("x"):s.x,l=s.attr?s.attr("y"):s.y,h=s.attr?s.attr("width"):s.width,c=s.attr?s.attr("height"):s.height;(this.hasDragged||n)&&(hi(i.axes,function(t){if(t.zoomEnabled){var i=t.horiz,n="touchend"===e.type?t.minPixelPadding:0,s=t.toValue((i?a:l)+n),d=t.toValue((i?a+h:l+c)-n);isNaN(s)||isNaN(d)||(r[t.coll].push({axis:t,min:ve(s,d),max:ye(s,d)}),o=!0)}}),o&&gi(i,"selection",r,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(f(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Ee[Oi]&&Ee[Oi].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries;t=this.normalize(t,i),i&&n&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=Ee[Oi];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;Oi=e.index,t=this.normalize(t),t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=d(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(_e+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement,n=i&&i.point&&i.point.series;!e||e.options.stickyTracking||this.inClass(i,_e+"tooltip")||n===e||e.onMouseOut()},onContainerClick:function(e){var i=this.chart,n=i.hoverPoint,o=i.plotLeft,r=i.plotTop;e=this.normalize(e),e.cancelBubble=!0,i.cancelClick||(n&&this.inClass(e.target,_e+"tracker")?(gi(n.series,"click",t(e,{point:n})),i.hoverPoint&&n.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),i.isInsidePlot(e.chartX-o,e.chartY-r)&&gi(i,"click",e)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},ui(e,"mouseleave",t.onContainerMouseLeave),1===Ge&&ui(de,"mouseup",t.onDocumentMouseUp),Y&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Ge&&ui(de,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;fi(this.chart.container,"mouseleave",this.onContainerMouseLeave),Ge||(fi(de,"mouseup",this.onDocumentMouseUp),fi(de,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},t(ce.Pointer.prototype,{pinchTranslate:function(t,e,i,n,o,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,i,n,o,r),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,i,n,o,r)},pinchTranslateDirection:function(t,e,i,n,o,r,s,a){var l,h,c,d,p,u,f=this.chart,g=t?"x":"y",m=t?"X":"Y",y="chart"+m,v=t?"width":"height",x=f["plot"+(t?"Left":"Top")],b=a||1,k=f.inverted,w=f.bounds[t?"h":"v"],S=1===e.length,T=e[0][y],P=i[0][y],A=!S&&e[1][y],C=!S&&i[1][y],L=function(){!S&&xe(T-A)>20&&(b=a||xe(P-C)/xe(T-A)),c=(x-P)/b+T,l=f["plot"+(t?"Width":"Height")]/b};L(),h=c,h<w.min?(h=w.min,d=!0):h+l>w.max&&(h=w.max-l,d=!0),d?(P-=.8*(P-s[g][0]),S||(C-=.8*(C-s[g][1])),L()):s[g]=[P,C],k||(r[g]=c-x,r[v]=l),u=k?t?"scaleY":"scaleX":"scale"+m,p=k?1/b:b,o[v]=l,o[g]=h,n[u]=b,n["translate"+m]=p*x+(P-p*T)},pinch:function(e){var i=this,n=i.chart,o=i.pinchDown,r=i.followTouchMove,s=e.touches,a=s.length,l=i.lastValidTouch,h=i.hasZoom,c=i.selectionMarker,d={},p=1===a&&(i.inClass(e.target,_e+"tracker")&&n.runTrackerClick||i.runChartClick),f={};!h&&!r||p||e.preventDefault(),pi(s,function(t){return i.normalize(t)}),"touchstart"===e.type?(hi(s,function(t,e){o[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[o[0].chartX,o[1]&&o[1].chartX],l.y=[o[0].chartY,o[1]&&o[1].chartY],hi(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,o=t.toPixels(u(t.options.min,t.dataMin)),r=t.toPixels(u(t.options.max,t.dataMax)),s=ve(o,r),a=ye(o,r);e.min=ve(t.pos,s-i),e.max=ye(t.pos+t.len,a+i)}}),i.res=!0):o.length&&(c||(i.selectionMarker=c=t({destroy:Xe},n.plotBox)),i.pinchTranslate(o,s,d,c,f,l),i.hasPinched=h,i.scaleGroups(d,f),!h&&r&&1===a?this.runPointActions(i.normalize(e)):i.res&&(i.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(t){var e=this.chart;Oi=e.index,1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)?(this.runPointActions(t),this.pinch(t)):this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){Ee[Oi]&&Ee[Oi].pointer.drop(t)}}),pe.PointerEvent||pe.MSPointerEvent){var Ri={},Hi=!!pe.PointerEvent,Xi=function(){var t,e=[];e.item=function(t){return this[t]};for(t in Ri)Ri.hasOwnProperty(t)&&e.push({pageX:Ri[t].pageX,pageY:Ri[t].pageY,target:Ri[t].target});return e},Ei=function(t,e,i,n){var o;t=t.originalEvent||t,"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Ee[Oi]||(n(t),o=Ee[Oi].pointer,o[e]({type:i,target:t.currentTarget,preventDefault:Xe,touches:Xi()}))};t(zi.prototype,{onContainerPointerDown:function(t){Ei(t,"onContainerTouchStart","touchstart",function(t){Ri[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){Ei(t,"onContainerTouchMove","touchmove",function(t){Ri[t.pointerId]={pageX:t.pageX,pageY:t.pageY},Ri[t.pointerId].target||(Ri[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){Ei(t,"onContainerTouchEnd","touchend",function(t){delete Ri[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,Hi?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,Hi?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(de,Hi?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),x(zi.prototype,"init",function(t,e,i){t.call(this,e,i),(this.hasZoom||this.followTouchMove)&&f(e.container,{"-ms-touch-action":Ke,"touch-action":Ke})}),x(zi.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(ui)}),x(zi.prototype,"destroy",function(t){this.batchMSEvents(fi),t.call(this)})}var Gi=ce.Legend=function(t,e){this.init(t,e)};Gi.prototype={init:function(t,i){var n=this,o=i.itemStyle,r=u(i.padding,8),s=i.itemMarginTop||0;this.options=i,i.enabled&&(n.itemStyle=o,n.itemHiddenStyle=e(o,i.itemHiddenStyle),n.itemMarginTop=s,n.padding=r,n.initialItemX=r,n.initialItemY=r-5,n.maxItemWidth=0,n.chart=t,n.itemHeight=0,n.lastLineHeight=0,n.symbolWidth=u(i.symbolWidth,16),n.pages=[],n.render(),ui(n.chart,"endResize",function(){n.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n,o=this,r=o.options,s=t.legendItem,a=t.legendLine,l=t.legendSymbol,h=o.itemHiddenStyle.color,c=e?r.itemStyle.color:h,d=e?t.legendColor||t.color||"#CCC":h,p=t.options&&t.options.marker,u={fill:d};if(s&&s.css({fill:c,color:c}),a&&a.attr({stroke:d}),l){if(p&&l.isMarker){u.stroke=d,p=t.convertAttribs(p);for(i in p)n=p[i],n!==G&&(u[i]=n)}l.attr(u)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,o=!i.rtl,r=t._legendItemPos,s=r[0],a=r[1],l=t.checkbox;t.legendGroup&&t.legendGroup.translate(o?s:e.legendWidth-s-2*n-4,a),l&&(l.x=s,l.y=a)},destroyItem:function(t){var e=t.checkbox;hi(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&L(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy()),e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,hi(this.allItems,function(o){var r,s=o.checkbox;s&&(r=e+s.y+(t||0)+3,f(s,{left:i.translateX+o.checkboxOffset+s.x-20+Ze,top:r+Ze,display:r>e-6&&e+n-6>r?"":Ke}))}))},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,o=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=this.title.getBBox(),o=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:o})),this.titleHeight=o},renderItem:function(t){var i,n,o,r=this,s=r.chart,a=s.renderer,l=r.options,h="horizontal"===l.layout,c=r.symbolWidth,d=l.symbolPadding,p=r.itemStyle,f=r.itemHiddenStyle,g=r.padding,m=h?u(l.itemDistance,20):0,y=!l.rtl,v=l.width,x=l.itemMarginBottom||0,b=r.itemMarginTop,w=r.initialItemX,S=t.legendItem,T=t.series&&t.series.drawLegendSymbol?t.series:t,P=T.options,A=r.createCheckboxForItem&&P&&P.showCheckbox,C=l.useHTML;S||(t.legendGroup=a.g("legend-item").attr({zIndex:1}).add(r.scrollGroup),t.legendItem=S=a.text(l.labelFormat?k(l.labelFormat,t):l.labelFormatter.call(t),y?c+d:-d,r.baseline||0,C).css(e(t.visible?p:f)).attr({align:y?"left":"right",zIndex:2}).add(t.legendGroup),r.baseline||(r.baseline=a.fontMetrics(p.fontSize,S).f+3+b,S.attr("y",r.baseline)),T.drawLegendSymbol(r,t),r.setItemEvents&&r.setItemEvents(t,S,C,p,f),r.colorizeItem(t,t.visible),A&&r.createCheckboxForItem(t)),n=S.getBBox(),o=t.checkboxOffset=l.itemWidth||t.legendItemWidth||c+d+n.width+m+(A?20:0),r.itemHeight=i=fe(t.legendItemHeight||n.height),h&&r.itemX-w+o>(v||s.chartWidth-2*g-w-l.x)&&(r.itemX=w,r.itemY+=b+r.lastLineHeight+x,r.lastLineHeight=0),r.maxItemWidth=ye(r.maxItemWidth,o),r.lastItemY=b+r.itemY+x,r.lastLineHeight=ye(i,r.lastLineHeight),t._legendItemPos=[r.itemX,r.itemY],h?r.itemX+=o:(r.itemY+=b+i+x,r.lastLineHeight=i),r.offsetWidth=v||ye((h?r.itemX-w-m:o)+g,r.offsetWidth)},getAllItems:function(){var t=[];return hi(this.chart.series,function(e){var i=e.options;u(i.showInLegend,c(i.linkedTo)?!1:G,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},render:function(){var e,i,n,o,r=this,s=r.chart,a=s.renderer,l=r.group,h=r.box,c=r.options,d=r.padding,p=c.borderWidth,u=c.backgroundColor; r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,l||(r.group=l=a.g("legend").attr({zIndex:7}).add(),r.contentGroup=a.g().attr({zIndex:1}).add(l),r.scrollGroup=a.g().add(r.contentGroup)),r.renderTitle(),e=r.getAllItems(),T(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&e.reverse(),r.allItems=e,r.display=i=!!e.length,hi(e,function(t){r.renderItem(t)}),n=c.width||r.offsetWidth,o=r.lastItemY+r.lastLineHeight+r.titleHeight,o=r.handleOverflow(o),(p||u)&&(n+=d,o+=d,h?n>0&&o>0&&(h[h.isNew?"attr":"animate"](h.crisp({width:n,height:o})),h.isNew=!1):(r.box=h=a.rect(0,0,n,o,c.borderRadius,p||0).attr({stroke:c.borderColor,"stroke-width":p||0,fill:u||Ke}).add(l).shadow(c.shadow),h.isNew=!0),h[i?"show":"hide"]()),r.legendWidth=n,r.legendHeight=o,hi(e,function(t){r.positionItem(t)}),i&&l.align(t({width:n,height:o},c),!0,"spacingBox"),s.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,o=this.chart,r=o.renderer,s=this.options,a=s.y,l="top"===s.verticalAlign,h=o.spacingBox.height+(l?-a:a)-this.padding,c=s.maxHeight,d=this.clipRect,p=s.navigation,f=u(p.animation,!0),g=p.arrowSize||12,m=this.nav,y=this.pages,v=this.allItems;return"horizontal"===s.layout&&(h/=2),c&&(h=ve(h,c)),y.length=0,t>h&&!s.useHTML?(this.clipHeight=e=ye(h-20-this.titleHeight-this.padding,0),this.currentPage=u(this.currentPage,1),this.fullHeight=t,hi(v,function(t,n){var o=t._legendItemPos[1],r=fe(t.legendItem.getBBox().height),s=y.length;(!s||o-y[s-1]>e&&(i||o)!==y[s-1])&&(y.push(i||o),s++),n===v.length-1&&o+r-y[s-1]>e&&y.push(o),o!==i&&(i=o)}),d||(d=n.clipRect=r.clipRect(0,this.padding,9999,0),n.contentGroup.clip(d)),d.attr({height:e}),m||(this.nav=m=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,g,g).on("click",function(){n.scroll(-1,f)}).add(m),this.pager=r.text("",15,10).css(p.style).add(m),this.down=r.symbol("triangle-down",0,0,g,g).on("click",function(){n.scroll(1,f)}).add(m)),n.scroll(0),t=h):m&&(d.attr({height:o.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pages,o=n.length,r=this.currentPage+t,s=this.clipHeight,a=this.options.navigation,l=a.activeColor,h=a.inactiveColor,c=this.pager,d=this.padding;r>o&&(r=o),r>0&&(e!==G&&D(e,this.chart),this.nav.attr({translateX:d,translateY:s+this.padding+7+this.titleHeight,visibility:Ue}),this.up.attr({fill:1===r?h:l}).css({cursor:1===r?"default":"pointer"}),c.attr({text:r+"/"+o}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===o?h:l}).css({cursor:r===o?"default":"pointer"}),i=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=r,this.positionCheckboxes(i))}};var Wi=ce.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-i/2,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,o=this.options,r=o.marker,s=t.options,a=t.symbolWidth,l=this.chart.renderer,h=this.legendGroup,c=t.baseline-fe(.3*l.fontMetrics(s.itemStyle.fontSize,this.legendItem).b);o.lineWidth&&(n={"stroke-width":o.lineWidth},o.dashStyle&&(n.dashstyle=o.dashStyle),this.legendLine=l.path([$e,0,c,qe,a,c]).attr(n).add(h)),r&&r.enabled!==!1&&(e=r.radius,this.legendSymbol=i=l.symbol(this.symbol,a/2-e,c-e,2*e,2*e).add(h),i.isMarker=!0)}};(/Trident\/7\.0/.test(Te)||Me)&&x(Gi.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)}),X.prototype={init:function(t,i){var n,o=t.series;t.series=null,n=e(F,t),n.series=t.series=o,this.userOptions=t;var r=n.chart;this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var s=r.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var a,l=this;if(l.index=Ee.length,Ee.push(l),Ge++,r.reflow!==!1&&ui(l,"load",function(){l.initReflow()}),s)for(a in s)ui(l,a,s[a]);l.xAxis=[],l.yAxis=[],l.animation=ze?!1:u(r.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(t){var e,i=this,n=i.options.chart,o=t.type||n.type||n.defaultSeriesType,r=ni[o];return r||Z(17,!0),e=new r,e.init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,o=i?t:e;return!(0>n||n>this.plotWidth||0>o||o>this.plotHeight)},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&hi(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var i,n,o,r=this,s=r.axes,a=r.series,l=r.pointer,h=r.legend,c=r.isDirtyLegend,d=r.hasCartesianSeries,p=r.isDirtyBox,u=a.length,f=u,g=r.renderer,m=g.isHidden(),y=[];for(D(e,r),m&&r.cloneRenderTo(),r.layOutTitles();f--;)if(o=a[f],o.options.stacking&&(i=!0,o.isDirty)){n=!0;break}if(n)for(f=u;f--;)o=a[f],o.options.stacking&&(o.isDirty=!0);hi(a,function(t){t.isDirty&&"point"===t.options.legendType&&(c=!0)}),c&&h.options.enabled&&(h.render(),r.isDirtyLegend=!1),i&&r.getStacks(),d&&(r.isResizing||(r.maxTicks=null,hi(s,function(t){t.setScale()})),r.adjustTickAmounts()),r.getMargins(),d&&(hi(s,function(t){t.isDirty&&(p=!0)}),hi(s,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,y.push(function(){gi(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(p||i)&&e.redraw()})),p&&r.drawChartBox(),hi(a,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),l&&l.reset(!0),g.draw(),gi(r,"redraw"),m&&r.cloneRenderTo(!0),hi(y,function(t){t.call()})},get:function(t){var e,i,n,o=this,r=o.axes,s=o.series;for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<s.length;e++)if(s[e].options.id===t)return s[e];for(e=0;e<s.length;e++)for(n=s[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e,i=this,n=this.options,o=n.xAxis=p(n.xAxis||{}),r=n.yAxis=p(n.yAxis||{});hi(o,function(t,e){t.index=e,t.isX=!0}),hi(r,function(t,e){t.index=e}),t=o.concat(r),hi(t,function(t){e=new H(i,t)}),i.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return hi(this.series,function(e){t=t.concat(ci(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return ci(this.series,function(t){return t.selected})},getStacks:function(){var t=this;hi(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),hi(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+u(e.options.stack,""))})},setTitle:function(t,i,n){var o,r,s=this,a=s.options;o=a.title=e(a.title,t),r=a.subtitle=e(a.subtitle,i),hi([["title",t,o],["subtitle",i,r]],function(t){var e=t[0],i=s[e],n=t[1],o=t[2];i&&n&&(s[e]=i=i.destroy()),o&&o.text&&!i&&(s[e]=s.renderer.text(o.text,0,0,o.useHTML).attr({align:o.align,"class":_e+e,zIndex:o.zIndex||4}).css(o.style).add())}),s.layOutTitles(n)},layOutTitles:function(e){var i,n=0,o=this.title,r=this.subtitle,s=this.options,a=s.title,l=s.subtitle,h=this.renderer,c=this.spacingBox.width-44;o&&(o.css({width:(a.width||c)+Ze}).align(t({y:h.fontMetrics(a.style.fontSize,o).b-3},a),!1,"spacingBox"),a.floating||a.verticalAlign||(n=o.getBBox().height)),r&&(r.css({width:(l.width||c)+Ze}).align(t({y:n+(a.margin-13)+h.fontMetrics(a.style.fontSize,r).b},l),!1,"spacingBox"),l.floating||l.verticalAlign||(n=me(n+r.getBBox().height))),i=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&i&&(this.isDirtyBox=i,this.hasRendered&&u(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this,e=t.options.chart,i=e.width,n=e.height,o=t.renderToClone||t.renderTo;c(i)||(t.containerWidth=si(o,"width")),c(n)||(t.containerHeight=si(o,"height")),t.chartWidth=ye(0,i||t.containerWidth||600),t.chartHeight=ye(0,u(n,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),L(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),f(e,{position:Fe,top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),de.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,o,r,s,a,l,h=this,c=h.options.chart,p="data-highcharts-chart";h.renderTo=s=c.renderTo,l=_e+He++,n(s)&&(h.renderTo=s=de.getElementById(s)),s||Z(13,!0),a=i(d(s,p)),!isNaN(a)&&Ee[a]&&Ee[a].hasRendered&&Ee[a].destroy(),d(s,p,h.index),s.innerHTML="",c.skipClone||s.offsetWidth||h.cloneRenderTo(),h.getChartSize(),o=h.chartWidth,r=h.chartHeight,h.container=e=g(Ne,{className:_e+"container"+(c.className?" "+c.className:""),id:l},t({position:je,overflow:Ve,width:o+Ze,height:r+Ze,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},c.style),h.renderToClone||s),h._cursor=e.style.cursor,h.renderer=c.forExport?new Ai(e,o,r,c.style,!0):new W(e,o,r,c.style),ze&&h.renderer.create(h,e,o,r)},getMargins:function(){var t,e=this,i=e.spacing,n=e.legend,o=e.margin,r=e.options.legend,s=u(r.margin,20),a=r.x,l=r.y,h=r.align,d=r.verticalAlign,p=e.titleOffset;e.resetMargins(),t=e.axisOffset,p&&!c(o[0])&&(e.plotTop=ye(e.plotTop,p+e.options.title.margin+i[0])),n.display&&!r.floating&&("right"===h?c(o[1])||(e.marginRight=ye(e.marginRight,n.legendWidth-a+s+i[1])):"left"===h?c(o[3])||(e.plotLeft=ye(e.plotLeft,n.legendWidth+a+s+i[3])):"top"===d?c(o[0])||(e.plotTop=ye(e.plotTop,n.legendHeight+l+s+i[0])):"bottom"===d&&(c(o[2])||(e.marginBottom=ye(e.marginBottom,n.legendHeight-l+s+i[2])))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&hi(e.axes,function(t){t.getOffset()}),c(o[3])||(e.plotLeft+=t[3]),c(o[0])||(e.plotTop+=t[0]),c(o[2])||(e.marginBottom+=t[2]),c(o[1])||(e.marginRight+=t[1]),e.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,o=i.width||si(n,"width"),r=i.height||si(n,"height"),s=t?t.target:pe,a=function(){e.container&&(e.setSize(o,r,!1),e.hasUserSize=null)};e.hasUserSize||!o||!r||s!==pe&&s!==de||((o!==e.containerWidth||r!==e.containerHeight)&&(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(a,100):a()),e.containerWidth=o,e.containerHeight=r)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};ui(pe,"resize",e),ui(t,"destroy",function(){fi(pe,"resize",e)})},setSize:function(t,e,i){var n,o,r,s=this;s.isResizing+=1,r=function(){s&&gi(s,"endResize",null,function(){s.isResizing-=1})},D(i,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,c(t)&&(s.chartWidth=n=ye(0,fe(t)),s.hasUserSize=!!n),c(e)&&(s.chartHeight=o=ye(0,fe(e))),(V?yi:f)(s.container,{width:n+Ze,height:o+Ze},V),s.setChartSize(!0),s.renderer.setSize(n,o,i),s.maxTicks=null,hi(s.axes,function(t){t.isDirty=!0,t.setScale()}),hi(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(i),s.oldChartHeight=null,gi(s,"resize"),V===!1?r():setTimeout(r,V&&V.duration||500)},setChartSize:function(t){var e,i,n,o,r,s,a,l=this,h=l.inverted,c=l.renderer,d=l.chartWidth,p=l.chartHeight,u=l.options.chart,f=l.spacing,g=l.clipOffset;l.plotLeft=n=fe(l.plotLeft),l.plotTop=o=fe(l.plotTop),l.plotWidth=r=ye(0,fe(d-n-l.marginRight)),l.plotHeight=s=ye(0,fe(p-o-l.marginBottom)),l.plotSizeX=h?s:r,l.plotSizeY=h?r:s,l.plotBorderWidth=u.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:f[3],y:f[0],width:d-f[3]-f[1],height:p-f[0]-f[2]},l.plotBox=c.plotBox={x:n,y:o,width:r,height:s},a=2*ge(l.plotBorderWidth/2),e=me(ye(a,g[3])/2),i=me(ye(a,g[0])/2),l.clipBox={x:e,y:i,width:ge(l.plotSizeX-ye(a,g[1])/2-e),height:ye(0,ge(l.plotSizeY-ye(a,g[2])/2-i))},t||hi(l.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this,e=t.spacing,i=t.margin;t.plotTop=u(i[0],e[0]),t.marginRight=u(i[1],e[1]),t.marginBottom=u(i[2],e[2]),t.plotLeft=u(i[3],e[3]),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,o=i.renderer,r=i.chartWidth,s=i.chartHeight,a=i.chartBackground,l=i.plotBackground,h=i.plotBorder,c=i.plotBGImage,d=n.borderWidth||0,p=n.backgroundColor,u=n.plotBackgroundColor,f=n.plotBackgroundImage,g=n.plotBorderWidth||0,m=i.plotLeft,y=i.plotTop,v=i.plotWidth,x=i.plotHeight,b=i.plotBox,k=i.clipRect,w=i.clipBox;t=d+(n.shadow?8:0),(d||p)&&(a?a.animate(a.crisp({width:r-t,height:s-t})):(e={fill:p||Ke},d&&(e.stroke=n.borderColor,e["stroke-width"]=d),i.chartBackground=o.rect(t/2,t/2,r-t,s-t,n.borderRadius,d).attr(e).addClass(_e+"background").add().shadow(n.shadow))),u&&(l?l.animate(b):i.plotBackground=o.rect(m,y,v,x,0).attr({fill:u}).add().shadow(n.plotShadow)),f&&(c?c.animate(b):i.plotBGImage=o.image(f,m,y,v,x).add()),k?k.animate({width:w.width,height:w.height}):i.clipRect=o.clipRect(w),g&&(h?h.animate(h.crisp({x:m,y:y,width:v,height:x,strokeWidth:-g})):i.plotBorder=o.rect(m,y,v,x,0,-g).attr({stroke:n.plotBorderColor,"stroke-width":g,fill:Ke,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,o=n.options.chart,r=n.options.series;hi(["inverted","angular","polar"],function(s){for(t=ni[o.type||o.defaultSeriesType],i=n[s]||o[s]||t&&t.prototype[s],e=r&&r.length;!i&&e--;)t=ni[r[e].type],t&&t.prototype[s]&&(i=!0);n[s]=i})},linkSeries:function(){var t=this,e=t.series;hi(e,function(t){t.linkedSeries.length=0}),hi(e,function(e){var i=e.options.linkedTo;n(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i),i&&(i.linkedSeries.push(e),e.linkedParent=i))})},renderSeries:function(){hi(this.series,function(t){t.translate(),t.setTooltipPoints&&t.setTooltipPoints(),t.render()})},renderLabels:function(){var e=this,n=e.options.labels;n.items&&hi(n.items,function(o){var r=t(n.style,o.style),s=i(r.left)+e.plotLeft,a=i(r.top)+e.plotTop+12;delete r.left,delete r.top,e.renderer.text(o.html,s,a).attr({zIndex:2}).css(r).add()})},render:function(){var t=this,e=t.axes,i=t.renderer,n=t.options;t.setTitle(),t.legend=new Gi(t,n.legend),t.getStacks(),hi(e,function(t){t.setScale()}),t.getMargins(),t.maxTicks=null,hi(e,function(t){t.setTickPositions(!0),t.setMaxTicks()}),t.adjustTickAmounts(),t.getMargins(),t.drawChartBox(),t.hasCartesianSeries&&hi(e,function(t){t.render()}),t.seriesGroup||(t.seriesGroup=i.g("series-group").attr({zIndex:3}).add()),t.renderSeries(),t.renderLabels(),t.showCredits(n.credits),t.hasRendered=!0},showCredits:function(t){t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text,0,0).on("click",function(){t.href&&(location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position))},destroy:function(){var t,e=this,i=e.axes,n=e.series,o=e.container,r=o&&o.parentNode;for(gi(e,"destroy"),Ee[e.index]=G,Ge--,e.renderTo.removeAttribute("data-highcharts-chart"),fi(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();hi(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),o&&(o.innerHTML="",fi(o),r&&L(o));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!Be&&pe==pe.top&&"complete"!==de.readyState||ze&&!pe.canvg?(ze?Ii.push(function(){t.firstRender()},t.options.global.canvasToolsURL):de.attachEvent("onreadystatechange",function(){de.detachEvent("onreadystatechange",t.firstRender),"complete"===de.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),gi(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),hi(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),gi(t,"beforeRender"),ce.Pointer&&(t.pointer=new zi(t,e)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),hi(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),gi(t,"load"))},splashArray:function(t,e){var i=e[t],n=o(i)?i:[i,i,i,i];return[u(e[t+"Top"],n[0]),u(e[t+"Right"],n[1]),u(e[t+"Bottom"],n[2]),u(e[t+"Left"],n[3])]}},X.prototype.callbacks=[];var Yi=ce.CenteredSeriesMixin={getCenter:function(){var t,e,n=this.options,o=this.chart,r=2*(n.slicedOffset||0),s=o.plotWidth-2*r,a=o.plotHeight-2*r,l=n.center,h=[u(l[0],"50%"),u(l[1],"50%"),n.size||"100%",n.innerSize||0],c=ve(s,a);return pi(h,function(n,o){return e=/%$/.test(n),t=2>o||2===o&&e,(e?[s,a,c,c][o]*i(n)/100:n)+(t?r:0)})}},Ni=function(){};Ni.prototype={init:function(t,e,i){var n,o=this;return o.series=t,o.applyOptions(e,i),o.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,o.color=o.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,o},applyOptions:function(e,i){var n=this,o=n.series,r=o.options.pointValKey||o.pointValKey;return e=Ni.prototype.optionsToObject.call(this,e),t(n,e),n.options=n.options?t(n.options,e):e,r&&(n.y=n[r]),n.x===G&&o&&(n.x=i===G?o.autoIncrement():i),n},optionsToObject:function(t){var e,i={},n=this.series,o=n.pointArrayMap||["y"],s=o.length,a=0,l=0;if("number"==typeof t||null===t)i[o[0]]=t;else if(r(t))for(t.length>s&&(e=typeof t[0],"string"===e?i.name=t[0]:"number"===e&&(i.x=t[0]),a++);s>l;)i[o[l++]]=t[a++];else"object"==typeof t&&(i=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var t,e=this,i=e.series,n=i.chart,o=n.hoverPoints;n.pointCount--,o&&(e.setState(),h(o,e),o.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),(e.graphic||e.dataLabel)&&(fi(e),e.destroyElements()),e.legendItem&&n.legend.destroyItem(e);for(t in e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)t=i[n],e[t]&&(e[t]=e[t].destroy())},getLabelConfig:function(){var t=this;return{x:t.category,y:t.y,key:t.name||t.category,series:t.series,point:t,percentage:t.percentage,total:t.total||t.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=u(i.valueDecimals,""),o=i.valuePrefix||"",r=i.valueSuffix||"";return hi(e.pointArrayMap||["y"],function(e){e="{point."+e,(o||r)&&(t=t.replace(e+"}",o+e+"}"+r)),t=t.replace(e+"}",e+":,."+n+"f}")}),k(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,o=this.series,r=o.options;(r.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),gi(this,t,e,i)}};var Fi=function(){};Fi.prototype={isCartesian:!0,type:"line",pointClass:Ni,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,i){var n,o,r=this,s=e.series,a=function(t,e){return u(t.options.index,t._i)-u(e.options.index,e._i)};r.chart=e,r.options=i=r.setOptions(i),r.linkedSeries=[],r.bindAxes(),t(r,{name:i.name,state:Qe,pointAttr:{},visible:i.visible!==!1,selected:i.selected===!0}),ze&&(i.animation=!1),o=i.events;for(n in o)ui(r,n,o[n]);(o&&o.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),r.getColor(),r.getSymbol(),hi(r.parallelArrays,function(t){r[t+"Data"]=[]}),r.setData(i.data,!1),r.isCartesian&&(e.hasCartesianSeries=!0),s.push(r),r._i=s.length-1,T(s,a),this.yAxis&&T(this.yAxis.series,a),hi(s,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;hi(e.axisTypes||[],function(o){hi(n[o],function(n){t=n.options,(i[o]===t.index||i[o]!==G&&i[o]===t.id||i[o]===G&&0===t.index)&&(n.series.push(e),e[o]=n,n.isDirty=!0)}),e[o]||e.optionalAxis===o||Z(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,o="number"==typeof e?function(n){var o="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=o}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};hi(i.parallelArrays,o)},autoIncrement:function(){var t=this,e=t.options,i=t.xIncrement;return i=u(i,e.pointStart,0),t.pointInterval=u(t.pointInterval,e.pointInterval,1),t.xIncrement=i+t.pointInterval,i},getSegments:function(){var t,e=this,i=-1,n=[],o=e.points,r=o.length;if(r)if(e.options.connectNulls){for(t=r;t--;)null===o[t].y&&o.splice(t,1);o.length&&(n=[o])}else hi(o,function(t,e){null===t.y?(e>i+1&&n.push(o.slice(i+1,e)),i=e):e===r-1&&n.push(o.slice(i+1,e+1))});e.segments=n},setOptions:function(t){var i,n=this.chart,o=n.options,r=o.plotOptions,s=n.userOptions||{},a=s.plotOptions||{},l=r[this.type];return this.userOptions=t,i=e(l,r.series,t),this.tooltipOptions=e(F.tooltip,F.plotOptions[this.type].tooltip,s.tooltip,a.series&&a.series.tooltip,a[this.type]&&a[this.type].tooltip,t.tooltip),null===l.marker&&delete i.marker,i},getCyclic:function(t,e,i){var n,o=this.userOptions,r="_"+t+"Index",s=t+"Counter";e||(c(o[r])?n=o[r]:(o[r]=n=this.chart[s]%i.length,this.chart[s]+=1),e=i[n]),this[t]=e},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||bi[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:Wi.drawLineMarker,setData:function(t,e,i,o){var a,l,h,c=this,d=c.points,p=d&&d.length||0,f=c.options,g=c.chart,m=null,y=c.xAxis,v=y&&!!y.categories,x=c.tooltipPoints,b=f.turboThreshold,k=this.xData,w=this.yData,S=c.pointArrayMap,T=S&&S.length;if(t=t||[],a=t.length,e=u(e,!0),o===!1||!a||p!==a||c.cropped||c.hasGroupedData){if(c.xIncrement=null,c.pointRange=v?1:f.pointRange,c.colorCounter=0,hi(this.parallelArrays,function(t){c[t+"Data"].length=0}),b&&a>b){for(l=0;null===m&&a>l;)m=t[l],l++;if(s(m)){var P=u(f.pointStart,0),A=u(f.pointInterval,1);for(l=0;a>l;l++)k[l]=P,w[l]=t[l],P+=A;c.xIncrement=P}else if(r(m))if(T)for(l=0;a>l;l++)h=t[l],k[l]=h[0],w[l]=h.slice(1,T+1);else for(l=0;a>l;l++)h=t[l],k[l]=h[0],w[l]=h[1];else Z(12)}else for(l=0;a>l;l++)t[l]!==G&&(h={series:c},c.pointClass.prototype.applyOptions.apply(h,[t[l]]),c.updateParallelArrays(h,l),v&&h.name&&(y.names[h.x]=h.name));for(n(w[0])&&Z(14,!0),c.data=[],c.options.data=t,l=p;l--;)d[l]&&d[l].destroy&&d[l].destroy();x&&(x.length=0),y&&(y.minRange=y.userMinRange),c.isDirty=c.isDirtyData=g.isDirtyBox=!0,i=!1}else hi(t,function(t,e){d[e].update(t,!1,null,!1)});e&&g.redraw(i)},processData:function(t){var e,i,n,o,r,s,a,l,h=this,c=h.xData,d=h.yData,p=c.length,u=0,f=h.xAxis,g=h.options,m=g.cropThreshold,y=0,v=h.isCartesian;if(v&&!h.isDirty&&!f.isDirty&&!h.yAxis.isDirty&&!t)return!1;for(f&&(s=f.getExtremes(),a=s.min,l=s.max),v&&h.sorted&&(!m||p>m||h.forceCrop)&&(c[p-1]<a||c[0]>l?(c=[],d=[]):(c[0]<a||c[p-1]>l)&&(e=this.cropData(h.xData,h.yData,a,l),c=e.xData,d=e.yData,u=e.start,i=!0,y=c.length)),r=c.length-1;r>=0;r--)n=c[r]-c[r-1],!i&&c[r]>a&&c[r]<l&&y++,n>0&&(o===G||o>n)?o=n:0>n&&h.requireSorting&&Z(15);h.cropped=i,h.cropStart=u,h.processedXData=c,h.processedYData=d,h.activePointCount=y,null===g.pointRange&&(h.pointRange=o||1),h.closestPointRange=o},cropData:function(t,e,i,n){var o,r=t.length,s=0,a=r,l=u(this.cropShoulder,1);for(o=0;r>o;o++)if(t[o]>=i){s=ye(0,o-l);break}for(;r>o;o++)if(t[o]>n){a=o+l;break}return{xData:t.slice(s,a),yData:e.slice(s,a),start:s,end:a}},generatePoints:function(){var t,e,i,n,o=this,r=o.options,s=r.data,a=o.data,l=o.processedXData,h=o.processedYData,c=o.pointClass,d=l.length,u=o.cropStart||0,f=o.hasGroupedData,g=[];if(!a&&!f){var m=[];m.length=s.length,a=o.data=m}for(n=0;d>n;n++)e=u+n,f?g[n]=(new c).init(o,[l[n]].concat(p(h[n]))):(a[e]?i=a[e]:s[e]!==G&&(a[e]=i=(new c).init(o,s[e],l[n])),g[n]=i),g[n].index=e;if(a&&(d!==(t=a.length)||f))for(n=0;t>n;n++)n!==u||f||(n+=d),a[n]&&(a[n].destroyElements(),a[n].plotX=G);o.data=a,o.points=g},getExtremes:function(t){var e,i,n,o,r,s,a,l,h,c=this.xAxis,d=this.yAxis,p=this.processedXData,f=[],g=0,m=c.getExtremes(),y=m.min,v=m.max;for(t=t||this.stackedYData||this.processedYData,e=t.length,l=0;e>l;l++)if(s=p[l],a=t[l],i=null!==a&&a!==G&&(!d.isLog||a.length||a>0),n=this.getExtremesFromAll||this.cropped||(p[l+1]||s)>=y&&(p[l-1]||s)<=v,i&&n)if(h=a.length)for(;h--;)null!==a[h]&&(f[g++]=a[h]);else f[g++]=a;this.dataMin=u(o,P(f)),this.dataMax=u(r,A(f))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e=this,i=e.options,n=i.stacking,o=e.xAxis,r=o.categories,a=e.yAxis,l=e.points,h=l.length,d=!!e.modifyValue,p=i.pointPlacement,f="between"===p||s(p),g=i.threshold;for(t=0;h>t;t++){var m,y,v=l[t],x=v.x,b=v.y,k=v.low,w=n&&a.stacks[(e.negStacks&&g>b?"-":"")+e.stackKey];a.isLog&&0>=b&&(v.y=b=null,Z(10)),v.plotX=o.translate(x,0,0,0,1,p,"flags"===this.type),n&&e.visible&&w&&w[x]&&(m=w[x],y=m.points[e.index+","+t],k=y[0],b=y[1],0===k&&(k=u(g,a.min)),a.isLog&&0>=k&&(k=null),v.total=v.stackTotal=m.total,v.percentage=m.total&&v.y/m.total*100,v.stackY=b,m.setOffset(e.pointXOffset||0,e.barW||0)),v.yBottom=c(k)?a.translate(k,0,1,0,1):null,d&&(b=e.modifyValue(b,v)),v.plotY="number"==typeof b&&1/0!==b?a.translate(b,0,1,0,1):G,v.clientX=f?o.translate(x,0,0,0,1):v.plotX,v.negative=v.y<(g||0),v.category=r&&r[v.x]!==G?r[v.x]:v.x}e.getSegments()},animate:function(e){var i,n,r,s=this,a=s.chart,l=a.renderer,h=s.options.animation,c=s.clipBox||a.clipBox,d=a.inverted;h&&!o(h)&&(h=bi[s.type].animation),r=["_sharedClip",h.duration,h.easing,c.height].join(","),e?(i=a[r],n=a[r+"m"],i||(a[r]=i=l.clipRect(t(c,{width:0})),a[r+"m"]=n=l.clipRect(-99,d?-a.plotLeft:-a.plotTop,99,d?a.chartWidth:a.chartHeight)),s.group.clip(i),s.markerGroup.clip(n),s.sharedClipKey=r):(i=a[r],i&&i.animate({width:a.plotSizeX},h),a[r+"m"]&&a[r+"m"].animate({width:a.plotSizeX+99},h),s.animate=null)},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group,n=this.clipBox;i&&this.options.clip!==!1&&(e&&n||i.clip(n?t.renderer.clipRect(n):t.clipRect),this.markerGroup.clip()),gi(this,"afterAnimate"),setTimeout(function(){e&&t[e]&&(n||(t[e]=t[e].destroy()),t[e+"m"]&&(t[e+"m"]=t[e+"m"].destroy()))},100)},drawPoints:function(){var e,i,n,o,r,s,a,l,h,c,d,p,f,g=this,m=g.points,y=g.chart,v=g.options,x=v.marker,b=g.pointAttr[""],k=g.markerGroup,w=u(x.enabled,!g.requireSorting||g.activePointCount<.5*g.xAxis.len/x.radius);if(x.enabled!==!1||g._hasPointMarkers)for(o=m.length;o--;)r=m[o],i=ge(r.plotX),n=r.plotY,h=r.graphic,c=r.marker||{},d=!!r.marker,p=w&&c.enabled===G||c.enabled,f=y.isInsidePlot(fe(i),n,y.inverted),p&&n!==G&&!isNaN(n)&&null!==r.y?(e=r.pointAttr[r.selected?ei:Qe]||b,s=e.r,a=u(c.symbol,g.symbol),l=0===a.indexOf("url"),h?h[f?"show":"hide"](!0).animate(t({x:i-s,y:n-s},h.symbolName?{width:2*s,height:2*s}:{})):f&&(s>0||l)&&(r.graphic=h=y.renderer.symbol(a,i-s,n-s,2*s,2*s,d?c:x).attr(e).add(k))):h&&(r.graphic=h.destroy())},convertAttribs:function(t,e,i,n){var o,r,s=this.pointAttrToOptions,a={};t=t||{},e=e||{},i=i||{},n=n||{};for(o in s)r=s[o],a[o]=u(t[r],e[o],i[o],n[o]);return a},getAttribs:function(){var e,i,n,o,r,s,a=this,l=a.options,h=bi[a.type].marker?l.marker:l,d=h.states,p=d[ti],u=a.color,f={stroke:u,fill:u},g=a.points||[],m=[],y=a.pointAttrToOptions,v=a.hasPointSpecificOptions,x=l.negativeColor,b=h.lineColor,k=h.fillColor,w=l.turboThreshold;if(l.marker?(p.radius=p.radius||h.radius+p.radiusPlus,p.lineWidth=p.lineWidth||h.lineWidth+p.lineWidthPlus):p.color=p.color||Pi(p.color||u).brighten(p.brightness).get(),m[Qe]=a.convertAttribs(h,f),hi([ti,ei],function(t){m[t]=a.convertAttribs(d[t],m[Qe])}),a.pointAttr=m,i=g.length,!w||w>i||v)for(;i--;){if(n=g[i],h=n.options&&n.options.marker||n.options,h&&h.enabled===!1&&(h.radius=0),n.negative&&x&&(n.color=n.fillColor=x),v=l.colorByPoint||n.color,n.options)for(s in y)c(h[y[s]])&&(v=!0);v?(h=h||{},o=[],d=h.states||{},e=d[ti]=d[ti]||{},l.marker||(e.color=e.color||!n.options.color&&p.color||Pi(n.color).brighten(e.brightness||p.brightness).get()),r={color:n.color},k||(r.fillColor=n.color),b||(r.lineColor=n.color),o[Qe]=a.convertAttribs(t(r,h),m[Qe]),o[ti]=a.convertAttribs(d[ti],m[ti],o[Qe]),o[ei]=a.convertAttribs(d[ei],m[ei],o[Qe])):o=m,n.pointAttr=o}},destroy:function(){var t,e,i,n,o,r=this,s=r.chart,a=/AppleWebKit\/533/.test(Te),l=r.data||[];for(gi(r,"destroy"),fi(r),hi(r.axisTypes||[],function(t){o=r[t],o&&(h(o.series,r),o.isDirty=o.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),e=l.length;e--;)i=l[e],i&&i.destroy&&i.destroy();r.points=null,clearTimeout(r.animationTimeout),hi(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(e){r[e]&&(t=a&&"group"===e?"hide":"destroy",r[e][t]())}),s.hoverSeries===r&&(s.hoverSeries=null),h(s.series,r);for(n in r)delete r[n]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return hi(t,function(o,r){var s,a=o.plotX,l=o.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,o,r)):(i.push(r?qe:$e),n&&r&&(s=t[r-1],"right"===n?i.push(s.plotX,l):"center"===n?i.push((s.plotX+a)/2,s.plotY,(s.plotX+a)/2,l):i.push(a,s.plotY)),i.push(o.plotX,o.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return hi(e.segments,function(o){t=e.getSegmentPath(o),o.length>1?i=i.concat(t):n.push(o[0])}),e.singlePoints=n,e.graphPath=i,i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,o=e.dashStyle,r="square"!==e.linecap,s=this.getGraphPath(),a=e.negativeColor;a&&i.push(["graphNeg",a]),hi(i,function(i,a){var l,h=i[0],c=t[h];c?(vi(c),c.animate({d:s})):n&&s.length&&(l={stroke:i[1],"stroke-width":n,fill:Ke,zIndex:1},o?l.dashstyle=o:r&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[h]=t.chart.renderer.path(s).attr(l).add(t.group).shadow(!a&&e.shadow))})},clipNeg:function(){var t,e,i,n,o,r=this.options,s=this.chart,a=s.renderer,l=r.negativeColor||r.negativeFillColor,h=this.graph,c=this.area,d=this.posClip,p=this.negClip,u=s.chartWidth,f=s.chartHeight,g=ye(u,f),m=this.yAxis;l&&(h||c)&&(t=fe(m.toPixels(r.threshold||0,!0)),0>t&&(g-=t),n={x:0,y:0,width:g,height:t},o={x:0,y:t,width:g,height:g},s.inverted&&(n.height=o.y=s.plotWidth-t,a.isVML&&(n={x:s.plotWidth-t-s.plotLeft,y:0,width:u,height:f},o={x:t+s.plotLeft-u,y:0,width:s.plotLeft+t,height:u})),m.reversed?(e=o,i=n):(e=n,i=o),d?(d.animate(e),p.animate(i)):(this.posClip=d=a.clipRect(e),this.negClip=p=a.clipRect(i),h&&this.graphNeg&&(h.clip(d),this.graphNeg.clip(p)),c&&(c.clip(d),this.areaNeg.clip(p))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};hi(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(ui(i,"resize",t),ui(e,"destroy",function(){fi(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,o){var r=this[t],s=!r;return s&&(this[t]=r=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(o)),r[s?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,o=n.animation,r=o&&!!e.animate&&i.renderer.isSVG&&u(o.duration,500)||0,s=e.visible?Ue:Ve,a=n.zIndex,l=e.hasRendered,h=i.seriesGroup;t=e.plotGroup("group","series",s,a,h),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,h),r&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),hi(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip===!1||e.sharedClipKey||l||t.clip(i.clipRect),r&&e.animate(),l||(r?e.animationTimeout=setTimeout(function(){e.afterAnimate()},r):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirtyData,n=t.group,o=t.xAxis,r=t.yAxis; n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:u(o&&o.left,e.plotLeft),translateY:u(r&&r.top,e.plotTop)})),t.translate(),t.setTooltipPoints&&t.setTooltipPoints(!0),t.render(),i&&gi(t,"updatedData")}},E.prototype={destroy:function(){C(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?k(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:Ve}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:Ve}).add(t)},setOffset:function(t,e){var i,n=this,o=n.axis,r=o.chart,s=r.inverted,a=this.isNegative,l=o.translate(o.usePercentage?100:this.total,0,0,0,1),h=o.translate(0),c=xe(l-h),d=r.xAxis[0].translate(this.x)+t,p=r.plotHeight,u={x:s?a?l:l-c:d,y:s?p-d-e:a?p-l-c:p-l,width:s?c:e,height:s?e:c},f=this.label;f&&(f.align(this.alignOptions,null,u),i=f.alignAttr,f[this.options.crop===!1||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0))}},H.prototype.buildStacks=function(){var t=this.series,e=u(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)t[e?i:t.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<t.length;i++)t[i].setPercentStacks()}},H.prototype.renderStackTotals=function(){var t,e,i,n=this,o=n.chart,r=o.renderer,s=n.stacks,a=n.stackTotalGroup;a||(n.stackTotalGroup=a=r.g("stack-labels").attr({visibility:Ue,zIndex:6}).add()),a.translate(o.plotLeft,o.plotTop);for(t in s){e=s[t];for(i in e)e[i].render(a)}},Fi.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,i,n,o,r,s,a,l=this,h=l.processedXData,c=l.processedYData,d=[],p=c.length,u=l.options,f=u.threshold,g=u.stack,m=u.stacking,y=l.stackKey,v="-"+y,x=l.negStacks,b=l.yAxis,k=b.stacks,w=b.oldStacks;for(r=0;p>r;r++)s=h[r],a=c[r],o=l.index+","+r,t=x&&f>a,n=t?v:y,k[n]||(k[n]={}),k[n][s]||(w[n]&&w[n][s]?(k[n][s]=w[n][s],k[n][s].total=null):k[n][s]=new E(b,b.options.stackLabels,t,s,g)),e=k[n][s],e.points[o]=[e.cum||0],"percent"===m?(i=t?y:v,x&&k[i]&&k[i][s]?(i=k[i][s],e.total=i.total=ye(i.total,e.total)+xe(a)||0):e.total=M(e.total+(xe(a)||0))):e.total=M(e.total+(a||0)),e.cum=(e.cum||0)+(a||0),e.points[o].push(e.cum),d[r]=e.cum;"percent"===m&&(b.usePercentage=!0),this.stackedYData=d,b.oldStacks={}}},Fi.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,i=t.yAxis.stacks,n=t.processedXData;hi([e,"-"+e],function(e){for(var o,r,s,a,l=n.length;l--;)o=n[l],r=i[e]&&i[e][o],s=r&&r.points[t.index+","+l],s&&(a=r.total?100/r.total:0,s[0]=M(s[0]*a),s[1]=M(s[1]*a),t.stackedYData[l]=s[1])})},t(X.prototype,{addSeries:function(t,e,i){var n,o=this;return t&&(e=u(e,!0),gi(o,"addSeries",{options:t},function(){n=o.initSeries(t),o.isDirtyLegend=!0,o.linkSeries(),e&&o.redraw(i)})),n},addAxis:function(t,i,n,o){var r,s=i?"xAxis":"yAxis",a=this.options;r=new H(this,e(t,{index:this[s].length,isX:i})),a[s]=p(a[s]||{}),a[s].push(t),u(n,!0)&&this.redraw(o)},showLoading:function(e){var i=this,n=i.options,o=i.loadingDiv,r=n.loading,s=function(){o&&f(o,{left:i.plotLeft+Ze,top:i.plotTop+Ze,width:i.plotWidth+Ze,height:i.plotHeight+Ze})};o||(i.loadingDiv=o=g(Ne,{className:_e+"loading"},t(r.style,{zIndex:10,display:Ke}),i.container),i.loadingSpan=g("span",null,r.labelStyle,o),ui(i,"redraw",s)),i.loadingSpan.innerHTML=e||n.lang.loading,i.loadingShown||(f(o,{opacity:0,display:""}),yi(o,{opacity:r.style.opacity},{duration:r.showDuration||0}),i.loadingShown=!0),s()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&yi(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){f(e,{display:Ke})}}),this.loadingShown=!1}}),t(Ni.prototype,{update:function(t,e,i,n){function s(){l.applyOptions(t),o(t)&&!r(t)&&(l.redraw=function(){c&&(t&&t.marker&&t.marker.symbol?l.graphic=c.destroy():c.attr(l.pointAttr[l.state||""])),t&&t.dataLabels&&l.dataLabel&&(l.dataLabel=l.dataLabel.destroy()),l.redraw=null}),a=l.index,h.updateParallelArrays(l,a),p.data[a]=l.options,h.isDirty=h.isDirtyData=!0,!h.fixedBox&&h.hasCartesianSeries&&(d.isDirtyBox=!0),"point"===p.legendType&&d.legend.destroyItem(l),e&&d.redraw(i)}var a,l=this,h=l.series,c=l.graphic,d=h.chart,p=h.options;e=u(e,!0),n===!1?s():l.firePointEvent("update",{options:t},s)},remove:function(t,e){var i,n=this,o=n.series,r=o.points,s=o.chart,a=o.data;D(e,s),t=u(t,!0),n.firePointEvent("remove",null,function(){i=li(n,a),a.length===r.length&&r.splice(i,1),a.splice(i,1),o.options.data.splice(i,1),o.updateParallelArrays(n,"splice",i,1),n.destroy(),o.isDirty=!0,o.isDirtyData=!0,t&&s.redraw()})}}),t(Fi.prototype,{addPoint:function(t,e,i,n){var o,r,s,a,l=this,h=l.options,c=l.data,d=l.graph,p=l.area,f=l.chart,g=l.xAxis&&l.xAxis.names,m=d&&d.shift||0,y=h.data,v=l.xData;if(D(n,f),i&&hi([d,p,l.graphNeg,l.areaNeg],function(t){t&&(t.shift=m+1)}),p&&(p.isArea=!0),e=u(e,!0),o={series:l},l.pointClass.prototype.applyOptions.apply(o,[t]),s=o.x,a=v.length,l.requireSorting&&s<v[a-1])for(r=!0;a&&v[a-1]>s;)a--;l.updateParallelArrays(o,"splice",a,0,0),l.updateParallelArrays(o,a),g&&o.name&&(g[s]=o.name),y.splice(a,0,t),r&&(l.data.splice(a,0,null),l.processData()),"point"===h.legendType&&l.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(o,"shift"),y.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),f.redraw())},remove:function(t,e){var i=this,n=i.chart;t=u(t,!0),i.isRemoving||(i.isRemoving=!0,gi(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)})),i.isRemoving=!1},update:function(i,n){var o,r=this,s=this.chart,a=this.userOptions,l=this.type,h=ni[l].prototype,c=["group","markerGroup","dataLabelsGroup"];hi(c,function(t){c[t]=r[t],delete r[t]}),i=e(a,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},i),this.remove(!1);for(o in h)h.hasOwnProperty(o)&&(this[o]=G);t(this,ni[i.type||l].prototype),hi(c,function(t){r[t]=c[t]}),this.init(s,i),s.linkSeries(),u(n,!0)&&s.redraw(!1)}}),t(H.prototype,{update:function(i,n){var o=this.chart;i=o.options[this.coll][this.options.index]=e(this.userOptions,i),this.destroy(!0),this._addedPlotLB=G,this.init(o,t(i,{events:G})),o.isDirtyBox=!0,u(n,!0)&&o.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,o=n.length;o--;)n[o]&&n[o].remove(!1);h(e.axes,this),h(e[i],this),e.options[i].splice(this.options.index,1),hi(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,u(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var ji=m(Fi);ni.line=ji,bi.area=e(ki,{threshold:0});var Vi=m(Fi,{type:"area",getSegments:function(){var t,e,i,n,o=this,r=[],s=[],a=[],l=this.xAxis,h=this.yAxis,c=h.stacks[this.stackKey],d={},p=this.points,u=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(i=0;i<p.length;i++)d[p[i].x]=p[i];for(n in c)null!==c[n].total&&a.push(+n);a.sort(function(t,e){return t-e}),hi(a,function(n){var r,a=0;if(!u||d[n]&&null!==d[n].y)if(d[n])s.push(d[n]);else{for(i=o.index;i<=h.series.length;i++)if(r=c[n].points[i+","+n]){a=r[1];break}t=l.translate(n),e=h.toPixels(a,!0),s.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Xe})}}),s.length&&r.push(s)}else Fi.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(t){var e,i,n=Fi.prototype.getSegmentPath.call(this,t),o=[].concat(n),r=this.options,s=n.length,a=this.yAxis.getThreshold(r.threshold);if(3===s&&o.push(qe,n[1],n[2]),r.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)i=u(t[e].yBottom,a),e<t.length-1&&r.step&&o.push(t[e+1].plotX,i),o.push(t[e].plotX,i);else this.closeSegment(o,t,a);return this.areaPath=this.areaPath.concat(o),n},closeSegment:function(t,e,i){t.push(qe,e[e.length-1].plotX,i,qe,e[0].plotX,i)},drawGraph:function(){this.areaPath=[],Fi.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=i.negativeColor,o=i.negativeFillColor,r=[["area",this.color,i.fillColor]];(n||o)&&r.push(["areaNeg",n,o]),hi(r,function(n){var o=n[0],r=t[o];r?r.animate({d:e}):t[o]=t.chart.renderer.path(e).attr({fill:u(n[2],Pi(n[1]).setOpacity(u(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:Wi.drawRectangle});ni.area=Vi,bi.spline=e(ki);var _i=m(Fi,{type:"spline",getPointSpline:function(t,e,i){var n,o,r,s,a,l=1.5,h=l+1,c=e.plotX,d=e.plotY,p=t[i-1],u=t[i+1];if(p&&u){var f,g=p.plotX,m=p.plotY,y=u.plotX,v=u.plotY;n=(l*c+g)/h,o=(l*d+m)/h,r=(l*c+y)/h,s=(l*d+v)/h,f=(s-o)*(r-c)/(r-n)+d-s,o+=f,s+=f,o>m&&o>d?(o=ye(m,d),s=2*d-o):m>o&&d>o&&(o=ve(m,d),s=2*d-o),s>v&&s>d?(s=ye(v,d),o=2*d-s):v>s&&d>s&&(s=ve(v,d),o=2*d-s),e.rightContX=r,e.rightContY=s}return i?(a=["C",p.rightContX||p.plotX,p.rightContY||p.plotY,n||c,o||d,c,d],p.rightContX=p.rightContY=null):a=[$e,c,d],a}});ni.spline=_i,bi.areaspline=e(bi.area);var Ui=Vi.prototype,Zi=m(_i,{type:"areaspline",closedStacks:!0,getSegmentPath:Ui.getSegmentPath,closeSegment:Ui.closeSegment,drawGraph:Ui.drawGraph,drawLegendSymbol:Wi.drawRectangle});ni.areaspline=Zi,bi.column=e(ki,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});var Ki=m(Fi,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Fi.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&hi(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.options,o=i.xAxis,r=i.yAxis,s=o.reversed,a={},l=0;n.grouping===!1?l=1:hi(i.chart.series,function(n){var o=n.options,s=n.yAxis;n.type===i.type&&n.visible&&r.len===s.len&&r.pos===s.pos&&(o.stacking?(t=n.stackKey,a[t]===G&&(a[t]=l++),e=a[t]):o.grouping!==!1&&(e=l++),n.columnIndex=e)});var h=ve(xe(o.transA)*(o.ordinalSlope||n.pointRange||o.closestPointRange||o.tickInterval||1),o.len),d=h*n.groupPadding,p=h-2*d,f=p/l,g=n.pointWidth,m=c(g)?(f-g)/2:f*n.pointPadding,y=u(g,f-2*m),v=(s?l-(i.columnIndex||0):i.columnIndex)||0,x=m+(d+v*f-h/2)*(s?-1:1);return i.columnMetrics={width:y,offset:x}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=u(i.borderWidth,t.activePointCount>.5*t.xAxis.len?0:1),o=t.yAxis,r=i.threshold,s=t.translatedThreshold=o.getThreshold(r),a=u(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,c=t.barW=ye(h,1+2*n),d=t.pointXOffset=l.offset,p=-(n%2?.5:0),f=n%2?.5:1;e.renderer.isVML&&e.inverted&&(f+=1),i.pointPadding&&(c=me(c)),Fi.prototype.translate.apply(t),hi(t.points,function(i){var n,r,l,g=u(i.yBottom,s),m=ve(ye(-999-g,i.plotY),o.len+999+g),y=i.plotX+d,v=c,x=ve(m,g),b=ye(m,g)-x;xe(b)<a&&a&&(b=a,x=fe(xe(x-s)>a?g-a:s-(o.translate(i.y,0,1,0,1)>s?0:a))),i.barX=y,i.pointWidth=h,i.tooltipPos=e.inverted?[o.len-m,t.xAxis.len-y-v/2]:[y+v/2,m+o.pos-e.plotTop],n=fe(y+v)+p,y=fe(y)+p,v=n-y,l=xe(x)<.5,r=fe(x+b)+f,x=fe(x)+f,b=r-x,l&&(x-=1,b+=1),i.shapeType="rect",i.shapeArgs={x:y,y:x,width:v,height:b}})},getSymbol:Xe,drawLegendSymbol:Wi.drawRectangle,drawGraph:Xe,drawPoints:function(){var t,i,n=this,o=this.chart,r=n.options,s=o.renderer,a=r.animationLimit||250;hi(n.points,function(l){var h,d=l.plotY,p=l.graphic;d===G||isNaN(d)||null===l.y?p&&(l.graphic=p.destroy()):(t=l.shapeArgs,h=c(n.borderWidth)?{"stroke-width":n.borderWidth}:{},i=l.pointAttr[l.selected?ei:Qe]||n.pointAttr[Qe],p?(vi(p),p.attr(h)[o.pointCount<a?"animate":"attr"](e(t))):l.graphic=p=s[l.shapeType](t).attr(i).attr(h).add(n.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(t){var e,i=this,n=this.yAxis,o=i.options,r=this.chart.inverted,s={};Be&&(t?(s.scaleY=.001,e=ve(n.pos+n.len,ye(n.pos,n.toPixels(o.threshold))),r?s.translateX=e-n.len:s.translateY=e,i.group.attr(s)):(s.scaleY=1,s[r?"translateX":"translateY"]=n.pos,i.group.animate(s,i.options.animation),i.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&hi(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Fi.prototype.remove.apply(t,arguments)}});ni.column=Ki,bi.bar=e(bi.column);var $i=m(Ki,{type:"bar",inverted:!0});ni.bar=$i,bi.scatter=e(ki,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});var qi=m(Fi,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&Fi.prototype.drawGraph.call(this)}});ni.scatter=qi,bi.pie=e(ki,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Ji=m(Ni,{init:function(){Ni.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:i.visible!==!1,name:u(i.name,"Slice")}),e=function(t){i.slice("select"===t.type)},ui(i,"select",e),ui(i,"unselect",e),i},setVisible:function(t){var e=this,i=e.series,n=i.chart;e.visible=e.options.visible=t=t===G?!e.visible:t,i.options.data[li(e,i.data)]=e.options,hi(["graphic","dataLabel","connector","shadowGroup"],function(i){e[i]&&e[i][t?"show":"hide"](!0)}),e.legendItem&&n.legend.colorizeItem(e,t),!i.isDirty&&i.options.ignoreHiddenPoint&&(i.isDirty=!0,n.redraw())},slice:function(t,e,i){var n,o=this,r=o.series,s=r.chart;D(i,s),e=u(e,!0),o.sliced=o.options.sliced=t=c(t)?t:!o.sliced,r.options.data[li(o,r.data)]=o.options,n=t?o.slicedTranslation:{translateX:0,translateY:0},o.graphic.animate(n),o.shadowGroup&&o.shadowGroup.animate(n)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),Qi={type:"pie",isCartesian:!1,pointClass:Ji,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:Xe,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(hi(i,function(t){var i=t.graphic,o=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:o.r,start:o.start,end:o.end},e.options.animation))}),e.animate=null)},setData:function(t,e,i,n){Fi.prototype.setData.call(this,t,!1,i,n),this.processData(),this.generatePoints(),u(e,!0)&&this.chart.redraw(i)},generatePoints:function(){var t,e,i,n,o=0,r=this.options.ignoreHiddenPoint;for(Fi.prototype.generatePoints.call(this),e=this.points,i=e.length,t=0;i>t;t++)n=e[t],o+=r&&!n.visible?0:n.y;for(this.total=o,t=0;i>t;t++)n=e[t],n.percentage=o>0?n.y/o*100:0,n.total=o},translate:function(t){this.generatePoints();var e,i,n,o,r,s,a,l=this,h=0,c=1e3,d=l.options,p=d.slicedOffset,f=p+d.borderWidth,g=d.startAngle||0,m=l.startAngleRad=we/180*(g-90),y=l.endAngleRad=we/180*(u(d.endAngle,g+360)-90),v=y-m,x=l.points,b=d.dataLabels.distance,k=d.ignoreHiddenPoint,w=x.length;for(t||(l.center=t=l.getCenter()),l.getX=function(e,i){return n=ue.asin(ve((e-t[1])/(t[2]/2+b),1)),t[0]+(i?-1:1)*be(n)*(t[2]/2+b)},s=0;w>s;s++)a=x[s],e=m+h*v,(!k||a.visible)&&(h+=a.percentage/100),i=m+h*v,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:fe(e*c)/c,end:fe(i*c)/c},n=(i+e)/2,n>1.5*we?n-=2*we:-we/2>n&&(n+=2*we),a.slicedTranslation={translateX:fe(be(n)*p),translateY:fe(ke(n)*p)},o=be(n)*t[2]/2,r=ke(n)*t[2]/2,a.tooltipPos=[t[0]+.7*o,t[1]+.7*r],a.half=-we/2>n||n>we/2?1:0,a.angle=n,f=ve(f,b/2),a.labelPos=[t[0]+o+be(n)*b,t[1]+r+ke(n)*b,t[0]+o+be(n)*f,t[1]+r+ke(n)*f,t[0]+o,t[1]+r,0>b?"center":a.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var e,i,n,o,r=this,s=r.chart,a=s.renderer,l=r.options.shadow;l&&!r.shadowGroup&&(r.shadowGroup=a.g("shadow").add(r.group)),hi(r.points,function(s){i=s.graphic,o=s.shapeArgs,n=s.shadowGroup,l&&!n&&(n=s.shadowGroup=a.g("shadow").add(r.shadowGroup)),e=s.sliced?s.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(o,e)):s.graphic=i=a[s.shapeType](o).setRadialReference(r.center).attr(s.pointAttr[s.selected?ei:Qe]).attr({"stroke-linejoin":"round"}).attr(e).add(r.group).shadow(l,n),void 0!==s.visible&&s.setVisible(s.visible)})},sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:Wi.drawRectangle,getCenter:Yi.getCenter,getSymbol:Xe};Qi=m(Fi,Qi),ni.pie=Qi,Fi.prototype.drawDataLabels=function(){var i,n,o,r,s=this,a=s.options,l=a.cursor,h=a.dataLabels,d=s.points,p=s.hasRendered||0;(h.enabled||s._hasPointLabels)&&(s.dlProcessOptions&&s.dlProcessOptions(h),r=s.plotGroup("dataLabelsGroup","data-labels",h.defer?Ve:Ue,h.zIndex||6),u(h.defer,!0)&&(r.attr({opacity:+p}),p||ui(s,"afterAnimate",function(){s.visible&&r.show(),r[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),n=h,hi(d,function(a){var d,p,f,g,m,y=a.dataLabel,v=a.connector,x=!0;if(i=a.options&&a.options.dataLabels,d=u(i&&i.enabled,n.enabled),y&&!d)a.dataLabel=y.destroy();else if(d){if(h=e(n,i),m=h.rotation,p=a.getLabelConfig(),o=h.format?k(h.format,p):h.formatter.call(p,h),h.style.color=u(h.color,h.style.color,s.color,"black"),y)c(o)?(y.attr({text:o}),x=!1):(a.dataLabel=y=y.destroy(),v&&(a.connector=v.destroy()));else if(c(o)){f={fill:h.backgroundColor,stroke:h.borderColor,"stroke-width":h.borderWidth,r:h.borderRadius||0,rotation:m,padding:h.padding,zIndex:1};for(g in f)f[g]===G&&delete f[g];y=a.dataLabel=s.chart.renderer[m?"text":"label"](o,0,-999,null,null,null,h.useHTML).attr(f).css(t(h.style,l&&{cursor:l})).add(r).shadow(h.shadow)}y&&s.alignDataLabel(a,y,h,null,x)}}))},Fi.prototype.alignDataLabel=function(e,i,n,o,r){var s,a=this.chart,l=a.inverted,h=u(e.plotX,-999),c=u(e.plotY,-999),d=i.getBBox(),p=this.visible&&(e.series.forceDL||a.isInsidePlot(h,fe(c),l)||o&&a.isInsidePlot(h,l?o.x+1:o.y+o.height-1,l));p&&(o=t({x:l?a.plotWidth-c:h,y:fe(l?a.plotHeight-h:c),width:0,height:0},o),t(n,{width:d.width,height:d.height}),n.rotation?i[r?"attr":"animate"]({x:o.x+n.x+o.width/2,y:o.y+n.y+o.height/2}).attr({align:n.align}):(i.align(n,null,o),s=i.alignAttr,"justify"===u(n.overflow,"justify")?this.justifyDataLabel(i,n,s,d,o,r):u(n.crop,!0)&&(p=a.isInsidePlot(s.x,s.y)&&a.isInsidePlot(s.x+d.width,s.y+d.height)))),p||(i.attr({y:-999}),i.placed=!1)},Fi.prototype.justifyDataLabel=function(t,e,i,n,o,r){var s,a,l=this.chart,h=e.align,c=e.verticalAlign;s=i.x,0>s&&("right"===h?e.align="left":e.x=-s,a=!0),s=i.x+n.width,s>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-s,a=!0),s=i.y,0>s&&("bottom"===c?e.verticalAlign="top":e.y=-s,a=!0),s=i.y+n.height,s>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!r,t.align(e,null,o))},ni.pie&&(ni.pie.prototype.drawDataLabels=function(){var t,e,i,n,o,r,s,a,l,h,c,d,p,f=this,g=f.data,m=f.chart,y=f.options.dataLabels,v=u(y.connectorPadding,10),x=u(y.connectorWidth,1),b=m.plotWidth,k=m.plotHeight,w=u(y.softConnector,!0),S=y.distance,T=f.center,P=T[2]/2,C=T[1],L=S>0,M=[[],[]],D=[0,0,0,0],I=function(t,e){return e.y-t.y};if(f.visible&&(y.enabled||f._hasPointLabels)){for(Fi.prototype.drawDataLabels.apply(f),hi(g,function(t){t.dataLabel&&t.visible&&M[t.half].push(t)}),d=2;d--;){var B,O,z,R,H=[],X=[],E=M[d],G=E.length;if(G){for(f.sortByAngle(E,d-.5),p=s=0;!s&&E[p];)s=E[p]&&E[p].dataLabel&&(E[p].dataLabel.getBBox().height||21),p++;if(S>0){for(z=ve(C+P+S,m.plotHeight),O=ye(0,C-P-S);z>=O;O+=s)H.push(O);if(B=H.length,G>B){for(c=[].concat(E),c.sort(I),p=G;p--;)c[p].rank=p;for(p=G;p--;)E[p].rank<B||E.splice(p,1);G=E.length}for(p=0;G>p;p++){t=E[p],r=t.labelPos;var W,Y,N=9999;for(Y=0;B>Y;Y++)W=xe(H[Y]-r[1]),N>W&&(N=W,R=Y);if(p>R&&null!==H[p])R=p;else if(G-p+R>B&&null!==H[p])for(R=B-G+p;null===H[R];)R++;else for(;null===H[R];)R++;X.push({i:R,y:H[R]}),H[R]=null}X.sort(I)}for(p=0;G>p;p++){var F,j;t=E[p],r=t.labelPos,n=t.dataLabel,h=t.visible===!1?Ve:Ue,j=r[1],S>0?(F=X.pop(),R=F.i,l=F.y,(j>l&&null!==H[R+1]||l>j&&null!==H[R-1])&&(l=ve(ye(0,j),m.plotHeight))):l=j,a=y.justify?T[0]+(d?-1:1)*(P+S):f.getX(l===C-P-S||l===C+P+S?j:l,d),n._attr={visibility:h,align:r[6]},n._pos={x:a+y.x+({left:v,right:-v}[r[6]]||0),y:l+y.y-10},n.connX=a,n.connY=l,null===this.options.size&&(o=n.width,v>a-o?D[3]=ye(fe(o-a+v),D[3]):a+o>b-v&&(D[1]=ye(fe(a+o-b+v),D[1])),0>l-s/2?D[0]=ye(fe(-l+s/2),D[0]):l+s/2>k&&(D[2]=ye(fe(l+s/2-k),D[2])))}}}(0===A(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),L&&x&&hi(this.points,function(t){e=t.connector,r=t.labelPos,n=t.dataLabel,n&&n._pos?(h=n._attr.visibility,a=n.connX,l=n.connY,i=w?[$e,a+("left"===r[6]?5:-5),l,"C",a,l,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],qe,r[4],r[5]]:[$e,a+("left"===r[6]?5:-5),l,qe,r[2],r[3],qe,r[4],r[5]],e?(e.animate({d:i}),e.attr("visibility",h)):t.connector=e=f.chart.renderer.path(i).attr({"stroke-width":x,stroke:y.connectorColor||t.color||"#606060",visibility:h}).add(f.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},ni.pie.prototype.placeDataLabels=function(){hi(this.points,function(t){var e,i=t.dataLabel;i&&(e=i._pos,e?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-999}))})},ni.pie.prototype.alignDataLabel=Xe,ni.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,o=n.center,r=n.minSize||80,s=r;return null!==o[0]?s=ye(i[2]-ye(t[1],t[3]),r):(s=ye(i[2]-t[1]-t[3],r),i[0]+=(t[3]-t[1])/2),null!==o[1]?s=ye(ve(s,i[2]-ye(t[0],t[2])),r):(s=ye(ve(s,i[2]-t[0]-t[2]),r),i[1]+=(t[0]-t[2])/2),s<i[2]?(i[2]=s,this.translate(i),hi(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),ni.column&&(ni.column.prototype.alignDataLabel=function(t,i,n,o,r){var s=this.chart,a=s.inverted,l=t.dlBox||t.shapeArgs,h=t.below||t.plotY>u(this.translatedThreshold,s.plotSizeY),c=u(n.inside,!!this.options.stacking);l&&(o=e(l),a&&(o={x:s.plotWidth-o.y-o.height,y:s.plotHeight-o.x-o.width,width:o.height,height:o.width}),c||(a?(o.x+=h?0:o.width,o.width=0):(o.y+=h?o.height:0,o.height=0))),n.align=u(n.align,!a||c?"center":h?"right":"left"),n.verticalAlign=u(n.verticalAlign,a||c?"middle":h?"top":"bottom"),Fi.prototype.alignDataLabel.call(this,t,i,n,o,r)});var tn=ce.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,o=n&&{cursor:n},r=function(i){var n,o=i.target;for(e.hoverSeries!==t&&t.onMouseOver();o&&!n;)n=o.point,o=o.parentNode;n!==G&&n!==e.hoverPoint&&n.onMouseOver(i)};hi(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(hi(t.trackerGroups,function(e){t[e]&&(t[e].addClass(_e+"tracker").on("mouseover",r).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(o),Y&&t[e].on("touchstart",r))}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e,i=this,n=i.options,o=n.trackByArea,r=[].concat(o?i.areaPath:i.graphPath),s=r.length,a=i.chart,l=a.pointer,h=a.renderer,c=a.options.tooltip.snap,d=i.tracker,p=n.cursor,u=p&&{cursor:p},f=i.singlePoints,g=function(){a.hoverSeries!==i&&i.onMouseOver()},m="rgba(192,192,192,"+(Be?1e-4:.002)+")";if(s&&!o)for(e=s+1;e--;)r[e]===$e&&r.splice(e+1,0,r[e+1]-c,r[e+2],qe),(e&&r[e]===$e||e===s)&&r.splice(e,0,qe,r[e-2]+c,r[e-1]);for(e=0;e<f.length;e++)t=f[e],r.push($e,t.plotX-c,t.plotY,qe,t.plotX+c,t.plotY);d?d.attr({d:r}):(i.tracker=h.path(r).attr({"stroke-linejoin":"round",visibility:i.visible?Ue:Ve,stroke:m,fill:o?m:Ke,"stroke-width":n.lineWidth+(o?0:2*c),zIndex:2}).add(i.group),hi([i.tracker,i.markerGroup],function(t){t.addClass(_e+"tracker").on("mouseover",g).on("mouseout",function(t){l.onTrackerMouseOut(t)}).css(u),Y&&t.on("touchstart",g)}))}};ni.column&&(Ki.prototype.drawTracker=tn.drawTrackerPoint),ni.pie&&(ni.pie.prototype.drawTracker=tn.drawTrackerPoint),ni.scatter&&(qi.prototype.drawTracker=tn.drawTrackerPoint),t(Gi.prototype,{setItemEvents:function(t,e,i,n,o){var r=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState(ti),e.css(r.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:o),t.setState()}).on("click",function(e){var i="legendItemClick",n=function(){t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent(i,e,n):gi(t,i,e,n)})},createCheckboxForItem:function(t){var e=this;t.checkbox=g("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},e.options.itemCheckboxStyle,e.chart.container),ui(t.checkbox,"click",function(e){var i=e.target;gi(t,"checkboxClick",{checked:i.checked},function(){t.select()})})}}),F.legend.itemStyle.cursor="pointer",t(X.prototype,{showResetZoom:function(){var t=this,e=F.lang,i=t.options.chart.resetZoomButton,n=i.theme,o=n.states,r="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,o&&o.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,r)},zoomOut:function(){var t=this;gi(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,r=n.pointer,s=!1;!t||t.resetSelection?hi(n.axes,function(t){e=t.zoom()}):hi(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;(r[n?"zoomX":"zoomY"]||r[n?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(s=!0))}),i=n.resetZoomButton,s&&!i?n.showResetZoom():!s&&o(i)&&(n.resetZoomButton=i.destroy()),e&&n.redraw(u(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t,e){var i,n=this,o=n.hoverPoints;o&&hi(o,function(t){t.setState()}),hi("xy"===e?[1,0]:[1],function(e){var o=t[e?"chartX":"chartY"],r=n[e?"xAxis":"yAxis"][0],s=n[e?"mouseDownX":"mouseDownY"],a=(r.pointRange||0)/2,l=r.getExtremes(),h=r.toValue(s-o,!0)+a,c=r.toValue(s+n[e?"plotWidth":"plotHeight"]-o,!0)-a;r.series.length&&h>ve(l.dataMin,l.min)&&c<ye(l.dataMax,l.max)&&(r.setExtremes(h,c,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=o}),i&&n.redraw(!1),f(n.container,{cursor:"move"})}}),t(Ni.prototype,{select:function(t,e){var i=this,n=i.series,o=n.chart;t=u(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[li(i,n.data)]=i.options,i.setState(t&&ei),e||hi(o.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[li(t,n.data)]=t.options,t.setState(Qe),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this,i=e.series,n=i.chart,o=n.tooltip,r=n.hoverPoint;r&&r!==e&&r.onMouseOut(),e.firePointEvent("mouseOver"),!o||o.shared&&!i.noSharedTooltip||o.refresh(e,t),e.setState(ti),n.hoverPoint=e},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==li(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,i=this,n=e(i.series.options.point,i.options),o=n.events;i.events=o;for(t in o)ui(i,t,o[t]);this.hasImportedEvents=!0}},setState:function(i,n){var o,r,s,a,l=this,h=l.plotX,c=l.plotY,d=l.series,p=d.options.states,u=bi[d.type].marker&&d.options.marker,f=u&&!u.enabled,g=u&&u.states[i],m=g&&g.enabled===!1,y=d.stateMarkerGraphic,v=l.marker||{},x=d.chart,b=d.halo;i=i||Qe,a=l.pointAttr[i]||d.pointAttr[i],i===l.state&&!n||l.selected&&i!==ei||p[i]&&p[i].enabled===!1||i&&(m||f&&g.enabled===!1)||i&&v.states&&v.states[i]&&v.states[i].enabled===!1||(l.graphic?(o=u&&l.graphic.symbolName&&a.r,l.graphic.attr(e(a,o?{x:h-o,y:c-o,width:2*o,height:2*o}:{})),y&&y.hide()):(i&&g&&(o=g.radius,s=v.symbol||d.symbol,y&&y.currentSymbol!==s&&(y=y.destroy()),y?y[n?"animate":"attr"]({x:h-o,y:c-o}):s&&(d.stateMarkerGraphic=y=x.renderer.symbol(s,h-o,c-o,2*o,2*o).attr(a).add(d.markerGroup),y.currentSymbol=s)),y&&y[i&&x.isInsidePlot(h,c,x.inverted)?"show":"hide"]()),r=p[i]&&p[i].halo,r&&r.size?(b||(d.halo=b=x.renderer.path().add(d.seriesGroup)),b.attr(t({fill:Pi(l.color||d.color).setOpacity(r.opacity).get()},r.attributes))[n?"animate":"attr"]({d:l.haloPath(r.size)})):b&&b.attr({d:[]}),l.state=i)},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),o=i.inverted;return i.renderer.symbols.circle(n.translateX+(o?e.yAxis.len-this.plotY:this.plotX)-t,n.translateY+(o?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),t(Fi.prototype,{onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut(),t.options.events.mouseOver&&gi(t,"mouseOver"),t.setState(ti),e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,o=i.hoverPoint;o&&o.onMouseOut(),t&&e.events.mouseOut&&gi(t,"mouseOut"),!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide(),t.setState(),i.hoverSeries=null},setState:function(t){var e,i=this,n=i.options,o=i.graph,r=i.graphNeg,s=n.states,a=n.lineWidth;if(t=t||Qe,i.state!==t){if(i.state=t,s[t]&&s[t].enabled===!1)return;t&&(a=s[t].lineWidth||a+(s[t].lineWidthPlus||0)),o&&!o.dashstyle&&(e={"stroke-width":a},o.attr(e),r&&r.attr(e))}},setVisible:function(t,e){var i,n=this,o=n.chart,r=n.legendItem,s=o.options.chart.ignoreHiddenSeries,a=n.visible;n.visible=t=n.userOptions.visible=t===G?!a:t,i=t?"show":"hide",hi(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),o.hoverSeries===n&&n.onMouseOut(),r&&o.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&hi(o.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),hi(n.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(o.isDirtyBox=!0),e!==!1&&o.redraw(),gi(n,i)},setTooltipPoints:function(t){var e,i,n,o,r,s,a,l=this,h=[],c=l.xAxis,d=c&&c.getExtremes(),p=c?c.tooltipLen||c.len:l.chart.plotSizeX,u=[];if(l.options.enableMouseTracking!==!1&&!l.singularTooltips){for(t&&(l.tooltipPoints=null),hi(l.segments||l.points,function(t){h=h.concat(t)}),c&&c.reversed&&(h=h.reverse()),l.orderTooltipPoints&&l.orderTooltipPoints(h),e=h.length,a=0;e>a;a++)if(o=h[a],r=o.x,r>=d.min&&r<=d.max)for(s=h[a+1],i=n===G?0:n+1,n=h[a+1]?ve(ye(0,ge((o.clientX+(s?s.wrappedClientX||s.clientX:p))/2)),p):p;i>=0&&n>=i;)u[i++]=o;l.tooltipPoints=u}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===G?!e.selected:t,e.checkbox&&(e.checkbox.checked=t),gi(e,t?"select":"unselect")},drawTracker:tn.drawTrackerGraph}),t(ce,{Axis:H,Chart:X,Color:Pi,Point:Ni,Tick:R,Renderer:W,Series:Fi,SVGElement:z,SVGRenderer:Ai,arrayMin:P,arrayMax:A,charts:Ee,dateFormat:j,format:k,pathAnim:_,getOptions:O,hasBidiBug:Oe,isTouchDevice:De,numberFormat:y,seriesTypes:ni,setOptions:B,addEvent:ui,removeEvent:fi,createElement:g,discardElement:L,css:f,each:hi,extend:t,map:pi,merge:e,pick:u,splat:p,extendClass:m,pInt:i,wrap:x,svg:Be,canvas:ze,vml:!Be&&!ze,product:We,version:Ye})}()},{}],306:[function(require,module){"use strict";module.exports=require(1)},{1:305}],307:[function(require,module){"use strict";module.exports=require(1)},{1:308}],308:[function(){!function($){function getScrollbarWidth(viewport){var scrollBarWidth,el=$("<div></div>").css({width:"100%"});return viewport.append(el),scrollBarWidth=viewport.width()-el.width(),el.remove(),scrollBarWidth}function isInViewport(element,options){var boundingRect=element.getBoundingClientRect(),top=boundingRect.top,bottom=boundingRect.bottom,left=boundingRect.left,right=boundingRect.right,settings=$.extend({tolerance:0,viewport:window},options),isVisibleFlag=!1,$viewport=settings.viewport.get?settings.viewport:$(settings.viewport);$viewport.length||($viewport=$(window));var $viewportHeight=$viewport.height(),$viewportWidth=$viewport.width(),typeofViewport=$viewport.get(0).toString();if("[object Window]"!==typeofViewport&&"[object DOMWindow]"!==typeofViewport){var $viewportOffset=$viewport.offset(); top-=$viewportOffset.top,bottom-=$viewportOffset.top,left-=$viewportOffset.left,right=left+$viewportWidth,isInViewport.scrollBarWidth=isInViewport.scrollBarWidth||getScrollbarWidth($viewport),$viewportWidth-=isInViewport.scrollBarWidth}return settings.tolerance=~~Math.round(parseFloat(settings.tolerance)),settings.tolerance<0&&(settings.tolerance=$viewportHeight+settings.tolerance),Math.abs(left)>=$viewportWidth?isVisibleFlag:isVisibleFlag=settings.tolerance?!!(top<=settings.tolerance&&bottom>=settings.tolerance):!!(bottom>0&&$viewportHeight>=top)}$.fn.do=function(args){if(1===arguments.length&&"function"==typeof args&&(args=[args]),!(args instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do should be a function or an array of functions");for(var i=0;i<args.length;i++)if("function"==typeof args[i])for(var j=0;j<this.length;j++)args[i].call($(this[j]));return this},$.extend($.expr[":"],{"in-viewport":function(currObj,index,meta){if(meta[3]){var args=meta[3].split(",");return 1===args.length&&isNaN(args[0])&&(args[1]=args[0],args[0]=void 0),isInViewport(currObj,{tolerance:args[0]?args[0].trim():void 0,viewport:args[1]?args[1].trim():void 0})}return isInViewport(currObj)}})}(jQuery)},{}],309:[function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,s){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap='#"+n+"']")[0],!!r&&i(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),a=isNaN(s);return(a||s>=0)&&t(i,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?r["inner"+i].call(this):this.each(function(){e(this).css(n,s(this,t)+"px")})},e.fn["outer"+i]=function(t,a){return"number"!=typeof t?r["outer"+i].call(this,t):this.each(function(){e(this).css(n,s(this,t,!0,a)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,a=e(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i,s){var a,n=e.plugins[t];if(n&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;n.length>a;a++)e.options[n[a][0]]&&n[a][1].apply(e.element,i)}};var s=0,a=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,a,n;for(n=0;null!=(a=i[n]);n++)try{s=e._data(a,"events"),s&&s.remove&&e(a).triggerHandler("remove")}catch(r){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var a,n,r,o,h={},l=t.split(".")[0];return t=t.split(".")[1],a=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},n=e[l][t],r=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,n,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(s,function(t,s){return e.isFunction(s)?void(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,n=this._superApply;return this._super=e,this._superApply=a,t=s.apply(this,arguments),this._super=i,this._superApply=n,t}}()):void(h[t]=s)}),r.prototype=e.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix||t:t},h,{constructor:r,namespace:l,widgetName:t,widgetFullName:a}),n?(e.each(n._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete n._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var i,s,n=a.call(arguments,1),r=0,o=n.length;o>r;r++)for(i in n[r])s=n[r][i],n[r].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var r="string"==typeof n,o=a.call(arguments,1),h=this;return n=!r&&o.length?e.widget.extend.apply(null,[n].concat(o)):n,this.each(r?function(){var i,a=e.data(this,s);return"instance"===n?(h=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+n+"'")}:function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))}),h}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,a,n,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},s=t.split("."),t=s.shift(),s.length){for(a=r[t]=e.widget.extend({},this.options[t]),n=0;s.length-1>n;n++)a[s[n]]=a[s[n]]||{},a=a[s[n]];if(t=s.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var a,n=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=a=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,a=this.widget()),e.each(s,function(s,r){function o(){return t||n.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?n[r]:r).apply(n,arguments):void 0}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+n.eventNamespace,u=h[2];u?a.delegate(u,l,o):i.bind(l,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var r,o=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),r&&e.effects&&e.effects.effect[o]?s[t](a):o!==t&&s[o]?s[o](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}}),e.widget;var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),n=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,a=!1,n=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")===n?(s=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")===n&&(s=e(t.target)),s&&(!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(a=!0)}),a))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,s){var a,n,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(n)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,a,n,r=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],a=s.item[0],n=this._intersectsWithPointer(s),n&&s.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],a):!0)){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,a=this.placeholder.offset(),n=this.options.axis,r={};n&&"x"!==n||(r.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(r.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,a=s+this.helperProportions.height,n=e.left,r=n+e.width,o=e.top,h=o+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>o&&h>s+l,c="y"===this.options.axis||t+u>n&&r>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>n&&r>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>o&&h>a-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,a=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return s?this.floating?n&&"right"===n||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&i||"left"===a&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){o.push(this)}var s,a,n,r,o=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(n=e(l[s]),a=n.length-1;a>=0;a--)r=e.data(n[a],this.widgetFullName),r&&r!==this&&!r.options.disabled&&h.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,a,n,r,o,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(a=e(c[i]),s=a.length-1;s>=0;s--)n=e.data(a[s],this.widgetFullName),n&&n!==this&&!n.options.disabled&&(d.push([e.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):e(n.options.items,n.element),n]),this.containers.push(n));for(i=d.length-1;i>=0;i--)for(r=d[i][1],o=d[i][0],s=0,l=o.length;l>s;s++)h=e(o[s]),h.data(this.widgetName+"-item",r),u.push({item:h,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,a,n;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=a.outerWidth(),s.height=a.outerHeight()),n=a.offset(),s.left=n.left,s.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)n=this.containers[i].element.offset(),this.containers[i].containerCache.left=n.left,this.containers[i].containerCache.top=n.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)}):"img"===s&&a.attr("src",t.currentItem.attr("src")),i||a.css("visibility","hidden"),a},update:function(e,a){(!i||s.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,a,n,r,o,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(a=1e4,n=null,u=c.floating||this._isFloating(this.currentItem),r=u?"left":"top",o=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[r],l=!1,t[d]-h>this.items[s][o]/2&&(l=!0),a>Math.abs(t[d]-h)&&(a=Math.abs(t[d]-h),n=this.items[s],this.direction=l?"up":"down"));if(!n&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;n?this._rearrange(t,n,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()} },_setContainment:function(){var t,i,s,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),("document"===a.containment||"window"===a.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],i=e(a.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())*s}},_generatePosition:function(t){var i,s,a=this.options,n=t.pageX,r=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),a.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/a.grid[1])*a.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i,s=this.originalPageX+Math.round((n-this.originalPageX)/a.grid[0])*a.grid[0],n=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-a.grid[0]:s+a.grid[0]:s)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:o.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:o.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||a.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(a.push(function(e){this._trigger("remove",e,this._uiHash())}),a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||a.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(a.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),s=0;a.length>s;s++)a[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(s=0;a.length>s;s++)a[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})})},{}],310:[function(require,module){"use strict";module.exports=require(1)},{1:309}],311:[function(require,module,exports){(function(global){(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||"undefined"==typeof n&&e)return 1;if(t>n||!e||"undefined"==typeof t&&r)return-1}return 0}function t(n,t,r){if(t!==t)return h(n,r);r=(r||0)-1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function r(n){return"function"==typeof n||!1}function e(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function u(n){return"string"==typeof n?n:null==n?"":n+""}function o(n){return n.charCodeAt(0)}function i(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r}function f(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function a(t,r){return n(t.a,r.a)||t.b-r.b}function c(t,r){for(var e=-1,u=t.a,o=r.a,i=u.length;++e<i;){var f=n(u[e],o[e]);if(f)return f}return t.b-r.b}function l(n){return Nt[n]}function s(n){return Ut[n]}function p(n){return"\\"+$t[n]}function h(n,t,r){var e=n.length;for(t=r?t||e:(t||0)-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function _(n){return n&&"object"==typeof n||!1}function g(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function v(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function y(n){for(var t=-1,r=n.length;++t<r&&g(n.charCodeAt(t)););return t}function d(n){for(var t=n.length;t--&&g(n.charCodeAt(t)););return t}function m(n){return Ft[n]}function w(g){function Nt(n){if(_(n)&&!(Wo(n)||n instanceof Lt)){if(n instanceof Ft)return n;if(Fu.call(n,"__chain__")&&Fu.call(n,"__wrapped__"))return ge(n)}return new Ft(n)}function Ut(){}function Ft(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Lt(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=po,this.__views__=null}function $t(){this.__data__={}}function zt(n){var t=n?n.length:0;for(this.data={hash:ro(null),set:new Gu};t--;)this.push(n[t])}function Dt(n,t){var r=n.data;return("string"==typeof t||He(t)?r.set.has(t):r.hash[t])?0:-1}function qt(n,t){var r=-1,e=n.length;for(t||(t=bu(e));++r<e;)t[r]=n[r];return t}function Pt(n,t){for(var r=-1,e=n.length;++r<e&&!1!==t(n[r],r,n););return n}function Kt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Vt(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Yt(n,t){for(var r=-1,e=n.length,u=bu(e);++r<e;)u[r]=t(n[r],r,n);return u}function Zt(n){for(var t=-1,r=n.length,e=so;++t<r;){var u=n[t];u>e&&(e=u)}return e}function Gt(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Jt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function Xt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function Ht(n,t){return"undefined"==typeof n?t:n}function Qt(n,t,r,e){return"undefined"!=typeof n&&Fu.call(e,r)?n:t}function nr(n,t,r){var e=$o(t);if(!r)return rr(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&("undefined"!=typeof f||i in n)||(n[i]=a)}return n}function tr(n,t){for(var r=-1,e=n.length,u=fe(e),o=t.length,i=bu(o);++r<o;){var f=t[r];u?(f=parseFloat(f),i[r]=oe(f,e)?n[f]:b):i[r]=n[f]}return i}function rr(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function er(n,t,r){var e=typeof n;if("function"==e){if(e="undefined"!=typeof t){var e=Nt.support,u=!(e.funcNames?n.name:e.funcDecomp);if(!u){var o=Nu.call(n);e.funcNames||(u=!mt.test(o)),u||(u=Et.test(o)||Qe(n),xo(n,u))}e=u}n=e?Fr(n,t,r):n}else n=null==n?yu:"object"==e?Ar(n):"undefined"==typeof t?Er(n+""):jr(n+"",t);return n}function ur(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),"undefined"!=typeof f)return f;if(!He(n))return n;if(e=Wo(n)){if(f=re(n),!t)return qt(n,f)}else{var a=$u.call(n),c=a==V;if(a!=Z&&a!=D&&(!c||u))return St[a]?ue(n,a,t):u?n:{};if(f=ee(c?{}:n),!t)return rr(n,f,$o(n))}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Pt:vr)(n,function(e,u){f[u]=ur(e,t,r,u,n,o,i)}),f}function or(n,t,r,e){if("function"!=typeof n)throw new Cu(B);return Ju(function(){n.apply(b,Or(r,e))},t)}function ir(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=te(),f=i==t,a=f&&200<=r.length&&Ao(r),c=r.length;a&&(i=Dt,f=!1,r=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(r[l]===a)continue n;u.push(a)}else 0>i(r,a)&&u.push(a);return u}function fr(n,t){var r=n?n.length:0;if(!fe(r))return vr(n,t);for(var e=-1,u=_e(n);++e<r&&!1!==t(u[e],e,u););return n}function ar(n,t){var r=n?n.length:0;if(!fe(r))return yr(n,t);for(var e=_e(n);r--&&!1!==t(e[r],r,e););return n}function cr(n,t){var r=!0;return fr(n,function(n,e,u){return r=!!t(n,e,u)}),r}function lr(n,t){var r=[];return fr(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function sr(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function pr(n,t,r,e){e=(e||0)-1;for(var u=n.length,o=-1,i=[];++e<u;){var f=n[e];if(_(f)&&fe(f.length)&&(Wo(f)||Ge(f))){t&&(f=pr(f,t,r));var a=-1,c=f.length;for(i.length+=c;++a<c;)i[++o]=f[a]}else r||(i[++o]=f)}return i}function hr(n,t,r){var e=-1,u=_e(n);r=r(n);for(var o=r.length;++e<o;){var i=r[e];if(!1===t(u[i],i,u))break}return n}function _r(n,t,r){var e=_e(n);r=r(n);for(var u=r.length;u--;){var o=r[u];if(!1===t(e[o],o,e))break}return n}function gr(n,t){hr(n,t,iu)}function vr(n,t){return hr(n,t,$o)}function yr(n,t){return _r(n,t,$o)}function dr(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];Uo(n[i])&&(o[++u]=i)}return o}function mr(n,t,r){var e=-1,u="function"==typeof t,o=n?n.length:0,i=fe(o)?bu(o):[];return fr(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):b}),i}function wr(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,f=typeof t;if("function"!=i&&"object"!=i&&"function"!=f&&"object"!=f||null==n||null==t)n=n!==n&&t!==t;else n:{var i=wr,f=Wo(n),a=Wo(t),c=M,l=M;f||(c=$u.call(n),c==D?c=Z:c!=Z&&(f=eu(n))),a||(l=$u.call(t),l==D?l=Z:l!=Z&&eu(t));var s=c==Z,a=l==Z,l=c==l;if(!l||f||s)if(c=s&&Fu.call(n,"__wrapped__"),a=a&&Fu.call(t,"__wrapped__"),c||a)n=i(c?n.value():n,a?t.value():t,r,e,u,o);else if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?Jr:Hr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=!1;else n=Xr(n,t,c)}return n}function br(n,t,r,e,u){var o=t.length;if(null==n)return!o;for(var i=-1,f=!u;++i<o;)if(f&&e[i]?r[i]!==n[t[i]]:!Fu.call(n,t[i]))return!1;for(i=-1;++i<o;){var a=t[i];if(f&&e[i])a=Fu.call(n,a);else{var c=n[a],l=r[i],a=u?u(c,l,a):b;"undefined"==typeof a&&(a=wr(l,c,u,!0))}if(!a)return!1}return!0}function xr(n,t){var r=[];return fr(n,function(n,e,u){r.push(t(n,e,u))}),r}function Ar(n){var t=$o(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(ae(u))return function(n){return null!=n&&n[e]===u&&Fu.call(n,e)}}for(var o=bu(r),i=bu(r);r--;)u=n[t[r]],o[r]=u,i[r]=ae(u);return function(n){return br(n,t,o,i)}}function jr(n,t){return ae(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&wr(t,r[n],null,!0)}}function kr(n,t,r,e,u){if(!He(n))return n;var o=fe(t.length)&&(Wo(t)||eu(t));return(o?Pt:vr)(t,function(t,i,f){if(_(t)){e||(e=[]),u||(u=[]);n:{t=e;for(var a=u,c=t.length,l=f[i];c--;)if(t[c]==l){n[i]=a[c],i=void 0;break n}c=n[i],f=r?r(c,l,i,n,f):b;var s="undefined"==typeof f;s&&(f=l,fe(l.length)&&(Wo(l)||eu(l))?f=Wo(c)?c:c?qt(c):[]:Fo(l)||Ge(l)?f=Ge(c)?uu(c):Fo(c)?c:{}:s=!1),t.push(l),a.push(f),s?n[i]=kr(f,l,r,t,a):(f===f?f!==c:c===c)&&(n[i]=f),i=void 0}return i}a=n[i],f=r?r(a,t,i,n,f):b,(l="undefined"==typeof f)&&(f=t),!o&&"undefined"==typeof f||!l&&(f===f?f===a:a!==a)||(n[i]=f)}),n}function Er(n){return function(t){return null==t?b:t[n]}}function Rr(n,t){return n+Ku(lo()*(t-n+1))}function Ir(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Or(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r="undefined"==typeof r||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=bu(u);++e<u;)r[e]=n[e+t];return r}function Cr(n,t){var r;return fr(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Tr(n,r){var e=-1,u=te(),o=n.length,i=u==t,f=i&&o>=200,a=f&&Ao(),c=[];a?(u=Dt,i=!1):(f=!1,a=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;r&&a.push(s),c.push(l)}else 0>u(a,s)&&((r||f)&&a.push(s),c.push(l))}return c}function Sr(n,t){for(var r=-1,e=t.length,u=bu(e);++r<e;)u[r]=n[t[r]];return u}function Wr(n,t){var r=n;r instanceof Lt&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var r=[r],o=t[e];Yu.apply(r,o.args),r=o.func.apply(o.thisArg,r)}return r}function Nr(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&go>=u){for(;u>e;){var o=e+u>>>1,i=n[o];(r?t>=i:t>i)?e=o+1:u=o}return u}return Ur(n,t,yu,r)}function Ur(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f="undefined"==typeof t;o>u;){var a=Ku((u+o)/2),c=r(n[a]),l=c===c;(i?l||e:f?l&&(e||"undefined"!=typeof c):e?t>=c:t>c)?u=a+1:o=a}return io(o,_o)}function Fr(n,t,r){if("function"!=typeof n)return yu;if("undefined"==typeof t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Lr(n){return Mu.call(n,0)}function $r(n,t,r){for(var e=r.length,u=-1,o=oo(n.length-e,0),i=-1,f=t.length,a=bu(o+f);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function Br(n,t,r){for(var e=-1,u=r.length,o=-1,i=oo(n.length-u,0),f=-1,a=t.length,c=bu(i+a);++o<i;)c[o]=n[o];for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function zr(n,t){return function(r,e,u){var o=t?t():{};if(e=ne(e,u,3),Wo(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else fr(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Dr(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(t>3&&ie(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var e=Fr(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function Mr(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=Pr(n);return r}function qr(n){return function(t){var r=-1;t=hu(au(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Pr(n){return function(){var t=bo(n.prototype),r=n.apply(t,arguments);return He(r)?r:t}}function Kr(n,t){return function(r,e,u){u&&ie(r,e,u)&&(e=null);var i=ne(),f=null==e;if(i===er&&f||(f=!1,e=i(e,u,3)),f){if(e=Wo(r),e||!ru(r))return n(e?r:he(r));e=o}return Qr(r,e,t)}}function Vr(n,t,r,e,u,o,i,f,a,c){function l(){for(var w=arguments.length,x=w,k=bu(w);x--;)k[x]=arguments[x];if(e&&(k=$r(k,e,u)),o&&(k=Br(k,o,i)),_||y){var x=l.placeholder,E=v(k,x),w=w-E.length;if(c>w){var R=f?qt(f):null,w=oo(c-w,0),C=_?E:null,E=_?null:E,T=_?k:null,k=_?null:k;return t|=_?I:O,t&=~(_?O:I),g||(t&=~(A|j)),k=Vr(n,t,r,T,C,k,E,R,a,w),k.placeholder=x,k}}if(x=p?r:this,h&&(n=x[m]),f)for(R=k.length,w=io(f.length,R),C=qt(k);w--;)E=f[w],k[w]=oe(E,R)?C[E]:b;return s&&a<k.length&&(k.length=a),(this instanceof l?d||Pr(n):n).apply(x,k)}var s=t&T,p=t&A,h=t&j,_=t&E,g=t&k,y=t&R,d=!h&&Pr(n),m=n;return l}function Yr(n,t,r){return n=n.length,t=+t,t>n&&eo(t)?(t-=n,r=null==r?" ":r+"",su(r,qu(t/r.length)).slice(0,t)):""}function Zr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=bu(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&A,i=Pr(n);return u}function Gr(n,t,r,e,u,o,i,f){var a=t&j;if(!a&&"function"!=typeof n)throw new Cu(B);var c=e?e.length:0;if(c||(t&=~(I|O),e=u=null),c-=u?u.length:0,t&O){var l=e,s=u;e=u=null}var p=!a&&jo(n);if(r=[n,t,r,e,u,l,s,o,i,f],p&&!0!==p){e=r[1],t=p[1],f=e|t,o=T|C,u=A|j,i=o|u|k|R;var l=e&T&&!(t&T),s=e&C&&!(t&C),h=(s?r:p)[7],_=(l?r:p)[8];o=f>=o&&i>=f&&(C>e||(s||l)&&h.length<=_),(!(e>=C&&t>u||e>u&&t>=C)||o)&&(t&A&&(r[2]=p[2],f|=e&A?0:k),(e=p[3])&&(u=r[3],r[3]=u?$r(u,e,p[4]):qt(e),r[4]=u?v(r[3],z):qt(p[4])),(e=p[5])&&(u=r[5],r[5]=u?Br(u,e,p[6]):qt(e),r[6]=u?v(r[5],z):qt(p[6])),(e=p[7])&&(r[7]=qt(e)),t&T&&(r[8]=null==r[8]?p[8]:io(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]}return r[9]=null==f?a?0:n.length:oo(f-c,0)||0,(p?xo:ko)(t==A?Mr(r[0],r[2]):t!=I&&t!=(A|I)||r[4].length?Vr.apply(b,r):Zr.apply(b,r),r)}function Jr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length,l=!0;if(a!=c&&(!u||a>=c))return!1;for(;l&&++f<a;){var s=n[f],p=t[f],l=b;if(e&&(l=u?e(p,s,f):e(s,p,f)),"undefined"==typeof l)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function Xr(n,t,r){switch(r){case q:case P:return+n==+t;case K:return n.name==t.name&&n.message==t.message;case Y:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case G:case J:return n==t+""}return!1}function Hr(n,t,r,e,u,o,i){var f=$o(n),a=f.length,c=$o(t).length;if(a!=c&&!u)return!1;for(var l,c=-1;++c<a;){var s=f[c],p=Fu.call(t,s);if(p){var h=n[s],_=t[s],p=b;e&&(p=u?e(_,h,s):e(h,_,s)),"undefined"==typeof p&&(p=h&&h===_||r(h,_,e,u,o,i))}if(!p)return!1;l||(l="constructor"==s)}return l||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||"function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)?!0:!1}function Qr(n,t,r){var e=r?po:so,u=e,o=u;return fr(n,function(n,i,f){i=t(n,i,f),((r?u>i:i>u)||i===e&&i===o)&&(u=i,o=n)}),o}function ne(n,t,r){var e=Nt.callback||gu,e=e===gu?er:e;return r?e(n,t,r):e}function te(n,r,e){var u=Nt.indexOf||we,u=u===we?t:u;return n?u(n,r,e):u}function re(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Fu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function ee(n){return n=n.constructor,"function"==typeof n&&n instanceof n||(n=Ru),new n}function ue(n,t,r){var e=n.constructor;switch(t){case X:return Lr(n);case q:case P:return new e(+n);case H:case Q:case nt:case tt:case rt:case et:case ut:case ot:case it:return t=n.buffer,new e(r?Lr(t):t,n.byteOffset,n.length);case Y:case J:return new e(n);case G:var u=new e(n.source,dt.exec(n));u.lastIndex=n.lastIndex}return u}function oe(n,t){return n=+n,t=null==t?yo:t,n>-1&&0==n%1&&t>n}function ie(n,t,r){if(!He(r))return!1;var e=typeof t;return"number"==e?(e=r.length,e=fe(e)&&oe(t,e)):e="string"==e&&t in r,t=r[t],e&&(n===n?n===t:t!==t)}function fe(n){return"number"==typeof n&&n>-1&&0==n%1&&yo>=n}function ae(n){return n===n&&(0===n?1/n>0:!He(n))}function ce(n,t){n=_e(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function le(n,t){var r={};return gr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function se(n){var t;if(!_(n)||$u.call(n)!=Z||!(Fu.call(n,"constructor")||(t=n.constructor,"function"!=typeof t||t instanceof t)))return!1;var r;return gr(n,function(n,t){r=t}),"undefined"==typeof r||Fu.call(n,r)}function pe(n){for(var t=iu(n),r=t.length,e=r&&n.length,u=Nt.support,u=e&&fe(e)&&(Wo(n)||u.nonEnumArgs&&Ge(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&oe(f,e)||Fu.call(n,f))&&i.push(f)}return i}function he(n){return null==n?[]:fe(n.length)?He(n)?n:Ru(n):fu(n)}function _e(n){return He(n)?n:Ru(n)}function ge(n){return n instanceof Lt?n.clone():new Ft(n.__wrapped__,n.__chain__,qt(n.__actions__))}function ve(n,t,r){return n&&n.length?((r?ie(n,t,r):null==t)&&(t=1),Or(n,0>t?0:t)):[]}function ye(n,t,r){var e=n?n.length:0;return e?((r?ie(n,t,r):null==t)&&(t=1),t=e-(+t||0),Or(n,0,0>t?0:t)):[]}function de(n,t,r){var e=-1,u=n?n.length:0;for(t=ne(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function me(n){return n?n[0]:b}function we(n,r,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?oo(u+e,0):e||0;else if(e)return e=Nr(n,r),n=n[e],(r===r?r===n:n!==n)?e:-1;return t(n,r,e)}function be(n){return ve(n,1)}function xe(n,r,e,u){if(!n||!n.length)return[];null!=r&&"boolean"!=typeof r&&(u=e,e=ie(n,r,u)?null:r,r=!1);var o=ne();if((o!==er||null!=e)&&(e=o(e,u,3)),r&&te()==t){r=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=r?r(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=Tr(n,e);return n}function Ae(n){for(var t=-1,r=(n&&n.length&&Zt(Yt(n,Uu)))>>>0,e=bu(r);++t<r;)e[t]=Yt(n,Er(t));return e}function je(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Wo(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function ke(n){return n=Nt(n),n.__chain__=!0,n}function Ee(n,t,r){return t.call(r,n)}function Re(n,t,r){var e=Wo(n)?Kt:cr;return("function"!=typeof t||"undefined"!=typeof r)&&(t=ne(t,r,3)),e(n,t)}function Ie(n,t,r){var e=Wo(n)?Vt:lr;return t=ne(t,r,3),e(n,t)}function Oe(n,t,r){return Wo(n)?(t=de(n,t,r),t>-1?n[t]:b):(t=ne(t,r,3),sr(n,t,fr))}function Ce(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Wo(n)?Pt(n,t):fr(n,Fr(t,r,3))}function Te(n,t,r){if("function"==typeof t&&"undefined"==typeof r&&Wo(n))for(r=n.length;r--&&!1!==t(n[r],r,n););else n=ar(n,Fr(t,r,3));return n}function Se(n,t,r){var e=n?n.length:0;return fe(e)||(n=fu(n),e=n.length),e?(r="number"==typeof r?0>r?oo(e+r,0):r||0:0,"string"==typeof n||!Wo(n)&&ru(n)?e>r&&-1<n.indexOf(t,r):-1<te(n,t,r)):!1}function We(n,t,r){var e=Wo(n)?Yt:xr;return t=ne(t,r,3),e(n,t)}function Ne(n,t,r,e){return(Wo(n)?Gt:Ir)(n,ne(t,e,4),r,3>arguments.length,fr)}function Ue(n,t,r,e){return(Wo(n)?Jt:Ir)(n,ne(t,e,4),r,3>arguments.length,ar)}function Fe(n,t,r){return(r?ie(n,t,r):null==t)?(n=he(n),t=n.length,t>0?n[Rr(0,t-1)]:b):(n=Le(n),n.length=io(0>t?0:+t||0,n.length),n)}function Le(n){n=he(n);for(var t=-1,r=n.length,e=bu(r);++t<r;){var u=Rr(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function $e(n,t,r){var e=Wo(n)?Xt:Cr;return("function"!=typeof t||"undefined"!=typeof r)&&(t=ne(t,r,3)),e(n,t)}function Be(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Cu(B);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function ze(n,t){var r=A;if(2<arguments.length)var e=Or(arguments,2),u=v(e,ze.placeholder),r=r|I;return Gr(n,r,t,e,u)}function De(n,t){var r=A|j;if(2<arguments.length)var e=Or(arguments,2),u=v(e,De.placeholder),r=r|I;return Gr(t,r,n,e,u)}function Me(n,t,r){return r&&ie(n,t,r)&&(t=null),n=Gr(n,E,null,null,null,null,null,t),n.placeholder=Me.placeholder,n}function qe(n,t,r){return r&&ie(n,t,r)&&(t=null),n=Gr(n,R,null,null,null,null,null,t),n.placeholder=qe.placeholder,n}function Pe(n,t,r){function e(){var r=t-(So()-c);0>=r||r>t?(f&&Pu(f),r=p,f=s=p=b,r&&(h=So(),a=n.apply(l,i),s||f||(i=l=null))):s=Ju(e,r)}function u(){s&&Pu(s),f=s=p=b,(g||_!==t)&&(h=So(),a=n.apply(l,i),s||f||(i=l=null))}function o(){if(i=arguments,c=So(),l=this,p=g&&(s||!v),!1===_)var r=v&&!s;else{f||v||(h=c);var o=_-(c-h),y=0>=o||o>_;y?(f&&(f=Pu(f)),h=c,a=n.apply(l,i)):f||(f=Ju(u,o))}return y&&s?s=Pu(s):s||t===_||(s=Ju(e,t)),r&&(y=!0,a=n.apply(l,i)),!y||s||f||(i=l=null),a}var i,f,a,c,l,s,p,h=0,_=!1,g=!0;if("function"!=typeof n)throw new Cu(B);if(t=0>t?0:t,!0===r)var v=!0,g=!1;else He(r)&&(v=r.leading,_="maxWait"in r&&oo(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=function(){s&&Pu(s),f&&Pu(f),f=s=p=b},o}function Ke(){var n=arguments,t=n.length-1;if(0>t)return function(n){return n};if(!Kt(n,r))throw new Cu(B);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function Ve(n,t){function r(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o}if("function"!=typeof n||t&&"function"!=typeof t)throw new Cu(B);return r.cache=new Ve.Cache,r}function Ye(n){var t=Or(arguments,1),r=v(t,Ye.placeholder);return Gr(n,I,null,t,r)}function Ze(n){var t=Or(arguments,1),r=v(t,Ze.placeholder);return Gr(n,O,null,t,r)}function Ge(n){return fe(_(n)?n.length:b)&&$u.call(n)==D||!1}function Je(n){return n&&1===n.nodeType&&_(n)&&-1<$u.call(n).indexOf("Element")||!1}function Xe(n){return _(n)&&"string"==typeof n.message&&$u.call(n)==K||!1}function He(n){var t=typeof n;return"function"==t||n&&"object"==t||!1}function Qe(n){return null==n?!1:$u.call(n)==V?zu.test(Nu.call(n)):_(n)&&bt.test(n)||!1}function nu(n){return"number"==typeof n||_(n)&&$u.call(n)==Y||!1}function tu(n){return _(n)&&$u.call(n)==G||!1}function ru(n){return"string"==typeof n||_(n)&&$u.call(n)==J||!1}function eu(n){return _(n)&&fe(n.length)&&Tt[$u.call(n)]||!1}function uu(n){return rr(n,iu(n))}function ou(n){return dr(n,iu(n))}function iu(n){if(null==n)return[];He(n)||(n=Ru(n));for(var t=n.length,t=t&&fe(t)&&(Wo(n)||wo.nonEnumArgs&&Ge(n))&&t||0,r=n.constructor,e=-1,r="function"==typeof r&&r.prototype===n,u=bu(t),o=t>0;++e<t;)u[e]=e+"";for(var i in n)o&&oe(i,t)||"constructor"==i&&(r||!Fu.call(n,i))||u.push(i);return u}function fu(n){return Sr(n,$o(n))}function au(n){return(n=u(n))&&n.replace(xt,l)}function cu(n){return(n=u(n))&&kt.test(n)?n.replace(jt,"\\$&"):n}function lu(n,t,r){return r&&ie(n,t,r)&&(t=0),co(n,t)}function su(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!eo(t))return r;do t%2&&(r+=n),t=Ku(t/2),n+=n;while(t);return r}function pu(n,t,r){var e=n;return(n=u(n))?(r?ie(e,t,r):null==t)?n.slice(y(n),d(n)+1):(t+="",n.slice(i(n,t),f(n,t)+1)):n}function hu(n,t,r){return r&&ie(n,t,r)&&(t=null),n=u(n),n.match(t||It)||[]}function _u(){var n=arguments.length,t=arguments[0];try{for(var r=bu(n?n-1:0);0<--n;)r[n-1]=arguments[n];return t.apply(b,r)}catch(e){return Xe(e)?e:new Au(e)}}function gu(n,t,r){return r&&ie(n,t,r)&&(t=null),_(n)?du(n):er(n,t)}function vu(n){return function(){return n}}function yu(n){return n}function du(n){return Ar(ur(n,!0))}function mu(n,t,r){if(null==r){var e=He(t),u=e&&$o(t);((u=u&&u.length&&dr(t,u))?u.length:e)||(u=!1,r=t,t=n,n=this)}u||(u=dr(t,$o(t)));var o=!0,e=-1,i=Uo(n),f=u.length;!1===r?o=!1:He(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=qt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return r=[this.value()],Yu.apply(r,arguments),t.apply(n,r)}}(a))}return n}function wu(){}g=g?Mt.defaults(Bt.Object(),g,Mt.pick(Bt,Ct)):Bt;var bu=g.Array,xu=g.Date,Au=g.Error,ju=g.Function,ku=g.Math,Eu=g.Number,Ru=g.Object,Iu=g.RegExp,Ou=g.String,Cu=g.TypeError,Tu=bu.prototype,Su=Ru.prototype,Wu=(Wu=g.window)&&Wu.document,Nu=ju.prototype.toString,Uu=Er("length"),Fu=Su.hasOwnProperty,Lu=0,$u=Su.toString,Bu=g._,zu=Iu("^"+cu($u).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Du=Qe(Du=g.ArrayBuffer)&&Du,Mu=Qe(Mu=Du&&new Du(0).slice)&&Mu,qu=ku.ceil,Pu=g.clearTimeout,Ku=ku.floor,Vu=Qe(Vu=Ru.getPrototypeOf)&&Vu,Yu=Tu.push,Zu=Su.propertyIsEnumerable,Gu=Qe(Gu=g.Set)&&Gu,Ju=g.setTimeout,Xu=Tu.splice,Hu=Qe(Hu=g.Uint8Array)&&Hu,Qu=Qe(Qu=g.WeakMap)&&Qu,no=function(){try{var n=Qe(n=g.Float64Array)&&n,t=new n(new Du(10),0,1)&&n}catch(r){}return t}(),to=Qe(to=bu.isArray)&&to,ro=Qe(ro=Ru.create)&&ro,eo=g.isFinite,uo=Qe(uo=Ru.keys)&&uo,oo=ku.max,io=ku.min,fo=Qe(fo=xu.now)&&fo,ao=Qe(ao=Eu.isFinite)&&ao,co=g.parseInt,lo=ku.random,so=Eu.NEGATIVE_INFINITY,po=Eu.POSITIVE_INFINITY,ho=ku.pow(2,32)-1,_o=ho-1,go=ho>>>1,vo=no?no.BYTES_PER_ELEMENT:0,yo=ku.pow(2,53)-1,mo=Qu&&new Qu,wo=Nt.support={};!function(){wo.funcDecomp=!Qe(g.WinRTError)&&Et.test(w),wo.funcNames="string"==typeof ju.name;try{wo.dom=11===Wu.createDocumentFragment().nodeType}catch(t){wo.dom=!1}try{wo.nonEnumArgs=!Zu.call(arguments,1)}catch(r){wo.nonEnumArgs=!0}}(0,0),Nt.templateSettings={escape:_t,evaluate:gt,interpolate:vt,variable:"",imports:{_:Nt}};var bo=function(){function n(){}return function(t){if(He(t)){n.prototype=t;var r=new n;n.prototype=null}return r||g.Object()}}(),xo=mo?function(n,t){return mo.set(n,t),n}:yu;Mu||(Lr=Du&&Hu?function(n){var t=n.byteLength,r=no?Ku(t/vo):0,e=r*vo,u=new Du(t);if(r){var o=new no(u,0,r);o.set(new no(n,0,r))}return t!=e&&(o=new Hu(u,e),o.set(new Hu(n,e))),u}:vu(null));var Ao=ro&&Gu?function(n){return new zt(n)}:vu(null),jo=mo?function(n){return mo.get(n)}:wu,ko=function(){var n=0,t=0;return function(r,e){var u=So(),o=U-(u-t);if(t=u,o>0){if(++n>=N)return r}else n=0;return xo(r,e)}}(),Eo=zr(function(n,t,r){Fu.call(n,r)?++n[r]:n[r]=1}),Ro=zr(function(n,t,r){Fu.call(n,r)?n[r].push(t):n[r]=[t]}),Io=zr(function(n,t,r){n[r]=t}),Oo=Kr(Zt),Co=Kr(function(n){for(var t=-1,r=n.length,e=po;++t<r;){var u=n[t];e>u&&(e=u)}return e},!0),To=zr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),So=fo||function(){return(new xu).getTime()},Wo=to||function(n){return _(n)&&fe(n.length)&&$u.call(n)==M||!1};wo.dom||(Je=function(n){return n&&1===n.nodeType&&_(n)&&!Fo(n)||!1});var No=ao||function(n){return"number"==typeof n&&eo(n)},Uo=r(/x/)||Hu&&!r(Hu)?function(n){return $u.call(n)==V}:r,Fo=Vu?function(n){if(!n||$u.call(n)!=Z)return!1;var t=n.valueOf,r=Qe(t)&&(r=Vu(t))&&Vu(r);return r?n==r||Vu(n)==r:se(n)}:se,Lo=Dr(nr),$o=uo?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&r&&fe(r)?pe(n):He(n)?uo(n):[]}:pe,Bo=Dr(kr),zo=qr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Do=qr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=co(Ot+"08")&&(lu=function(n,t,r){return(r?ie(n,t,r):null==t)?t=0:t&&(t=+t),n=pu(n),co(n,t||(wt.test(n)?16:10))});var Mo=qr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase() }),qo=qr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return Nt.prototype=Ut.prototype,Ft.prototype=bo(Ut.prototype),Ft.prototype.constructor=Ft,Lt.prototype=bo(Ut.prototype),Lt.prototype.constructor=Lt,$t.prototype.delete=function(n){return this.has(n)&&delete this.__data__[n]},$t.prototype.get=function(n){return"__proto__"==n?b:this.__data__[n]},$t.prototype.has=function(n){return"__proto__"!=n&&Fu.call(this.__data__,n)},$t.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},zt.prototype.push=function(n){var t=this.data;"string"==typeof n||He(n)?t.set.add(n):t.hash[n]=!0},Ve.Cache=$t,Nt.after=function(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Cu(B);var r=n;n=t,t=r}return n=eo(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Nt.ary=function(n,t,r){return r&&ie(n,t,r)&&(t=null),t=n&&null==t?n.length:oo(+t||0,0),Gr(n,T,null,null,null,null,t)},Nt.assign=Lo,Nt.at=function(n){return fe(n?n.length:0)&&(n=he(n)),tr(n,pr(arguments,!1,!1,1))},Nt.before=Be,Nt.bind=ze,Nt.bindAll=function(n){for(var t=n,r=1<arguments.length?pr(arguments,!1,!1,1):ou(n),e=-1,u=r.length;++e<u;){var o=r[e];t[o]=Gr(t[o],A,t)}return t},Nt.bindKey=De,Nt.callback=gu,Nt.chain=ke,Nt.chunk=function(n,t,r){t=(r?ie(n,t,r):null==t)?1:oo(+t||1,1),r=0;for(var e=n?n.length:0,u=-1,o=bu(qu(e/t));e>r;)o[++u]=Or(n,r,r+=t);return o},Nt.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Nt.constant=vu,Nt.countBy=Eo,Nt.create=function(n,t,r){var e=bo(n);return r&&ie(n,t,r)&&(t=null),t?rr(t,e,$o(t)):e},Nt.curry=Me,Nt.curryRight=qe,Nt.debounce=Pe,Nt.defaults=function(n){if(null==n)return n;var t=qt(arguments);return t.push(Ht),Lo.apply(b,t)},Nt.defer=function(n){return or(n,1,arguments,1)},Nt.delay=function(n,t){return or(n,t,arguments,2)},Nt.difference=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Wo(r)||Ge(r))break}return ir(r,pr(arguments,!1,!0,++n))},Nt.drop=ve,Nt.dropRight=ye,Nt.dropRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=ne(t,r,3);e--&&t(n[e],e,n););return Or(n,0,e+1)},Nt.dropWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=ne(t,r,3);++u<e&&t(n[u],u,n););return Or(n,u)},Nt.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&"number"!=typeof r&&ie(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e="undefined"==typeof e||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n},Nt.filter=Ie,Nt.flatten=function(n,t,r){var e=n?n.length:0;return r&&ie(n,t,r)&&(t=!1),e?pr(n,t):[]},Nt.flattenDeep=function(n){return n&&n.length?pr(n,!0):[]},Nt.flow=function(){var n=arguments,t=n.length;if(!t)return function(n){return n};if(!Kt(n,r))throw new Cu(B);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}},Nt.flowRight=Ke,Nt.forEach=Ce,Nt.forEachRight=Te,Nt.forIn=function(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=Fr(t,r,3)),hr(n,t,iu)},Nt.forInRight=function(n,t,r){return t=Fr(t,r,3),_r(n,t,iu)},Nt.forOwn=function(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=Fr(t,r,3)),vr(n,t)},Nt.forOwnRight=function(n,t,r){return t=Fr(t,r,3),_r(n,t,$o)},Nt.functions=ou,Nt.groupBy=Ro,Nt.indexBy=Io,Nt.initial=function(n){return ye(n,1)},Nt.intersection=function(){for(var n=[],r=-1,e=arguments.length,u=[],o=te(),i=o==t;++r<e;){var f=arguments[r];(Wo(f)||Ge(f))&&(n.push(f),u.push(i&&120<=f.length&&Ao(r&&f)))}var e=n.length,i=n[0],a=-1,c=i?i.length:0,l=[],s=u[0];n:for(;++a<c;)if(f=i[a],0>(s?Dt(s,f):o(l,f))){for(r=e;--r;){var p=u[r];if(0>(p?Dt(p,f):o(n[r],f)))continue n}s&&s.push(f),l.push(f)}return l},Nt.invert=function(n,t,r){r&&ie(n,t,r)&&(t=null),r=-1;for(var e=$o(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?Fu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Nt.invoke=function(n,t){return mr(n,t,Or(arguments,2))},Nt.keys=$o,Nt.keysIn=iu,Nt.map=We,Nt.mapValues=function(n,t,r){var e={};return t=ne(t,r,3),vr(n,function(n,r,u){e[r]=t(n,r,u)}),e},Nt.matches=du,Nt.matchesProperty=function(n,t){return jr(n+"",ur(t,!0))},Nt.memoize=Ve,Nt.merge=Bo,Nt.mixin=mu,Nt.negate=function(n){if("function"!=typeof n)throw new Cu(B);return function(){return!n.apply(this,arguments)}},Nt.omit=function(n,t,r){if(null==n)return{};if("function"!=typeof t){var e=Yt(pr(arguments,!1,!1,1),Ou);return ce(n,ir(iu(n),e))}return t=Fr(t,r,3),le(n,function(n,r,e){return!t(n,r,e)})},Nt.once=function(n){return Be(n,2)},Nt.pairs=function(n){for(var t=-1,r=$o(n),e=r.length,u=bu(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},Nt.partial=Ye,Nt.partialRight=Ze,Nt.partition=To,Nt.pick=function(n,t,r){return null==n?{}:"function"==typeof t?le(n,Fr(t,r,3)):ce(n,pr(arguments,!1,!1,1))},Nt.pluck=function(n,t){return We(n,Er(t))},Nt.property=function(n){return Er(n+"")},Nt.propertyOf=function(n){return function(t){return null==n?b:n[t]}},Nt.pull=function(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=te(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];-1<(u=r(n,o,u));)Xu.call(n,u,1);return n},Nt.pullAt=function(t){var r=t||[],e=pr(arguments,!1,!1,1),u=e.length,o=tr(r,e);for(e.sort(n);u--;){var i=parseFloat(e[u]);if(i!=f&&oe(i)){var f=i;Xu.call(r,i,1)}}return o},Nt.range=function(n,t,r){r&&ie(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;var e=-1;t=oo(qu((t-n)/(r||1)),0);for(var u=bu(t);++e<t;)u[e]=n,n+=r;return u},Nt.rearg=function(n){var t=pr(arguments,!1,!1,1);return Gr(n,C,null,null,null,t)},Nt.reject=function(n,t,r){var e=Wo(n)?Vt:lr;return t=ne(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Nt.remove=function(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=ne(t,r,3);++e<u;)r=n[e],t(r,e,n)&&(o.push(r),Xu.call(n,e--,1),u--);return o},Nt.rest=be,Nt.shuffle=Le,Nt.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&ie(n,t,r)&&(t=0,r=e),Or(n,t,r)):[]},Nt.sortBy=function(n,t,r){var u=-1,o=n?n.length:0,i=fe(o)?bu(o):[];return r&&ie(n,t,r)&&(t=null),t=ne(t,r,3),fr(n,function(n,r,e){i[++u]={a:t(n,r,e),b:u,c:n}}),e(i,a)},Nt.sortByAll=function(n){var t=arguments;3<t.length&&ie(t[1],t[2],t[3])&&(t=[n,t[1]]);var r=-1,u=n?n.length:0,o=pr(t,!1,!1,1),i=fe(u)?bu(u):[];return fr(n,function(n){for(var t=o.length,e=bu(t);t--;)e[t]=null==n?b:n[o[t]];i[++r]={a:e,b:r,c:n}}),e(i,c)},Nt.spread=function(n){if("function"!=typeof n)throw new Cu(B);return function(t){return n.apply(this,t)}},Nt.take=function(n,t,r){return n&&n.length?((r?ie(n,t,r):null==t)&&(t=1),Or(n,0,0>t?0:t)):[]},Nt.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?ie(n,t,r):null==t)&&(t=1),t=e-(+t||0),Or(n,0>t?0:t)):[]},Nt.takeRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=ne(t,r,3);e--&&t(n[e],e,n););return Or(n,e+1)},Nt.takeWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=ne(t,r,3);++u<e&&t(n[u],u,n););return Or(n,0,u)},Nt.tap=function(n,t,r){return t.call(r,n),n},Nt.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Cu(B);return!1===r?e=!1:He(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Wt.leading=e,Wt.maxWait=+t,Wt.trailing=u,Pe(n,t,Wt)},Nt.thru=Ee,Nt.times=function(n,t,r){if(n=+n,1>n||!eo(n))return[];var e=-1,u=bu(io(n,ho));for(t=Fr(t,r,1);++e<n;)ho>e?u[e]=t(e):t(e);return u},Nt.toArray=function(n){var t=n?n.length:0;return fe(t)?t?qt(n):[]:fu(n)},Nt.toPlainObject=uu,Nt.transform=function(n,t,r,e){var u=Wo(n)||eu(n);return t=ne(t,e,4),null==r&&(u||He(n)?(e=n.constructor,r=u?Wo(n)?new e:[]:bo(Uo(e)&&e.prototype)):r={}),(u?Pt:vr)(n,function(n,e,u){return t(r,n,e,u)}),r},Nt.union=function(){return Tr(pr(arguments,!1,!0))},Nt.uniq=xe,Nt.unzip=Ae,Nt.values=fu,Nt.valuesIn=function(n){return Sr(n,iu(n))},Nt.where=function(n,t){return Ie(n,Ar(t))},Nt.without=function(n){return ir(n,Or(arguments,1))},Nt.wrap=function(n,t){return t=null==t?yu:t,Gr(t,I,null,[n],[])},Nt.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Wo(r)||Ge(r))var e=e?ir(e,r).concat(ir(r,e)):r}return e?Tr(e):[]},Nt.zip=function(){for(var n=arguments.length,t=bu(n);n--;)t[n]=arguments[n];return Ae(t)},Nt.zipObject=je,Nt.backflow=Ke,Nt.collect=We,Nt.compose=Ke,Nt.each=Ce,Nt.eachRight=Te,Nt.extend=Lo,Nt.iteratee=gu,Nt.methods=ou,Nt.object=je,Nt.select=Ie,Nt.tail=be,Nt.unique=xe,mu(Nt,Nt),Nt.attempt=_u,Nt.camelCase=zo,Nt.capitalize=function(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Nt.clone=function(n,t,r,e){return t&&"boolean"!=typeof t&&ie(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),r="function"==typeof r&&Fr(r,e,1),ur(n,t,r)},Nt.cloneDeep=function(n,t,r){return t="function"==typeof t&&Fr(t,r,1),ur(n,!0,t)},Nt.deburr=au,Nt.endsWith=function(n,t,r){n=u(n),t+="";var e=n.length;return r=("undefined"==typeof r?e:io(0>r?0:+r||0,e))-t.length,r>=0&&n.indexOf(t,r)==r},Nt.escape=function(n){return(n=u(n))&&ht.test(n)?n.replace(st,s):n},Nt.escapeRegExp=cu,Nt.every=Re,Nt.find=Oe,Nt.findIndex=de,Nt.findKey=function(n,t,r){return t=ne(t,r,3),sr(n,t,vr,!0)},Nt.findLast=function(n,t,r){return t=ne(t,r,3),sr(n,t,ar)},Nt.findLastIndex=function(n,t,r){var e=n?n.length:0;for(t=ne(t,r,3);e--;)if(t(n[e],e,n))return e;return-1},Nt.findLastKey=function(n,t,r){return t=ne(t,r,3),sr(n,t,yr,!0)},Nt.findWhere=function(n,t){return Oe(n,Ar(t))},Nt.first=me,Nt.has=function(n,t){return n?Fu.call(n,t):!1},Nt.identity=yu,Nt.includes=Se,Nt.indexOf=we,Nt.inRange=function(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=t&&r>n},Nt.isArguments=Ge,Nt.isArray=Wo,Nt.isBoolean=function(n){return!0===n||!1===n||_(n)&&$u.call(n)==q||!1},Nt.isDate=function(n){return _(n)&&$u.call(n)==P||!1},Nt.isElement=Je,Nt.isEmpty=function(n){if(null==n)return!0;var t=n.length;return fe(t)&&(Wo(n)||ru(n)||Ge(n)||_(n)&&Uo(n.splice))?!t:!$o(n).length},Nt.isEqual=function(n,t,r,e){return r="function"==typeof r&&Fr(r,e,3),!r&&ae(n)&&ae(t)?n===t:(e=r?r(n,t):b,"undefined"==typeof e?wr(n,t,r):!!e)},Nt.isError=Xe,Nt.isFinite=No,Nt.isFunction=Uo,Nt.isMatch=function(n,t,r,e){var u=$o(t),o=u.length;if(r="function"==typeof r&&Fr(r,e,3),!r&&1==o){var i=u[0];if(e=t[i],ae(e))return null!=n&&e===n[i]&&Fu.call(n,i)}for(var i=bu(o),f=bu(o);o--;)e=i[o]=t[u[o]],f[o]=ae(e);return br(n,u,i,f,r)},Nt.isNaN=function(n){return nu(n)&&n!=+n},Nt.isNative=Qe,Nt.isNull=function(n){return null===n},Nt.isNumber=nu,Nt.isObject=He,Nt.isPlainObject=Fo,Nt.isRegExp=tu,Nt.isString=ru,Nt.isTypedArray=eu,Nt.isUndefined=function(n){return"undefined"==typeof n},Nt.kebabCase=Do,Nt.last=function(n){var t=n?n.length:0;return t?n[t-1]:b},Nt.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?oo(e+r,0):io(r||0,e-1))+1;else if(r)return u=Nr(n,t,!0)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;if(t!==t)return h(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1},Nt.max=Oo,Nt.min=Co,Nt.noConflict=function(){return g._=Bu,this},Nt.noop=wu,Nt.now=So,Nt.pad=function(n,t,r){n=u(n),t=+t;var e=n.length;return t>e&&eo(t)?(e=(t-e)/2,t=Ku(e),e=qu(e),r=Yr("",e,r),r.slice(0,t)+n+r):n},Nt.padLeft=function(n,t,r){return(n=u(n))&&Yr(n,t,r)+n},Nt.padRight=function(n,t,r){return(n=u(n))&&n+Yr(n,t,r)},Nt.parseInt=lu,Nt.random=function(n,t,r){r&&ie(n,t,r)&&(t=r=null);var e=null==n,u=null==t;return null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=lo(),io(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t)):Rr(n,t)},Nt.reduce=Ne,Nt.reduceRight=Ue,Nt.repeat=su,Nt.result=function(n,t,r){return t=null==n?b:n[t],"undefined"==typeof t&&(t=r),Uo(t)?t.call(n):t},Nt.runInContext=w,Nt.size=function(n){var t=n?n.length:0;return fe(t)?t:$o(n).length},Nt.snakeCase=Mo,Nt.some=$e,Nt.sortedIndex=function(n,t,r,e){var u=ne(r);return u===er&&null==r?Nr(n,t):Ur(n,t,u(r,e,1))},Nt.sortedLastIndex=function(n,t,r,e){var u=ne(r);return u===er&&null==r?Nr(n,t,!0):Ur(n,t,u(r,e,1),!0)},Nt.startCase=qo,Nt.startsWith=function(n,t,r){return n=u(n),r=null==r?0:io(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r},Nt.template=function(n,t,r){var e=Nt.templateSettings;r&&ie(n,t,r)&&(t=r=null),n=u(n),t=nr(nr({},r||t),e,Qt),r=nr(nr({},t.imports),e.imports,Qt);var o,i,f=$o(r),a=Sr(r,f),c=0;r=t.interpolate||At;var l="__p+='";r=Iu((t.escape||At).source+"|"+r.source+"|"+(r===vt?yt:At).source+"|"+(t.evaluate||At).source+"|$","g");var s="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Rt,p),r&&(o=!0,l+="'+__e("+r+")+'"),f&&(i=!0,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(ft,""):l).replace(at,"$1").replace(ct,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=_u(function(){return ju(f,s+"return "+l).apply(b,a)}),t.source=l,Xe(t))throw t;return t},Nt.trim=pu,Nt.trimLeft=function(n,t,r){var e=n;return(n=u(n))?n.slice((r?ie(e,t,r):null==t)?y(n):i(n,t+"")):n},Nt.trimRight=function(n,t,r){var e=n;return(n=u(n))?(r?ie(e,t,r):null==t)?n.slice(0,d(n)+1):n.slice(0,f(n,t+"")+1):n},Nt.trunc=function(n,t,r){r&&ie(n,t,r)&&(t=null);var e=S;if(r=W,null!=t)if(He(t)){var o="separator"in t?t.separator:o,e="length"in t?+t.length||0:e;r="omission"in t?u(t.omission):r}else e=+t||0;if(n=u(n),e>=n.length)return n;if(e-=r.length,1>e)return r;if(t=n.slice(0,e),null==o)return t+r;if(tu(o)){if(n.slice(e).search(o)){var i,f=n.slice(0,e);for(o.global||(o=Iu(o.source,(dt.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;t=t.slice(0,null==i?e:i)}}else n.indexOf(o,e)!=e&&(o=t.lastIndexOf(o),o>-1&&(t=t.slice(0,o)));return t+r},Nt.unescape=function(n){return(n=u(n))&&pt.test(n)?n.replace(lt,m):n},Nt.uniqueId=function(n){var t=++Lu;return u(n)+t},Nt.words=hu,Nt.all=Re,Nt.any=$e,Nt.contains=Se,Nt.detect=Oe,Nt.foldl=Ne,Nt.foldr=Ue,Nt.head=me,Nt.include=Se,Nt.inject=Ne,mu(Nt,function(){var n={};return vr(Nt,function(t,r){Nt.prototype[r]||(n[r]=t)}),n}(),!1),Nt.sample=Fe,Nt.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Fe(t,n)}):Fe(this.value())},Nt.VERSION=x,Pt("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Nt[n].placeholder=Nt}),Pt(["filter","map","takeWhile"],function(n,t){var r=t==F,e=t==$;Lt.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,f=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&0>o.__dir__,f.push({iteratee:ne(n,u,3),type:t}),o}}),Pt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Lt.prototype[n]=function(e){e=null==e?1:oo(Ku(e)||0,0);var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?io(o,e):o+e}else(u.__views__||(u.__views__=[])).push({size:e,type:n+(0>u.__dir__?"Right":"")});return u},Lt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Lt.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),Pt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Lt.prototype[n]=function(){return this[r](1).value()[0]}}),Pt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Lt.prototype[n]=function(){return this[r](1)}}),Pt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?Ar:Er;Lt.prototype[n]=function(n){return this[r](e(n))}}),Lt.prototype.compact=function(){return this.filter(yu)},Lt.prototype.dropWhile=function(n,t){var r;return n=ne(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},Lt.prototype.reject=function(n,t){return n=ne(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Lt.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);return"undefined"!=typeof t&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Lt.prototype.toArray=function(){return this.drop(0)},vr(Lt.prototype,function(n,t){var r=Nt[t],e=/^(?:first|last)$/.test(t);Nt.prototype[t]=function(){function t(n){return n=[n],Yu.apply(n,o),r.apply(Nt,n)}var u=this.__wrapped__,o=arguments,i=this.__chain__,f=!!this.__actions__.length,a=u instanceof Lt,c=a&&!f;return e&&!i?c?n.call(u):r.call(Nt,this.value()):a||Wo(u)?(u=n.apply(c?u:new Lt(this),o),e||!f&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Ee,args:[t],thisArg:Nt}),new Ft(u,i)):this.thru(t)}}),Pt("concat join pop push shift sort splice unshift".split(" "),function(n){var t=Tu[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);Nt.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Lt.prototype.clone=function(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Lt(this.__wrapped__);return e.__actions__=n?qt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?qt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?qt(r):null,e},Lt.prototype.reverse=function(){if(this.__filtered__){var n=new Lt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},Lt.prototype.value=function(){var n=this.__wrapped__.value();if(!Wo(n))return Wr(n,this.__actions__);var t,r=this.__dir__,e=0>r;t=n.length;for(var u=this.__views__,o=0,i=-1,f=u?u.length:0;++i<f;){var a=u[i],c=a.size;switch(a.type){case"drop":o+=c;break;case"dropRight":t-=c;break;case"take":t=io(t,o+c);break;case"takeRight":o=oo(o,t-c)}}t={start:o,end:t},i=t.start,f=t.end,t=f-i,u=this.__dropCount__,o=io(t,this.__takeCount__),e=e?f:i-1,f=(i=this.__iteratees__)?i.length:0,a=0,c=[];n:for(;t--&&o>a;){for(var e=e+r,l=-1,s=n[e];++l<f;){var p=i[l],h=p.iteratee(s,e,n),p=p.type;if(p==L)s=h;else if(!h){if(p==F)continue n;break n}}u?u--:c[a++]=s}return c},Nt.prototype.chain=function(){return ke(this)},Nt.prototype.commit=function(){return new Ft(this.value(),this.__chain__)},Nt.prototype.plant=function(n){for(var t,r=this;r instanceof Ut;){var e=ge(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Nt.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Lt?(this.__actions__.length&&(n=new Lt(this)),new Ft(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})},Nt.prototype.toString=function(){return this.value()+""},Nt.prototype.run=Nt.prototype.toJSON=Nt.prototype.valueOf=Nt.prototype.value=function(){return Wr(this.__wrapped__,this.__actions__)},Nt.prototype.collect=Nt.prototype.map,Nt.prototype.head=Nt.prototype.first,Nt.prototype.select=Nt.prototype.filter,Nt.prototype.tail=Nt.prototype.rest,Nt}var b,x="3.3.0",A=1,j=2,k=4,E=8,R=16,I=32,O=64,C=128,T=256,S=30,W="...",N=150,U=16,F=0,L=1,$=2,B="Expected a function",z="__lodash_placeholder__",D="[object Arguments]",M="[object Array]",q="[object Boolean]",P="[object Date]",K="[object Error]",V="[object Function]",Y="[object Number]",Z="[object Object]",G="[object RegExp]",J="[object String]",X="[object ArrayBuffer]",H="[object Float32Array]",Q="[object Float64Array]",nt="[object Int8Array]",tt="[object Int16Array]",rt="[object Int32Array]",et="[object Uint8Array]",ut="[object Uint8ClampedArray]",ot="[object Uint16Array]",it="[object Uint32Array]",ft=/\b__p\+='';/g,at=/\b(__p\+=)''\+/g,ct=/(__e\(.*?\)|\b__t\))\+'';/g,lt=/&(?:amp|lt|gt|quot|#39|#96);/g,st=/[&<>"'`]/g,pt=RegExp(lt.source),ht=RegExp(st.source),_t=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,yt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,mt=/^\s*function[ \n\r\t]+\w/,wt=/^0[xX]/,bt=/^\[object .+?Constructor\]$/,xt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,At=/($^)/,jt=/[.*+?^${}()|[\]\/\\]/g,kt=RegExp(jt.source),Et=/\bthis\b/,Rt=/['\n\r\u2028\u2029\\]/g,It=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]{2,}(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Ot=" \f ﻿\n\r\u2028\u2029 ᠎             　",Ct="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Tt={};Tt[H]=Tt[Q]=Tt[nt]=Tt[tt]=Tt[rt]=Tt[et]=Tt[ut]=Tt[ot]=Tt[it]=!0,Tt[D]=Tt[M]=Tt[X]=Tt[q]=Tt[P]=Tt[K]=Tt[V]=Tt["[object Map]"]=Tt[Y]=Tt[Z]=Tt[G]=Tt["[object Set]"]=Tt[J]=Tt["[object WeakMap]"]=!1;var St={};St[D]=St[M]=St[X]=St[q]=St[P]=St[H]=St[Q]=St[nt]=St[tt]=St[rt]=St[Y]=St[Z]=St[G]=St[J]=St[et]=St[ut]=St[ot]=St[it]=!0,St[K]=St[V]=St["[object Map]"]=St["[object Set]"]=St["[object WeakMap]"]=!1;var Wt={leading:!1,maxWait:0,trailing:!1},Nt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ft={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Lt={"function":!0,object:!0},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bt=Lt[typeof window]&&window!==(this&&this.window)?window:this,zt=Lt[typeof exports]&&exports&&!exports.nodeType&&exports,Lt=Lt[typeof module]&&module&&!module.nodeType&&module,Dt=zt&&Lt&&"object"==typeof global&&global;!Dt||Dt.global!==Dt&&Dt.window!==Dt&&Dt.self!==Dt||(Bt=Dt);var Dt=Lt&&Lt.exports===zt&&zt,Mt=w();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Bt._=Mt,define(function(){return Mt})):zt&&Lt?Dt?(Lt.exports=Mt)._=Mt:zt._=Mt:Bt._=Mt}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],312:[function(require,module){"use strict";module.exports=require(1)},{1:311}],313:[function(require,module){(function(global){(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(a){rb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&void 0}function e(a,b){var c=!0;return l(function(){return c&&(d(a),c=!1),b.apply(this,arguments)},b)}function f(a,b){nc[a]||(d(b),nc[a]=!0)}function g(a,b){return function(c){return o(a.call(this,c),b)}}function h(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function i(){}function j(a,b){b!==!1&&E(a),m(this,a),this._d=new Date(+a._d)}function k(a){var b=x(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=rb.localeData(),this._bubble()}function l(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fb.length>0)for(c in Fb)d=Fb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(a){return 0>a?Math.ceil(a):Math.floor(a)}function o(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function p(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function q(a,b){var c;return b=J(b,a),a.isBefore(b)?c=p(a,b):(c=p(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function r(a,b){return function(c,d){var e,g;return null===d||isNaN(+d)||(f(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),g=c,c=d,d=g),c="string"==typeof c?+c:c,e=rb.duration(c,d),s(this,e,a),this}}function s(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&lb(a,"Date",kb(a,"Date")+f*c),g&&jb(a,kb(a,"Month")+g*c),d&&rb.updateOffset(a,f||g)}function t(a){return"[object Array]"===Object.prototype.toString.call(a)}function u(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&z(a[d])!==z(b[d]))&&g++;return g+f}function w(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=gc[a]||hc[b]||b}return a}function x(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=w(c),b&&(d[b]=a[c]));return d}function y(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}rb[b]=function(e,f){var g,h,i=rb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=rb().utc().set(d,a);return i.call(rb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function z(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function A(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function B(a,b,c){return fb(rb([a,11,31+b-c]),b,c).week}function C(a){return D(a)?366:365}function D(a){return a%4===0&&a%100!==0||a%400===0}function E(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[yb]<0||a._a[yb]>11?yb:a._a[zb]<1||a._a[zb]>A(a._a[xb],a._a[yb])?zb:a._a[Ab]<0||a._a[Ab]>23?Ab:a._a[Bb]<0||a._a[Bb]>59?Bb:a._a[Cb]<0||a._a[Cb]>59?Cb:a._a[Db]<0||a._a[Db]>999?Db:-1,a._pf._overflowDayOfYear&&(xb>b||b>zb)&&(b=zb),a._pf.overflow=b)}function F(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function G(a){return a?a.toLowerCase().replace("_","-"):a}function H(a){for(var b,c,d,e,f=0;f<a.length;){for(e=G(a[f]).split("-"),b=e.length,c=G(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=I(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function I(a){var b=null;if(!Eb[a]&&Gb)try{b=rb.locale(),require("./locale/"+a),rb.locale(b)}catch(c){}return Eb[a]}function J(a,b){return b._isUTC?rb(a).zone(b._offset||0):rb(a).local()}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Kb);for(b=0,c=d.length;c>b;b++)d[b]=mc[d[b]]?mc[d[b]]:K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ic[b]||(ic[b]=L(b)),ic[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Lb.lastIndex=0;d>=0&&Lb.test(a);)a=a.replace(Lb,c),Lb.lastIndex=0,d-=1;return a}function O(a,b){var c,d=b._strict;switch(a){case"Q":return Wb;case"DDDD":return Yb;case"YYYY":case"GGGG":case"gggg":return d?Zb:Ob;case"Y":case"G":case"g":return _b;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?$b:Pb;case"S":if(d)return Wb;case"SS":if(d)return Xb;case"SSS":if(d)return Yb;case"DDD":return Nb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Rb;case"a":case"A":return b._locale._meridiemParse;case"X":return Ub;case"Z":case"ZZ":return Sb;case"T":return Tb;case"SSSS":return Qb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Xb:Mb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Mb;case"Do":return Vb;default:return c=new RegExp(X(W(a.replace("\\","")),"i"))}}function P(a){a=a||"";var b=a.match(Sb)||[],c=b[b.length-1]||[],d=(c+"").match(ec)||["-",0,0],e=+(60*d[1])+z(d[2]);return"+"===d[0]?-e:e}function Q(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[yb]=3*(z(b)-1));break;case"M":case"MM":null!=b&&(e[yb]=z(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[yb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[zb]=z(b));break;case"Do":null!=b&&(e[zb]=z(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=z(b));break;case"YY":e[xb]=rb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[xb]=z(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Ab]=z(b);break;case"m":case"mm":e[Bb]=z(b);break;case"s":case"ss":e[Cb]=z(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Db]=z(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=P(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=z(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=rb.parseTwoDigitYear(b)}}function R(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[xb],fb(rb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[xb],fb(rb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=gb(d,e,f,h,g),a._a[xb]=i.year,a._dayOfYear=i.dayOfYear}function S(a){var c,d,e,f,g=[];if(!a._d){for(e=U(a),a._w&&null==a._a[zb]&&null==a._a[yb]&&R(a),a._dayOfYear&&(f=b(a._a[xb],e[xb]),a._dayOfYear>C(f)&&(a._pf._overflowDayOfYear=!0),d=bb(f,0,a._dayOfYear),a._a[yb]=d.getUTCMonth(),a._a[zb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?bb:ab).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function T(a){var b;a._d||(b=x(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],S(a))}function U(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function V(a){if(a._f===rb.ISO_8601)return void Z(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=N(a._f,a._locale).match(Kb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(O(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),mc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),Q(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Ab]<12&&(a._a[Ab]+=12),a._isPm===!1&&12===a._a[Ab]&&(a._a[Ab]=0),S(a),E(a)}function W(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function X(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(a){var b,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=m({},a),b._pf=c(),b._f=a._f[f],V(b),F(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,d=b));l(a,d||b)}function Z(a){var b,c,d=a._i,e=ac.exec(d);if(e){for(a._pf.iso=!0,b=0,c=cc.length;c>b;b++)if(cc[b][1].exec(d)){a._f=cc[b][0]+(e[6]||" ");break}for(b=0,c=dc.length;c>b;b++)if(dc[b][1].exec(d)){a._f+=dc[b][0]; break}d.match(Sb)&&(a._f+="Z"),V(a)}else a._isValid=!1}function $(a){Z(a),a._isValid===!1&&(delete a._isValid,rb.createFromInputFallback(a))}function _(b){var c,d=b._i;d===a?b._d=new Date:u(d)?b._d=new Date(+d):null!==(c=Hb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?$(b):t(d)?(b._a=d.slice(0),S(b)):"object"==typeof d?T(b):"number"==typeof d?b._d=new Date(d):rb.createFromInputFallback(b)}function ab(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function bb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function cb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function db(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function eb(a,b,c){var d=rb.duration(a).abs(),e=wb(d.as("s")),f=wb(d.as("m")),g=wb(d.as("h")),h=wb(d.as("d")),i=wb(d.as("M")),j=wb(d.as("y")),k=e<jc.s&&["s",e]||1===f&&["m"]||f<jc.m&&["mm",f]||1===g&&["h"]||g<jc.h&&["hh",g]||1===h&&["d"]||h<jc.d&&["dd",h]||1===i&&["M"]||i<jc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,db.apply({},k)}function fb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=rb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function gb(a,b,c,d,e){var f,g,h=bb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:C(a-1)+g}}function hb(b){var c=b._i,d=b._f;return b._locale=b._locale||rb.localeData(b._l),null===c||d===a&&""===c?rb.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),rb.isMoment(c)?new j(c,!0):(d?t(d)?Y(b):V(b):_(b),new j(b)))}function ib(a,b){var c,d;if(1===b.length&&t(b[0])&&(b=b[0]),!b.length)return rb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function jb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),A(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function kb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function lb(a,b,c){return"Month"===b?jb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function mb(a,b){return function(c){return null!=c?(lb(this,a,c),rb.updateOffset(this,b),this):kb(this,a)}}function nb(a){return 400*a/146097}function ob(a){return 146097*a/400}function pb(a){rb.duration.fn[a]=function(){return this._data[a]}}function qb(a){"undefined"==typeof ender&&(sb=vb.moment,vb.moment=a?e("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",rb):rb)}for(var rb,sb,tb,ub="2.8.1",vb="undefined"!=typeof global?global:this,wb=Math.round,xb=0,yb=1,zb=2,Ab=3,Bb=4,Cb=5,Db=6,Eb={},Fb=[],Gb="undefined"!=typeof module&&module.exports,Hb=/^\/?Date\((\-?\d+)/i,Ib=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Jb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Kb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Lb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Mb=/\d\d?/,Nb=/\d{1,3}/,Ob=/\d{1,4}/,Pb=/[+\-]?\d{1,6}/,Qb=/\d+/,Rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Sb=/Z|[\+\-]\d\d:?\d\d/gi,Tb=/T/i,Ub=/[\+\-]?\d+(\.\d{1,3})?/,Vb=/\d{1,2}/,Wb=/\d/,Xb=/\d\d/,Yb=/\d{3}/,Zb=/\d{4}/,$b=/[+-]?\d{6}/,_b=/[+-]?\d+/,ac=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bc="YYYY-MM-DDTHH:mm:ssZ",cc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ec=/([\+\-]|\d\d)/gi,fc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),gc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ic={},jc={s:45,m:45,h:22,d:26,M:11},kc="DDD w W M D d".split(" "),lc="M D H h m s w W".split(" "),mc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+o(Math.abs(a),6)},gg:function(){return o(this.weekYear()%100,2)},gggg:function(){return o(this.weekYear(),4)},ggggg:function(){return o(this.weekYear(),5)},GG:function(){return o(this.isoWeekYear()%100,2)},GGGG:function(){return o(this.isoWeekYear(),4)},GGGGG:function(){return o(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return o(z(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},SSSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+":"+o(z(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+o(z(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nc={},oc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];kc.length;)tb=kc.pop(),mc[tb+"o"]=h(mc[tb],tb);for(;lc.length;)tb=lc.pop(),mc[tb+tb]=g(mc[tb],2);mc.DDDD=g(mc.DDD,3),l(i.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=rb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=rb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return fb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),rb=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=c(),hb(g)},rb.suppressDeprecationWarnings=!1,rb.createFromInputFallback=e("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),rb.min=function(){var a=[].slice.call(arguments,0);return ib("isBefore",a)},rb.max=function(){var a=[].slice.call(arguments,0);return ib("isAfter",a)},rb.utc=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=d,g._strict=f,g._pf=c(),hb(g).utc()},rb.unix=function(a){return rb(1e3*a)},rb.duration=function(a,b){var c,d,e,f,g=a,h=null;return rb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Ib.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:z(h[zb])*c,h:z(h[Ab])*c,m:z(h[Bb])*c,s:z(h[Cb])*c,ms:z(h[Db])*c}):(h=Jb.exec(a))?(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}):"object"==typeof g&&("from"in g||"to"in g)&&(f=q(rb(g.from),rb(g.to)),g={},g.ms=f.milliseconds,g.M=f.months),d=new k(g),rb.isDuration(a)&&a.hasOwnProperty("_locale")&&(d._locale=a._locale),d},rb.version=ub,rb.defaultFormat=bc,rb.ISO_8601=function(){},rb.momentProperties=Fb,rb.updateOffset=function(){},rb.relativeTimeThreshold=function(b,c){return jc[b]===a?!1:c===a?jc[b]:(jc[b]=c,!0)},rb.lang=e("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return rb.locale(a,b)}),rb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?rb.defineLocale(a,b):rb.localeData(a),c&&(rb.duration._locale=rb._locale=c)),rb._locale._abbr},rb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Eb[a]||(Eb[a]=new i),Eb[a].set(b),rb.locale(a),Eb[a]):(delete Eb[a],null)},rb.langData=e("moment.langData is deprecated. Use moment.localeData instead.",function(a){return rb.localeData(a)}),rb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return rb._locale;if(!t(a)){if(b=I(a))return b;a=[a]}return H(a)},rb.isMoment=function(a){return a instanceof j||null!=a&&a.hasOwnProperty("_isAMomentObject")},rb.isDuration=function(a){return a instanceof k};for(tb=oc.length-1;tb>=0;--tb)y(oc[tb]);rb.normalizeUnits=function(a){return w(a)},rb.invalid=function(a){var b=rb.utc(0/0);return null!=a?l(b._pf,a):b._pf.userInvalidated=!0,b},rb.parseZone=function(){return rb.apply(null,arguments).parseZone()},rb.parseTwoDigitYear=function(a){return z(a)+(z(a)>68?1900:2e3)},l(rb.fn=j.prototype,{clone:function(){return rb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=rb(this).utc();return 0<a.year()&&a.year()<=9999?M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&v(this._a,(this._isUTC?rb.utc(this._a):rb(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(a){var b=M(this,a||rb.defaultFormat);return this.localeData().postformat(b)},add:r(1,"add"),subtract:r(-1,"subtract"),diff:function(a,b,c){var d,e,f=J(a,this),g=6e4*(this.zone()-f.zone());return b=w(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-rb(this).startOf("month")-(f-rb(f).startOf("month")))/d,e-=6e4*(this.zone()-rb(this).startOf("month").zone()-(f.zone()-rb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:n(e)},from:function(a,b){return rb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(rb(),a)},calendar:function(a){var b=a||rb(),c=J(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=cb(a,this.localeData()),this.add(a-b,"d")):b},month:mb("Month",!0),startOf:function(a){switch(a=w(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=w(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+rb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+rb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+J(a,this).startOf(b)},min:e("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),this>a?this:a}),max:e("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():("string"==typeof a&&(a=P(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._d.getTimezoneOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?s(this,rb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?rb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(a){var b=wb((rb(this).startOf("day")-rb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=fb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=fb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=fb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return B(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return B(this.year(),a.dow,a.doy)},get:function(a){return a=w(a),this[a]()},set:function(a,b){return a=w(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){return b===a?this._locale._abbr:(this._locale=rb.localeData(b),this)},lang:e("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():(this._locale=rb.localeData(b),this)}),localeData:function(){return this._locale}}),rb.fn.millisecond=rb.fn.milliseconds=mb("Milliseconds",!1),rb.fn.second=rb.fn.seconds=mb("Seconds",!1),rb.fn.minute=rb.fn.minutes=mb("Minutes",!1),rb.fn.hour=rb.fn.hours=mb("Hours",!0),rb.fn.date=mb("Date",!0),rb.fn.dates=e("dates accessor is deprecated. Use date instead.",mb("Date",!0)),rb.fn.year=mb("FullYear",!0),rb.fn.years=e("years accessor is deprecated. Use year instead.",mb("FullYear",!0)),rb.fn.days=rb.fn.day,rb.fn.months=rb.fn.month,rb.fn.weeks=rb.fn.week,rb.fn.isoWeeks=rb.fn.isoWeek,rb.fn.quarters=rb.fn.quarter,rb.fn.toJSON=rb.fn.toISOString,l(rb.duration.fn=k.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=n(d/1e3),g.seconds=a%60,b=n(a/60),g.minutes=b%60,c=n(b/60),g.hours=c%24,e+=n(c/24),h=n(nb(e)),e-=n(ob(h)),f+=n(e/30),e%=30,h+=n(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12)},humanize:function(a){var b=eb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=rb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=rb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=w(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=w(a),b=this._days+this._milliseconds/864e5,"month"===a||"year"===a)return c=this._months+12*nb(b),"month"===a?c:c/12;switch(b+=ob(this._months/12),a){case"week":return b/7;case"day":return b;case"hour":return 24*b;case"minute":return 24*b*60;case"second":return 24*b*60*60;case"millisecond":return 24*b*60*60*1e3;default:throw new Error("Unknown unit "+a)}},lang:rb.fn.lang,locale:rb.fn.locale,toIsoString:e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}});for(tb in fc)fc.hasOwnProperty(tb)&&pb(tb.toLowerCase());rb.duration.fn.asMilliseconds=function(){return this.as("ms")},rb.duration.fn.asSeconds=function(){return this.as("s")},rb.duration.fn.asMinutes=function(){return this.as("m")},rb.duration.fn.asHours=function(){return this.as("h")},rb.duration.fn.asDays=function(){return this.as("d")},rb.duration.fn.asWeeks=function(){return this.as("weeks")},rb.duration.fn.asMonths=function(){return this.as("M")},rb.duration.fn.asYears=function(){return this.as("y")},rb.locale("en",{ordinal:function(a){var b=a%10,c=1===z(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Gb?module.exports=rb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(vb.moment=sb),rb}),qb(!0)):qb()}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],314:[function(require,module){"use strict";module.exports=require(1)},{1:313}],315:[function(require,module,exports){(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W=[].slice,X={}.hasOwnProperty,Y=function(a,b){function c(){this.constructor=a}for(var d in b)X.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},Z=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(t={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},B=function(){var a;return null!=(a="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?a:+new Date},D=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==D&&(D=function(a){return setTimeout(a,50)},s=function(a){return clearTimeout(a)}),F=function(a){var b,c;return b=B(),(c=function(){var d;return d=B()-b,d>=33?(b=B(),a(d,function(){return D(c)})):setTimeout(c,33-d)})()},E=function(){var a,b,c;return c=arguments[0],b=arguments[1],a=3<=arguments.length?W.call(arguments,2):[],"function"==typeof c[b]?c[b].apply(c,a):c[b]},u=function(){var a,b,c,d,e,f,g;for(b=arguments[0],d=2<=arguments.length?W.call(arguments,1):[],f=0,g=d.length;g>f;f++)if(c=d[f])for(a in c)X.call(c,a)&&(e=c[a],null!=b[a]&&"object"==typeof b[a]&&null!=e&&"object"==typeof e?u(b[a],e):b[a]=e);return b},p=function(a){var b,c,d,e,f;for(c=b=0,e=0,f=a.length;f>e;e++)d=a[e],c+=Math.abs(d),b++;return c/b},w=function(a,b){var c,d,e;if(null==a&&(a="options"),null==b&&(b=!0),e=document.querySelector("[data-pace-"+a+"]")){if(c=e.getAttribute("data-pace-"+a),!b)return c;try{return JSON.parse(c)}catch(f){return d=f,"undefined"!=typeof console&&null!==console,void 0}}},g=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)e.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)h=this.bindings[c][e],d=h.handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),i.push(f?this.bindings[c].splice(e,1):e++);return i}},a}(),null==window.Pace&&(window.Pace={}),u(Pace,g.prototype),C=Pace.options=u({},t,window.paceOptions,w()),T=["ajax","document","eventLag","elements"],P=0,R=T.length;R>P;P++)J=T[P],C[J]===!0&&(C[J]=t[J]);i=function(a){function b(){return U=b.__super__.constructor.apply(this,arguments)}return Y(b,a),b}(Error),b=function(){function a(){this.progress=0}return a.prototype.getElement=function(){var a;if(null==this.el){if(a=document.querySelector(C.target),!a)throw new i;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n<div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=a.firstChild?a.insertBefore(this.el,a.firstChild):a.appendChild(this.el)}return this.el},a.prototype.finish=function(){var a;return a=this.getElement(),a.className=a.className.replace("pace-active",""),a.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},a.prototype.update=function(a){return this.progress=a,this.render()},a.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(a){i=a}return this.el=void 0},a.prototype.render=function(){var a,b;return null==document.querySelector(C.target)?!1:(a=this.getElement(),a.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(a.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?b="99":(b=this.progress<10?"0":"",b+=0|this.progress),a.children[0].setAttribute("data-progress",""+b)),this.lastRenderedProgress=this.progress)},a.prototype.done=function(){return this.progress>=100},a}(),h=function(){function a(){this.bindings={}}return a.prototype.trigger=function(a,b){var c,d,e,f,g;if(null!=this.bindings[a]){for(f=this.bindings[a],g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.call(this,b));return g}},a.prototype.on=function(a,b){var c;return null==(c=this.bindings)[a]&&(c[a]=[]),this.bindings[a].push(b)},a}(),O=window.XMLHttpRequest,N=window.XDomainRequest,M=window.WebSocket,v=function(a,b){var c,d,e,f;f=[];for(d in b.prototype)try{e=b.prototype[d],f.push(null==a[d]&&"function"!=typeof e?a[d]=e:void 0)}catch(g){c=g}return f},z=[],Pace.ignore=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],z.unshift("ignore"),c=b.apply(null,a),z.shift(),c},Pace.track=function(){var a,b,c;return b=arguments[0],a=2<=arguments.length?W.call(arguments,1):[],z.unshift("track"),c=b.apply(null,a),z.shift(),c},I=function(a){var b;if(null==a&&(a="GET"),"track"===z[0])return"force";if(!z.length&&C.ajax){if("socket"===a&&C.ajax.trackWebSockets)return!0;if(b=a.toUpperCase(),Z.call(C.ajax.trackMethods,b)>=0)return!0}return!1},j=function(a){function b(){var a,c=this;b.__super__.constructor.apply(this,arguments),a=function(a){var b;return b=a.open,a.open=function(d,e){return I(d)&&c.trigger("request",{type:d,url:e,request:a}),b.apply(a,arguments)}},window.XMLHttpRequest=function(b){var c;return c=new O(b),a(c),c},v(window.XMLHttpRequest,O),null!=N&&(window.XDomainRequest=function(){var b;return b=new N,a(b),b},v(window.XDomainRequest,N)),null!=M&&C.ajax.trackWebSockets&&(window.WebSocket=function(a,b){var d;return d=null!=b?new M(a,b):new M(a),I("socket")&&c.trigger("request",{type:"socket",url:a,protocols:b,request:d}),d},v(window.WebSocket,M))}return Y(b,a),b}(h),Q=null,x=function(){return null==Q&&(Q=new j),Q},H=function(a){var b,c,d,e;for(e=C.ajax.ignoreURLs,c=0,d=e.length;d>c;c++)if(b=e[c],"string"==typeof b){if(-1!==a.indexOf(b))return!0}else if(b.test(a))return!0;return!1},x().on("request",function(b){var c,d,e,f,g;return f=b.type,e=b.request,g=b.url,H(g)?void 0:Pace.running||C.restartOnRequestAfter===!1&&"force"!==I(f)?void 0:(d=arguments,c=C.restartOnRequestAfter||0,"boolean"==typeof c&&(c=0),setTimeout(function(){var b,c,g,h,i,j;if(b="socket"===f?e.readyState<2:0<(h=e.readyState)&&4>h){for(Pace.restart(),i=Pace.sources,j=[],c=0,g=i.length;g>c;c++){if(J=i[c],J instanceof a){J.watch.apply(J,d);break}j.push(void 0)}return j}},c))}),a=function(){function a(){var a=this;this.elements=[],x().on("request",function(){return a.watch.apply(a,arguments)})}return a.prototype.watch=function(a){var b,c,d,e;return d=a.type,b=a.request,e=a.url,H(e)?void 0:(c="socket"===d?new m(b):new n(b),this.elements.push(c))},a}(),n=function(){function a(a){var b,c,d,e,f,g,h=this;if(this.progress=0,null!=window.ProgressEvent)for(c=null,a.addEventListener("progress",function(a){return h.progress=a.lengthComputable?100*a.loaded/a.total:h.progress+(100-h.progress)/2}),g=["load","abort","timeout","error"],d=0,e=g.length;e>d;d++)b=g[d],a.addEventListener(b,function(){return h.progress=100});else f=a.onreadystatechange,a.onreadystatechange=function(){var b;return 0===(b=a.readyState)||4===b?h.progress=100:3===a.readyState&&(h.progress=50),"function"==typeof f?f.apply(null,arguments):void 0}}return a}(),m=function(){function a(a){var b,c,d,e,f=this;for(this.progress=0,e=["error","open"],c=0,d=e.length;d>c;c++)b=e[c],a.addEventListener(b,function(){return f.progress=100})}return a}(),d=function(){function a(a){var b,c,d,f;for(null==a&&(a={}),this.elements=[],null==a.selectors&&(a.selectors=[]),f=a.selectors,c=0,d=f.length;d>c;c++)b=f[c],this.elements.push(new e(b))}return a}(),e=function(){function a(a){this.selector=a,this.progress=0,this.check()}return a.prototype.check=function(){var a=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return a.check()},C.elements.checkInterval)},a.prototype.done=function(){return this.progress=100},a}(),c=function(){function a(){var a,b,c=this;this.progress=null!=(b=this.states[document.readyState])?b:100,a=document.onreadystatechange,document.onreadystatechange=function(){return null!=c.states[document.readyState]&&(c.progress=c.states[document.readyState]),"function"==typeof a?a.apply(null,arguments):void 0}}return a.prototype.states={loading:0,interactive:50,complete:100},a}(),f=function(){function a(){var a,b,c,d,e,f=this;this.progress=0,a=0,e=[],d=0,c=B(),b=setInterval(function(){var g;return g=B()-c-50,c=B(),e.push(g),e.length>C.eventLag.sampleCount&&e.shift(),a=p(e),++d>=C.eventLag.minSamples&&a<C.eventLag.lagThreshold?(f.progress=100,clearInterval(b)):f.progress=100*(3/(a+3))},50)}return a}(),l=function(){function a(a){this.source=a,this.last=this.sinceLastUpdate=0,this.rate=C.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=E(this.source,"progress"))}return a.prototype.tick=function(a,b){var c;return null==b&&(b=E(this.source,"progress")),b>=100&&(this.done=!0),b===this.last?this.sinceLastUpdate+=a:(this.sinceLastUpdate&&(this.rate=(b-this.last)/this.sinceLastUpdate),this.catchup=(b-this.progress)/C.catchupTime,this.sinceLastUpdate=0,this.last=b),b>this.progress&&(this.progress+=this.catchup*a),c=1-Math.pow(this.progress/100,C.easeFactor),this.progress+=c*this.rate*a,this.progress=Math.min(this.lastProgress+C.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress },a}(),K=null,G=null,q=null,L=null,o=null,r=null,Pace.running=!1,y=function(){return C.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(S=window.history.pushState,window.history.pushState=function(){return y(),S.apply(window.history,arguments)}),null!=window.history.replaceState&&(V=window.history.replaceState,window.history.replaceState=function(){return y(),V.apply(window.history,arguments)}),k={ajax:a,elements:d,document:c,eventLag:f},(A=function(){var a,c,d,e,f,g,h,i;for(Pace.sources=K=[],g=["ajax","elements","document","eventLag"],c=0,e=g.length;e>c;c++)a=g[c],C[a]!==!1&&K.push(new k[a](C[a]));for(i=null!=(h=C.extraSources)?h:[],d=0,f=i.length;f>d;d++)J=i[d],K.push(new J(C));return Pace.bar=q=new b,G=[],L=new l})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,q.destroy(),r=!0,null!=o&&("function"==typeof s&&s(o),o=null),A()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var a;return Pace.running=!0,q.render(),a=B(),r=!1,o=F(function(b,c){var d,e,f,g,h,i,j,k,m,n,o,p,s,t,u,v;for(k=100-q.progress,e=o=0,f=!0,i=p=0,t=K.length;t>p;i=++p)for(J=K[i],n=null!=G[i]?G[i]:G[i]=[],h=null!=(v=J.elements)?v:[J],j=s=0,u=h.length;u>s;j=++s)g=h[j],m=null!=n[j]?n[j]:n[j]=new l(g),f&=m.done,m.done||(e++,o+=m.tick(b));return d=o/e,q.update(L.tick(b,d)),q.done()||f||r?(q.update(100),Pace.trigger("done"),setTimeout(function(){return q.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(C.ghostTime,Math.max(C.minTime-(B()-a),0)))):c()})},Pace.start=function(a){u(C,a),Pace.running=!0;try{q.render()}catch(b){i=b}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:C.startOnPageLoad&&Pace.start()}).call(this)},{}],316:[function(require,module){"use strict";module.exports=require(1)},{1:315}],317:[function(){!function(c){"function"==typeof define&&define.amd?define("pnotify",["jquery"],c):c(jQuery)}(function(c){var f,g,p={dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25,context:c("body")},h=c(window),m=function(){g=c("body"),PNotify.prototype.options.stack.context=g,h=c(window),h.bind("resize",function(){f&&clearTimeout(f),f=setTimeout(function(){PNotify.positionAll(!0)},10)})};return PNotify=function(b){this.parseOptions(b),this.init()},c.extend(PNotify.prototype,{version:"2.0.1",options:{title:!1,title_escape:!1,text:!1,text_escape:!1,styling:"bootstrap3",addclass:"",cornerclass:"",auto_display:!0,width:"300px",min_height:"16px",type:"notice",icon:!0,opacity:1,animation:"fade",animate_speed:"slow",position_animate_speed:500,shadow:!0,hide:!0,delay:8e3,mouse_reset:!0,remove:!0,insert_brs:!0,destroy:!0,stack:p},modules:{},runModules:function(b,a){var c,e;for(e in this.modules)c="object"==typeof a&&e in a?a[e]:a,"function"==typeof this.modules[e][b]&&this.modules[e][b](this,"object"==typeof this.options[e]?this.options[e]:{},c)},state:"initializing",timer:null,styles:null,elem:null,container:null,title_container:null,text_container:null,animating:!1,timerHide:!1,init:function(){var b=this;return this.modules={},c.extend(!0,this.modules,PNotify.prototype.modules),this.styles="object"==typeof this.options.styling?this.options.styling:PNotify.styling[this.options.styling],this.elem=c("<div />",{"class":"ui-pnotify "+this.options.addclass,css:{display:"none"},mouseenter:function(){if(b.options.mouse_reset&&"out"===b.animating){if(!b.timerHide)return;b.cancelRemove()}b.options.hide&&b.options.mouse_reset&&b.cancelRemove()},mouseleave:function(){b.options.hide&&b.options.mouse_reset&&b.queueRemove(),PNotify.positionAll()}}),this.container=c("<div />",{"class":this.styles.container+" ui-pnotify-container "+("error"===this.options.type?this.styles.error:"info"===this.options.type?this.styles.info:"success"===this.options.type?this.styles.success:this.styles.notice)}).appendTo(this.elem),""!==this.options.cornerclass&&this.container.removeClass("ui-corner-all").addClass(this.options.cornerclass),this.options.shadow&&this.container.addClass("ui-pnotify-shadow"),!1!==this.options.icon&&c("<div />",{"class":"ui-pnotify-icon"}).append(c("<span />",{"class":!0===this.options.icon?"error"===this.options.type?this.styles.error_icon:"info"===this.options.type?this.styles.info_icon:"success"===this.options.type?this.styles.success_icon:this.styles.notice_icon:this.options.icon})).prependTo(this.container),this.title_container=c("<h4 />",{"class":"ui-pnotify-title"}).appendTo(this.container),!1===this.options.title?this.title_container.hide():this.options.title_escape?this.title_container.text(this.options.title):this.title_container.html(this.options.title),this.text_container=c("<div />",{"class":"ui-pnotify-text"}).appendTo(this.container),!1===this.options.text?this.text_container.hide():this.options.text_escape?this.text_container.text(this.options.text):this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text),"string"==typeof this.options.width&&this.elem.css("width",this.options.width),"string"==typeof this.options.min_height&&this.container.css("min-height",this.options.min_height),PNotify.notices="top"===this.options.stack.push?c.merge([this],PNotify.notices):c.merge(PNotify.notices,[this]),"top"===this.options.stack.push&&this.queuePosition(!1,1),this.options.stack.animation=!1,this.runModules("init"),this.options.auto_display&&this.open(),this},update:function(b){var a=this.options;return this.parseOptions(a,b),this.options.cornerclass!==a.cornerclass&&this.container.removeClass("ui-corner-all "+a.cornerclass).addClass(this.options.cornerclass),this.options.shadow!==a.shadow&&(this.options.shadow?this.container.addClass("ui-pnotify-shadow"):this.container.removeClass("ui-pnotify-shadow")),!1===this.options.addclass?this.elem.removeClass(a.addclass):this.options.addclass!==a.addclass&&this.elem.removeClass(a.addclass).addClass(this.options.addclass),!1===this.options.title?this.title_container.slideUp("fast"):this.options.title!==a.title&&(this.options.title_escape?this.title_container.text(this.options.title):this.title_container.html(this.options.title),!1===a.title&&this.title_container.slideDown(200)),!1===this.options.text?this.text_container.slideUp("fast"):this.options.text!==a.text&&(this.options.text_escape?this.text_container.text(this.options.text):this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text),!1===a.text&&this.text_container.slideDown(200)),this.options.type!==a.type&&this.container.removeClass(this.styles.error+" "+this.styles.notice+" "+this.styles.success+" "+this.styles.info).addClass("error"===this.options.type?this.styles.error:"info"===this.options.type?this.styles.info:"success"===this.options.type?this.styles.success:this.styles.notice),(this.options.icon!==a.icon||!0===this.options.icon&&this.options.type!==a.type)&&(this.container.find("div.ui-pnotify-icon").remove(),!1!==this.options.icon&&c("<div />",{"class":"ui-pnotify-icon"}).append(c("<span />",{"class":!0===this.options.icon?"error"===this.options.type?this.styles.error_icon:"info"===this.options.type?this.styles.info_icon:"success"===this.options.type?this.styles.success_icon:this.styles.notice_icon:this.options.icon})).prependTo(this.container)),this.options.width!==a.width&&this.elem.animate({width:this.options.width}),this.options.min_height!==a.min_height&&this.container.animate({minHeight:this.options.min_height}),this.options.opacity!==a.opacity&&this.elem.fadeTo(this.options.animate_speed,this.options.opacity),this.options.hide?a.hide||this.queueRemove():this.cancelRemove(),this.queuePosition(!0),this.runModules("update",a),this},open:function(){this.state="opening",this.runModules("beforeOpen");var b=this;return this.elem.parent().length||this.elem.appendTo(this.options.stack.context?this.options.stack.context:g),"top"!==this.options.stack.push&&this.position(!0),"fade"===this.options.animation||"fade"===this.options.animation.effect_in?this.elem.show().fadeTo(0,0).hide():1!==this.options.opacity&&this.elem.show().fadeTo(0,this.options.opacity).hide(),this.animateIn(function(){b.queuePosition(!0),b.options.hide&&b.queueRemove(),b.state="open",b.runModules("afterOpen")}),this},remove:function(b){this.state="closing",this.timerHide=!!b,this.runModules("beforeClose");var a=this;return this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.animateOut(function(){if(a.state="closed",a.runModules("afterClose"),a.queuePosition(!0),a.options.remove&&a.elem.detach(),a.runModules("beforeDestroy"),a.options.destroy&&null!==PNotify.notices){var b=c.inArray(a,PNotify.notices);-1!==b&&PNotify.notices.splice(b,1)}a.runModules("afterDestroy")}),this},get:function(){return this.elem},parseOptions:function(b,a){this.options=c.extend(!0,{},PNotify.prototype.options),this.options.stack=PNotify.prototype.options.stack;var e,f,n=[b,a];for(f in n){if(e=n[f],"undefined"==typeof e)break;if("object"!=typeof e)this.options.text=e;else for(var d in e)this.modules[d]?c.extend(!0,this.options[d],e[d]):this.options[d]=e[d]}},animateIn:function(b){this.animating="in";var a;a="undefined"!=typeof this.options.animation.effect_in?this.options.animation.effect_in:this.options.animation,"none"===a?(this.elem.show(),b()):"show"===a?this.elem.show(this.options.animate_speed,b):"fade"===a?this.elem.show().fadeTo(this.options.animate_speed,this.options.opacity,b):"slide"===a?this.elem.slideDown(this.options.animate_speed,b):"function"==typeof a?a("in",b,this.elem):this.elem.show(a,"object"==typeof this.options.animation.options_in?this.options.animation.options_in:{},this.options.animate_speed,b),this.elem.parent().hasClass("ui-effects-wrapper")&&this.elem.parent().css({position:"fixed",overflow:"visible"}),"slide"!==a&&this.elem.css("overflow","visible"),this.container.css("overflow","hidden")},animateOut:function(b){this.animating="out";var a;a="undefined"!=typeof this.options.animation.effect_out?this.options.animation.effect_out:this.options.animation,"none"===a?(this.elem.hide(),b()):"show"===a?this.elem.hide(this.options.animate_speed,b):"fade"===a?this.elem.fadeOut(this.options.animate_speed,b):"slide"===a?this.elem.slideUp(this.options.animate_speed,b):"function"==typeof a?a("out",b,this.elem):this.elem.hide(a,"object"==typeof this.options.animation.options_out?this.options.animation.options_out:{},this.options.animate_speed,b),this.elem.parent().hasClass("ui-effects-wrapper")&&this.elem.parent().css({position:"fixed",overflow:"visible"}),"slide"!==a&&this.elem.css("overflow","visible"),this.container.css("overflow","hidden")},position:function(b){var a=this.options.stack,c=this.elem;if(c.parent().hasClass("ui-effects-wrapper")&&(c=this.elem.css({left:"0",top:"0",right:"0",bottom:"0"}).parent()),"undefined"==typeof a.context&&(a.context=g),a){"number"!=typeof a.nextpos1&&(a.nextpos1=a.firstpos1),"number"!=typeof a.nextpos2&&(a.nextpos2=a.firstpos2),"number"!=typeof a.addpos2&&(a.addpos2=0);var e="none"===c.css("display");if(!e||b){var f,k,d={};switch(a.dir1){case"down":k="top";break;case"up":k="bottom";break;case"left":k="right";break;case"right":k="left"}b=parseInt(c.css(k).replace(/(?:\..*|[^0-9.])/g,"")),isNaN(b)&&(b=0),"undefined"!=typeof a.firstpos1||e||(a.firstpos1=b,a.nextpos1=a.firstpos1);var l;switch(a.dir2){case"down":l="top";break;case"up":l="bottom";break;case"left":l="right";break;case"right":l="left"}if(f=parseInt(c.css(l).replace(/(?:\..*|[^0-9.])/g,"")),isNaN(f)&&(f=0),"undefined"!=typeof a.firstpos2||e||(a.firstpos2=f,a.nextpos2=a.firstpos2),("down"===a.dir1&&a.nextpos1+c.height()>(a.context.is(g)?h.height():a.context.prop("scrollHeight"))||"up"===a.dir1&&a.nextpos1+c.height()>(a.context.is(g)?h.height():a.context.prop("scrollHeight"))||"left"===a.dir1&&a.nextpos1+c.width()>(a.context.is(g)?h.width():a.context.prop("scrollWidth"))||"right"===a.dir1&&a.nextpos1+c.width()>(a.context.is(g)?h.width():a.context.prop("scrollWidth")))&&(a.nextpos1=a.firstpos1,a.nextpos2+=a.addpos2+("undefined"==typeof a.spacing2?25:a.spacing2),a.addpos2=0),a.animation&&a.nextpos2<f)switch(a.dir2){case"down":d.top=a.nextpos2+"px";break;case"up":d.bottom=a.nextpos2+"px";break;case"left":d.right=a.nextpos2+"px";break;case"right":d.left=a.nextpos2+"px"}else"number"==typeof a.nextpos2&&c.css(l,a.nextpos2+"px");switch(a.dir2){case"down":case"up":c.outerHeight(!0)>a.addpos2&&(a.addpos2=c.height());break;case"left":case"right":c.outerWidth(!0)>a.addpos2&&(a.addpos2=c.width())}if("number"==typeof a.nextpos1)if(a.animation&&(b>a.nextpos1||d.top||d.bottom||d.right||d.left))switch(a.dir1){case"down":d.top=a.nextpos1+"px";break;case"up":d.bottom=a.nextpos1+"px";break;case"left":d.right=a.nextpos1+"px";break;case"right":d.left=a.nextpos1+"px"}else c.css(k,a.nextpos1+"px");switch((d.top||d.bottom||d.right||d.left)&&c.animate(d,{duration:this.options.position_animate_speed,queue:!1}),a.dir1){case"down":case"up":a.nextpos1+=c.height()+("undefined"==typeof a.spacing1?25:a.spacing1);break;case"left":case"right":a.nextpos1+=c.width()+("undefined"==typeof a.spacing1?25:a.spacing1)}}return this}},queuePosition:function(b,a){return f&&clearTimeout(f),a||(a=10),f=setTimeout(function(){PNotify.positionAll(b)},a),this},cancelRemove:function(){return this.timer&&window.clearTimeout(this.timer),"closing"===this.state&&(this.elem.stop(!0),this.state="open",this.animating="in",this.elem.css("height","auto").animate({width:this.options.width,opacity:this.options.opacity},"fast")),this},queueRemove:function(){var b=this;return this.cancelRemove(),this.timer=window.setTimeout(function(){b.remove(!0)},isNaN(this.options.delay)?0:this.options.delay),this}}),c.extend(PNotify,{notices:[],removeAll:function(){c.each(PNotify.notices,function(){this.remove&&this.remove()})},positionAll:function(b){f&&clearTimeout(f),f=null,c.each(PNotify.notices,function(){var a=this.options.stack;a&&(a.nextpos1=a.firstpos1,a.nextpos2=a.firstpos2,a.addpos2=0,a.animation=b)}),c.each(PNotify.notices,function(){this.position()})},styling:{jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert"},bootstrap2:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign"},bootstrap3:{container:"alert",notice:"alert-warning",notice_icon:"glyphicon glyphicon-exclamation-sign",info:"alert-info",info_icon:"glyphicon glyphicon-info-sign",success:"alert-success",success_icon:"glyphicon glyphicon-ok-sign",error:"alert-danger",error_icon:"glyphicon glyphicon-warning-sign"}}}),PNotify.styling.fontawesome=c.extend({},PNotify.styling.bootstrap3),c.extend(PNotify.styling.fontawesome,{notice_icon:"fa fa-exclamation-circle",info_icon:"fa fa-info",success_icon:"fa fa-check",error_icon:"fa fa-warning"}),document.body?m():c(m),PNotify}),function(c){"function"==typeof define&&define.amd?define("pnotify.buttons",["jquery","pnotify"],c):c(jQuery,PNotify)}(function(c,e){e.prototype.options.buttons={closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,labels:{close:"Close",stick:"Stick"}},e.prototype.modules.buttons={myOptions:null,closer:null,sticker:null,init:function(a,b){var d=this;this.myOptions=b,a.elem.on({mouseenter:function(){!d.myOptions.sticker||a.options.nonblock&&a.options.nonblock.nonblock||d.sticker.trigger("pnotify_icon").css("visibility","visible"),!d.myOptions.closer||a.options.nonblock&&a.options.nonblock.nonblock||d.closer.css("visibility","visible")},mouseleave:function(){d.myOptions.sticker_hover&&d.sticker.css("visibility","hidden"),d.myOptions.closer_hover&&d.closer.css("visibility","hidden")}}),this.sticker=c("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:b.sticker_hover?"hidden":"visible"},click:function(){a.options.hide=!a.options.hide,a.options.hide?a.queueRemove():a.cancelRemove(),c(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){c(this).children().removeClass(a.styles.pin_up+" "+a.styles.pin_down).addClass(a.options.hide?a.styles.pin_up:a.styles.pin_down)}).append(c("<span />",{"class":a.styles.pin_up,title:b.labels.stick})).prependTo(a.container),(!b.sticker||a.options.nonblock&&a.options.nonblock.nonblock)&&this.sticker.css("display","none"),this.closer=c("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:b.closer_hover?"hidden":"visible"},click:function(){a.remove(!1),d.sticker.css("visibility","hidden"),d.closer.css("visibility","hidden")}}).append(c("<span />",{"class":a.styles.closer,title:b.labels.close})).prependTo(a.container),(!b.closer||a.options.nonblock&&a.options.nonblock.nonblock)&&this.closer.css("display","none")},update:function(a,b){this.myOptions=b,!b.closer||a.options.nonblock&&a.options.nonblock.nonblock?this.closer.css("display","none"):b.closer&&this.closer.css("display","block"),!b.sticker||a.options.nonblock&&a.options.nonblock.nonblock?this.sticker.css("display","none"):b.sticker&&this.sticker.css("display","block"),this.sticker.trigger("pnotify_icon"),b.sticker_hover?this.sticker.css("visibility","hidden"):a.options.nonblock&&a.options.nonblock.nonblock||this.sticker.css("visibility","visible"),b.closer_hover?this.closer.css("visibility","hidden"):a.options.nonblock&&a.options.nonblock.nonblock||this.closer.css("visibility","visible")}},c.extend(e.styling.jqueryui,{closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s"}),c.extend(e.styling.bootstrap2,{closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play"}),c.extend(e.styling.bootstrap3,{closer:"glyphicon glyphicon-remove",pin_up:"glyphicon glyphicon-pause",pin_down:"glyphicon glyphicon-play"}),c.extend(e.styling.fontawesome,{closer:"fa fa-times",pin_up:"fa fa-pause",pin_down:"fa fa-play"})}),function(b){"function"==typeof define&&define.amd?define("pnotify.callbacks",["jquery","pnotify"],b):b(jQuery,PNotify)}(function(b,a){var c=a.prototype.init,d=a.prototype.open,e=a.prototype.remove;a.prototype.init=function(){this.options.before_init&&this.options.before_init(this.options),c.apply(this,arguments),this.options.after_init&&this.options.after_init(this)},a.prototype.open=function(){var a;this.options.before_open&&(a=this.options.before_open(this)),!1!==a&&(d.apply(this,arguments),this.options.after_open&&this.options.after_open(this))},a.prototype.remove=function(a){var b;this.options.before_close&&(b=this.options.before_close(this,a)),!1!==b&&(e.apply(this,arguments),this.options.after_close&&this.options.after_close(this,a))}}),function(d){"function"==typeof define&&define.amd?define("pnotify.reference",["jquery","pnotify"],d):d(jQuery,PNotify)}(function(d,c){c.prototype.options.reference={putThing:!1,labels:{text:"Spin Around"}},c.prototype.modules.reference={thingElem:null,init:function(b,a){var c=this;a.putThing&&(this.thingElem=d('<button style="float:right;" class="btn btn-default" type="button" disabled><i class="'+b.styles.athing+'" />&nbsp;'+a.labels.text+"</button>").appendTo(b.container),b.container.append('<div style="clear: right; line-height: 0;" />'),b.elem.on({mouseenter:function(){c.thingElem.prop("disabled",!1)},mouseleave:function(){c.thingElem.prop("disabled",!0)}}),this.thingElem.on("click",function(){var a=0,c=setInterval(function(){a+=10,360==a&&(a=0,clearInterval(c)),b.elem.css({"-moz-transform":"rotate("+a+"deg)","-webkit-transform":"rotate("+a+"deg)","-o-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+a/360*4+")"})},20)}))},update:function(b,a){a.putThing&&this.thingElem?this.thingElem.show():!a.putThing&&this.thingElem&&this.thingElem.hide(),this.thingElem&&this.thingElem.find("i").attr("class",b.styles.athing)},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},beforeDestroy:function(){},afterDestroy:function(){}},d.extend(c.styling.jqueryui,{athing:"ui-icon ui-icon-refresh"}),d.extend(c.styling.bootstrap2,{athing:"icon-refresh"}),d.extend(c.styling.bootstrap3,{athing:"glyphicon glyphicon-refresh"}),d.extend(c.styling.fontawesome,{athing:"fa fa-refresh"})})},{}],318:[function(require,module){"use strict";module.exports=require(1)},{1:317}],319:[function(){!function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=D,this.elements={target:a},this._id=Q+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:C,attr:e,onTooltip:C,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=C}function f(a){return a===D||"object"!==d.type(a)}function g(a){return!(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then))}function h(a){var b,c,e,h;return f(a)?C:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content"in a&&(b=a.content,f(b)||b.jquery||b.done?b=a.content={text:c=g(b)?C:b}:c=b.text,"ajax"in b&&(e=b.ajax,h=e&&e.once!==C,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,D,e.error).then(function(a){return a&&h&&b.set("content.text",a),a},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d)});return h?f:(b.set("content.text",f),g)}),"title"in b&&(d.isPlainObject(b.title)&&(b.button=b.title.button,b.title=b.title.text),g(b.title||C)&&(b.title=C))),"position"in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===B?{ready:B}:{event:a.show}),"hide"in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&f(a.style)&&(a.style={classes:a.style}),d.each(P,function(){this.sanitize&&this.sanitize(a)}),a)}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function j(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function k(a){return T.concat("").join(a?"-"+a+" ":" ")}function l(a,b){return b>0?setTimeout(d.proxy(a,this),b):void a.call(this)}function m(a){this.tooltip.hasClass($)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=l.call(this,function(){this.toggle(B,a)},this.options.show.delay))}function n(a){if(!this.tooltip.hasClass($)&&!this.destroyed){var b=d(a.relatedTarget),c=b.closest(U)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation()}catch(f){}else this.timers.hide=l.call(this,function(){this.toggle(C,a)},this.options.hide.delay,this)}}function o(a){!this.tooltip.hasClass($)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=l.call(this,function(){this.hide(a)},this.options.hide.inactive))}function p(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function q(a,c,e){d(b.body).delegate(a,(c.split?c:c.join("."+Q+" "))+"."+Q,function(){var a=w.api[d.attr(this,S)];a&&!a.disabled&&e.apply(a,arguments)})}function r(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):D,p="html5"===f.metadata.type&&o?o[f.metadata.name]:D,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q}catch(r){}if(k=d.extend(B,{},w.defaults,f,"object"==typeof q?h(q):D,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===C||!j)return C;k.content.text=j}if(i.container.length||(i.container=m),i.target===C&&(i.target=n),k.show.target===C&&(k.show.target=n),k.show.solo===B&&(k.show.solo=i.container.closest("body")),k.hide.target===C&&(k.hide.target=n),k.position.viewport===B&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new y(i.at,B),i.my=new y(i.my),a.data(Q))if(k.overwrite)a.qtip("destroy",!0);else if(k.overwrite===C)return C;return a.attr(R,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(ab,l).attr("title",""),g=new e(a,k,c,!!j),a.data(Q,g),g}function s(a){return a.charAt(0).toUpperCase()+a.slice(1)}function t(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+pb.join(f+" ")+f).split(" "),h=0;if(ob[b])return a.css(ob[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return ob[b]=d,e}function u(a,b){return Math.ceil(parseFloat(t(a,b)))}function v(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.init(this.qtip=a)}var w,x,y,z,A,B=!0,C=!1,D=null,E="x",F="y",G="width",H="height",I="top",J="left",K="bottom",L="right",M="center",N="flipinvert",O="shift",P={},Q="qtip",R="data-hasqtip",S="data-qtip-id",T=["ui-widget","ui-tooltip"],U="."+Q,V="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),W=Q+"-fixed",X=Q+"-default",Y=Q+"-focus",Z=Q+"-hover",$=Q+"-disabled",_="_replacedByqTip",ab="oldtitle",bb={ie:function(){for(var a=4,c=b.createElement("div");(c.innerHTML="<!--[if gt IE "+a+"]><i></i><![endif]-->")&&c.getElementsByTagName("i")[0];a+=1);return a>4?a:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||C};x=e.prototype,x._when=function(a){return d.when.apply(d,a)},x.render=function(a){if(this.rendered||this.destroyed)return this;var b,c=this,e=this.options,f=this.cache,g=this.elements,h=e.content.text,i=e.content.title,j=e.content.button,k=e.position,l=("."+this._id+" ",[]);return d.attr(this.target[0],"aria-describedby",this._id),f.posClass=this._createPosClass((this.position={my:k.my,at:k.at}).my),this.tooltip=g.tooltip=b=d("<div/>",{id:this._id,"class":[Q,X,e.style.classes,f.posClass].join(" "),width:e.style.width||"",height:e.style.height||"",tracking:"mouse"===k.target&&k.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":C,"aria-describedby":this._id+"-content","aria-hidden":B}).toggleClass($,this.disabled).attr(S,this.id).data(Q,this).appendTo(k.container).append(g.content=d("<div />",{"class":Q+"-content",id:this._id+"-content","aria-atomic":B})),this.rendered=-1,this.positioning=B,i&&(this._createTitle(),d.isFunction(i)||l.push(this._updateTitle(i,C))),j&&this._createButton(),d.isFunction(h)||l.push(this._updateContent(h,C)),this.rendered=B,this._setWidget(),d.each(P,function(a){var b;"render"===this.initialize&&(b=this(c))&&(c.plugins[a]=b)}),this._unassignEvents(),this._assignEvents(),this._when(l).then(function(){c._trigger("render"),c.positioning=C,c.hiddenDuringWait||!e.show.ready&&!a||c.toggle(B,f.event,C),c.hiddenDuringWait=C}),w.api[this.id]=this,this},x.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=B;var a,b=this.target,c=b.attr(ab);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(){this.destroy&&this.destroy()});for(a in this.timers)clearTimeout(this.timers[a]);b.removeData(Q).removeAttr(S).removeAttr(R).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(ab),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=D,delete w.api[this.id]}}return this.destroyed?this.target:(a===B&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target)},z=x.checks={builtin:{"^id$":function(a,b,c,e){var f=c===B?w.nextid:c,g=Q+"-"+f;f!==C&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),void this._updateTitle(c)):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(this.position[b]=a[b]=new y(c,"at"===b))},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(B)||this.toggle(B))},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c)},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass(X,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},x.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var cb=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,db=/^prerender|show\.ready/i;x.set=function(a,b){if(this.destroyed)return this;var c,e=this.rendered,f=C,g=this.options;return this.checks,"string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&db.test(b))return void delete a[b];var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=cb.test(b)||f,a[b]=[j[0],j[1],c,h]}),h(g),this.positioning=B,d.each(a,d.proxy(j,this)),this.positioning=C,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?D:this.cache.event),this},x._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=B,a.then(function(a){return e.waiting=C,c._update(a,b)},D,function(a){return c._update(a,b)})):a===C||!a&&""!==a?C:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){c.rendered&&c.tooltip[0].offsetWidth>0&&c.reposition(e.event,!a.length)}))):C},x._waitForContent=function(a){var b=this.cache;return b.waiting=B,(d.fn.imagesLoaded?a.imagesLoaded():d.Deferred().resolve([])).done(function(){b.waiting=C}).promise()},x._updateContent=function(a,b){this._update(a,this.elements.content,b)},x._updateTitle=function(a,b){this._update(a,this.elements.title,b)===C&&this._removeTitle(C)},x._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{"class":Q+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":Q+"-title","aria-atomic":B})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4)) }).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type)}),this.options.content.button&&this._createButton()},x._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=D,a!==C&&this.reposition())},x._createPosClass=function(a){return Q+"-pos-"+(a||this.options.position.my).abbrev()},x.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=B;var f,g,h,i,j=this.cache,k=this.tooltip,l=this.options.position,m=l.target,n=l.my,o=l.at,p=l.viewport,q=l.container,r=l.adjust,s=r.method.split(" "),t=k.outerWidth(C),u=k.outerHeight(C),v=0,w=0,x=k.css("position"),y={left:0,top:0},z=k[0].offsetWidth>0,A=c&&"scroll"===c.type,D=d(a),E=q[0].ownerDocument,F=this.mouse;if(d.isArray(m)&&2===m.length)o={x:J,y:I},y={left:m[0],top:m[1]};else if("mouse"===m)o={x:J,y:I},(!r.mouse||this.options.hide.distance)&&j.origin&&j.origin.pageX?c=j.origin:!c||c&&("resize"===c.type||"scroll"===c.type)?c=j.event:F&&F.pageX&&(c=F),"static"!==x&&(y=q.offset()),E.body.offsetWidth!==(a.innerWidth||E.documentElement.clientWidth)&&(g=d(b.body).offset()),y={left:c.pageX-y.left+(g&&g.left||0),top:c.pageY-y.top+(g&&g.top||0)},r.mouse&&A&&F&&(y.left-=(F.scrollX||0)-D.scrollLeft(),y.top-=(F.scrollY||0)-D.scrollTop());else{if("event"===m?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?j.target=d(c.target):c.target||(j.target=this.elements.target):"event"!==m&&(j.target=d(m.jquery?m:this.elements.target)),m=j.target,m=d(m).eq(0),0===m.length)return this;m[0]===b||m[0]===a?(v=bb.iOS?a.innerWidth:m.width(),w=bb.iOS?a.innerHeight:m.height(),m[0]===a&&(y={top:(p||m).scrollTop(),left:(p||m).scrollLeft()})):P.imagemap&&m.is("area")?f=P.imagemap(this,m,o,P.viewport?s:C):P.svg&&m&&m[0].ownerSVGElement?f=P.svg(this,m,o,P.viewport?s:C):(v=m.outerWidth(C),w=m.outerHeight(C),y=m.offset()),f&&(v=f.width,w=f.height,g=f.offset,y=f.position),y=this.reposition.offset(m,y,q),(bb.iOS>3.1&&bb.iOS<4.1||bb.iOS>=4.3&&bb.iOS<4.33||!bb.iOS&&"fixed"===x)&&(y.left-=D.scrollLeft(),y.top-=D.scrollTop()),(!f||f&&f.adjustable!==C)&&(y.left+=o.x===L?v:o.x===M?v/2:0,y.top+=o.y===K?w:o.y===M?w/2:0)}return y.left+=r.x+(n.x===L?-t:n.x===M?-t/2:0),y.top+=r.y+(n.y===K?-u:n.y===M?-u/2:0),P.viewport?(h=y.adjusted=P.viewport(this,y,l,v,w,t,u),g&&h.left&&(y.left+=g.left),g&&h.top&&(y.top+=g.top),h.my&&(this.position.my=h.my)):y.adjusted={left:0,top:0},j.posClass!==(i=this._createPosClass(this.position.my))&&k.removeClass(j.posClass).addClass(j.posClass=i),this._trigger("move",[y,p.elem||p],c)?(delete y.adjusted,e===C||!z||isNaN(y.left)||isNaN(y.top)||"mouse"===m||!d.isFunction(l.effect)?k.css(y):d.isFunction(l.effect)&&(l.effect.call(k,this,d.extend({},y)),k.queue(function(a){d(this).css({opacity:"",height:""}),bb.ie&&this.style.removeAttribute("filter"),a()})),this.positioning=C,this):this},x.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!bb.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do"static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)));while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c};var eb=(y=x.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,M).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?F:E}).prototype;eb.invert=function(a,b){this[a]=this[a]===J?L:this[a]===L?J:b||this[a]},eb.string=function(a){var b=this.x,c=this.y,d=b!==c?"center"===b||"center"!==c&&(this.precedance===F||this.forceY)?[c,b]:[b,c]:[b];return a!==!1?d.join(" "):d},eb.abbrev=function(){var a=this.string(!1);return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},eb.clone=function(){return new y(this.string(),this.forceY)},x.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&e.event&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=d.event.fix(c)}if(this.waiting&&!a&&(this.hiddenDuringWait=B),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",l=this.options[k],m=(this.options[a?"hide":"show"],this.options.position),n=this.options.content,o=this.tooltip.css("width"),p=this.tooltip.is(":visible"),q=a||1===l.target.length,r=!c||l.target.length<2||e.target[0]===c.target;return(typeof a).search("boolean|number")&&(a=!p),h=!g.is(":animated")&&p===a&&r,i=h?D:!!this._trigger(k,[90]),this.destroyed?this:(i!==C&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(this.mouse&&(e.origin=d.event.fix(this.mouse)),d.isFunction(n.text)&&this._updateContent(n.text,C),d.isFunction(n.title)&&this._updateTitle(n.title,C),!A&&"mouse"===m.target&&m.adjust.mouse&&(d(b).bind("mousemove."+Q,this._storeMouse),A=B),o||g.css("width",g.outerWidth(C)),this.reposition(c,arguments[2]),o||g.css("width",""),l.solo&&("string"==typeof l.solo?d(l.solo):d(U,l.solo)).not(g).not(l.target).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,A&&!d(U+'[tracking="true"]:visible',l.solo).not(g).length&&(d(b).unbind("mousemove."+Q),A=C),this.blur(c)),j=d.proxy(function(){a?(bb.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof l.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden")},this),l.effect===C||q===C?(g[k](),j()):d.isFunction(l.effect)?(g.stop(1,1),l.effect.call(g,this),g.queue("fx",function(a){j(),a()})):g.fadeTo(90,a?1:0,j),a&&l.target.trigger("qtip-"+this.id+"-inactive"),this))},x.show=function(a){return this.toggle(B,a)},x.hide=function(a){return this.toggle(C,a)},x.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(U),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=w.zindex+b.length;return c.hasClass(Y)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+Y).qtip("blur",a)),c.addClass(Y)[0].style.zIndex=f),this},x.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(Y),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},x.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass($):this.disabled):"boolean"!=typeof a&&(a=B),this.rendered&&this.tooltip.toggleClass($,a).attr("aria-disabled",a),this.disabled=!!a,this)},x.enable=function(){return this.disable(C)},x._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),b.button=e.jquery?e:d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":Q+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass($)||a.hide(b),C})},x._updateButton=function(a){if(!this.rendered)return C;var b=this.elements.button;a?this._createButton():b.remove()},x._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass($);c.removeClass($),$=a?"ui-state-disabled":"qtip-disabled",c.toggleClass($,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass(X,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(Q+"-icon",!a)},x._storeMouse=function(a){return(this.mouse=d.event.fix(a)).type="mousemove",this},x._bind=function(a,b,c,e,f){if(a&&c&&b.length){var g="."+this._id+(e?"-"+e:"");return d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this)),this}},x._unbind=function(a,b){return a&&d(a).unbind("."+this._id+(b?"-"+b:"")),this},x._trigger=function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||D,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=C,!e.isDefaultPrevented()},x._bindEvents=function(a,b,c,e,f,g){var h=c.filter(e).add(e.filter(c)),i=[];h.length&&(d.each(b,function(b,c){var e=d.inArray(c,a);e>-1&&i.push(a.splice(e,1)[0])}),i.length&&(this._bind(h,i,function(a){var b=this.rendered?this.tooltip[0].offsetWidth>0:!1;(b?g:f).call(this,a)}),c=c.not(h),e=e.not(h))),this._bind(c,a,f),this._bind(e,b,g)},x._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?C:(this.cache.event=a&&d.event.fix(a),this.cache.target=a&&d(a.target),clearTimeout(this.timers.show),void(this.timers.show=l.call(this,function(){this.render("object"==typeof a||c.show.ready)},c.prerender?0:c.show.delay)))}var c=this.options,e=c.show.target,f=c.hide.target,g=c.show.event?d.trim(""+c.show.event).split(" "):[],h=c.hide.event?d.trim(""+c.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(c.show.event)&&!/mouse(out|leave)/i.test(c.hide.event)&&h.push("mouseleave"),this._bind(e,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=B}),this._bindEvents(g,h,e,f,b,function(){return this.timers?void clearTimeout(this.timers.show):C}),(c.show.ready||c.prerender)&&b.call(this,a)},x._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),q=(d(b.body),d(a)),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g)}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a)}),e.hide.fixed?i=i.add(g.addClass(W)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass($)&&this.tooltip[0].offsetWidth>0,e=b.parents(U).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a)}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",o,"inactive"),this._bind(i.add(g),w.inactiveEvents,o)),this._bindEvents(r,s,h,i,m,n),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a)}this._storeMouse(a)}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){return this.cache?void(this.cache.onTarget="mouseenter"===a.type):C}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass($)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:q,"resize",p),f.adjust.scroll&&this._bind(q.add(f.container),"scroll",p)},x._unassignEvents=function(){var c=this.options,e=c.show.target,f=c.hide.target,g=d.grep([this.elements.target[0],this.rendered&&this.tooltip[0],c.position.container[0],c.position.viewport[0],c.position.container.closest("html")[0],a,b],function(a){return"object"==typeof a});e&&e.toArray&&(g=g.concat(e.toArray())),f&&f.toArray&&(g=g.concat(f.toArray())),this._unbind(g)._unbind(g,"destroy")._unbind(g,"inactive")},d(function(){q(U,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(W)&&!c.hasClass($)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.position.adjust.mouse&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(Z,b)}),q("["+S+"]",V,o)}),w=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=D,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],Q):D;return!arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,Q);if(!a)return B;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),C;a.set(b,e)}}),g!==D?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(B,{},a)),this.each(function(a){var b,c;return c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===C||c.length<1||w.api[c]?w.nextid++:c,b=r(d(this),c,k),b===C?B:(w.api[c]=b,d.each(P,function(){"initialize"===this.initialize&&this(b)}),void b._assignInitialEvents(j))}))},d.qtip=e,w.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?d.attr(c,ab):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(ab,b))}return d.fn["attr"+_].apply(this,arguments)},clone:function(a){var b=(d([]),d.fn["clone"+_].apply(this,arguments));return a||b.filter("["+ab+"]").attr("title",function(){return d.attr(this,ab)}).removeAttr(ab),b}},function(a,b){if(!b||d.fn[a+_])return B;var c=d.fn[a+_]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+_]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(R))try{b.triggerHandler("removeqtip")}catch(e){}d["cleanData"+_].apply(this,arguments)}),w.version="2.2.1",w.nextid=0,w.inactiveEvents=V,w.zindex=15e3,w.defaults={prerender:C,id:C,overwrite:B,suppress:B,content:{text:B,attr:"title",title:C,button:C},position:{my:"top left",at:"bottom right",target:C,container:C,viewport:C,adjust:{x:0,y:0,mouse:B,scroll:B,resize:B,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:C})}},show:{target:C,event:"mouseenter",effect:B,delay:90,solo:C,ready:C,autofocus:C},hide:{target:C,event:"mouseleave",effect:B,delay:0,fixed:C,inactive:C,leave:"window",distance:C},style:{classes:"",widget:C,width:C,height:C,def:B},events:{render:D,move:D,show:D,hide:D,toggle:D,visible:D,hidden:D,focus:D,blur:D}};var fb,gb="margin",hb="border",ib="color",jb="background-color",kb="transparent",lb=" !important",mb=!!b.createElement("canvas").getContext,nb=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ob={},pb=["Webkit","O","Moz","ms"];if(mb)var qb=a.devicePixelRatio||1,rb=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1}(),sb=qb/rb;else var tb=function(a,b,c){return"<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'};d.extend(v.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":Q+"-tip"}).prependTo(a.tooltip),mb?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=tb("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation()},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===I||a.y===M&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(B))},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===C||b===C?a=C:a===B?a=new y(b.string()):a.string||(a=new y(a),a.fixed=B),a},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=hb+s(b)+"Width";return(c?u(c,e):u(d.content,e)||u(this._useTitle(a)&&d.titlebar||d.content,e)||u(d.tooltip,e))||0},_parseRadius:function(a){var b=this.qtip.elements,c=hb+s(a.y)+s(a.x)+"Radius";return bb.ie<9?0:u(this._useTitle(a)&&b.titlebar||b.content,c)||u(b.tooltip,c)||0},_invalidColour:function(a,b,c){var d=a.css(b);return!d||c&&d===a.css(c)||nb.test(d)?C:d},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=hb+s(a[a.precedance])+s(ib),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,jb)||g(f,jb)||g(b.content,jb)||g(b.tooltip,jb)||c.css(jb),h[1]=g(c,e,ib)||g(f,e,ib)||g(b.content,e,ib)||g(b.tooltip,e,ib)||b.tooltip.css(e),d("*",c).add(c).css("cssText",jb+":"+kb+lb+";"+hb+":0"+lb+";"),h},_calculateSize:function(a){var b,c,d,e=a.precedance===F,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse()},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()]},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath()},create:function(){var a=this.corner=(mb||bb.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===C?r=b:(r=new y(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===E?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==kb?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&1>l&&!nb.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==B?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===F?[s(r.x===J?l:r.x===L?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===I?k[1]-q[1]:0)]:[s(r.x===J?k[0]-q[0]:0),s(r.y===I?l:r.y===K?k[1]-q[1]-l:(k[1]-q[1])/2)],mb?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,sb),i=this._calculateTip(r,this.size,sb),o.attr(G,k[0]*sb).attr(H,k[1]*sb),o.css(G,k[0]).css(H,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*sb,j[1]*sb),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===bb.ie?2:1:0,o.css({coordsize:k[0]+l+" "+(k[1]+l),antialias:""+(r.string().indexOf(M)>-1),left:j[0]-j[2]*Number(f===E),top:j[1]-j[2]*Number(f===F),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+(k[1]+l),path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(tb("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'))})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"})},1),c!==C&&this.calculate(b,k)},calculate:function(a,b){if(!this.enabled)return C;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j=(g.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===E&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===M?(h=c===F?J:I,j[h]="50%",j[gb+"-"+h]=-Math.round(b[c===F?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)))}),j[a[c]]-=b[c===E?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j},reposition:function(a,b,d){function e(a,b,c,d,e){a===O&&j.precedance===b&&k[d]&&j[c]!==M?j.precedance=j.precedance===E?F:E:a!==O&&k[d]&&(j[b]=j[b]===M?k[d]>0?d:e:j[b]===d?e:d)}function f(a,b,e){j[a]===M?p[gb+"-"+b]=o[a]=g[gb+"-"+b]-k[b]:(h=g[e]!==c?[k[b],-g[b]]:[-k[b],g[b]],(o[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=k[b],o[b]=C),p[g[e]!==c?e:b]=o[a])}if(this.enabled){var g,h,i=b.cache,j=this.corner.clone(),k=d.adjusted,l=b.options.position.adjust.method.split(" "),m=l[0],n=l[1]||l[0],o={left:C,top:C,x:0,y:0},p={};this.corner.fixed!==B&&(e(m,E,F,J,L),e(n,F,E,I,K),(j.string()!==i.corner.string()||i.cornerTop!==k.top||i.cornerLeft!==k.left)&&this.update(j,C)),g=this.calculate(j),g.right!==c&&(g.left=-g.right),g.bottom!==c&&(g.top=-g.bottom),g.user=this.offset,(o.left=m===O&&!!k.left)&&f(E,J,L),(o.top=n===O&&!!k.top)&&f(F,I,K),this.element.css(p).toggle(!(o.x&&o.y||j.x===M&&o.y||j.y===M&&o.x)),d.left-=g.left.charAt?g.user:m!==O||o.top||!o.left&&!o.top?g.left+this.border:0,d.top-=g.top.charAt?g.user:n!==O||o.left||!o.left&&!o.top?g.top+this.border:0,i.cornerLeft=k.left,i.cornerTop=k.top,i.corner=j.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),fb=P.tip=function(a){return new v(a,a.options.style.tip)},fb.initialize="render",fb.sanitize=function(a){if(a.style&&"tip"in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=B)}},z.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},d.extend(B,w.defaults,{style:{tip:{corner:B,mimic:C,width:6,height:6,border:B,offset:0}}}),P.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],s=u[a],t=v[a],w=c===O,x=s===f?j:s===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=q[f]+r[f]-(n?0:m[f]),A=z-k,B=k+j-(h===G?o:p)-z,C=x-(u.precedance===a||s===u[b]?y:0)-(t===M?i/2:0);return w?(C=(s===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-m[f]+r[f],k-C,Math.min(Math.max(-m[f]+r[f]+(h===G?o:p),k+C),d[f],"center"===s?k-x:1e9))):(e*=c===N?2:0,A>0&&(s!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(s!==g||A>0)&&(d[f]-=(s===M?-C:C)+e,l.invert(a,g)),d[f]<q&&-d[f]>B&&(d[f]=k,l=u.clone())),d[f]-k}var k,l,m,n,o,p,q,r,s=e.target,t=c.elements.tooltip,u=e.my,v=e.at,w=e.adjust,x=w.method.split(" "),y=x[0],z=x[1]||x[0],A=e.viewport,B=e.container,D=(c.cache,{left:0,top:0});return A.jquery&&s[0]!==a&&s[0]!==b.body&&"none"!==w.method?(m=B.offset()||D,n="static"===B.css("position"),k="fixed"===t.css("position"),o=A[0]===a?A.width():A.outerWidth(C),p=A[0]===a?A.height():A.outerHeight(C),q={left:k?0:A.scrollLeft(),top:k?0:A.scrollTop()},r=A.offset()||D,("shift"!==y||"shift"!==z)&&(l=u.clone()),D={left:"none"!==y?j(E,F,y,w.x,J,L,G,f,h):0,top:"none"!==z?j(F,E,z,w.y,I,K,H,g,i):0,my:l}):D},P.polys={polygon:function(a,b){var c,d,e,f={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:C},g=0,h=[],i=1,j=1,k=0,l=0;for(g=a.length;g--;)c=[parseInt(a[--g],10),parseInt(a[g+1],10)],c[0]>f.position.right&&(f.position.right=c[0]),c[0]<f.position.left&&(f.position.left=c[0]),c[1]>f.position.bottom&&(f.position.bottom=c[1]),c[1]<f.position.top&&(f.position.top=c[1]),h.push(c);if(d=f.width=Math.abs(f.position.right-f.position.left),e=f.height=Math.abs(f.position.bottom-f.position.top),"c"===b.abbrev())f.position={left:f.position.left+f.width/2,top:f.position.top+f.height/2};else{for(;d>0&&e>0&&i>0&&j>0;)for(d=Math.floor(d/2),e=Math.floor(e/2),b.x===J?i=d:b.x===L?i=f.width-d:i+=Math.floor(d/2),b.y===I?j=e:b.y===K?j=f.height-e:j+=Math.floor(e/2),g=h.length;g--&&!(h.length<2);)k=h[g][0]-f.position.left,l=h[g][1]-f.position.top,(b.x===J&&k>=i||b.x===L&&i>=k||b.x===M&&(i>k||k>f.width-i)||b.y===I&&l>=j||b.y===K&&j>=l||b.y===M&&(j>l||l>f.height-j))&&h.splice(g,1);f.position={left:h[0][0],top:h[0][1]}}return f},rect:function(a,b,c,d){return{width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=P.polys._angles[e.abbrev()],g=0===f?0:c*Math.cos(f*Math.PI),h=d*Math.sin(f*Math.PI);return{width:2*c-Math.abs(g),height:2*d-Math.abs(h),position:{left:a+g,top:b+h},adjustable:C}},circle:function(a,b,c,d){return P.polys.ellipse(a,b,c,c,d)}},P.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h,i,j=(b.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),l=d.trim(b.attr("coords")),m=l.replace(/,$/,"").split(",");if(!k.length)return C;if("polygon"===j)h=P.polys.polygon(m,c);else{if(!P.polys[j])return C;for(g=-1,i=m.length,f=[];++g<i;)f.push(parseInt(m[g],10));h=P.polys[j].apply(this,f.concat(c))}return e=k.offset(),e.left+=Math.ceil((k.outerWidth(C)-k.width())/2),e.top+=Math.ceil((k.outerHeight(C)-k.height())/2),h.position.left+=e.left,h.position.top+=e.top,h},P.svg=function(a,c,e){for(var f,g,h,i,j,k,l,m,n,o=(d(b),c[0]),p=d(o.ownerSVGElement),q=o.ownerDocument,r=(parseInt(c.css("stroke-width"),10)||0)/2;!o.getBBox;)o=o.parentNode;if(!o.getBBox||!o.parentNode)return C;switch(o.nodeName){case"ellipse":case"circle":m=P.polys.ellipse(o.cx.baseVal.value,o.cy.baseVal.value,(o.rx||o.r).baseVal.value+r,(o.ry||o.r).baseVal.value+r,e);break;case"line":case"polygon":case"polyline":for(l=o.points||[{x:o.x1.baseVal.value,y:o.y1.baseVal.value},{x:o.x2.baseVal.value,y:o.y2.baseVal.value}],m=[],k=-1,i=l.numberOfItems||l.length;++k<i;)j=l.getItem?l.getItem(k):l[k],m.push.apply(m,[j.x,j.y]);m=P.polys.polygon(m,e);break;default:m=o.getBBox(),m={width:m.width,height:m.height,position:{left:m.x,top:m.y}}}return n=m.position,p=p[0],p.createSVGPoint&&(g=o.getScreenCTM(),l=p.createSVGPoint(),l.x=n.left,l.y=n.top,h=l.matrixTransform(g),n.left=h.x,n.top=h.y),q!==b&&"mouse"!==a.position.target&&(f=d((q.defaultView||q.parentWindow).frameElement).offset(),f&&(n.left+=f.left,n.top+=f.top)),q=d(q),n.left+=q.scrollLeft(),n.top+=q.scrollTop(),m}})}(window,document)},{}],320:[function(require,module){"use strict";module.exports=require(1)},{1:319}],321:[function(require,module,exports){!function(n){"object"==typeof exports?module.exports=n(this):"function"==typeof define&&define.amd?define(n):this.R=n(this)}(function(){"use strict";function n(){return new TypeError("Function called with no arguments")}function r(t,e,u){switch(arguments.length){case 0:throw n();case 1:return r(t,0,t.length);case 2:return r(t,e,t.length);default:for(var i=Math.max(0,u-e),o=new Array(i),a=-1;++a<i;)o[a]=t[e+a];return o}}function t(n,r){n=n||[],r=r||[];var t,e=n.length,u=r.length,i=new Array(e+u);for(t=-1;++t<e;)i[t]=n[t];for(t=-1;++t<u;)i[e+t]=r[t];return i}function e(r){return function(t,e){switch(arguments.length){case 0:throw n();case 1:return function(n){return r(t,n)};default:return r(t,e)}}}function u(r){return function(t,u,i){switch(arguments.length){case 0:throw n();case 1:return e(function(n,e){return r(t,n,e)});case 2:return function(n){return r(t,u,n)};default:return r(t,u,i)}}}function i(n,r){return null!=r&&!$(r)&&"function"==typeof r[n]}function o(n,r){return function(t,e,u){var i=arguments.length,o=arguments[i-1],a=o&&!$(o)&&"function"==typeof o[n];switch(arguments.length){case 0:return r();case 1:return a?o[n]():r(t);case 2:return a?o[n](t):r(t,e);case 3:return a?o[n](t,e):r(t,e,u)}}}function a(n,r){for(var t=-1,e=r.length;++t<e;)n(r[t]);return r}function c(n,r,t){switch(n&&Z.call(n)){case"[object Object]":return f(n,{},r,t);case"[object Array]":return f(n,[],r,t);case"[object Function]":return n;case"[object Date]":return new Date(n);default:return n}}function f(n,r,t,e){for(var u=t.length,i=-1;++i<u;)if(n===t[i])return e[i];t.push(n),e.push(r);for(var o in n)r[o]=c(n[o],t,e);return r}function s(n,r){return t([n],r)}function l(n,r){return t(r,[n])}function h(n,r){return function(){return n.call(this,r.apply(this,arguments))}}function p(n,r){return function(){var t=this,e=r.apply(this,arguments);return g(e)?e.then(function(r){return n.call(t,r)}):n.call(this,e)}}function g(n){return null!=n&&n===Object(n)&&n.then&&"function"==typeof n.then}function v(r){return function(){switch(arguments.length){case 0:throw n();case 1:return arguments[0];default:for(var t=arguments.length-1,e=arguments[t],u=e.length;t--;)e=r(arguments[t],e);return rr(u,e)}}}function m(n){return function(t){var e=r(arguments,1);return rr(Math.max(0,t.length-e.length),function(){return t.apply(this,n(e,arguments))})}}function y(n,r){for(var t=-1,e=r.length,u=new Array(e);++t<e;)u[t]=n(r[t]);return u}function d(n,r){for(var t=-1,e=r.length,u=[];++t<e;)n(r[t])&&u.push(r[t]);return u}function w(n,r){for(var t=-1,e=r.length,u=[];++t<e;)n(r[t],t,r)&&u.push(r[t]);return u}function b(n,r){for(var t=-1;++t<r.length;)if(!n(r[t]))return!1;return!0}function x(n,r){for(var t=-1;++t<r.length;)if(n(r[t]))return!0;return!1}function j(n,r,t){var e=0,u=n.length;for("number"==typeof t&&(e=0>t?Math.max(0,u+t):t);u>e;){if(n[e]===r)return e;++e}return-1}function O(n,r,t){var e=n.length;for("number"==typeof t&&(e=0>t?e+t+1:Math.min(e,t+1));--e>=0;)if(n[e]===r)return e;return-1}function k(n,r){return j(r,n)>=0}function A(n,r,t){for(var e=-1,u=t.length;++e<u;)if(n(r,t[e]))return!0;return!1}function I(n){return function r(t){for(var e,u,i,o=[],a=-1,c=t.length;++a<c;)if(G(t[a]))for(e=n?r(t[a]):t[a],u=-1,i=e.length;++u<i;)o.push(e[u]);else o.push(t[a]);return o}}function P(n){return function(r){return y(function(n){return[n,r[n]]},n(r))}}function E(n,r){for(var t,e={},u=Ur(r),i=u.length,o=-1;++o<i;)t=u[o],n(r[t],t,r)&&(e[t]=r[t]);return e}function M(n,r){var t={};return a(function(n){t[n]=r[n]},n),t}function W(n,r){for(var t=Fr(r),e=-1,u=t.length;++e<u;)n[t[e]]=r[t[e]];return n}function N(n,r,t){if(n===t)return!0;if(null==t)return!1;r.fn=r.fn||[],r.obj=r.obj||[];for(var e,u,i=-1,o=r.fn.length,a=-1,c=r.obj.length;++i<o;){if(e=r.fn[i],u=n[e],!(e in t))return!1;if(!u(t[e],t))return!1}for(;++a<c;)if(e=r.obj[a],n[e]!==t[e])return!1;return!0}function S(n){return function(t){var e=function(){var r=arguments;return n(function(n){return n.apply(null,r)},t)};return arguments.length>1?e.apply(null,r(arguments,1)):rr(Jr(Wr("length",t)),e)}}function T(n,r){return n+r}function C(n,r){return n*r}function L(n,r){return r>n}function q(n,r){return n>r}function B(r,t){return function(e){if(0===arguments.length)throw n();for(var u,i=-1,o=t;++i<e.length;)u=+e[i],r(u,o)&&(o=u);return o}}function R(n){return function(r,t){if(t&&t.length>0){for(var e,u=0,i=t[u],o=r(i);++u<t.length;)e=r(t[u]),n(e,o)&&(o=e,i=t[u]);return i}}}function z(n,r){var t,e=-1,u=n.length;if(null!=r){for(t=r;null!=t&&++e<u;)t=t[n[e]];return t}}function F(n,r){return y(function(r){return{key:n(r),val:r}},r)}function U(n){return function(r){return d(function(n){return"function"==typeof r[n]},n(r))}}var _,D={version:"0.8.0"},Z=Object.prototype.toString,$=Array.isArray||function(n){return null!=n&&n.length>=0&&"[object Array]"===Z.call(n) },G=D.isArrayLike=function(n){return $(n)?!0:n?"object"!=typeof n?!1:n instanceof String?!1:1===n.nodeType?!!n.length:0===n.length?!0:n.length>0?n.hasOwnProperty(0)&&n.hasOwnProperty(n.length-1):!1:!1};try{Object.defineProperty(D,"__",{writable:!1,value:_})}catch(H){D.__=_}var J=D.op=function(r){var t=r.length;if(2!==t)throw new Error("Expected binary function.");return function e(t,u){switch(arguments.length){case 0:throw n();case 1:return t===_?nr(V(e)):Y(vr(r,t));default:return t===_?Y(mr(r,u)):r(t,u)}}},K=D.curryN=function(r,e){return function u(i){return rr(Math.max(r-(i&&i.length||0),0),function(){if(0===arguments.length)throw n();var o=t(i,arguments);return o.length>=r?e.apply(this,o):u(o)})}([])},Q=D.curry=function(n){return K(n.length,n)},V=D.flip=function(e){return function(u,i){switch(arguments.length){case 0:throw n();case 1:return function(n){return e.apply(this,[n,u].concat(r(arguments,1)))};default:return e.apply(this,t([i,u],r(arguments,2)))}}},X=D.nAry=function(n,r){switch(n){case 0:return function(){return r.call(this)};case 1:return function(n){return r.call(this,n)};case 2:return function(n,t){return r.call(this,n,t)};case 3:return function(n,t,e){return r.call(this,n,t,e)};case 4:return function(n,t,e,u){return r.call(this,n,t,e,u)};case 5:return function(n,t,e,u,i){return r.call(this,n,t,e,u,i)};case 6:return function(n,t,e,u,i,o){return r.call(this,n,t,e,u,i,o)};case 7:return function(n,t,e,u,i,o,a){return r.call(this,n,t,e,u,i,o,a)};case 8:return function(n,t,e,u,i,o,a,c){return r.call(this,n,t,e,u,i,o,a,c)};case 9:return function(n,t,e,u,i,o,a,c,f){return r.call(this,n,t,e,u,i,o,a,c,f)};case 10:return function(n,t,e,u,i,o,a,c,f,s){return r.call(this,n,t,e,u,i,o,a,c,f,s)};default:return r}},Y=D.unary=function(n){return X(1,n)},nr=D.binary=function(n){return X(2,n)},rr=D.arity=function(n,r){switch(n){case 0:return function(){return r.apply(this,arguments)};case 1:return function(){return r.apply(this,arguments)};case 2:return function(){return r.apply(this,arguments)};case 3:return function(){return r.apply(this,arguments)};case 4:return function(){return r.apply(this,arguments)};case 5:return function(){return r.apply(this,arguments)};case 6:return function(){return r.apply(this,arguments)};case 7:return function(){return r.apply(this,arguments)};case 8:return function(){return r.apply(this,arguments)};case 9:return function(){return r.apply(this,arguments)};case 10:return function(){return r.apply(this,arguments)};default:return r}},tr=D.invokerN=function(n,t){var e=r(arguments,2),u=n-e.length;return K(u+1,function(){var n=arguments[u],i=e.concat(r(arguments,0,u));return n[t].apply(n,i)})},er=D.useWith=function(n){var t=r(arguments,1),e=t.length;return Q(rr(e,function(){for(var u=[],i=-1;++i<e;)u.push(t[i](arguments[i]));return n.apply(this,u.concat(r(arguments,e)))}))};D.forEach=e(a),D.forEach.idx=e(function(n,r){for(var t=-1,e=r.length;++t<e;)n(r[t],t,r);return r});var ur=D.clone=function(n){return r(n)};D.cloneDeep=function(n){return c(n,[],[])};var ir=D.isEmpty=function(n){return null==n||0===n.length},or=D.prepend=e(s);D.cons=or,D.prependTo=V(s);var ar=D.nth=e(function(n,r){return 0>n?r[r.length+n]:r[n]}),cr=D.head=ar(0);D.car=cr,D.last=ar(-1);var fr=D.tail=o("tail",function(n){return r(n,1)});D.cdr=fr;var sr=D.append=e(l);D.push=sr,D.appendTo=V(l),D.concat=e(function(n,r){if($(r))return t(n,r);if(i("concat",n))return n.concat(r);throw new TypeError("can't concat "+typeof n)});var lr=D.identity=function(n){return n};D.I=lr,D.argN=function(n){return function(){return arguments[n]}};var hr=D.times=e(function(n,r){for(var t=new Array(r),e=-1;++e<r;)t[e]=n(e);return t});D.repeatN=e(function(n,r){return hr(zr(n),r)}),D.apply=e(function(n,r){return n.apply(this,r)}),D.unapply=function(t){if(0===arguments.length)throw n();return function(){return t(r(arguments))}};var pr=D.compose=v(h),gr=D.pCompose=v(p);D.pipe=function(){return pr.apply(this,Cr(arguments))},D.pPipe=function(){return gr.apply(this,Cr(arguments))};var vr=D.lPartial=m(t),mr=D.rPartial=m(V(t));D.memoize=function(n){if(!n.length)return yr(n);var t={};return function(){if(arguments.length){var e=wr(function(n,r){return n[r]||(n[r]={})},t,r(arguments,0,arguments.length-1)),u=arguments[arguments.length-1];return e[u]||(e[u]=n.apply(this,arguments))}}};var yr=D.once=function(n){var r,t=!1;return function(){return t?r:(t=!0,r=n.apply(this,arguments))}};D.wrap=function(n,r){return rr(n.length,function(){return r.apply(this,t([n],arguments))})};var dr=D.constructN=e(function(n,r){var t=function(){var n,t,e=function(){};return e.prototype=r.prototype,n=new e,t=r.apply(n,arguments),Object(t)===t?t:n};return n>1?Q(X(n,t)):t});D.construct=function(n){return dr(n.length,n)},D.converge=function(n){var t=r(arguments,1);return function(){var r=arguments;return n.apply(this,y(function(n){return n.apply(this,r)},t))}};var wr=D.reduce=u(function(n,r,t){for(var e=-1,u=t.length;++e<u;)r=n(r,t[e]);return r});D.foldl=wr,D.reduce.idx=u(function(n,r,t){for(var e=-1,u=t.length;++e<u;)r=n(r,t[e],e,t);return r}),D.foldl.idx=wr.idx;var br=D.reduceRight=u(o("reduceRight",function(n,r,t){for(var e=t.length;e--;)r=n(r,t[e]);return r}));D.foldr=br,D.reduceRight.idx=u(function(n,r,t){for(var e=t.length;e--;)r=n(r,t[e],e,t);return r}),D.foldr.idx=br.idx,D.unfoldr=e(function(n,r){for(var t=n(r),e=[];t&&t.length;)e.push(t[0]),t=n(t[1]);return e});var xr=D.map=e(o("map",y));D.map.idx=e(function(n,r){for(var t=-1,e=r.length,u=new Array(e);++t<e;)u[t]=n(r[t],t,r);return u}),D.mapObj=e(function(n,r){return wr(function(t,e){return t[e]=n(r[e]),t},{},Fr(r))}),D.mapObj.idx=e(function(n,r){return wr(function(t,e){return t[e]=n(r[e],e,r),t},{},Fr(r))}),D.scanl=u(function(n,r,t){var e=0,u=t.length+1,i=new Array(u);for(i[e]=r;++e<u;)r=n(r,t[e-1]),i[e]=r;return i});var jr=D.liftN=e(function(t,e){var u=K(t,e);if(0===arguments.length)throw n();return K(t,function(){return wr(Or,y(u,arguments[0]),r(arguments,1))})});D.lift=function(r){if(0===arguments.length)throw n();return jr(r.length,r)};var Or=D.ap=e(function(n,r){return i("ap",n)?n.ap(r):wr(function(n,e){return t(n,y(e,r))},[],n)});D.of=function(n,r){return i("of",r)?r.of(n):[n]},D.empty=function(n){return i("empty",n)?n.empty():[]},D.chain=e(o("chain",function(n,r){return Nr(y(n,r))}));var kr=D.commuteMap=u(function(n,r,t){function e(r,t){return Or(xr(sr,n(t)),r)}return wr(e,r([]),t)});D.commute=kr(xr(lr));var Ar=D.size=function(n){return n.length};D.length=Ar,D.filter=e(o("filter",d)),D.filter.idx=e(w);var Ir=function(n,r){return d($r(n),r)};D.reject=e(Ir),D.reject.idx=e(function(n,r){return w($r(n),r)}),D.takeWhile=e(o("takeWhile",function(n,t){for(var e=-1,u=t.length;++e<u&&n(t[e]););return r(t,0,e)})),D.take=e(o("take",function(n,t){return r(t,0,Math.min(n,t.length))})),D.skipUntil=e(function(n,t){for(var e=-1,u=t.length;++e<u&&!n(t[e]););return r(t,e)}),D.skip=e(o("skip",function(n,t){return n<t.length?r(t,n):[]})),D.find=e(function(n,r){for(var t=-1,e=r.length;++t<e;)if(n(r[t]))return r[t]}),D.findIndex=e(function(n,r){for(var t=-1,e=r.length;++t<e;)if(n(r[t]))return t;return-1}),D.findLast=e(function(n,r){for(var t=r.length;t--;)if(n(r[t]))return r[t]}),D.findLastIndex=e(function(n,r){for(var t=r.length;t--;)if(n(r[t]))return t;return-1}),D.every=e(b),D.some=e(x),D.indexOf=e(function(n,r){return j(r,n)}),D.indexOf.from=u(function(n,r,t){return j(t,n,r)}),D.lastIndexOf=e(function(n,r){return O(r,n)}),D.lastIndexOf.from=u(function(n,r,t){return O(t,n,r)}),D.contains=e(k);var Pr=D.containsWith=u(A),Er=D.uniq=function(n){for(var r,t=-1,e=n.length,u=[];++t<e;)r=n[t],k(r,u)||u.push(r);return u};D.isSet=function(n){for(var r=n.length,t=-1;++t<r;)if(j(n,n[t],t+1)>=0)return!1;return!0};var Mr=D.uniqWith=e(function(n,r){for(var t,e=-1,u=r.length,i=[];++e<u;)t=r[e],A(n,t,i)||i.push(t);return i}),Wr=D.pluck=e(function(n,r){return y(Br(n),r)});D.flatten=I(!0);var Nr=D.unnest=I(!1);D.zipWith=u(function(n,r,t){for(var e=[],u=-1,i=Math.min(r.length,t.length);++u<i;)e[u]=n(r[u],t[u]);return e}),D.zip=e(function(n,r){for(var t=[],e=-1,u=Math.min(n.length,r.length);++e<u;)t[e]=[n[e],r[e]];return t}),D.zipObj=e(function(n,r){for(var t=-1,e=n.length,u={};++t<e;)u[n[t]]=r[t];return u});var Sr=D.fromPairs=function(n){for(var r=-1,t=n.length,e={};++r<t;)$(n[r])&&n[r].length&&(e[n[r][0]]=n[r][1]);return e},Tr=D.createMapEntry=e(function(n,r){var t={};return t[n]=r,t});D.lens=e(function(n,r){var t=function(r){return n(r)};return t.set=r,t.map=function(t,e){return r(t(n(e)),e)},t}),D.xprod=e(function(n,r){if(ir(n)||ir(r))return[];for(var t,e=-1,u=n.length,i=r.length,o=[];++e<u;)for(t=-1;++t<i;)o.push([n[e],r[t]]);return o});var Cr=D.reverse=function(n){for(var r=-1,t=n.length,e=t,u=new Array(t);++r<t;)u[--e]=n[r];return u};D.range=e(function(n,r){if(n>=r)return[];for(var t=0,e=new Array(Math.floor(r)-Math.ceil(n));r>n;)e[t++]=n++;return e}),D.join=tr(1,"join"),D.slice=tr(2,"slice"),D.slice.from=e(function(n,r){return r.slice(n,r.length)}),D.remove=u(function(n,e,u){return t(r(u,0,Math.min(n,u.length)),r(u,Math.min(u.length,n+e)))}),D.insert=u(function(n,e,u){return n=n<u.length&&n>=0?n:u.length,t(l(e,r(u,0,n)),r(u,n))}),D.insert.all=u(function(n,e,u){return n=n<u.length&&n>=0?n:u.length,t(t(r(u,0,n),e),r(u,n))});var Lr=D.comparator=function(n){return function(r,t){return n(r,t)?-1:n(t,r)?1:0}};D.sort=e(function(n,r){return ur(r).sort(n)});var qr=D.groupBy=e(function(n,r){return wr(function(r,t){var e=n(t);return r[e]=l(t,r[e]||(r[e]=[])),r},{},r)});D.partition=e(function(n,r){return wr(function(r,t){return r[n(t)?0:1].push(t),r},[[],[]],r)}),D.tap=e(function(n,r){return n(r),r}),D.eq=e(function(n,r){return n===r});var Br=D.prop=function(r,t){switch(arguments.length){case 0:throw n();case 1:return function(n){return n[r]}}return t[r]};D.get=Br,D.propOf=V(Br),D.props=e(function(n,r){for(var t=n.length,e=new Array(t),u=-1;++u<t;)e[u]=r[n[u]];return e});var Rr=Object.prototype.hasOwnProperty;D.propOr=u(function(n,r,t){return Rr.call(t,n)?t[n]:r}),D.has=e(function(n,r){return Rr.call(r,n)}),D.hasIn=e(function(n,r){return n in r}),D.func=function(t,e){switch(arguments.length){case 0:throw n();case 1:return function(n){return n[t].apply(n,r(arguments,1))};default:return e[t].apply(e,r(arguments,2))}};var zr=D.always=function(n){return function(){return n}};D.bind=e(function(n,r){return function(){return n.apply(r,arguments)}});var Fr=D.keys=function(){var n=!{toString:null}.propertyIsEnumerable("toString"),r=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];return function(t){if(Object(t)!==t)return[];if(Object.keys)return Object.keys(t);var e,u,i=[];for(e in t)Rr.call(t,e)&&i.push(e);if(n)for(u=r.length;u--;)e=r[u],Rr.call(t,e)&&!k(e,i)&&i.push(e);return i}}(),Ur=D.keysIn=function(n){var r,t=[];for(r in n)t.push(r);return t};D.toPairs=P(Fr),D.toPairsIn=P(Ur),D.values=function(n){for(var r=Fr(n),t=r.length,e=new Array(t),u=-1;++u<t;)e[u]=n[r[u]];return e},D.valuesIn=function(n){var r,t=[];for(r in n)t.push(n[r]);return t},D.pick=e(function(n,r){return E(function(r,t){return k(t,n)},r)}),D.omit=e(function(n,r){return E(function(r,t){return!k(t,n)},r)}),D.pickBy=e(E);var _r=D.pickAll=e(M);D.mixin=e(function(n,r){return W(W({},n),r)}),D.cloneObj=function(n){return W({},n)},D.eqProps=u(function(n,r,t){return r[n]===t[n]}),D.where=function(r,t){var e=qr(function(n){return"function"==typeof r[n]?"fn":"obj"},Fr(r));switch(arguments.length){case 0:throw n();case 1:return function(n){return N(r,e,n)}}return N(r,e,t)};var Dr=D.assoc=u(function(n,r,t){return W(Sr(y(function(n){return[n,t[n]]},Ur(t))),Tr(n,r))});D.assocPath=function(){var t=function(n,e,u){if(1===n.length)return Dr(n[0],e,u);var i=u[n[0]];return Dr(n[0],t(r(n,1),e,Zr(Object,i)?i:{}),u)};return function(r,u,i){var o=arguments.length;if(0===o)throw n();var a=Qr(".",r),c=e(function(n,r){return t(a,n,r)});switch(o){case 1:return c;case 2:return c(u);default:return c(u,i)}}}(),D.installTo=function(n){return W(n,D)};var Zr=D.is=e(function(n,r){return null!=r&&r.constructor===n||r instanceof n});D.type=function(n){return null===n?"Null":void 0===n?"Undefined":Z.call(n).slice(8,-1)},D.alwaysZero=zr(0),D.alwaysFalse=zr(!1),D.alwaysTrue=zr(!0),D.and=e(function(n,r){return function(){return n.apply(this,arguments)&&r.apply(this,arguments)}}),D.or=e(function(n,r){return function(){return n.apply(this,arguments)||r.apply(this,arguments)}});var $r=D.not=function(n){return function(){return!n.apply(this,arguments)}};D.allPredicates=S(b),D.anyPredicates=S(x);var Gr=D.ifElse=u(function(n,r,t){return function(){return n.apply(this,arguments)?r.apply(this,arguments):t.apply(this,arguments)}});D.if=Gr,D.cond=function(){var n=arguments;return function(){for(var r=-1;++r<n.length;)if(n[r][0].apply(this,arguments))return n[r][1].apply(this,arguments)}},D.add=e(T),D.multiply=e(C),D.subtract=J(function(n,r){return n-r}),D.divide=J(function(n,r){return n/r}),D.modulo=J(function(n,r){return n%r});var Hr=Number.isInteger||function(n){return n<<0===n};D.mathMod=J(function(n,r){return Hr(n)?!Hr(r)||1>r?0/0:(n%r+r)%r:0/0}),D.sum=wr(T,0),D.product=wr(C,1),D.lt=J(L),D.lte=J(function(n,r){return r>=n}),D.gt=J(q),D.gte=J(function(n,r){return n>=r});var Jr=D.max=B(q,-1/0);D.maxBy=e(R(q)),D.min=B(L,1/0),D.minBy=e(R(L));var Kr=D.substring=tr(2,"substring");D.substringFrom=V(Kr)(void 0),D.substringTo=Kr(0),D.charAt=tr(1,"charAt"),D.charCodeAt=tr(1,"charCodeAt"),D.match=tr(1,"match"),D.replace=u(function(n,r,t){return t.replace(n,r)}),D.strIndexOf=e(function(n,r){return r.indexOf(n)}),D.strLastIndexOf=e(function(n,r){return r.lastIndexOf(n)}),D.toUpperCase=tr(0,"toUpperCase"),D.toLowerCase=tr(0,"toLowerCase"),D.trim=function(){var n=" \n\f\r   ᠎             　\u2028\u2029",r="​",t="function"==typeof String.prototype.trim;return t&&!n.trim()&&r.trim()?function(n){return n.trim()}:function(r){var t=new RegExp("^["+n+"]["+n+"]*"),e=new RegExp("["+n+"]["+n+"]*$");return r.replace(t,"").replace(e,"")}}();var Qr=D.split=tr(1,"split"),Vr=D.pathOn=u(function(n,r,t){return z(r.split(n),t)});D.path=Vr("."),D.pathEq=u(function(n,r,t){return z(n.split("."),t)===r}),D.project=er(y,_r,lr),D.propEq=u(function(n,r,t){return t[n]===r}),D.union=pr(Er,t),D.unionWith=u(function(n,r,e){return Mr(n,t(r,e))}),D.difference=e(function(n,r){for(var t=[],e=-1,u=n.length;++e<u;)k(n[e],r)||k(n[e],t)||t.push(n[e]);return t}),D.differenceWith=u(function(n,r,t){for(var e=[],u=-1,i=r.length,o=Pr(n);++u<i;)o(r[u],t)||o(r[u],e)||e.push(r[u]);return e}),D.intersection=e(function(n,r){return Er(d(V(k)(n),r))}),D.intersectionWith=u(function(n,r,t){for(var e=[],u=-1;++u<r.length;)A(n,r[u],t)&&(e[e.length]=r[u]);return Mr(n,e)});var Xr=Lr(function(n,r){return n.key<r.key});return D.sortBy=e(function(n,r){return Wr("val",F(n,r).sort(Xr))}),D.countBy=e(function(n,r){return wr(function(n,r){return n[r.key]=(n[r.key]||0)+1,n},{},F(n,r))}),D.functions=U(Fr),D.functionsIn=U(Ur),D})},{}],322:[function(require,module){"use strict";module.exports=require(1)},{1:321}],323:[function(){!function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function n(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function o(a){function b(a){return m[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function p(a,b){for(var c=0,d=b.length;d>c;c+=1)if(r(a,b[c]))return c;return-1}function q(){var b=a(l);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function r(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function s(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function v(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function w(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function x(a,b){var c=w(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){p(a.target,b.get())>=0&&c(a)})}function y(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus();var e=b.offsetWidth>0||b.offsetHeight>0;e&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),h.attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];e=b.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){0===this.indexOf("select2-")&&f.push(this)})),e=c.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(g=d(this),g&&f.push(g))})),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return 0>e?void c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),void c.push(d(a.substring(e+f,a.length))))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page);i.callback(b)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return""+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return""===d?void b.callback(c()):(g=function(c,e){var h,i;if(c=c[0],c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),void b.callback(e))}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function K(b){if(a.isFunction(b)){var c=Array.prototype.slice.call(arguments,1);return b.apply(null,c)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice.call(this,h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0}function N(){var a=this;Array.prototype.forEach.call(arguments,function(b){a[b].remove(),a[b]=null})}function O(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l="<div class='select2-measure-scrollbar'></div>",m={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};j=a(document),g=function(){var a=1;return function(){return a++}}(),j.on("mousemove",function(a){i.x=a.pageX,i.y=a.pageY}),d=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss)),this.container.addClass(K(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),v(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),A(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),u(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||q(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2");this.close(),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),N.call(this,"container","liveRegion","dropdown","results","search") },optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:r(a.attr("locked"),"locked")||r(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,h,i=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var h,j=this.opts.id,k=this.liveRegion;(h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v;for(d=c.sortResults(d,e,f),m=0,n=d.length;n>m;m+=1)o=d[m],q=o.disabled===!0,p=!q&&j(o)!==b,r=o.children&&o.children.length>0,s=a("<li></li>"),s.addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&s.addClass("select2-disabled"),r&&s.addClass("select2-result-with-children"),s.addClass(i.opts.formatResultCssClass(o)),s.attr("role","presentation"),t=a(document.createElement("div")),t.addClass("select2-result-label"),t.attr("id","select2-result-label-"+g()),t.attr("role","option"),v=c.formatResult(o,t,f,i.opts.escapeMarkup),v!==b&&(t.html(v),s.append(t)),r&&(u=a("<ul></ul>"),u.addClass("select2-result-sub"),h(o.children,u,l+1),s.append(u)),s.data("select2-data",o),e.append(s);k.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term;h=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(h=c.element.data("ajax-url"),h&&h.length>0&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var c,d,a=this.opts.element;a.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),c=this.bind(function(){var c=a.prop("disabled");c===b&&(c=!1),this.enable(!c);var d=a.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass))}),a.length&&a[0].attachEvent&&a.each(function(){this.attachEvent("onpropertychange",c)}),d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(a){a.forEach(c)}),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=l>=m+f,p=c.top-f>=g.scrollTop(),q=b.outerWidth(!1),r=j>=n+q,s=b.hasClass("select2-drop-above");s?(u=!0,!p&&o&&(v=!0,u=!1)):(u=!1,!o&&p&&(v=!0,u=!0)),v&&(b.hide(),c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,q=b.outerWidth(!1),r=j>=n+q,b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width),q>e?e=q:q=e,f=b.outerHeight(!1),r=j>=n+q):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),m-=t.top,n-=t.left),r||(n=c.left+this.container.outerWidth(!1)-q),w={left:n,width:e},u?(w.top=c.top-f,w.bottom="auto",this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(w.top=m,w.bottom="auto",this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),w=a.extend(w,K(this.opts.dropdownCss)),b.css(w)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var f,b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),f=a("#select2-drop-mask"),0==f.length&&(f=a(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body),f.on("mousedown touchstart click",function(b){n(f);var d,c=a("#select2-drop");c.length>0&&(d=c.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,b=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return void b.scrollTop(0);c=this.findHighlightableChoices().find(".select2-result-label"),e=a(c[d]),f=e.offset().top+e.outerHeight(!0),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!0),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=e.offset().top-b.offset().top,0>h&&"none"!=e.css("display")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(".select2-highlighted")[0],c.get()):(b>=c.length&&(b=c.length-1),0>b&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",d.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),e=d.data("select2-data"),void(e&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(K(e.opts.formatLoadMore,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(e.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?e.text():h.opts.formatMatches(e.find(".select2-result-selectable").length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((c===!0||!k||!r(j,k))&&(a.data(this.container,"select2-last-term",j),c===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+K(f.formatSelectionTooBig,o)+"</li>");if(d.val().length<f.minimumInputLength)return n(J(f.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+K(f.formatInputTooShort,d.val(),f.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return void n(J(f.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+K(f.formatInputTooLong,d.val(),f.maximumInputLength)+"</li>":"");f.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+K(f.formatSearching)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+K(f.formatNoMatches,d.val())+"</li>");e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(K(f.formatLoadMore,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),e=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>"," <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","<span class='select2-arrow' role='presentation'><b role='presentation'></b></span> ","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","<div class='select2-search'>","<label for='' class='select2-offscreen'></label> "," <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'"," aria-autocomplete='list' />","</div>","<ul class='select2-results' role='listbox'>","</ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var b,h,d=this.container,e=this.dropdown,f=g();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=b=d.find(".select2-choice"),this.focusser=d.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+f),this.focusser.attr("aria-labelledby","select2-chosen-"+f),this.results.attr("id","select2-results-"+f),this.search.attr("aria-owns","select2-results-"+f),this.focusser.attr("id","s2id_autogen"+f),h=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(h.text()).attr("for",this.focusser.attr("id"));var i=this.opts.element.attr("title");this.opts.element.attr("title",i||h.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return void A(a);switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(a),void A(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return void A(a);if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void A(a)}return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(a)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),B(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(c){n(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(c)})),e.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return r(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&this.highlight(b===!0&&d>=0?d:0),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),f=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","<li class='select2-search-field'>","<label for='' class='select2-offscreen'></label> "," <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","</li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","<ul class='select2-results'>","</ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var d,b=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);var e=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search);if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),h=e.length?e:f):a.which==c.DELETE?this.unselect(b.first())&&(this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),void(h&&h.length||this.open())}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),void A(a);if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(a),void A(a)}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch()) })}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a("<li class='select2-search-choice'><div></div><a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup),j!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),k=this.opts.formatSelectionCssClass(c,g.find("div")),k!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),A(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(d=b.data("select2-data")){var f=a.Event("select2-removing");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;(e=p(this.id(d),c))>=0;)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){var c=g.id(b.data("select2-data"));p(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+K(g.opts.formatNoMatches,g.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,d,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),s(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),void(c&&this.triggerChange(this.buildChangeDetails(f,this.data()))))}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],j=["opened","isFocused","container","dropdown"],k=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop("multiple"):(h=d.multiple||!1,"tags"in d&&(d.multiple=h=!0)),e=h?new window.Select2.class.multi:new window.Select2.class.single,e.init(d);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(p(c[0],i)<0)throw"Unknown method: "+c[0];if(g=b,e=a(this).data("select2"),e===b)return;if(f=c[0],"container"===f?g=e.container:"dropdown"===f?g=e.dropdown:(l[f]&&(f=l[f]),g=e[f].apply(e,c.slice(1))),p(c[0],j)>=0||p(c[0],k)>=0&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},formatMatches:function(a){return a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return o(""+b).toUpperCase().indexOf(o(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},"class":{"abstract":d,single:e,multi:f}}}}(jQuery)},{}],324:[function(require,module){"use strict";module.exports=require(1)},{1:323}],325:[function(){function getInternetExplorerVersion(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}function isIE8orlower(){var a="0",b=getInternetExplorerVersion();return b>-1&&(a=b>=9?0:1),a}$.sound_path="sound/",$.sound_on=!0,jQuery(document).ready(function(){$("body").append("<div id='divSmallBoxes'></div>"),$("body").append("<div id='divMiniIcons'></div><div id='divbigBoxes'></div>")});var ExistMsg=0,SmartMSGboxCount=0;$.SmartMessageBox=function(a,b){var c,d;a=$.extend({title:"",content:"",NormalButton:void 0,ActiveButton:void 0,buttons:void 0,input:void 0,inputValue:void 0,placeholder:"",options:void 0},a);var e=0;if(e=1,0==isIE8orlower()){var f=document.createElement("audio");f.setAttribute("src",$.sound_path+"messagebox.mp3"),$.get(),f.addEventListener("load",function(){f.play()},!0),$.sound_on&&(f.pause(),f.play())}SmartMSGboxCount+=1,0==ExistMsg&&(ExistMsg=1,c="<div class='divMessageBox animated fadeIn fast' id='MsgBoxBack'></div>",$("body").append(c),1==isIE8orlower()&&$("#MsgBoxBack").addClass("MessageIE"));var g="",h=0;if(void 0!=a.input)switch(h=1,a.input=a.input.toLowerCase(),a.input){case"text":a.inputValue="string"===$.type(a.inputValue)?a.inputValue.replace(/'/g,"&#x27;"):a.inputValue,g="<input class='form-control' type='"+a.input+"' id='txt"+SmartMSGboxCount+"' placeholder='"+a.placeholder+"' value='"+a.inputValue+"'/><br/><br/>";break;case"password":g="<input class='form-control' type='"+a.input+"' id='txt"+SmartMSGboxCount+"' placeholder='"+a.placeholder+"'/><br/><br/>";break;case"select":if(void 0==a.options)alert("For this type of input, the options parameter is required.");else{g="<select class='form-control' id='txt"+SmartMSGboxCount+"'>";for(var i=0;i<=a.options.length-1;i++)"["==a.options[i]?j="":"]"==a.options[i]?(k+=1,j="<option>"+j+"</option>",g+=j):j+=a.options[i];g+="</select>"}break;default:alert("That type of input is not handled yet")}d="<div class='MessageBoxContainer animated fadeIn fast' id='Msg"+SmartMSGboxCount+"'>",d+="<div class='MessageBoxMiddle'>",d+="<span class='MsgTitle'>"+a.title+"</span class='MsgTitle'>",d+="<p class='pText'>"+a.content+"</p>",d+=g,d+="<div class='MessageBoxButtonSection'>",void 0==a.buttons&&(a.buttons="[Accept]"),a.buttons=$.trim(a.buttons),a.buttons=a.buttons.split("");var j="",k=0;void 0==a.NormalButton&&(a.NormalButton="#232323"),void 0==a.ActiveButton&&(a.ActiveButton="#ed145b");for(var i=0;i<=a.buttons.length-1;i++)"["==a.buttons[i]?j="":"]"==a.buttons[i]?(k+=1,j="<button id='bot"+k+"-Msg"+SmartMSGboxCount+"' class='btn btn-default btn-sm botTempo' data-id="+j+"> "+j+"</button>",d+=j):j+=a.buttons[i];d+="</div>",d+="</div>",d+="</div>",SmartMSGboxCount>1&&($(".MessageBoxContainer").hide(),$(".MessageBoxContainer").css("z-index",99999)),$(".divMessageBox").append(d),1==h&&$("#txt"+SmartMSGboxCount).focus(),$(".botTempo").hover(function(){$(this).attr("id")},function(){$(this).attr("id")}),$(".botTempo").click(function(){var a=$(this).attr("id"),c=a.substr(a.indexOf("-")+1),d=$.trim($(this).text());if(1==h){if("function"==typeof b){var e=c.replace("Msg",""),f=$("#txt"+e).val();b&&b(d,f)}}else"function"==typeof b&&b&&b(d);$("#"+c).addClass("animated fadeOut fast"),SmartMSGboxCount-=1,0==SmartMSGboxCount&&$("#MsgBoxBack").removeClass("fadeIn").addClass("fadeOut").delay(300).queue(function(){ExistMsg=0,$(this).remove()})}),$('.botTempo[data-id="Yes"]').focus(),$('.botTempo[data-id="Dismiss"]').focus()};var BigBoxes=0;$.bigBox=function(a,b){var c;if(a=$.extend({title:"",content:"",icon:void 0,number:void 0,color:void 0,sound:$.sound_on,sound_file:"bigbox",timeout:void 0,colortime:1500,colors:void 0},a),1==a.sound&&0==isIE8orlower()){var d=document.createElement("audio");navigator.userAgent.match("Firefox/")?d.setAttribute("src",$.sound_path+a.sound_file+".ogg"):d.setAttribute("src",$.sound_path+a.sound_file+".mp3"),$.get(),d.addEventListener("load",function(){d.play()},!0),$.sound_on&&(d.pause(),d.play())}BigBoxes+=1,c="<div id='bigBox"+BigBoxes+"' class='bigBox animated fadeIn fast'><div id='bigBoxColor"+BigBoxes+"'><i class='botClose fa fa-times' id='botClose"+BigBoxes+"'></i>",c+="<span>"+a.title+"</span>",c+="<p>"+a.content+"</p>",c+="<div class='bigboxicon'>",void 0==a.icon&&(a.icon="fa fa-cloud"),c+="<i class='"+a.icon+"'></i>",c+="</div>",c+="<div class='bigboxnumber'>",void 0!=a.number&&(c+=a.number),c+="</div></div>",c+="</div>",$("#divbigBoxes").append(c),void 0==a.color&&(a.color="#004d60"),$("#bigBox"+BigBoxes).css("background-color",a.color),$("#divMiniIcons").append("<div id='miniIcon"+BigBoxes+"' class='cajita animated fadeIn' style='background-color: "+a.color+";'><i class='"+a.icon+"'/></i></div>"),$("#miniIcon"+BigBoxes).bind("click",function(){var a=$(this).attr("id"),b=a.replace("miniIcon","bigBox"),c=a.replace("miniIcon","bigBoxColor");$(".cajita").each(function(){var a=$(this).attr("id"),b=a.replace("miniIcon","bigBox");$("#"+b).css("z-index",9998)}),$("#"+b).css("z-index",9999),$("#"+c).removeClass("animated fadeIn").delay(1).queue(function(){$(this).show(),$(this).addClass("animated fadeIn"),$(this).clearQueue()})});var e,f=$("#botClose"+BigBoxes),g=$("#bigBox"+BigBoxes),h=$("#miniIcon"+BigBoxes);if(void 0!=a.colors&&a.colors.length>0&&(f.attr("colorcount","0"),e=setInterval(function(){var b=f.attr("colorcount");f.animate({backgroundColor:a.colors[b].color}),g.animate({backgroundColor:a.colors[b].color}),h.animate({backgroundColor:a.colors[b].color}),b<a.colors.length-1?f.attr("colorcount",1*b+1):f.attr("colorcount",0)},a.colortime)),f.bind("click",function(){clearInterval(e),"function"==typeof b&&b&&b();var a=$(this).attr("id"),c=a.replace("botClose","bigBox"),d=a.replace("botClose","miniIcon");$("#"+c).removeClass("fadeIn fast"),$("#"+c).addClass("fadeOut fast").delay(300).queue(function(){$(this).clearQueue(),$(this).remove()}),$("#"+d).removeClass("fadeIn fast"),$("#"+d).addClass("fadeOut fast").delay(300).queue(function(){$(this).clearQueue(),$(this).remove()})}),void 0!=a.timeout){var i=BigBoxes;setTimeout(function(){clearInterval(e),$("#bigBox"+i).removeClass("fadeIn fast"),$("#bigBox"+i).addClass("fadeOut fast").delay(300).queue(function(){$(this).clearQueue(),$(this).remove()}),$("#miniIcon"+i).removeClass("fadeIn fast"),$("#miniIcon"+i).addClass("fadeOut fast").delay(300).queue(function(){$(this).clearQueue(),$(this).remove()})},a.timeout)}};var SmallBoxes=0,SmallBoxesAnchos=0;$.smallBox=function(a,b){var c;if(a=$.extend({title:"",content:"",icon:void 0,iconSmall:void 0,sound:$.sound_on,sound_file:"smallbox",color:void 0,timeout:void 0,colortime:1500,colors:void 0},a),1==a.sound&&0==isIE8orlower()){var d=document.createElement("audio");navigator.userAgent.match("Firefox/")?d.setAttribute("src",$.sound_path+a.sound_file+".ogg"):d.setAttribute("src",$.sound_path+a.sound_file+".mp3"),$.get(),d.addEventListener("load",function(){d.play()},!0),$.sound_on&&(d.pause(),d.play())}SmallBoxes+=1,c="";var e="",f="smallbox"+SmallBoxes;if(e=void 0==a.iconSmall?"<div class='miniIcono'></div>":"<div class='miniIcono'><i class='miniPic "+a.iconSmall+"'></i></div>",c=void 0==a.icon?"<div id='smallbox"+SmallBoxes+"' class='SmallBox animated fadeInRight fast'><div class='textoFull'><span>"+a.title+"</span><p>"+a.content+"</p></div>"+e+"</div>":"<div id='smallbox"+SmallBoxes+"' class='SmallBox animated fadeInRight fast'><div class='foto'><i class='"+a.icon+"'></i></div><div class='textoFoto'><span>"+a.title+"</span><p>"+a.content+"</p></div>"+e+"</div>",1==SmallBoxes)$("#divSmallBoxes").append(c),SmallBoxesAnchos=$("#smallbox"+SmallBoxes).height()+40;else{var g=$(".SmallBox").size();0==g?($("#divSmallBoxes").append(c),SmallBoxesAnchos=$("#smallbox"+SmallBoxes).height()+40):($("#divSmallBoxes").append(c),$("#smallbox"+SmallBoxes).css("top",SmallBoxesAnchos),SmallBoxesAnchos=SmallBoxesAnchos+$("#smallbox"+SmallBoxes).height()+20,$(".SmallBox").each(function(a){0==a?($(this).css("top",20),heightPrev=$(this).height()+40,SmallBoxesAnchos=$(this).height()+40):($(this).css("top",heightPrev),heightPrev=heightPrev+$(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+$(this).height()+20)}))}var h=$("#smallbox"+SmallBoxes);void 0==a.color?h.css("background-color","#004d60"):h.css("background-color",a.color);var i;void 0!=a.colors&&a.colors.length>0&&(h.attr("colorcount","0"),i=setInterval(function(){var b=h.attr("colorcount");h.animate({backgroundColor:a.colors[b].color}),b<a.colors.length-1?h.attr("colorcount",1*b+1):h.attr("colorcount",0)},a.colortime)),void 0!=a.timeout&&setTimeout(function(){clearInterval(i);var a=$(this).height()+20;$("#"+f).css("top"),0!=$("#"+f+":hover").length?$("#"+f).on("mouseleave",function(){SmallBoxesAnchos-=a,$("#"+f).remove(),"function"==typeof b&&b&&b();var c=0;$(".SmallBox").each(function(a){0==a?($(this).animate({top:20},300),c=$(this).height()+40,SmallBoxesAnchos=$(this).height()+40):($(this).animate({top:c},350),c=c+$(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+$(this).height()+20)})}):(clearInterval(i),SmallBoxesAnchos-=a,"function"==typeof b&&b&&b(),$("#"+f).removeClass().addClass("SmallBox").animate({opacity:0},300,function(){$(this).remove();var a=0;$(".SmallBox").each(function(b){0==b?($(this).animate({top:20},300),a=$(this).height()+40,SmallBoxesAnchos=$(this).height()+40):($(this).animate({top:a}),a=a+$(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+$(this).height()+20)})}))},a.timeout),$("#smallbox"+SmallBoxes).bind("click",function(){clearInterval(i),"function"==typeof b&&b&&b();var a=$(this).height()+20;$(this).attr("id"),$(this).css("top"),SmallBoxesAnchos-=a,$(this).removeClass().addClass("SmallBox").animate({opacity:0},300,function(){$(this).remove();var a=0;$(".SmallBox").each(function(b){0==b?($(this).animate({top:20},300),a=$(this).height()+40,SmallBoxesAnchos=$(this).height()+40):($(this).animate({top:a},350),a=a+$(this).height()+20,SmallBoxesAnchos=SmallBoxesAnchos+$(this).height()+20)})})})}},{}],326:[function(require,module){"use strict";module.exports=require(1)},{1:325}],327:[function(){(function(){var b,m;b=this.jQuery||$,m=b(window),b.fn.stick_in_parent=function(e){var u,n,f,s,B,l,C;for(null==e&&(e={}),s=e.sticky_class,u=e.inner_scrolling,f=e.parent,n=e.offset_top,null==n&&(n=0),null==f&&(f=void 0),null==u&&(u=!0),null==s&&(s="is_stuck"),B=function(a,e,l,v,y,p,t){var q,z,k,w,c,d,A,x,g,h;if(!a.data("sticky_kit")){if(a.data("sticky_kit",!0),d=a.parent(),null!=f&&(d=d.closest(f)),!d.length)throw"failed to find stick parent";if(q=k=!1,g=b("<div />"),g.css("position",a.css("position")),A=function(){var c,b;return c=parseInt(d.css("border-top-width"),10),b=parseInt(d.css("padding-top"),10),e=parseInt(d.css("padding-bottom"),10),l=d.offset().top+c+b,v=d.height(),c=k?(k=!1,q=!1,a.insertAfter(g).css({position:"",top:"",width:"",bottom:""}),g.detach(),!0):void 0,y=a.offset().top-parseInt(a.css("margin-top"),10)-n,p=a.outerHeight(!0),t=a.css("float"),g.css({width:a.outerWidth(!0),height:p,display:a.css("display"),"vertical-align":a.css("vertical-align"),"float":t}),c?h():void 0},A(),p!==v)return w=void 0,c=n,h=function(){var b,h,r,f;return r=m.scrollTop(),null!=w&&(h=r-w),w=r,k?(f=r+p+c>v+l,q&&!f&&(q=!1,a.css({position:"fixed",bottom:"",top:c}).trigger("sticky_kit:unbottom")),y>r&&(k=!1,c=n,"left"!==t&&"right"!==t||a.insertAfter(g),g.detach(),b={position:"",width:"",top:""},a.css(b).removeClass(s).trigger("sticky_kit:unstick")),u&&(b=m.height(),p>b&&!q&&(c-=h,c=Math.max(b-p,c),c=Math.min(n,c),k&&a.css({top:c+"px"})))):r>y&&(k=!0,b={position:"fixed",top:c},b.width="border-box"===a.css("box-sizing")?a.outerWidth()+"px":a.width()+"px",a.css(b).addClass(s).after(g),"left"!==t&&"right"!==t||g.append(a),a.trigger("sticky_kit:stick")),k&&(null==f&&(f=r+p+c>v+l),!q&&f)?(q=!0,"static"===d.css("position")&&d.css({position:"relative"}),a.css({position:"absolute",bottom:e,top:"auto"}).trigger("sticky_kit:bottom")):void 0},x=function(){return A(),h()},z=function(){return m.off("scroll",h),b(document.body).off("sticky_kit:recalc",x),a.off("sticky_kit:detach",z),a.removeData("sticky_kit"),a.css({position:"",bottom:"",top:""}),d.position("position",""),k?(a.insertAfter(g).removeClass(s),g.remove()):void 0},m.on("touchmove",h),m.on("scroll",h),m.on("resize",x),b(document.body).on("sticky_kit:recalc",x),a.on("sticky_kit:detach",z),setTimeout(h,0)}},l=0,C=this.length;C>l;l++)e=this[l],B(b(e));return this}}).call(this)},{}],328:[function(require,module){"use strict";module.exports=require(1)},{1:327}],329:[function(require){!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(window.jQuery)}(function($){"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(callback,optInitialValue){var idx,value,length=this.length>>>0,isValueSet=!1;for(1<arguments.length&&(value=optInitialValue,isValueSet=!0),idx=0;length>idx;++idx)this.hasOwnProperty(idx)&&(isValueSet?value=callback(value,this[idx],idx,this):(value=this[idx],isValueSet=!0));if(!isValueSet)throw new TypeError("Reduce of empty array with no initial value");return value});var CodeMirror,isSupportAmd="function"==typeof define&&define.amd,isFontInstalled=function(fontName){var testFontName="Comic Sans MS"===fontName?"Courier New":"Comic Sans MS",$tester=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),originalWidth=$tester.css("fontFamily",testFontName).width(),width=$tester.css("fontFamily",fontName+","+testFontName).width();return $tester.remove(),originalWidth!==width},agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:isSupportAmd?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:isFontInstalled},func=function(){var eq=function(elA){return function(elB){return elA===elB}},eq2=function(elA,elB){return elA===elB},ok=function(){return!0},fail=function(){return!1},not=function(f){return function(){return!f.apply(f,arguments)}},self=function(a){return a},idCounter=0,uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},rect2bnd=function(rect){var $document=$(document);return{top:rect.top+$document.scrollTop(),left:rect.left+$document.scrollLeft(),width:rect.right-rect.left,height:rect.bottom-rect.top}},invertObject=function(obj){var inverted={};for(var key in obj)obj.hasOwnProperty(key)&&(inverted[obj[key]]=key);return inverted};return{eq:eq,eq2:eq2,ok:ok,fail:fail,not:not,self:self,uniqueId:uniqueId,rect2bnd:rect2bnd,invertObject:invertObject}}(),list=function(){var head=function(array){return array[0]},last=function(array){return array[array.length-1]},initial=function(array){return array.slice(0,array.length-1)},tail=function(array){return array.slice(1)},next=function(array,item){var idx=array.indexOf(item);return-1===idx?null:array[idx+1]},prev=function(array,item){var idx=array.indexOf(item);return-1===idx?null:array[idx-1]},sum=function(array,fn){return fn=fn||func.self,array.reduce(function(memo,v){return memo+fn(v)},0)},from=function(collection){for(var result=[],idx=-1,length=collection.length;++idx<length;)result[idx]=collection[idx];return result},clusterBy=function(array,fn){if(!array.length)return[];var aTail=tail(array);return aTail.reduce(function(memo,v){var aLast=last(memo);return fn(last(aLast),v)?aLast[aLast.length]=v:memo[memo.length]=[v],memo},[[head(array)]])},compact=function(array){for(var aResult=[],idx=0,sz=array.length;sz>idx;idx++)array[idx]&&aResult.push(array[idx]);return aResult};return{head:head,last:last,initial:initial,tail:tail,prev:prev,next:next,sum:sum,from:from,compact:compact,clusterBy:clusterBy}}(),dom=function(){var isEditable=function(node){return node&&$(node).hasClass("note-editable")},isControlSizing=function(node){return node&&$(node).hasClass("note-control-sizing")},buildLayoutInfo=function($editor){var makeFinder;if($editor.hasClass("note-air-editor")){var id=list.last($editor.attr("id").split("-"));return makeFinder=function(sIdPrefix){return function(){return $(sIdPrefix+id)}},{editor:function(){return $editor},editable:function(){return $editor},popover:makeFinder("#note-popover-"),handle:makeFinder("#note-handle-"),dialog:makeFinder("#note-dialog-")}}return makeFinder=function(sClassName){return function(){return $editor.find(sClassName)}},{editor:function(){return $editor},dropzone:makeFinder(".note-dropzone"),toolbar:makeFinder(".note-toolbar"),editable:makeFinder(".note-editable"),codable:makeFinder(".note-codable"),statusbar:makeFinder(".note-statusbar"),popover:makeFinder(".note-popover"),handle:makeFinder(".note-handle"),dialog:makeFinder(".note-dialog")}},makePredByNodeName=function(sNodeName){return function(node){return node&&node.nodeName===sNodeName}},isPara=function(node){return node&&/^DIV|^P|^LI|^H[1-7]/.test(node.nodeName)},isList=function(node){return node&&/^UL|^OL/.test(node.nodeName)},isCell=function(node){return node&&/^TD|^TH/.test(node.nodeName)},ancestor=function(node,pred){for(;node;){if(pred(node))return node;if(isEditable(node))break;node=node.parentNode}return null},listAncestor=function(node,pred){pred=pred||func.fail;var aAncestor=[];return ancestor(node,function(el){return aAncestor.push(el),pred(el)}),aAncestor},commonAncestor=function(nodeA,nodeB){for(var aAncestor=listAncestor(nodeA),n=nodeB;n;n=n.parentNode)if($.inArray(n,aAncestor)>-1)return n;return null},listBetween=function(nodeA,nodeB){var aNode=[],isStart=!1,isEnd=!1;return function fnWalk(node){if(node){if(node===nodeA&&(isStart=!0),isStart&&!isEnd&&aNode.push(node),node===nodeB)return void(isEnd=!0);for(var idx=0,sz=node.childNodes.length;sz>idx;idx++)fnWalk(node.childNodes[idx])}}(commonAncestor(nodeA,nodeB)),aNode},listPrev=function(node,pred){pred=pred||func.fail;for(var aNext=[];node&&(aNext.push(node),!pred(node));)node=node.previousSibling;return aNext},listNext=function(node,pred){pred=pred||func.fail;for(var aNext=[];node&&(aNext.push(node),!pred(node));)node=node.nextSibling;return aNext},listDescendant=function(node,pred){var aDescendant=[];return pred=pred||func.ok,function fnWalk(current){node!==current&&pred(current)&&aDescendant.push(current);for(var idx=0,sz=current.childNodes.length;sz>idx;idx++)fnWalk(current.childNodes[idx])}(node),aDescendant},insertAfter=function(node,preceding){var next=preceding.nextSibling,parent=preceding.parentNode;return next?parent.insertBefore(node,next):parent.appendChild(node),node},appends=function(node,aChild){return $.each(aChild,function(idx,child){node.appendChild(child)}),node},isText=makePredByNodeName("#text"),length=function(node){return isText(node)?node.nodeValue.length:node.childNodes.length},isEdgeBP=function(boundaryPoint){return 0===boundaryPoint.offset||boundaryPoint.offset===length(boundaryPoint.node)},position=function(node){for(var offset=0;node=node.previousSibling;)offset+=1;return offset},hasChildren=function(node){return node&&node.childNodes&&node.childNodes.length},prevBP=function(boundaryPoint){var node=boundaryPoint.node,offset=boundaryPoint.offset;if(0===offset)return isEditable(node)?null:{node:node.parentNode,offset:position(node)};if(hasChildren(node)){var child=node.childNodes[offset-1];return{node:child,offset:length(child)}}return{node:node,offset:offset-1}},makeOffsetPath=function(ancestor,node){var aAncestor=list.initial(listAncestor(node,func.eq(ancestor)));return $.map(aAncestor,position).reverse()},fromOffsetPath=function(ancestor,aOffset){for(var current=ancestor,i=0,sz=aOffset.length;sz>i;i++)current=current.childNodes[aOffset[i]];return current},split=function(node,offset){if(0===offset)return node;if(offset>=length(node))return node.nextSibling;if(isText(node))return node.splitText(offset);var child=node.childNodes[offset];return node=insertAfter(node.cloneNode(!1),node),appends(node,listNext(child))},splitTree=function(root,pivot,offset){var aAncestor=listAncestor(pivot,func.eq(root));return 1===aAncestor.length?split(pivot,offset):aAncestor.reduce(function(node,parent){var clone=parent.cloneNode(!1);return insertAfter(clone,parent),node===pivot&&(node=split(node,offset)),appends(clone,listNext(node)),clone})},remove=function(node,bRemoveChild){if(node&&node.parentNode){if(node.removeNode)return node.removeNode(bRemoveChild);var elParent=node.parentNode;if(!bRemoveChild){var i,sz,aNode=[];for(i=0,sz=node.childNodes.length;sz>i;i++)aNode.push(node.childNodes[i]);for(i=0,sz=aNode.length;sz>i;i++)elParent.insertBefore(aNode[i],node)}elParent.removeChild(node)}},html=function($node){return dom.isTextarea($node[0])?$node.val():$node.html()};return{blank:agent.isMSIE?"&nbsp;":"<br/>",emptyPara:"<p><br/></p>",isEditable:isEditable,isControlSizing:isControlSizing,buildLayoutInfo:buildLayoutInfo,isText:isText,isPara:isPara,isList:isList,isTable:makePredByNodeName("TABLE"),isCell:isCell,isAnchor:makePredByNodeName("A"),isDiv:makePredByNodeName("DIV"),isLi:makePredByNodeName("LI"),isSpan:makePredByNodeName("SPAN"),isB:makePredByNodeName("B"),isU:makePredByNodeName("U"),isS:makePredByNodeName("S"),isI:makePredByNodeName("I"),isImg:makePredByNodeName("IMG"),isTextarea:makePredByNodeName("TEXTAREA"),length:length,isEdgeBP:isEdgeBP,prevBP:prevBP,ancestor:ancestor,listAncestor:listAncestor,listNext:listNext,listPrev:listPrev,listDescendant:listDescendant,commonAncestor:commonAncestor,listBetween:listBetween,insertAfter:insertAfter,position:position,makeOffsetPath:makeOffsetPath,fromOffsetPath:fromOffsetPath,splitTree:splitTree,remove:remove,html:html}}(),settings={version:"0.5.2",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],fontSizes:["8","9","10","11","12","14","18","24","36"],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onToolbarClick:null,onCreateLink:function(sLinkUrl){return-1!==sLinkUrl.indexOf("@")&&-1===sLinkUrl.indexOf(":")?sLinkUrl="mailto:"+sLinkUrl:-1===sLinkUrl.indexOf("://")&&(sLinkUrl="http://"+sLinkUrl),sLinkUrl },keyMap:{pc:{"CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{"CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}},async=function(){var readFileAsDataURL=function(file){return $.Deferred(function(deferred){$.extend(new FileReader,{onload:function(e){var sDataURL=e.target.result;deferred.resolve(sDataURL)},onerror:function(){deferred.reject(this)}}).readAsDataURL(file)}).promise()},createImage=function(sUrl){return $.Deferred(function(deferred){$("<img>").one("load",function(){deferred.resolve($(this))}).one("error abort",function(){deferred.reject($(this))}).css({display:"none"}).appendTo(document.body).attr("src",sUrl)}).promise()};return{readFileAsDataURL:readFileAsDataURL,createImage:createImage}}(),key={isEdit:function(keyCode){return-1!==[8,9,13,32].indexOf(keyCode)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},Style=function(){var jQueryCSS=function($obj,propertyNames){if(agent.jqueryVersion<1.9){var result={};return $.each(propertyNames,function(idx,propertyName){result[propertyName]=$obj.css(propertyName)}),result}return $obj.css.call($obj,propertyNames)};this.stylePara=function(rng,oStyle){$.each(rng.nodes(dom.isPara),function(idx,elPara){$(elPara).css(oStyle)})},this.current=function(rng,elTarget){var $cont=$(dom.isText(rng.sc)?rng.sc.parentNode:rng.sc),properties=["font-family","font-size","text-align","list-style-type","line-height"],oStyle=jQueryCSS($cont,properties)||{};if(oStyle["font-size"]=parseInt(oStyle["font-size"],10),oStyle["font-bold"]=document.queryCommandState("bold")?"bold":"normal",oStyle["font-italic"]=document.queryCommandState("italic")?"italic":"normal",oStyle["font-underline"]=document.queryCommandState("underline")?"underline":"normal",oStyle["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",oStyle["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",oStyle["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",rng.isOnList()){var aOrderedType=["circle","disc","disc-leading-zero","square"],isUnordered=$.inArray(oStyle["list-style-type"],aOrderedType)>-1;oStyle["list-style"]=isUnordered?"unordered":"ordered"}else oStyle["list-style"]="none";var elPara=dom.ancestor(rng.sc,dom.isPara);if(elPara&&elPara.style["line-height"])oStyle["line-height"]=elPara.style.lineHeight;else{var lineHeight=parseInt(oStyle["line-height"],10)/parseInt(oStyle["font-size"],10);oStyle["line-height"]=lineHeight.toFixed(1)}return oStyle.image=dom.isImg(elTarget)&&elTarget,oStyle.anchor=rng.isOnAnchor()&&dom.ancestor(rng.sc,dom.isAnchor),oStyle.aAncestor=dom.listAncestor(rng.sc,dom.isEditable),oStyle.range=rng,oStyle}},range=function(){var isW3CRangeSupport=!!document.createRange,textRange2bp=function(textRange,isStart){var nOffset,elPrevCont,elCont=textRange.parentElement(),tester=document.body.createTextRange(),aChild=list.from(elCont.childNodes);for(nOffset=0;nOffset<aChild.length;nOffset++)if(!dom.isText(aChild[nOffset])){if(tester.moveToElementText(aChild[nOffset]),tester.compareEndPoints("StartToStart",textRange)>=0)break;elPrevCont=aChild[nOffset]}if(0!==nOffset&&dom.isText(aChild[nOffset-1])){var textRangeStart=document.body.createTextRange(),elCurText=null;textRangeStart.moveToElementText(elPrevCont||elCont),textRangeStart.collapse(!elPrevCont),elCurText=elPrevCont?elPrevCont.nextSibling:elCont.firstChild;var pointTester=textRange.duplicate();pointTester.setEndPoint("StartToStart",textRangeStart);for(var nTextCount=pointTester.text.replace(/[\r\n]/g,"").length;nTextCount>elCurText.nodeValue.length&&elCurText.nextSibling;)nTextCount-=elCurText.nodeValue.length,elCurText=elCurText.nextSibling;{elCurText.nodeValue}isStart&&elCurText.nextSibling&&dom.isText(elCurText.nextSibling)&&nTextCount===elCurText.nodeValue.length&&(nTextCount-=elCurText.nodeValue.length,elCurText=elCurText.nextSibling),elCont=elCurText,nOffset=nTextCount}return{cont:elCont,offset:nOffset}},bp2textRange=function(bp){var textRangeInfo=function(elCont,nOffset){var elNode,isCollapseToStart;if(dom.isText(elCont)){var aPrevText=dom.listPrev(elCont,func.not(dom.isText)),elPrevCont=list.last(aPrevText).previousSibling;elNode=elPrevCont||elCont.parentNode,nOffset+=list.sum(list.tail(aPrevText),dom.length),isCollapseToStart=!elPrevCont}else{if(elNode=elCont.childNodes[nOffset]||elCont,dom.isText(elNode))return textRangeInfo(elNode,nOffset);nOffset=0,isCollapseToStart=!1}return{cont:elNode,collapseToStart:isCollapseToStart,offset:nOffset}},textRange=document.body.createTextRange(),info=textRangeInfo(bp.cont,bp.offset);return textRange.moveToElementText(info.cont),textRange.collapse(info.collapseToStart),textRange.moveStart("character",info.offset),textRange},WrappedRange=function(sc,so,ec,eo){this.sc=sc,this.so=so,this.ec=ec,this.eo=eo;var nativeRange=function(){if(isW3CRangeSupport){var w3cRange=document.createRange();return w3cRange.setStart(sc,so),w3cRange.setEnd(ec,eo),w3cRange}var textRange=bp2textRange({cont:sc,offset:so});return textRange.setEndPoint("EndToEnd",bp2textRange({cont:ec,offset:eo})),textRange};this.getBPs=function(){return{sc:sc,so:so,ec:ec,eo:eo}},this.getStartBP=function(){return{node:sc,offset:so}},this.getEndBP=function(){return{node:ec,offset:eo}},this.select=function(){var nativeRng=nativeRange();if(isW3CRangeSupport){var selection=document.getSelection();selection.rangeCount>0&&selection.removeAllRanges(),selection.addRange(nativeRng)}else nativeRng.select()},this.nodes=function(pred){pred=pred||func.ok;var aNode=dom.listBetween(sc,ec),aMatched=list.compact($.map(aNode,function(node){return dom.ancestor(node,pred)}));return $.map(list.clusterBy(aMatched,func.eq2),list.head)},this.commonAncestor=function(){return dom.commonAncestor(sc,ec)},this.expand=function(pred){var startAncestor=dom.ancestor(sc,pred),endAncestor=dom.ancestor(ec,pred);if(!startAncestor&&!endAncestor)return new WrappedRange(sc,so,ec,eo);var boundaryPoints=this.getBPs();return startAncestor&&(boundaryPoints.sc=startAncestor,boundaryPoints.so=0),endAncestor&&(boundaryPoints.ec=endAncestor,boundaryPoints.eo=dom.length(endAncestor)),new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo)},this.collapse=function(isCollapseToStart){return isCollapseToStart?new WrappedRange(sc,so,sc,so):new WrappedRange(ec,eo,ec,eo)},this.splitText=function(){var isSameContainer=sc===ec,boundaryPoints=this.getBPs();return dom.isText(ec)&&!dom.isEdgeBP(this.getEndBP())&&ec.splitText(eo),dom.isText(sc)&&!dom.isEdgeBP(this.getStartBP())&&(boundaryPoints.sc=sc.splitText(so),boundaryPoints.so=0,isSameContainer&&(boundaryPoints.ec=boundaryPoints.sc,boundaryPoints.eo=eo-so)),new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var rng=this.splitText(),prevBP=dom.prevBP(rng.getStartBP());return $.each(rng.nodes(),function(idx,node){dom.remove(node,!dom.isPara(node))}),new WrappedRange(prevBP.node,prevBP.offset,prevBP.node,prevBP.offset)};var makeIsOn=function(pred){return function(){var elAncestor=dom.ancestor(sc,pred);return!!elAncestor&&elAncestor===dom.ancestor(ec,pred)}};this.isOnEditable=makeIsOn(dom.isEditable),this.isOnList=makeIsOn(dom.isList),this.isOnAnchor=makeIsOn(dom.isAnchor),this.isOnCell=makeIsOn(dom.isCell),this.isCollapsed=function(){return sc===ec&&so===eo},this.insertNode=function(node){var nativeRng=nativeRange();if(isW3CRangeSupport)nativeRng.insertNode(node);else{var tmpId="node-insert-node-target";node.id=tmpId,nativeRng.pasteHTML(node.outerHTML),node=$("#"+tmpId)[0]}return node},this.toString=function(){var nativeRng=nativeRange();return isW3CRangeSupport?nativeRng.toString():nativeRng.text},this.bookmark=function(elEditable){return{s:{path:dom.makeOffsetPath(elEditable,sc),offset:so},e:{path:dom.makeOffsetPath(elEditable,ec),offset:eo}}},this.getClientRects=function(){var nativeRng=nativeRange();return nativeRng.getClientRects()}};return{create:function(sc,so,ec,eo){if(arguments.length)2===arguments.length&&(ec=sc,eo=so);else if(isW3CRangeSupport){var selection=document.getSelection();if(0===selection.rangeCount)return null;var nativeRng=selection.getRangeAt(0);sc=nativeRng.startContainer,so=nativeRng.startOffset,ec=nativeRng.endContainer,eo=nativeRng.endOffset}else{var textRange=document.selection.createRange(),textRangeEnd=textRange.duplicate();textRangeEnd.collapse(!1);var textRangeStart=textRange;textRangeStart.collapse(!0);var bpStart=textRange2bp(textRangeStart,!0),bpEnd=textRange2bp(textRangeEnd,!1);sc=bpStart.cont,so=bpStart.offset,ec=bpEnd.cont,eo=bpEnd.offset}return new WrappedRange(sc,so,ec,eo)},createFromNode:function(node){return this.create(node,0,node,1)},createFromBookmark:function(elEditable,bookmark){var sc=dom.fromOffsetPath(elEditable,bookmark.s.path),so=bookmark.s.offset,ec=dom.fromOffsetPath(elEditable,bookmark.e.path),eo=bookmark.e.offset;return new WrappedRange(sc,so,ec,eo)}}}(),Table=function(){this.tab=function(rng,isShift){var elCell=dom.ancestor(rng.commonAncestor(),dom.isCell),elTable=dom.ancestor(elCell,dom.isTable),aCell=dom.listDescendant(elTable,dom.isCell),elNext=list[isShift?"prev":"next"](aCell,elCell);elNext&&range.create(elNext,0).select()},this.createTable=function(nCol,nRow){for(var sTD,aTD=[],idxCol=0;nCol>idxCol;idxCol++)aTD.push("<td>"+dom.blank+"</td>");sTD=aTD.join("");for(var sTR,aTR=[],idxRow=0;nRow>idxRow;idxRow++)aTR.push("<tr>"+sTD+"</tr>");sTR=aTR.join("");var sTable='<table class="table table-bordered">'+sTR+"</table>";return $(sTable)[0]}},Editor=function(){var style=new Style,table=new Table;this.saveRange=function($editable){$editable.focus(),$editable.data("range",range.create())},this.restoreRange=function($editable){var rng=$editable.data("range");rng&&(rng.select(),$editable.focus())},this.currentStyle=function(elTarget){var rng=range.create();return rng.isOnEditable()&&style.current(rng,elTarget)},this.undo=function($editable){$editable.data("NoteHistory").undo($editable)},this.redo=function($editable){$editable.data("NoteHistory").redo($editable)};for(var recordUndo=this.recordUndo=function($editable){$editable.data("NoteHistory").recordUndo($editable)},aCmd=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],idx=0,len=aCmd.length;len>idx;idx++)this[aCmd[idx]]=function(sCmd){return function($editable,sValue){recordUndo($editable),document.execCommand(sCmd,!1,sValue)}}(aCmd[idx]);var insertTab=function($editable,rng,nTabsize){recordUndo($editable);var sNbsp=new Array(nTabsize+1).join("&nbsp;");rng.insertNode($('<span id="noteTab">'+sNbsp+"</span>")[0]);var $tab=$("#noteTab").removeAttr("id");rng=range.create($tab[0],1),rng.select(),dom.remove($tab[0])};this.tab=function($editable,options){var rng=range.create();rng.isCollapsed()&&rng.isOnCell()?table.tab(rng):insertTab($editable,rng,options.tabsize)},this.untab=function(){var rng=range.create();rng.isCollapsed()&&rng.isOnCell()&&table.tab(rng,!0)},this.insertImage=function($editable,sUrl){async.createImage(sUrl).then(function($image){recordUndo($editable),$image.css({display:"",width:Math.min($editable.width(),$image.width())}),range.create().insertNode($image[0])}).fail(function(){var callbacks=$editable.data("callbacks");callbacks.onImageUploadError&&callbacks.onImageUploadError()})},this.insertVideo=function($editable,sUrl){recordUndo($editable);var $video,ytRegExp=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,ytMatch=sUrl.match(ytRegExp),igRegExp=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/,igMatch=sUrl.match(igRegExp),vRegExp=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,vMatch=sUrl.match(vRegExp),vimRegExp=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,vimMatch=sUrl.match(vimRegExp),dmRegExp=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,dmMatch=sUrl.match(dmRegExp),youkuRegExp=/\/\/v\.youku\.com\/v_show\/id_(\w+)\.html/,youkuMatch=sUrl.match(youkuRegExp);if(ytMatch&&11===ytMatch[2].length){var youtubeId=ytMatch[2];$video=$("<iframe>").attr("src","//www.youtube.com/embed/"+youtubeId).attr("width","640").attr("height","360")}else igMatch&&igMatch[0].length?$video=$("<iframe>").attr("src",igMatch[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true"):vMatch&&vMatch[0].length?$video=$("<iframe>").attr("src",vMatch[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed"):vimMatch&&vimMatch[3].length?$video=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+vimMatch[3]).attr("width","640").attr("height","360"):dmMatch&&dmMatch[2].length?$video=$("<iframe>").attr("src","//www.dailymotion.com/embed/video/"+dmMatch[2]).attr("width","640").attr("height","360"):youkuMatch&&youkuMatch[1].length&&($video=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+youkuMatch[1]));$video&&($video.attr("frameborder",0),range.create().insertNode($video[0]))},this.formatBlock=function($editable,sTagName){recordUndo($editable),sTagName=agent.isMSIE?"<"+sTagName+">":sTagName,document.execCommand("FormatBlock",!1,sTagName)},this.formatPara=function($editable){this.formatBlock($editable,"P")};for(var idx=1;6>=idx;idx++)this["formatH"+idx]=function(idx){return function($editable){this.formatBlock($editable,"H"+idx)}}(idx);this.fontSize=function($editable,sValue){recordUndo($editable),document.execCommand("fontSize",!1,3),agent.isFF?$editable.find("font[size=3]").removeAttr("size").css("font-size",sValue+"px"):$editable.find("span").filter(function(){return"medium"===this.style.fontSize}).css("font-size",sValue+"px")},this.lineHeight=function($editable,sValue){recordUndo($editable),style.stylePara(range.create(),{lineHeight:sValue})},this.unlink=function($editable){var rng=range.create();if(rng.isOnAnchor()){recordUndo($editable);var elAnchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.createFromNode(elAnchor),rng.select(),document.execCommand("unlink")}},this.createLink=function($editable,linkInfo,options){var sLinkUrl=linkInfo.url,sLinkText=linkInfo.text,isNewWindow=linkInfo.newWindow,rng=linkInfo.range;recordUndo($editable),options.onCreateLink&&(sLinkUrl=options.onCreateLink(sLinkUrl)),rng=rng.deleteContents();var anchor=rng.insertNode($("<A>"+sLinkText+"</A>")[0]);$(anchor).attr({href:sLinkUrl,target:isNewWindow?"_blank":""}),rng=range.createFromNode(anchor),rng.select()},this.getLinkInfo=function($editable){$editable.focus();var rng=range.create().expand(dom.isAnchor),$anchor=$(list.head(rng.nodes(dom.isAnchor)));return{range:rng,text:rng.toString(),isNewWindow:$anchor.length?"_blank"===$anchor.attr("target"):!0,url:$anchor.length?$anchor.attr("href"):""}},this.getVideoInfo=function($editable){$editable.focus();var rng=range.create();if(rng.isOnAnchor()){var elAnchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.createFromNode(elAnchor)}return{text:rng.toString()}},this.color=function($editable,sObjColor){var oColor=JSON.parse(sObjColor),foreColor=oColor.foreColor,backColor=oColor.backColor;recordUndo($editable),foreColor&&document.execCommand("foreColor",!1,foreColor),backColor&&document.execCommand("backColor",!1,backColor)},this.insertTable=function($editable,sDim){recordUndo($editable);var aDim=sDim.split("x");range.create().insertNode(table.createTable(aDim[0],aDim[1]))},this.floatMe=function($editable,sValue,$target){recordUndo($editable),$target.css("float",sValue)},this.resize=function($editable,sValue,$target){recordUndo($editable),$target.css({width:$editable.width()*sValue+"px",height:""})},this.resizeTo=function(pos,$target,bKeepRatio){var szImage;if(bKeepRatio){var newRatio=pos.y/pos.x,ratio=$target.data("ratio");szImage={width:ratio>newRatio?pos.x:pos.y/ratio,height:ratio>newRatio?pos.x*ratio:pos.y}}else szImage={width:pos.x,height:pos.y};$target.css(szImage)},this.removeMedia=function($editable,sValue,$target){recordUndo($editable),$target.detach()}},History=function(){var aUndo=[],aRedo=[],makeSnap=function($editable){var elEditable=$editable[0],rng=range.create();return{contents:$editable.html(),bookmark:rng.bookmark(elEditable),scrollTop:$editable.scrollTop()}},applySnap=function($editable,oSnap){$editable.html(oSnap.contents).scrollTop(oSnap.scrollTop),range.createFromBookmark($editable[0],oSnap.bookmark).select()};this.undo=function($editable){var oSnap=makeSnap($editable);aUndo.length&&(applySnap($editable,aUndo.pop()),aRedo.push(oSnap))},this.redo=function($editable){var oSnap=makeSnap($editable);aRedo.length&&(applySnap($editable,aRedo.pop()),aUndo.push(oSnap))},this.recordUndo=function($editable){aRedo=[],aUndo.push(makeSnap($editable))}},Button=function(){this.update=function($container,oStyle){var checkDropdownMenu=function($btn,nValue){$btn.find(".dropdown-menu li a").each(function(){var isChecked=$(this).data("value")+""==nValue+"";this.className=isChecked?"checked":""})},btnState=function(sSelector,pred){var $btn=$container.find(sSelector);$btn.toggleClass("active",pred())},$fontname=$container.find(".note-fontname");if($fontname.length){var selectedFont=oStyle["font-family"];selectedFont&&(selectedFont=list.head(selectedFont.split(",")),selectedFont=selectedFont.replace(/\'/g,""),$fontname.find(".note-current-fontname").text(selectedFont),checkDropdownMenu($fontname,selectedFont))}var $fontsize=$container.find(".note-fontsize");$fontsize.find(".note-current-fontsize").text(oStyle["font-size"]),checkDropdownMenu($fontsize,parseFloat(oStyle["font-size"]));var $lineHeight=$container.find(".note-height");checkDropdownMenu($lineHeight,parseFloat(oStyle["line-height"])),btnState('button[data-event="bold"]',function(){return"bold"===oStyle["font-bold"]}),btnState('button[data-event="italic"]',function(){return"italic"===oStyle["font-italic"]}),btnState('button[data-event="underline"]',function(){return"underline"===oStyle["font-underline"]}),btnState('button[data-event="strikethrough"]',function(){return"strikethrough"===oStyle["font-strikethrough"]}),btnState('button[data-event="superscript"]',function(){return"superscript"===oStyle["font-superscript"]}),btnState('button[data-event="subscript"]',function(){return"subscript"===oStyle["font-subscript"]}),btnState('button[data-event="justifyLeft"]',function(){return"left"===oStyle["text-align"]||"start"===oStyle["text-align"]}),btnState('button[data-event="justifyCenter"]',function(){return"center"===oStyle["text-align"]}),btnState('button[data-event="justifyRight"]',function(){return"right"===oStyle["text-align"]}),btnState('button[data-event="justifyFull"]',function(){return"justify"===oStyle["text-align"]}),btnState('button[data-event="insertUnorderedList"]',function(){return"unordered"===oStyle["list-style"]}),btnState('button[data-event="insertOrderedList"]',function(){return"ordered"===oStyle["list-style"]})},this.updateRecentColor=function(elBtn,sEvent,sValue){var $color=$(elBtn).closest(".note-color"),$recentColor=$color.find(".note-recent-color"),oColor=JSON.parse($recentColor.attr("data-value"));oColor[sEvent]=sValue,$recentColor.attr("data-value",JSON.stringify(oColor));var sKey="backColor"===sEvent?"background-color":"color";$recentColor.find("i").css(sKey,sValue)}},Toolbar=function(){var button=new Button;this.update=function($toolbar,oStyle){button.update($toolbar,oStyle)},this.updateRecentColor=function(elBtn,sEvent,sValue){button.updateRecentColor(elBtn,sEvent,sValue)},this.activate=function($toolbar){$toolbar.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function($toolbar){$toolbar.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function($container,bFullscreen){var $btn=$container.find('button[data-event="fullscreen"]');$btn.toggleClass("active",bFullscreen)},this.updateCodeview=function($container,isCodeview){var $btn=$container.find('button[data-event="codeview"]');$btn.toggleClass("active",isCodeview)}},Popover=function(){var button=new Button,posFromPlaceholder=function(placeholder,isAirMode){var $placeholder=$(placeholder),pos=isAirMode?$placeholder.offset():$placeholder.position(),height=$placeholder.outerHeight(!0);return{left:pos.left,top:pos.top+height}},showPopover=function($popover,pos){$popover.css({display:"block",left:pos.left,top:pos.top})},PX_POPOVER_ARROW_OFFSET_X=20;this.update=function($popover,oStyle,isAirMode){button.update($popover,oStyle);var $linkPopover=$popover.find(".note-link-popover");if(oStyle.anchor){var $anchor=$linkPopover.find("a"),href=$(oStyle.anchor).attr("href");$anchor.attr("href",href).html(href),showPopover($linkPopover,posFromPlaceholder(oStyle.anchor,isAirMode))}else $linkPopover.hide();var $imagePopover=$popover.find(".note-image-popover");oStyle.image?showPopover($imagePopover,posFromPlaceholder(oStyle.image,isAirMode)):$imagePopover.hide();var $airPopover=$popover.find(".note-air-popover");if(isAirMode&&!oStyle.range.isCollapsed()){var bnd=func.rect2bnd(list.last(oStyle.range.getClientRects()));showPopover($airPopover,{left:Math.max(bnd.left+bnd.width/2-PX_POPOVER_ARROW_OFFSET_X,0),top:bnd.top+bnd.height})}else $airPopover.hide()},this.updateRecentColor=function(elBtn,sEvent,sValue){button.updateRecentColor(elBtn,sEvent,sValue)},this.hide=function($popover){$popover.children().hide()}},Handle=function(){this.update=function($handle,oStyle,isAirMode){var $selection=$handle.find(".note-control-selection");if(oStyle.image){var $image=$(oStyle.image),pos=isAirMode?$image.offset():$image.position(),szImage={w:$image.outerWidth(!0),h:$image.outerHeight(!0)};$selection.css({display:"block",left:pos.left,top:pos.top,width:szImage.w,height:szImage.h}).data("target",oStyle.image);var sSizing=szImage.w+"x"+szImage.h;$selection.find(".note-control-selection-info").text(sSizing)}else $selection.hide()},this.hide=function($handle){$handle.children().hide()}},Dialog=function(){var toggleBtn=function($btn,isEnable){$btn.toggleClass("disabled",!isEnable),$btn.attr("disabled",!isEnable)};this.showImageDialog=function($editable,$dialog){return $.Deferred(function(deferred){var $imageDialog=$dialog.find(".note-image-dialog"),$imageInput=$dialog.find(".note-image-input"),$imageUrl=$dialog.find(".note-image-url"),$imageBtn=$dialog.find(".note-image-btn");$imageDialog.one("shown.bs.modal",function(){$imageInput.replaceWith($imageInput.clone().on("change",function(){deferred.resolve(this.files),$imageDialog.modal("hide")})),$imageBtn.click(function(event){event.preventDefault(),deferred.resolve($imageUrl.val()),$imageDialog.modal("hide")}),$imageUrl.on("keyup paste",function(event){var url;url="paste"===event.type?event.originalEvent.clipboardData.getData("text"):$imageUrl.val(),toggleBtn($imageBtn,url)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){$imageInput.off("change"),$imageUrl.off("keyup paste"),$imageBtn.off("click"),"pending"===deferred.state()&&deferred.reject()}).modal("show")})},this.showVideoDialog=function($editable,$dialog,videoInfo){return $.Deferred(function(deferred){var $videoDialog=$dialog.find(".note-video-dialog"),$videoUrl=$videoDialog.find(".note-video-url"),$videoBtn=$videoDialog.find(".note-video-btn");$videoDialog.one("shown.bs.modal",function(){$videoUrl.val(videoInfo.text).keyup(function(){toggleBtn($videoBtn,$videoUrl.val())}).trigger("keyup").trigger("focus"),$videoBtn.click(function(event){event.preventDefault(),deferred.resolve($videoUrl.val()),$videoDialog.modal("hide")})}).one("hidden.bs.modal",function(){$videoUrl.off("keyup"),$videoBtn.off("click"),"pending"===deferred.state()&&deferred.reject()}).modal("show")})},this.showLinkDialog=function($editable,$dialog,linkInfo){return $.Deferred(function(deferred){var $linkDialog=$dialog.find(".note-link-dialog"),$linkText=$linkDialog.find(".note-link-text"),$linkUrl=$linkDialog.find(".note-link-url"),$linkBtn=$linkDialog.find(".note-link-btn"),$openInNewWindow=$linkDialog.find("input[type=checkbox]");$linkDialog.one("shown.bs.modal",function(){$linkText.val(linkInfo.text),$linkText.keyup(function(){linkInfo.text=$linkText.val()}),linkInfo.url||(linkInfo.url=linkInfo.text,toggleBtn($linkBtn,linkInfo.text)),$linkUrl.keyup(function(){toggleBtn($linkBtn,$linkUrl.val()),linkInfo.text||$linkText.val($linkUrl.val())}).val(linkInfo.url).trigger("focus").trigger("select"),$openInNewWindow.prop("checked",linkInfo.newWindow),$linkBtn.one("click",function(event){event.preventDefault(),deferred.resolve({range:linkInfo.range,url:$linkUrl.val(),text:$linkText.val(),newWindow:$openInNewWindow.is(":checked")}),$linkDialog.modal("hide")})}).one("hidden.bs.modal",function(){$linkUrl.off("keyup"),"pending"===deferred.state()&&deferred.reject()}).modal("show")}).promise()},this.showHelpDialog=function($editable,$dialog){return $.Deferred(function(deferred){var $helpDialog=$dialog.find(".note-help-dialog");$helpDialog.one("hidden.bs.modal",function(){deferred.resolve()}).modal("show")}).promise()}};agent.hasCodeMirror&&(agent.isSupportAmd?require(["CodeMirror"],function(cm){CodeMirror=cm}):CodeMirror=window.CodeMirror);var EventHandler=function(){var $window=$(window),$document=$(document),$scrollbar=$("html, body"),editor=new Editor,toolbar=new Toolbar,popover=new Popover,handle=new Handle,dialog=new Dialog,makeLayoutInfo=function(descendant){var $target=$(descendant).closest(".note-editor, .note-air-editor, .note-air-layout");if(!$target.length)return null;var $editor;return $editor=$target.is(".note-editor, .note-air-editor")?$target:$("#note-editor-"+list.last($target.attr("id").split("-"))),dom.buildLayoutInfo($editor)},insertImages=function($editable,files){editor.restoreRange($editable);var callbacks=$editable.data("callbacks");callbacks.onImageUpload?callbacks.onImageUpload(files,editor,$editable):$.each(files,function(idx,file){async.readFileAsDataURL(file).then(function(sDataURL){editor.insertImage($editable,sDataURL)}).fail(function(){callbacks.onImageUploadError&&callbacks.onImageUploadError()})})},commands={showLinkDialog:function(oLayoutInfo){var $editor=oLayoutInfo.editor(),$dialog=oLayoutInfo.dialog(),$editable=oLayoutInfo.editable(),linkInfo=editor.getLinkInfo($editable),options=$editor.data("options");editor.saveRange($editable),dialog.showLinkDialog($editable,$dialog,linkInfo).then(function(linkInfo){editor.restoreRange($editable),editor.createLink($editable,linkInfo,options),popover.hide(oLayoutInfo.popover())}).fail(function(){editor.restoreRange($editable)})},showImageDialog:function(oLayoutInfo){var $dialog=oLayoutInfo.dialog(),$editable=oLayoutInfo.editable();editor.saveRange($editable),dialog.showImageDialog($editable,$dialog).then(function(data){editor.restoreRange($editable),"string"==typeof data?editor.insertImage($editable,data):insertImages($editable,data)}).fail(function(){editor.restoreRange($editable)})},showVideoDialog:function(oLayoutInfo){var $dialog=oLayoutInfo.dialog(),$editable=oLayoutInfo.editable(),videoInfo=editor.getVideoInfo($editable);editor.saveRange($editable),dialog.showVideoDialog($editable,$dialog,videoInfo).then(function(sUrl){editor.restoreRange($editable),editor.insertVideo($editable,sUrl)}).fail(function(){editor.restoreRange($editable)})},showHelpDialog:function(oLayoutInfo){var $dialog=oLayoutInfo.dialog(),$editable=oLayoutInfo.editable();editor.saveRange($editable),dialog.showHelpDialog($editable,$dialog).then(function(){editor.restoreRange($editable)})},fullscreen:function(oLayoutInfo){var $editor=oLayoutInfo.editor(),$toolbar=oLayoutInfo.toolbar(),$editable=oLayoutInfo.editable(),$codable=oLayoutInfo.codable(),options=$editor.data("options"),resize=function(size){$editor.css("width",size.w),$editable.css("height",size.h),$codable.css("height",size.h),$codable.data("cmeditor")&&$codable.data("cmeditor").setsize(null,size.h)};$editor.toggleClass("fullscreen");var isFullscreen=$editor.hasClass("fullscreen");isFullscreen?($editable.data("orgheight",$editable.css("height")),$window.on("resize",function(){resize({w:$window.width(),h:$window.height()-$toolbar.outerHeight()})}).trigger("resize"),$scrollbar.css("overflow","hidden")):($window.off("resize"),resize({w:options.width||"",h:$editable.data("orgheight")}),$scrollbar.css("overflow","visible")),toolbar.updateFullscreen($toolbar,isFullscreen)},codeview:function(oLayoutInfo){var cmEditor,server,$editor=oLayoutInfo.editor(),$toolbar=oLayoutInfo.toolbar(),$editable=oLayoutInfo.editable(),$codable=oLayoutInfo.codable(),$popover=oLayoutInfo.popover(),options=$editor.data("options"); $editor.toggleClass("codeview");var isCodeview=$editor.hasClass("codeview");isCodeview?($codable.val($editable.html()),$codable.height($editable.height()),toolbar.deactivate($toolbar),popover.hide($popover),$codable.focus(),agent.hasCodeMirror&&(cmEditor=CodeMirror.fromTextArea($codable[0],options.codemirror),options.codemirror.tern&&(server=new CodeMirror.TernServer(options.codemirror.tern),cmEditor.ternServer=server,cmEditor.on("cursorActivity",function(cm){server.updateArgHints(cm)})),cmEditor.setSize(null,$editable.outerHeight()),cmEditor.autoFormatRange&&cmEditor.autoFormatRange({line:0,ch:0},{line:cmEditor.lineCount(),ch:cmEditor.getTextArea().value.length}),$codable.data("cmEditor",cmEditor))):(agent.hasCodeMirror&&(cmEditor=$codable.data("cmEditor"),$codable.val(cmEditor.getValue()),cmEditor.toTextArea()),$editable.html($codable.val()||dom.emptyPara),$editable.height(options.height?$codable.height():"auto"),toolbar.activate($toolbar),$editable.focus()),toolbar.updateCodeview(oLayoutInfo.toolbar(),isCodeview)}},hMousedown=function(event){dom.isImg(event.target)&&event.preventDefault()},hToolbarAndPopoverUpdate=function(event){setTimeout(function(){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target),oStyle=editor.currentStyle(event.target);if(oStyle){var isAirMode=oLayoutInfo.editor().data("options").airMode;isAirMode||toolbar.update(oLayoutInfo.toolbar(),oStyle),popover.update(oLayoutInfo.popover(),oStyle,isAirMode),handle.update(oLayoutInfo.handle(),oStyle,isAirMode)}},0)},hScroll=function(event){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target);popover.hide(oLayoutInfo.popover()),handle.hide(oLayoutInfo.handle())},hPasteClipboardImage=function(event){var clipboardData=event.originalEvent.clipboardData;if(clipboardData&&clipboardData.items&&clipboardData.items.length){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target),item=list.head(clipboardData.items),isClipboardImage="file"===item.kind&&-1!==item.type.indexOf("image/");isClipboardImage&&insertImages(oLayoutInfo.editable(),[item.getAsFile()])}},hHandleMousedown=function(event){if(dom.isControlSizing(event.target)){event.preventDefault(),event.stopPropagation();var oLayoutInfo=makeLayoutInfo(event.target),$handle=oLayoutInfo.handle(),$popover=oLayoutInfo.popover(),$editable=oLayoutInfo.editable(),$editor=oLayoutInfo.editor(),elTarget=$handle.find(".note-control-selection").data("target"),$target=$(elTarget),posStart=$target.offset(),scrollTop=$document.scrollTop(),isAirMode=$editor.data("options").airMode;$document.on("mousemove",function(event){editor.resizeTo({x:event.clientX-posStart.left,y:event.clientY-(posStart.top-scrollTop)},$target,!event.shiftKey),handle.update($handle,{image:elTarget},isAirMode),popover.update($popover,{image:elTarget},isAirMode)}).one("mouseup",function(){$document.off("mousemove")}),$target.data("ratio")||$target.data("ratio",$target.height()/$target.width()),editor.recordUndo($editable)}},hToolbarAndPopoverMousedown=function(event){var $btn=$(event.target).closest("[data-event]");$btn.length&&event.preventDefault()},hToolbarAndPopoverClick=function(event){var $btn=$(event.target).closest("[data-event]");if($btn.length){var sEvent=$btn.attr("data-event"),sValue=$btn.attr("data-value"),oLayoutInfo=makeLayoutInfo(event.target);event.preventDefault();var $target;if(-1!==$.inArray(sEvent,["resize","floatMe","removeMedia"])){var $selection=oLayoutInfo.handle().find(".note-control-selection");$target=$($selection.data("target"))}if(editor[sEvent]){var $editable=oLayoutInfo.editable();$editable.trigger("focus"),editor[sEvent]($editable,sValue,$target)}else commands[sEvent]&&commands[sEvent].call(this,oLayoutInfo);if(-1!==$.inArray(sEvent,["backColor","foreColor"])){var options=oLayoutInfo.editor().data("options",options),module=options.airMode?popover:toolbar;module.updateRecentColor(list.head($btn),sEvent,sValue)}hToolbarAndPopoverUpdate(event)}},EDITABLE_PADDING=24,hStatusbarMousedown=function(event){event.preventDefault(),event.stopPropagation();var $editable=makeLayoutInfo(event.target).editable(),nEditableTop=$editable.offset().top-$document.scrollTop(),oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target),options=oLayoutInfo.editor().data("options");$document.on("mousemove",function(event){var nHeight=event.clientY-(nEditableTop+EDITABLE_PADDING);nHeight=options.minHeight>0?Math.max(nHeight,options.minHeight):nHeight,nHeight=options.maxHeight>0?Math.min(nHeight,options.maxHeight):nHeight,$editable.height(nHeight)}).one("mouseup",function(){$document.off("mousemove")})},PX_PER_EM=18,hDimensionPickerMove=function(event,options){var posOffset,$picker=$(event.target.parentNode),$dimensionDisplay=$picker.next(),$catcher=$picker.find(".note-dimension-picker-mousecatcher"),$highlighted=$picker.find(".note-dimension-picker-highlighted"),$unhighlighted=$picker.find(".note-dimension-picker-unhighlighted");if(void 0===event.offsetX){var posCatcher=$(event.target).offset();posOffset={x:event.pageX-posCatcher.left,y:event.pageY-posCatcher.top}}else posOffset={x:event.offsetX,y:event.offsetY};var dim={c:Math.ceil(posOffset.x/PX_PER_EM)||1,r:Math.ceil(posOffset.y/PX_PER_EM)||1};$highlighted.css({width:dim.c+"em",height:dim.r+"em"}),$catcher.attr("data-value",dim.c+"x"+dim.r),3<dim.c&&dim.c<options.insertTableMaxSize.col&&$unhighlighted.css({width:dim.c+1+"em"}),3<dim.r&&dim.r<options.insertTableMaxSize.row&&$unhighlighted.css({height:dim.r+1+"em"}),$dimensionDisplay.html(dim.c+" x "+dim.r)},attachDragAndDropEvent=function(oLayoutInfo){var collection=$(),$dropzone=oLayoutInfo.dropzone,$dropzoneMessage=oLayoutInfo.dropzone.find(".note-dropzone-message");$document.on("dragenter",function(e){var isCodeview=oLayoutInfo.editor.hasClass("codeview");isCodeview||collection.length||(oLayoutInfo.editor.addClass("dragover"),$dropzone.width(oLayoutInfo.editor.width()),$dropzone.height(oLayoutInfo.editor.height()),$dropzoneMessage.text("Drag Image Here")),collection=collection.add(e.target)}).on("dragleave",function(e){collection=collection.not(e.target),collection.length||oLayoutInfo.editor.removeClass("dragover")}).on("drop",function(){collection=$(),oLayoutInfo.editor.removeClass("dragover")}),$dropzone.on("dragenter",function(){$dropzone.addClass("hover"),$dropzoneMessage.text("Drop Image")}).on("dragleave",function(){$dropzone.removeClass("hover"),$dropzoneMessage.text("Drag Image Here")}),$dropzone.on("drop",function(event){event.preventDefault();var dataTransfer=event.originalEvent.dataTransfer;if(dataTransfer&&dataTransfer.files){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target);oLayoutInfo.editable().focus(),insertImages(oLayoutInfo.editable(),dataTransfer.files)}}).on("dragover",!1)};this.bindKeyMap=function(oLayoutInfo,keyMap){var $editor=oLayoutInfo.editor,$editable=oLayoutInfo.editable;oLayoutInfo=makeLayoutInfo($editable),$editable.on("keydown",function(event){var aKey=[];event.metaKey&&aKey.push("CMD"),event.ctrlKey&&!event.altKey&&aKey.push("CTRL"),event.shiftKey&&aKey.push("SHIFT");var keyName=key.nameFromCode[event.keyCode];keyName&&aKey.push(keyName);var sEvent=keyMap[aKey.join("+")];sEvent?(event.preventDefault(),editor[sEvent]?editor[sEvent]($editable,$editor.data("options")):commands[sEvent]&&commands[sEvent].call(this,oLayoutInfo)):key.isEdit(event.keyCode)&&editor.recordUndo($editable)})},this.attach=function(oLayoutInfo,options){this.bindKeyMap(oLayoutInfo,options.keyMap[agent.isMac?"mac":"pc"]),oLayoutInfo.editable.on("mousedown",hMousedown),oLayoutInfo.editable.on("keyup mouseup",hToolbarAndPopoverUpdate),oLayoutInfo.editable.on("scroll",hScroll),oLayoutInfo.editable.on("paste",hPasteClipboardImage),oLayoutInfo.handle.on("mousedown",hHandleMousedown),oLayoutInfo.popover.on("click",hToolbarAndPopoverClick),oLayoutInfo.popover.on("mousedown",hToolbarAndPopoverMousedown),options.airMode||(options.disableDragAndDrop||attachDragAndDropEvent(oLayoutInfo),oLayoutInfo.toolbar.on("click",hToolbarAndPopoverClick),oLayoutInfo.toolbar.on("mousedown",hToolbarAndPopoverMousedown),options.disableResizeEditor||oLayoutInfo.statusbar.on("mousedown",hStatusbarMousedown));var $catcherContainer=options.airMode?oLayoutInfo.popover:oLayoutInfo.toolbar,$catcher=$catcherContainer.find(".note-dimension-picker-mousecatcher");if($catcher.css({width:options.insertTableMaxSize.col+"em",height:options.insertTableMaxSize.row+"em"}).on("mousemove",function(event){hDimensionPickerMove(event,options)}),oLayoutInfo.editor.data("options",options),options.styleWithSpan&&!agent.isMSIE&&setTimeout(function(){document.execCommand("styleWithCSS",0,!0)},0),oLayoutInfo.editable.data("NoteHistory",new History),options.onenter&&oLayoutInfo.editable.keypress(function(event){event.keyCode===key.ENTER&&options.onenter(event)}),options.onfocus&&oLayoutInfo.editable.focus(options.onfocus),options.onblur&&oLayoutInfo.editable.blur(options.onblur),options.onkeyup&&oLayoutInfo.editable.keyup(options.onkeyup),options.onkeydown&&oLayoutInfo.editable.keydown(options.onkeydown),options.onpaste&&oLayoutInfo.editable.on("paste",options.onpaste),options.onToolbarClick&&oLayoutInfo.toolbar.click(options.onToolbarClick),options.onChange){var hChange=function(){options.onChange(oLayoutInfo.editable,oLayoutInfo.editable.html())};if(agent.isMSIE){var sDomEvents="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";oLayoutInfo.editable.on(sDomEvents,hChange)}else oLayoutInfo.editable.on("input",hChange)}oLayoutInfo.editable.data("callbacks",{onAutoSave:options.onAutoSave,onImageUpload:options.onImageUpload,onImageUploadError:options.onImageUploadError,onFileUpload:options.onFileUpload,onFileUploadError:options.onFileUpload})},this.dettach=function(oLayoutInfo,options){oLayoutInfo.editable.off(),oLayoutInfo.popover.off(),oLayoutInfo.handle.off(),oLayoutInfo.dialog.off(),options.airMode||(oLayoutInfo.dropzone.off(),oLayoutInfo.toolbar.off(),oLayoutInfo.statusbar.off())}},Renderer=function(){var tplButton=function(sLabel,options){var event=options.event,value=options.value,title=options.title,className=options.className,dropdown=options.dropdown;return'<button type="button" class="btn btn-default btn-sm btn-small'+(className?" "+className:"")+(dropdown?" dropdown-toggle":"")+'"'+(dropdown?' data-toggle="dropdown"':"")+(title?' title="'+title+'"':"")+(event?' data-event="'+event+'"':"")+(value?" data-value='"+value+"'":"")+' tabindex="-1">'+sLabel+(dropdown?'<span class="caret"></span> ':"")+"</button>"+(dropdown||"")},tplIconButton=function(sIconClass,options){var sLabel='<i class="'+sIconClass+'"></i>';return tplButton(sLabel,options)},tplPopover=function(className,content){return'<div class="'+className+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content">'+content+"</div></div>"},tplDialog=function(className,title,body,footer){return'<div class="'+className+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(title?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+title+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body"><div class="row-fluid">'+body+"</div></div>"+(footer?'<div class="modal-footer">'+footer+"</div>":"")+"</form></div></div></div>"},tplButtonInfo={picture:function(lang){return tplIconButton("fa fa-picture-o icon-picture",{event:"showImageDialog",title:lang.image.image})},link:function(lang){return tplIconButton("fa fa-link icon-link",{event:"showLinkDialog",title:lang.link.link})},video:function(lang){return tplIconButton("fa fa-youtube-play icon-play",{event:"showVideoDialog",title:lang.video.video})},table:function(lang){var dropdown='<ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1</div></ul>';return tplIconButton("fa fa-table icon-table",{title:lang.table.table,dropdown:dropdown})},style:function(lang,options){var items=options.styleTags.reduce(function(memo,v){var label=lang.style["p"===v?"normal":v];return memo+'<li><a data-event="formatBlock" href="#" data-value="'+v+'">'+("p"===v||"pre"===v?label:"<"+v+">"+label+"</"+v+">")+"</a></li>"},"");return tplIconButton("fa fa-magic icon-magic",{title:lang.style.style,dropdown:'<ul class="dropdown-menu">'+items+"</ul>"})},fontname:function(lang,options){var items=options.fontNames.reduce(function(memo,v){return agent.isFontInstalled(v)?memo+'<li><a data-event="fontName" href="#" data-value="'+v+'"><i class="fa fa-check icon-ok"></i> '+v+"</a></li>":memo},""),sLabel='<span class="note-current-fontname">'+options.defaultFontName+"</span>";return tplButton(sLabel,{title:lang.font.name,dropdown:'<ul class="dropdown-menu">'+items+"</ul>"})},fontsize:function(lang,options){var items=options.fontSizes.reduce(function(memo,v){return memo+'<li><a data-event="fontSize" href="#" data-value="'+v+'"><i class="fa fa-check icon-ok"></i> '+v+"</a></li>"},""),sLabel='<span class="note-current-fontsize">11</span>';return tplButton(sLabel,{title:lang.font.size,dropdown:'<ul class="dropdown-menu">'+items+"</ul>"})},color:function(lang){var colorButtonLabel='<i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i>',colorButton=tplButton(colorButtonLabel,{className:"note-recent-color",title:lang.color.recent,event:"color",value:'{"backColor":"yellow"}'}),dropdown='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+lang.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+lang.color.transparent+'">'+lang.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+lang.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+lang.color.reset+'">'+lang.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',moreButton=tplButton("",{title:lang.color.more,dropdown:dropdown});return colorButton+moreButton},bold:function(lang){return tplIconButton("fa fa-bold icon-bold",{event:"bold",title:lang.font.bold})},italic:function(lang){return tplIconButton("fa fa-italic icon-italic",{event:"italic",title:lang.font.italic})},underline:function(lang){return tplIconButton("fa fa-underline icon-underline",{event:"underline",title:lang.font.underline})},strikethrough:function(lang){return tplIconButton("fa fa-strikethrough icon-strikethrough",{event:"strikethrough",title:lang.font.strikethrough})},superscript:function(lang){return tplIconButton("fa fa-superscript icon-superscript",{event:"superscript",title:lang.font.superscript})},subscript:function(lang){return tplIconButton("fa fa-subscript icon-subscript",{event:"subscript",title:lang.font.subscript})},clear:function(lang){return tplIconButton("fa fa-eraser icon-eraser",{event:"removeFormat",title:lang.font.clear})},ul:function(lang){return tplIconButton("fa fa-list-ul icon-list-ul",{event:"insertUnorderedList",title:lang.lists.unordered})},ol:function(lang){return tplIconButton("fa fa-list-ol icon-list-ol",{event:"insertOrderedList",title:lang.lists.ordered})},paragraph:function(lang){var leftButton=tplIconButton("fa fa-align-left icon-align-left",{title:lang.paragraph.left,event:"justifyLeft"}),centerButton=tplIconButton("fa fa-align-center icon-align-center",{title:lang.paragraph.center,event:"justifyCenter"}),rightButton=tplIconButton("fa fa-align-right icon-align-right",{title:lang.paragraph.right,event:"justifyRight"}),justifyButton=tplIconButton("fa fa-align-justify icon-align-justify",{title:lang.paragraph.justify,event:"justifyFull"}),outdentButton=tplIconButton("fa fa-outdent icon-indent-left",{title:lang.paragraph.outdent,event:"outdent"}),indentButton=tplIconButton("fa fa-indent icon-indent-right",{title:lang.paragraph.indent,event:"indent"}),dropdown='<div class="dropdown-menu"><div class="note-align btn-group">'+leftButton+centerButton+rightButton+justifyButton+'</div><div class="note-list btn-group">'+indentButton+outdentButton+"</div></div>";return tplIconButton("fa fa-align-left icon-align-left",{title:lang.paragraph.paragraph,dropdown:dropdown})},height:function(lang,options){var items=options.lineHeights.reduce(function(memo,v){return memo+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(v)+'"><i class="fa fa-check icon-ok"></i> '+v+"</a></li>"},"");return tplIconButton("fa fa-text-height icon-text-height",{title:lang.font.height,dropdown:'<ul class="dropdown-menu">'+items+"</ul>"})},help:function(lang){return tplIconButton("fa fa-question icon-question",{event:"showHelpDialog",title:lang.options.help})},fullscreen:function(lang){return tplIconButton("fa fa-arrows-alt icon-fullscreen",{event:"fullscreen",title:lang.options.fullscreen})},codeview:function(lang){return tplIconButton("fa fa-code icon-code",{event:"codeview",title:lang.options.codeview})},undo:function(lang){return tplIconButton("fa fa-undo icon-undo",{event:"undo",title:lang.history.undo})},redo:function(lang){return tplIconButton("fa fa-repeat icon-repeat",{event:"redo",title:lang.history.redo})},hr:function(lang){return tplIconButton("fa fa-minus icon-hr",{event:"insertHorizontalRule",title:lang.hr.insert})}},tplPopovers=function(lang,options){var tplLinkPopover=function(){var linkButton=tplIconButton("fa fa-edit icon-edit",{title:lang.link.edit,event:"showLinkDialog"}),unlinkButton=tplIconButton("fa fa-unlink icon-unlink",{title:lang.link.unlink,event:"unlink"}),content='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+linkButton+unlinkButton+"</div>";return tplPopover("note-link-popover",content)},tplImagePopover=function(){var fullButton=tplButton('<span class="note-fontsize-10">100%</span>',{title:lang.image.resizeFull,event:"resize",value:"1"}),halfButton=tplButton('<span class="note-fontsize-10">50%</span>',{title:lang.image.resizeHalf,event:"resize",value:"0.5"}),quarterButton=tplButton('<span class="note-fontsize-10">25%</span>',{title:lang.image.resizeQuarter,event:"resize",value:"0.25"}),leftButton=tplIconButton("fa fa-align-left icon-align-left",{title:lang.image.floatLeft,event:"floatMe",value:"left"}),rightButton=tplIconButton("fa fa-align-right icon-align-right",{title:lang.image.floatRight,event:"floatMe",value:"right"}),justifyButton=tplIconButton("fa fa-align-justify icon-align-justify",{title:lang.image.floatNone,event:"floatMe",value:"none"}),removeButton=tplIconButton("fa fa-trash-o icon-trash",{title:lang.image.remove,event:"removeMedia",value:"none"}),content='<div class="btn-group">'+fullButton+halfButton+quarterButton+'</div><div class="btn-group">'+leftButton+rightButton+justifyButton+'</div><div class="btn-group">'+removeButton+"</div>";return tplPopover("note-image-popover",content)},tplAirPopover=function(){for(var content="",idx=0,sz=options.airPopover.length;sz>idx;idx++){var group=options.airPopover[idx];content+='<div class="note-'+group[0]+' btn-group">';for(var i=0,szGroup=group[1].length;szGroup>i;i++)content+=tplButtonInfo[group[1][i]](lang,options);content+="</div>"}return tplPopover("note-air-popover",content)};return'<div class="note-popover">'+tplLinkPopover()+tplImagePopover()+(options.airMode?tplAirPopover():"")+"</div>"},tplHandles=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},tplShortcut=function(title,body){return'<table class="note-shortcut"><thead><tr><th></th><th>'+title+"</th></tr></thead><tbody>"+body+"</tbody></table>"},tplShortcutText=function(lang){var body="<tr><td>âŒ˜ + B</td><td>"+lang.font.bold+"</td></tr><tr><td>âŒ˜ + I</td><td>"+lang.font.italic+"</td></tr><tr><td>âŒ˜ + U</td><td>"+lang.font.underline+"</td></tr><tr><td>âŒ˜ + â‡§ + S</td><td>"+lang.font.strikethrough+"</td></tr><tr><td>âŒ˜ + \\</td><td>"+lang.font.clear+"</td></tr>";return tplShortcut(lang.shortcut.textFormatting,body)},tplShortcutAction=function(lang){var body="<tr><td>âŒ˜ + Z</td><td>"+lang.history.undo+"</td></tr><tr><td>âŒ˜ + â‡§ + Z</td><td>"+lang.history.redo+"</td></tr><tr><td>âŒ˜ + ]</td><td>"+lang.paragraph.indent+"</td></tr><tr><td>âŒ˜ + [</td><td>"+lang.paragraph.outdent+"</td></tr><tr><td>âŒ˜ + ENTER</td><td>"+lang.hr.insert+"</td></tr>";return tplShortcut(lang.shortcut.action,body)},tplShortcutPara=function(lang){var body="<tr><td>âŒ˜ + â‡§ + L</td><td>"+lang.paragraph.left+"</td></tr><tr><td>âŒ˜ + â‡§ + E</td><td>"+lang.paragraph.center+"</td></tr><tr><td>âŒ˜ + â‡§ + R</td><td>"+lang.paragraph.right+"</td></tr><tr><td>âŒ˜ + â‡§ + J</td><td>"+lang.paragraph.justify+"</td></tr><tr><td>âŒ˜ + â‡§ + NUM7</td><td>"+lang.lists.ordered+"</td></tr><tr><td>âŒ˜ + â‡§ + NUM8</td><td>"+lang.lists.unordered+"</td></tr>";return tplShortcut(lang.shortcut.paragraphFormatting,body)},tplShortcutStyle=function(lang){var body="<tr><td>âŒ˜ + NUM0</td><td>"+lang.style.normal+"</td></tr><tr><td>âŒ˜ + NUM1</td><td>"+lang.style.h1+"</td></tr><tr><td>âŒ˜ + NUM2</td><td>"+lang.style.h2+"</td></tr><tr><td>âŒ˜ + NUM3</td><td>"+lang.style.h3+"</td></tr><tr><td>âŒ˜ + NUM4</td><td>"+lang.style.h4+"</td></tr><tr><td>âŒ˜ + NUM5</td><td>"+lang.style.h5+"</td></tr><tr><td>âŒ˜ + NUM6</td><td>"+lang.style.h6+"</td></tr>";return tplShortcut(lang.shortcut.documentStyle,body)},tplExtraShortcuts=function(lang,options){var extraKeys=options.extraKeys,body="";for(var key in extraKeys)extraKeys.hasOwnProperty(key)&&(body+="<tr><td>"+key+"</td><td>"+extraKeys[key]+"</td></tr>");return tplShortcut(lang.shortcut.extraKeys,body)},tplShortcutTable=function(lang,options){var template='<table class="note-shortcut-layout"><tbody><tr><td>'+tplShortcutAction(lang,options)+"</td><td>"+tplShortcutText(lang,options)+"</td></tr><tr><td>"+tplShortcutStyle(lang,options)+"</td><td>"+tplShortcutPara(lang,options)+"</td></tr>";return options.extraKeys&&(template+='<tr><td colspan="2">'+tplExtraShortcuts(lang,options)+"</td></tr>"),template+="</tbody</table>"},replaceMacKeys=function(sHtml){return sHtml.replace(/âŒ˜/g,"Ctrl").replace(/â‡§/g,"Shift")},tplDialogs=function(lang,options){var tplImageDialog=function(){var body="<h5>"+lang.image.selectFromFiles+'</h5><input class="note-image-input" type="file" name="files" accept="image/*" /><h5>'+lang.image.url+'</h5><input class="note-image-url form-control span12" type="text" />',footer='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+lang.image.insert+"</button>";return tplDialog("note-image-dialog",lang.image.insert,body,footer)},tplLinkDialog=function(){var body='<div class="form-group"><label>'+lang.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group"><label>'+lang.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(options.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+lang.link.openInNewWindow+"</label></div>"),footer='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+lang.link.insert+"</button>";return tplDialog("note-link-dialog",lang.link.insert,body,footer)},tplVideoDialog=function(){var body='<div class="form-group"><label>'+lang.video.url+'</label>&nbsp;<small class="text-muted">'+lang.video.providers+'</small><input class="note-video-url form-control span12" type="text" /></div>',footer='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+lang.video.insert+"</button>";return tplDialog("note-video-dialog",lang.video.insert,body,footer)},tplHelpDialog=function(){var body='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+lang.shortcut.close+'</a><div class="title">'+lang.shortcut.shortcuts+"</div>"+(agent.isMac?tplShortcutTable(lang,options):replaceMacKeys(tplShortcutTable(lang,options)))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.2</a> Â· <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> Â· <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p>';return tplDialog("note-help-dialog","",body,"")};return'<div class="note-dialog">'+tplImageDialog()+tplLinkDialog()+tplVideoDialog()+tplHelpDialog()+"</div>"},tplStatusbar=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},representShortcut=function(str){return agent.isMac&&(str=str.replace("CMD","âŒ˜").replace("SHIFT","â‡§")),str.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},createTooltip=function($container,keyMap,sPlacement){var invertedKeyMap=func.invertObject(keyMap),$buttons=$container.find("button");$buttons.each(function(i,elBtn){var $btn=$(elBtn),sShortcut=invertedKeyMap[$btn.data("event")];sShortcut&&$btn.attr("title",function(i,v){return v+" ("+representShortcut(sShortcut)+")"})}).tooltip({container:"body",trigger:"hover",placement:sPlacement||"top"}).on("click",function(){$(this).tooltip("hide")})},createPalette=function($container,options){var aaColor=options.colors;$container.find(".note-color-palette").each(function(){for(var $palette=$(this),sEvent=$palette.attr("data-target-event"),aPaletteContents=[],row=0,szRow=aaColor.length;szRow>row;row++){for(var aColor=aaColor[row],aButton=[],col=0,szCol=aColor.length;szCol>col;col++){var sColor=aColor[col];aButton.push(['<button type="button" class="note-color-btn" style="background-color:',sColor,';" data-event="',sEvent,'" data-value="',sColor,'" title="',sColor,'" data-toggle="button" tabindex="-1"></button>'].join(""))}aPaletteContents.push("<div>"+aButton.join("")+"</div>")}$palette.html(aPaletteContents.join(""))})};this.createLayoutByAirMode=function($holder,options){var keyMap=options.keyMap[agent.isMac?"mac":"pc"],langInfo=$.summernote.lang[options.lang],id=func.uniqueId();$holder.addClass("note-air-editor note-editable"),$holder.attr({id:"note-editor-"+id,contentEditable:!0});var body=document.body,$popover=$(tplPopovers(langInfo,options));$popover.addClass("note-air-layout"),$popover.attr("id","note-popover-"+id),$popover.appendTo(body),createTooltip($popover,keyMap),createPalette($popover,options);var $handle=$(tplHandles());$handle.addClass("note-air-layout"),$handle.attr("id","note-handle-"+id),$handle.appendTo(body);var $dialog=$(tplDialogs(langInfo,options));$dialog.addClass("note-air-layout"),$dialog.attr("id","note-dialog-"+id),$dialog.find("button.close, a.modal-close").click(function(){$(this).closest(".modal").modal("hide")}),$dialog.appendTo(body)},this.createLayoutByFrame=function($holder,options){var $editor=$('<div class="note-editor"></div>');options.width&&$editor.width(options.width),options.height>0&&$('<div class="note-statusbar">'+(options.disableResizeEditor?"":tplStatusbar())+"</div>").prependTo($editor);var isContentEditable=!$holder.is(":disabled"),$editable=$('<div class="note-editable" contentEditable="'+isContentEditable+'"></div>').prependTo($editor);options.height&&$editable.height(options.height),options.direction&&$editable.attr("dir",options.direction),$editable.html(dom.html($holder)||dom.emptyPara),$('<textarea class="note-codable"></textarea>').prependTo($editor);for(var langInfo=$.summernote.lang[options.lang],sToolbar="",idx=0,sz=options.toolbar.length;sz>idx;idx++){var group=options.toolbar[idx];sToolbar+='<div class="note-'+group[0]+' btn-group">';for(var i=0,szGroup=group[1].length;szGroup>i;i++)sToolbar+=tplButtonInfo[group[1][i]](langInfo,options);sToolbar+="</div>"}sToolbar='<div class="note-toolbar btn-toolbar">'+sToolbar+"</div>";var $toolbar=$(sToolbar).prependTo($editor),keyMap=options.keyMap[agent.isMac?"mac":"pc"];createPalette($toolbar,options),createTooltip($toolbar,keyMap,"bottom");var $popover=$(tplPopovers(langInfo,options)).prependTo($editor);createPalette($popover,options),createTooltip($popover,keyMap),$(tplHandles()).prependTo($editor);var $dialog=$(tplDialogs(langInfo,options)).prependTo($editor);$dialog.find("button.close, a.modal-close").click(function(){$(this).closest(".modal").modal("hide")}),$('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo($editor),$editor.insertAfter($holder),$holder.hide()},this.noteEditorFromHolder=function($holder){return $holder.hasClass("note-air-editor")?$holder:$holder.next().hasClass("note-editor")?$holder.next():$()},this.createLayout=function($holder,options){this.noteEditorFromHolder($holder).length||(options.airMode?this.createLayoutByAirMode($holder,options):this.createLayoutByFrame($holder,options))},this.layoutInfoFromHolder=function($holder){var $editor=this.noteEditorFromHolder($holder);if($editor.length){var layoutInfo=dom.buildLayoutInfo($editor);for(var key in layoutInfo)layoutInfo.hasOwnProperty(key)&&(layoutInfo[key]=layoutInfo[key].call());return layoutInfo}},this.removeLayout=function($holder,oLayoutInfo,options){options.airMode?($holder.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),oLayoutInfo.popover.remove(),oLayoutInfo.handle.remove(),oLayoutInfo.dialog.remove()):($holder.html(oLayoutInfo.editable.html()),oLayoutInfo.editor.remove(),$holder.show())}};$.summernote=$.summernote||{},$.extend($.summernote,settings);var renderer=new Renderer,eventHandler=new EventHandler;$.fn.extend({summernote:function(options){if(options=$.extend({},$.summernote.options,options),this.each(function(idx,elHolder){var $holder=$(elHolder);renderer.createLayout($holder,options);var info=renderer.layoutInfoFromHolder($holder);eventHandler.attach(info,options),dom.isTextarea($holder[0])&&$holder.closest("form").submit(function(){$holder.html($holder.code())})}),this.first().length&&options.focus){var info=renderer.layoutInfoFromHolder(this.first());info.editable.focus()}return this.length&&options.oninit&&options.oninit(),this},code:function(sHTML){if(void 0===sHTML){var $holder=this.first();if(!$holder.length)return;var info=renderer.layoutInfoFromHolder($holder);if(info&&info.editable){var isCodeview=info.editor.hasClass("codeview");return isCodeview&&agent.hasCodeMirror&&info.codable.data("cmEditor").save(),isCodeview?info.codable.val():info.editable.html()}return $holder.html()}return this.each(function(i,elHolder){var info=renderer.layoutInfoFromHolder($(elHolder));info&&info.editable&&info.editable.html(sHTML)}),this},destroy:function(){return this.each(function(idx,elHolder){var $holder=$(elHolder),info=renderer.layoutInfoFromHolder($holder);if(info&&info.editable){var options=info.editor.data("options");eventHandler.dettach(info,options),renderer.removeLayout($holder,info,options)}}),this}})})},{}],330:[function(require,module){function Traverse(obj){this.value=obj}function walk(root,cb,immutable){var path=[],parents=[],alive=!0;return function walker(node_){function updateState(){if("object"==typeof state.node&&null!==state.node){state.keys&&state.node_===state.node||(state.keys=objectKeys(state.node)),state.isLeaf=0==state.keys.length;for(var i=0;i<parents.length;i++)if(parents[i].node_===node_){state.circular=parents[i];break}}else state.isLeaf=!0,state.keys=null;state.notLeaf=!state.isLeaf,state.notRoot=!state.isRoot}var node=immutable?copy(node_):node_,modifiers={},keepGoing=!0,state={node:node,node_:node_,path:[].concat(path),parent:parents[parents.length-1],parents:parents,key:path.slice(-1)[0],isRoot:0===path.length,level:path.length,circular:null,update:function(x,stopHere){state.isRoot||(state.parent.node[state.key]=x),state.node=x,stopHere&&(keepGoing=!1) },"delete":function(stopHere){delete state.parent.node[state.key],stopHere&&(keepGoing=!1)},remove:function(stopHere){isArray(state.parent.node)?state.parent.node.splice(state.key,1):delete state.parent.node[state.key],stopHere&&(keepGoing=!1)},keys:null,before:function(f){modifiers.before=f},after:function(f){modifiers.after=f},pre:function(f){modifiers.pre=f},post:function(f){modifiers.post=f},stop:function(){alive=!1},block:function(){keepGoing=!1}};if(!alive)return state;updateState();var ret=cb.call(state,state.node);return void 0!==ret&&state.update&&state.update(ret),modifiers.before&&modifiers.before.call(state,state.node),keepGoing?("object"!=typeof state.node||null===state.node||state.circular||(parents.push(state),updateState(),forEach(state.keys,function(key,i){path.push(key),modifiers.pre&&modifiers.pre.call(state,state.node[key],key);var child=walker(state.node[key]);immutable&&hasOwnProperty.call(state.node,key)&&(state.node[key]=child.node),child.isLast=i==state.keys.length-1,child.isFirst=0==i,modifiers.post&&modifiers.post.call(state,child),path.pop()}),parents.pop()),modifiers.after&&modifiers.after.call(state,state.node),state):state}(root).node}function copy(src){if("object"==typeof src&&null!==src){var dst;if(isArray(src))dst=[];else if(isDate(src))dst=new Date(src.getTime?src.getTime():src);else if(isRegExp(src))dst=new RegExp(src);else if(isError(src))dst={message:src.message};else if(isBoolean(src))dst=new Boolean(src);else if(isNumber(src))dst=new Number(src);else if(isString(src))dst=new String(src);else if(Object.create&&Object.getPrototypeOf)dst=Object.create(Object.getPrototypeOf(src));else if(src.constructor===Object)dst={};else{var proto=src.constructor&&src.constructor.prototype||src.__proto__||{},T=function(){};T.prototype=proto,dst=new T}return forEach(objectKeys(src),function(key){dst[key]=src[key]}),dst}return src}function toS(obj){return Object.prototype.toString.call(obj)}function isDate(obj){return"[object Date]"===toS(obj)}function isRegExp(obj){return"[object RegExp]"===toS(obj)}function isError(obj){return"[object Error]"===toS(obj)}function isBoolean(obj){return"[object Boolean]"===toS(obj)}function isNumber(obj){return"[object Number]"===toS(obj)}function isString(obj){return"[object String]"===toS(obj)}var traverse=module.exports=function(obj){return new Traverse(obj)};Traverse.prototype.get=function(ps){for(var node=this.value,i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key)){node=void 0;break}node=node[key]}return node},Traverse.prototype.has=function(ps){for(var node=this.value,i=0;i<ps.length;i++){var key=ps[i];if(!node||!hasOwnProperty.call(node,key))return!1;node=node[key]}return!0},Traverse.prototype.set=function(ps,value){for(var node=this.value,i=0;i<ps.length-1;i++){var key=ps[i];hasOwnProperty.call(node,key)||(node[key]={}),node=node[key]}return node[ps[i]]=value,value},Traverse.prototype.map=function(cb){return walk(this.value,cb,!0)},Traverse.prototype.forEach=function(cb){return this.value=walk(this.value,cb,!1),this.value},Traverse.prototype.reduce=function(cb,init){var skip=1===arguments.length,acc=skip?this.value:init;return this.forEach(function(x){this.isRoot&&skip||(acc=cb.call(this,acc,x))}),acc},Traverse.prototype.paths=function(){var acc=[];return this.forEach(function(){acc.push(this.path)}),acc},Traverse.prototype.nodes=function(){var acc=[];return this.forEach(function(){acc.push(this.node)}),acc},Traverse.prototype.clone=function(){var parents=[],nodes=[];return function clone(src){for(var i=0;i<parents.length;i++)if(parents[i]===src)return nodes[i];if("object"==typeof src&&null!==src){var dst=copy(src);return parents.push(src),nodes.push(dst),forEach(objectKeys(src),function(key){dst[key]=clone(src[key])}),parents.pop(),nodes.pop(),dst}return src}(this.value)};var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res},isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);for(var i=0;i<xs.length;i++)fn(xs[i],i,xs)};forEach(objectKeys(Traverse.prototype),function(key){traverse[key]=function(obj){var args=[].slice.call(arguments,1),t=new Traverse(obj);return t[key].apply(t,args)}});var hasOwnProperty=Object.hasOwnProperty||function(obj,key){return key in obj}},{}],331:[function(require,module){!function(define){"use strict";define(function(require){var makePromise=require(3),Scheduler=require(1),async=require(2).asap;return makePromise({scheduler:new Scheduler(async)})})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:332,2:344,3:346}],332:[function(require,module){!function(define){"use strict";define(function(){function Scheduler(async){this._async=async,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var self=this;this.drain=function(){self._drain()}}return Scheduler.prototype.enqueue=function(task){this._queue[this._queueLen++]=task,this.run()},Scheduler.prototype.afterQueue=function(task){this._afterQueue[this._afterQueueLen++]=task,this.run()},Scheduler.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},Scheduler.prototype._drain=function(){for(var i=0;i<this._queueLen;++i)this._queue[i].run(),this._queue[i]=void 0;for(this._queueLen=0,this._running=!1,i=0;i<this._afterQueueLen;++i)this._afterQueue[i].run(),this._afterQueue[i]=void 0;this._afterQueueLen=0},Scheduler})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],333:[function(require,module){!function(define){"use strict";define(function(){function TimeoutError(message){Error.call(this),this.message=message,this.name=TimeoutError.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,TimeoutError)}return TimeoutError.prototype=Object.create(Error.prototype),TimeoutError.prototype.constructor=TimeoutError,TimeoutError})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],334:[function(require,module){!function(define){"use strict";define(function(){function makeApply(Promise,call){function apply(f,thisArg,args){var p=Promise._defer(),l=args.length,params=new Array(l);return callAndResolve({f:f,thisArg:thisArg,args:args,params:params,i:l-1,call:call},p._handler),p}function callAndResolve(c,h){if(c.i<0)return call(c.f,c.thisArg,c.params,h);var handler=Promise._handler(c.args[c.i]);handler.fold(callAndResolveNext,c,void 0,h)}function callAndResolveNext(c,x,h){c.params[c.i]=x,c.i-=1,callAndResolve(c,h)}return arguments.length<2&&(call=tryCatchResolve),apply}function tryCatchResolve(f,thisArg,args,resolver){try{resolver.resolve(f.apply(thisArg,args))}catch(e){resolver.reject(e)}}return makeApply.tryCatchResolve=tryCatchResolve,makeApply})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],335:[function(require,module){!function(define){"use strict";define(function(require){var state=require(2),applier=require(1);return function(Promise){function any(promises){function handleFulfill(x){errors=null,this.resolve(x)}function handleReject(e){this.resolved||(errors.push(e),0===--pending&&this.reject(errors))}for(var h,x,p=Promise._defer(),resolver=p._handler,l=promises.length>>>0,pending=l,errors=[],i=0;l>i;++i)if(x=promises[i],void 0!==x||i in promises){if(h=Promise._handler(x),h.state()>0){resolver.become(h),Promise._visitRemaining(promises,i,h);break}h.visit(resolver,handleFulfill,handleReject)}else--pending;return 0===pending&&resolver.reject(new RangeError("any(): array must not be empty")),p}function some(promises,n){function fulfill(x){this.resolved||(results.push(x),0===--nFulfill&&(errors=null,this.resolve(results)))}function reject(e){this.resolved||(errors.push(e),0===--nReject&&(results=null,this.reject(errors)))}var nReject,x,i,p=Promise._defer(),resolver=p._handler,results=[],errors=[],l=promises.length>>>0,nFulfill=0;for(i=0;l>i;++i)x=promises[i],(void 0!==x||i in promises)&&++nFulfill;for(n=Math.max(n,0),nReject=nFulfill-n+1,nFulfill=Math.min(n,nFulfill),n>nFulfill?resolver.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+nFulfill)):0===nFulfill&&resolver.resolve(results),i=0;l>i;++i)x=promises[i],(void 0!==x||i in promises)&&Promise._handler(x).visit(resolver,fulfill,reject,resolver.notify);return p}function map(promises,f){return Promise._traverse(f,promises)}function filter(promises,predicate){var a=slice.call(promises);return Promise._traverse(predicate,a).then(function(keep){return filterSync(a,keep)})}function filterSync(promises,keep){for(var l=keep.length,filtered=new Array(l),i=0,j=0;l>i;++i)keep[i]&&(filtered[j++]=Promise._handler(promises[i]).value);return filtered.length=j,filtered}function settle(promises){return all(promises.map(settleOne))}function settleOne(p){var h=Promise._handler(p);return 0===h.state()?toPromise(p).then(state.fulfilled,state.rejected):(h._unreport(),state.inspect(h))}function reduce(promises,f){return arguments.length>2?ar.call(promises,liftCombine(f),arguments[2]):ar.call(promises,liftCombine(f))}function reduceRight(promises,f){return arguments.length>2?arr.call(promises,liftCombine(f),arguments[2]):arr.call(promises,liftCombine(f))}function liftCombine(f){return function(z,x,i){return applyFold(f,void 0,[z,x,i])}}var applyFold=applier(Promise),toPromise=Promise.resolve,all=Promise.all,ar=Array.prototype.reduce,arr=Array.prototype.reduceRight,slice=Array.prototype.slice;return Promise.any=any,Promise.some=some,Promise.settle=settle,Promise.map=map,Promise.filter=filter,Promise.reduce=reduce,Promise.reduceRight=reduceRight,Promise.prototype.spread=function(onFulfilled){return this.then(all).then(function(array){return onFulfilled.apply(this,array)})},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:334,2:347}],336:[function(require,module){!function(define){"use strict";define(function(){function rejectInvalidPredicate(){throw new TypeError("catch predicate must be a function")}function evaluatePredicate(e,predicate){return isError(predicate)?e instanceof predicate:predicate(e)}function isError(predicate){return predicate===Error||null!=predicate&&predicate.prototype instanceof Error}function maybeThenable(x){return("object"==typeof x||"function"==typeof x)&&null!==x}function identity(x){return x}return function(Promise){function createCatchFilter(handler,predicate){return function(e){return evaluatePredicate(e,predicate)?handler.call(this,e):reject(e)}}function runSideEffect(handler,thisArg,propagate,value){var result=handler.call(thisArg);return maybeThenable(result)?propagateValue(result,propagate,value):propagate(value)}function propagateValue(result,propagate,x){return resolve(result).then(function(){return propagate(x)})}var resolve=Promise.resolve,reject=Promise.reject,origCatch=Promise.prototype.catch;return Promise.prototype.done=function(onResult,onError){this._handler.visit(this._handler.receiver,onResult,onError)},Promise.prototype.catch=Promise.prototype.otherwise=function(onRejected){return arguments.length<2?origCatch.call(this,onRejected):"function"!=typeof onRejected?this.ensure(rejectInvalidPredicate):origCatch.call(this,createCatchFilter(arguments[1],onRejected))},Promise.prototype.finally=Promise.prototype.ensure=function(handler){return"function"!=typeof handler?this:this.then(function(x){return runSideEffect(handler,this,identity,x)},function(e){return runSideEffect(handler,this,reject,e)})},Promise.prototype.else=Promise.prototype.orElse=function(defaultValue){return this.then(void 0,function(){return defaultValue})},Promise.prototype.yield=function(value){return this.then(function(){return value})},Promise.prototype.tap=function(onFulfilledSideEffect){return this.then(onFulfilledSideEffect).yield(this)},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],337:[function(require,module){!function(define){"use strict";define(function(){return function(Promise){return Promise.prototype.fold=function(f,z){var promise=this._beget();return this._handler.fold(function(z,x,to){Promise._handler(z).fold(function(x,z,to){to.resolve(f.call(this,z,x))},x,this,to)},z,promise._handler.receiver,promise._handler),promise},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],338:[function(require,module){!function(define){"use strict";define(function(require){var inspect=require(1).inspect;return function(Promise){return Promise.prototype.inspect=function(){return inspect(Promise._handler(this))},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:347}],339:[function(require,module){!function(define){"use strict";define(function(){return function(Promise){function iterate(f,condition,handler,x){return unfold(function(x){return[x,f(x)]},condition,handler,x)}function unfold(unspool,condition,handler,x){function next(item,newSeed){return resolve(handler(item)).then(function(){return unfold(unspool,condition,handler,newSeed)})}return resolve(x).then(function(seed){return resolve(condition(seed)).then(function(done){return done?seed:resolve(unspool(seed)).spread(next)})})}var resolve=Promise.resolve;return Promise.iterate=iterate,Promise.unfold=unfold,Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],340:[function(require,module){!function(define){"use strict";define(function(){return function(Promise){return Promise.prototype.progress=function(onProgress){return this.then(void 0,void 0,onProgress)},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],341:[function(require,module){!function(define){"use strict";define(function(require){function setTimeout(f,ms,x,y){return env.setTimer(function(){f(x,y,ms)},ms)}var env=require(2),TimeoutError=require(1);return function(Promise){function handleDelay(ms,x,h){setTimeout(resolveDelay,ms,x,h)}function resolveDelay(x,h){h.resolve(x)}function onTimeout(reason,h,ms){var e="undefined"==typeof reason?new TimeoutError("timed out after "+ms+"ms"):reason;h.reject(e)}return Promise.prototype.delay=function(ms){var p=this._beget();return this._handler.fold(handleDelay,ms,void 0,p._handler),p},Promise.prototype.timeout=function(ms,reason){var p=this._beget(),h=p._handler,t=setTimeout(onTimeout,ms,reason,p._handler);return this._handler.visit(h,function(x){env.clearTimer(t),this.resolve(x)},function(x){env.clearTimer(t),this.reject(x)},h.notify),p},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:333,2:344}],342:[function(require,module){!function(define){"use strict";define(function(require){function throwit(e){throw e}function noop(){}var setTimer=require(1).setTimer,format=require(2);return function(Promise){function report(r){r.handled||(reported.push(r),logError("Potentially unhandled rejection ["+r.id+"] "+format.formatError(r.value)))}function unreport(r){var i=reported.indexOf(r);i>=0&&(reported.splice(i,1),logInfo("Handled previous rejection ["+r.id+"] "+format.formatObject(r.value)))}function enqueue(f,x){tasks.push(f,x),null===running&&(running=setTimer(flush,0))}function flush(){for(running=null;tasks.length>0;)tasks.shift()(tasks.shift())}var localConsole,logError=noop,logInfo=noop;"undefined"!=typeof console&&(localConsole=console,logError="undefined"!=typeof localConsole.error?function(e){localConsole.error(e)}:function(e){localConsole.log(e)},logInfo="undefined"!=typeof localConsole.info?function(e){localConsole.info(e)}:function(e){localConsole.log(e)}),Promise.onPotentiallyUnhandledRejection=function(rejection){enqueue(report,rejection)},Promise.onPotentiallyUnhandledRejectionHandled=function(rejection){enqueue(unreport,rejection)},Promise.onFatalRejection=function(rejection){enqueue(throwit,rejection.value)};var tasks=[],reported=[],running=null;return Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:344,2:345}],343:[function(require,module){!function(define){"use strict";define(function(){return function(Promise){return Promise.prototype.with=Promise.prototype.withThis=function(receiver){var p=this._beget(),child=p._handler;return child.receiver=receiver,this._handler.chain(child,receiver),p},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],344:[function(require,module){(function(process){!function(define){"use strict";define(function(require){function isNode(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.nextTick}function hasMutationObserver(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function initMutationObserver(MutationObserver){function run(){var f=scheduled;scheduled=void 0,f()}var scheduled,node=document.createTextNode(""),o=new MutationObserver(run);o.observe(node,{characterData:!0});var i=0;return function(f){scheduled=f,node.data=i^=1}}var MutationObs,capturedSetTimeout="undefined"!=typeof setTimeout&&setTimeout,setTimer=function(f,ms){return setTimeout(f,ms)},clearTimer=function(t){return clearTimeout(t)},asap=function(f){return capturedSetTimeout(f,0)};if(isNode())asap=function(f){return process.nextTick(f)};else if(MutationObs=hasMutationObserver())asap=initMutationObserver(MutationObs);else if(!capturedSetTimeout){var vertxRequire=require,vertx=vertxRequire("vertx");setTimer=function(f,ms){return vertx.setTimer(ms,f)},clearTimer=vertx.cancelTimer,asap=vertx.runOnLoop||vertx.runOnContext}return{setTimer:setTimer,clearTimer:clearTimer,asap:asap}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})}).call(this,require(1))},{1:261}],345:[function(require,module){!function(define){"use strict";define(function(){function formatError(e){var s="object"==typeof e&&null!==e&&e.stack?e.stack:formatObject(e);return e instanceof Error?s:s+" (WARNING: non-Error used)"}function formatObject(o){var s=String(o);return"[object Object]"===s&&"undefined"!=typeof JSON&&(s=tryStringify(o,s)),s}function tryStringify(x,defaultValue){try{return JSON.stringify(x)}catch(e){return defaultValue}}return{formatError:formatError,formatObject:formatObject,tryStringify:tryStringify}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],346:[function(require,module){(function(process){!function(define){"use strict";define(function(){return function(environment){function Promise(resolver,handler){this._handler=resolver===Handler?handler:init(resolver)}function init(resolver){function promiseResolve(x){handler.resolve(x)}function promiseReject(reason){handler.reject(reason)}function promiseNotify(x){handler.notify(x)}var handler=new Pending;try{resolver(promiseResolve,promiseReject,promiseNotify)}catch(e){promiseReject(e)}return handler}function resolve(x){return isPromise(x)?x:new Promise(Handler,new Async(getHandler(x)))}function reject(x){return new Promise(Handler,new Async(new Rejected(x)))}function never(){return foreverPendingPromise}function defer(){return new Promise(Handler,new Pending)}function begetFrom(parent,Promise){var child=new Pending(parent.receiver,parent.join().context);return new Promise(Handler,child)}function all(promises){return traverseWith(snd,null,promises)}function traverse(f,promises){return traverseWith(tryCatch2,f,promises)}function traverseWith(tryMap,f,promises){function mapAt(i,x,resolver){resolver.resolved||traverseAt(promises,settleAt,i,tryMap(f,x,i),resolver)}function settleAt(i,x,resolver){results[i]=x,0===--pending&&resolver.become(new Fulfilled(results))}for(var x,handler="function"==typeof f?mapAt:settleAt,resolver=new Pending,pending=promises.length>>>0,results=new Array(pending),i=0;i<promises.length&&!resolver.resolved;++i)x=promises[i],void 0!==x||i in promises?traverseAt(promises,handler,i,x,resolver):--pending;return 0===pending&&resolver.become(new Fulfilled(results)),new Promise(Handler,resolver)}function traverseAt(promises,handler,i,x,resolver){if(maybeThenable(x)){var h=getHandlerMaybeThenable(x),s=h.state();0===s?h.fold(handler,i,void 0,resolver):s>0?handler(i,h.value,resolver):(resolver.become(h),visitRemaining(promises,i+1,h))}else handler(i,x,resolver)}function visitRemaining(promises,start,handler){for(var i=start;i<promises.length;++i)markAsHandled(getHandler(promises[i]),handler)}function markAsHandled(h,handler){if(h!==handler){var s=h.state();0===s?h.visit(h,void 0,h._unreport):0>s&&h._unreport()}}function race(promises){return"object"!=typeof promises||null===promises?reject(new TypeError("non-iterable passed to race()")):0===promises.length?never():1===promises.length?resolve(promises[0]):runRace(promises)}function runRace(promises){var i,x,h,resolver=new Pending;for(i=0;i<promises.length;++i)if(x=promises[i],void 0!==x||i in promises){if(h=getHandler(x),0!==h.state()){resolver.become(h),visitRemaining(promises,i+1,h);break}h.visit(resolver,resolver.resolve,resolver.reject)}return new Promise(Handler,resolver)}function getHandler(x){return isPromise(x)?x._handler.join():maybeThenable(x)?getHandlerUntrusted(x):new Fulfilled(x)}function getHandlerMaybeThenable(x){return isPromise(x)?x._handler.join():getHandlerUntrusted(x)}function getHandlerUntrusted(x){try{var untrustedThen=x.then;return"function"==typeof untrustedThen?new Thenable(untrustedThen,x):new Fulfilled(x)}catch(e){return new Rejected(e)}}function Handler(){}function FailIfRejected(){}function Pending(receiver,inheritedContext){Promise.createContext(this,inheritedContext),this.consumers=void 0,this.receiver=receiver,this.handler=void 0,this.resolved=!1}function Async(handler){this.handler=handler}function Thenable(then,thenable){Pending.call(this),tasks.enqueue(new AssimilateTask(then,thenable,this))}function Fulfilled(x){Promise.createContext(this),this.value=x}function Rejected(x){Promise.createContext(this),this.id=++errorId,this.value=x,this.handled=!1,this.reported=!1,this._report()}function ReportTask(rejection,context){this.rejection=rejection,this.context=context}function UnreportTask(rejection){this.rejection=rejection}function cycle(){return new Rejected(new TypeError("Promise cycle"))}function ContinuationTask(continuation,handler){this.continuation=continuation,this.handler=handler}function ProgressTask(value,handler){this.handler=handler,this.value=value}function AssimilateTask(then,thenable,resolver){this._then=then,this.thenable=thenable,this.resolver=resolver}function tryAssimilate(then,thenable,resolve,reject,notify){try{then.call(thenable,resolve,reject,notify)}catch(e){reject(e)}}function Fold(f,z,c,to){this.f=f,this.z=z,this.c=c,this.to=to,this.resolver=failIfRejected,this.receiver=this}function isPromise(x){return x instanceof Promise}function maybeThenable(x){return("object"==typeof x||"function"==typeof x)&&null!==x}function runContinuation1(f,h,receiver,next){return"function"!=typeof f?next.become(h):(Promise.enterContext(h),tryCatchReject(f,h.value,receiver,next),void Promise.exitContext())}function runContinuation3(f,x,h,receiver,next){return"function"!=typeof f?next.become(h):(Promise.enterContext(h),tryCatchReject3(f,x,h.value,receiver,next),void Promise.exitContext())}function runNotify(f,x,h,receiver,next){return"function"!=typeof f?next.notify(x):(Promise.enterContext(h),tryCatchReturn(f,x,receiver,next),void Promise.exitContext())}function tryCatch2(f,a,b){try{return f(a,b)}catch(e){return reject(e)}}function tryCatchReject(f,x,thisArg,next){try{next.become(getHandler(f.call(thisArg,x)))}catch(e){next.become(new Rejected(e))}}function tryCatchReject3(f,x,y,thisArg,next){try{f.call(thisArg,x,y,next)}catch(e){next.become(new Rejected(e))}}function tryCatchReturn(f,x,thisArg,next){try{next.notify(f.call(thisArg,x))}catch(e){next.notify(e)}}function inherit(Parent,Child){Child.prototype=objectCreate(Parent.prototype),Child.prototype.constructor=Child}function snd(x,y){return y}function noop(){}function initEmitRejection(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(type,rejection){return"unhandledRejection"===type?process.emit(type,rejection.value,rejection):process.emit(type,rejection)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(noop,self,CustomEvent){var hasCustomEvent=!1;try{var ev=new CustomEvent("unhandledRejection");hasCustomEvent=ev instanceof CustomEvent}catch(e){}return hasCustomEvent?function(type,rejection){var ev=new CustomEvent(type,{detail:{reason:rejection.value,key:rejection},bubbles:!1,cancelable:!0});return!self.dispatchEvent(ev)}:noop}(noop,self,CustomEvent):noop}var tasks=environment.scheduler,emitRejection=initEmitRejection(),objectCreate=Object.create||function(proto){function Child(){}return Child.prototype=proto,new Child};Promise.resolve=resolve,Promise.reject=reject,Promise.never=never,Promise._defer=defer,Promise._handler=getHandler,Promise.prototype.then=function(onFulfilled,onRejected,onProgress){var parent=this._handler,state=parent.join().state();if("function"!=typeof onFulfilled&&state>0||"function"!=typeof onRejected&&0>state)return new this.constructor(Handler,parent);var p=this._beget(),child=p._handler;return parent.chain(child,parent.receiver,onFulfilled,onRejected,onProgress),p},Promise.prototype.catch=function(onRejected){return this.then(void 0,onRejected)},Promise.prototype._beget=function(){return begetFrom(this._handler,this.constructor)},Promise.all=all,Promise.race=race,Promise._traverse=traverse,Promise._visitRemaining=visitRemaining,Handler.prototype.when=Handler.prototype.become=Handler.prototype.notify=Handler.prototype.fail=Handler.prototype._unreport=Handler.prototype._report=noop,Handler.prototype._state=0,Handler.prototype.state=function(){return this._state},Handler.prototype.join=function(){for(var h=this;void 0!==h.handler;)h=h.handler;return h},Handler.prototype.chain=function(to,receiver,fulfilled,rejected,progress){this.when({resolver:to,receiver:receiver,fulfilled:fulfilled,rejected:rejected,progress:progress})},Handler.prototype.visit=function(receiver,fulfilled,rejected,progress){this.chain(failIfRejected,receiver,fulfilled,rejected,progress)},Handler.prototype.fold=function(f,z,c,to){this.when(new Fold(f,z,c,to))},inherit(Handler,FailIfRejected),FailIfRejected.prototype.become=function(h){h.fail()};var failIfRejected=new FailIfRejected;inherit(Handler,Pending),Pending.prototype._state=0,Pending.prototype.resolve=function(x){this.become(getHandler(x))},Pending.prototype.reject=function(x){this.resolved||this.become(new Rejected(x))},Pending.prototype.join=function(){if(!this.resolved)return this;for(var h=this;void 0!==h.handler;)if(h=h.handler,h===this)return this.handler=cycle();return h},Pending.prototype.run=function(){var q=this.consumers,handler=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var i=0;i<q.length;++i)handler.when(q[i])},Pending.prototype.become=function(handler){this.resolved||(this.resolved=!0,this.handler=handler,void 0!==this.consumers&&tasks.enqueue(this),void 0!==this.context&&handler._report(this.context))},Pending.prototype.when=function(continuation){this.resolved?tasks.enqueue(new ContinuationTask(continuation,this.handler)):void 0===this.consumers?this.consumers=[continuation]:this.consumers.push(continuation)},Pending.prototype.notify=function(x){this.resolved||tasks.enqueue(new ProgressTask(x,this))},Pending.prototype.fail=function(context){var c="undefined"==typeof context?this.context:context;this.resolved&&this.handler.join().fail(c)},Pending.prototype._report=function(context){this.resolved&&this.handler.join()._report(context)},Pending.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},inherit(Handler,Async),Async.prototype.when=function(continuation){tasks.enqueue(new ContinuationTask(continuation,this))},Async.prototype._report=function(context){this.join()._report(context)},Async.prototype._unreport=function(){this.join()._unreport()},inherit(Pending,Thenable),inherit(Handler,Fulfilled),Fulfilled.prototype._state=1,Fulfilled.prototype.fold=function(f,z,c,to){runContinuation3(f,z,this,c,to)},Fulfilled.prototype.when=function(cont){runContinuation1(cont.fulfilled,this,cont.receiver,cont.resolver)};var errorId=0;inherit(Handler,Rejected),Rejected.prototype._state=-1,Rejected.prototype.fold=function(f,z,c,to){to.become(this)},Rejected.prototype.when=function(cont){"function"==typeof cont.rejected&&this._unreport(),runContinuation1(cont.rejected,this,cont.receiver,cont.resolver)},Rejected.prototype._report=function(context){tasks.afterQueue(new ReportTask(this,context))},Rejected.prototype._unreport=function(){this.handled||(this.handled=!0,tasks.afterQueue(new UnreportTask(this)))},Rejected.prototype.fail=function(context){this.reported=!0,emitRejection("unhandledRejection",this),Promise.onFatalRejection(this,void 0===context?this.context:context)},ReportTask.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,emitRejection("unhandledRejection",this.rejection)||Promise.onPotentiallyUnhandledRejection(this.rejection,this.context))},UnreportTask.prototype.run=function(){this.rejection.reported&&(emitRejection("rejectionHandled",this.rejection)||Promise.onPotentiallyUnhandledRejectionHandled(this.rejection))},Promise.createContext=Promise.enterContext=Promise.exitContext=Promise.onPotentiallyUnhandledRejection=Promise.onPotentiallyUnhandledRejectionHandled=Promise.onFatalRejection=noop;var foreverPendingHandler=new Handler,foreverPendingPromise=new Promise(Handler,foreverPendingHandler);return ContinuationTask.prototype.run=function(){this.handler.join().when(this.continuation)},ProgressTask.prototype.run=function(){var q=this.handler.consumers;if(void 0!==q)for(var c,i=0;i<q.length;++i)c=q[i],runNotify(c.progress,this.value,this.handler,c.receiver,c.resolver)},AssimilateTask.prototype.run=function(){function _resolve(x){h.resolve(x)}function _reject(x){h.reject(x)}function _notify(x){h.notify(x)}var h=this.resolver;tryAssimilate(this._then,this.thenable,_resolve,_reject,_notify)},Fold.prototype.fulfilled=function(x){this.f.call(this.c,this.z,x,this.to)},Fold.prototype.rejected=function(x){this.to.reject(x)},Fold.prototype.progress=function(x){this.to.notify(x)},Promise}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})}).call(this,require(1))},{1:261}],347:[function(require,module){!function(define){"use strict";define(function(){function toPendingState(){return{state:"pending"}}function toRejectedState(e){return{state:"rejected",reason:e}}function toFulfilledState(x){return{state:"fulfilled",value:x}}function inspect(handler){var state=handler.state();return 0===state?toPendingState():state>0?toFulfilledState(handler.value):toRejectedState(handler.value)}return{pending:toPendingState,fulfilled:toFulfilledState,rejected:toRejectedState,inspect:inspect}})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory()})},{}],348:[function(require,module){!function(define){"use strict";define(function(require){function when(x,onFulfilled,onRejected,onProgress){var p=Promise.resolve(x);return arguments.length<2?p:p.then(onFulfilled,onRejected,onProgress)}function promise(resolver){return new Promise(resolver)}function lift(f){return function(){for(var i=0,l=arguments.length,a=new Array(l);l>i;++i)a[i]=arguments[i];return apply(f,this,a)}}function attempt(f){for(var i=0,l=arguments.length-1,a=new Array(l);l>i;++i)a[i]=arguments[i+1];return apply(f,this,a)}function defer(){return new Deferred}function Deferred(){function resolve(x){p._handler.resolve(x) }function reject(x){p._handler.reject(x)}function notify(x){p._handler.notify(x)}var p=Promise._defer();this.promise=p,this.resolve=resolve,this.reject=reject,this.notify=notify,this.resolver={resolve:resolve,reject:reject,notify:notify}}function isPromiseLike(x){return x&&"function"==typeof x.then}function join(){return Promise.all(arguments)}function all(promises){return when(promises,Promise.all)}function settle(promises){return when(promises,Promise.settle)}function map(promises,mapFunc){return when(promises,function(promises){return Promise.map(promises,mapFunc)})}function filter(promises,predicate){return when(promises,function(promises){return Promise.filter(promises,predicate)})}var timed=require(10),array=require(4),flow=require(5),fold=require(6),inspect=require(7),generate=require(8),progress=require(9),withThis=require(12),unhandledRejection=require(11),TimeoutError=require(2),Promise=[array,flow,fold,generate,progress,inspect,withThis,timed,unhandledRejection].reduce(function(Promise,feature){return feature(Promise)},require(1)),apply=require(3)(Promise);return when.promise=promise,when.resolve=Promise.resolve,when.reject=Promise.reject,when.lift=lift,when.try=attempt,when.attempt=attempt,when.iterate=Promise.iterate,when.unfold=Promise.unfold,when.join=join,when.all=all,when.settle=settle,when.any=lift(Promise.any),when.some=lift(Promise.some),when.race=lift(Promise.race),when.map=map,when.filter=filter,when.reduce=lift(Promise.reduce),when.reduceRight=lift(Promise.reduceRight),when.isPromiseLike=isPromiseLike,when.Promise=Promise,when.defer=defer,when.TimeoutError=TimeoutError,when})}("function"==typeof define&&define.amd?define:function(factory){module.exports=factory(require)})},{1:331,10:341,11:342,12:343,2:333,3:334,4:335,5:336,6:337,7:338,8:339,9:340}],349:[function(require,module){"use strict";var helpModalTemplate=require(1),newMessageTemplate=require(2);module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","modalService","dataGridService",function($scope,$location,$state,builtApi,Alert,Utils,Modal,dataGrid){function deleteMessage(activity){var index=$scope.listRows.indexOf(activity);Alert.confirm({title:"Delete class",content:"Are you sure you want to delete this Notification?"}).then(function(){builtApi.Notifications.deleteOne({options:{objectUid:activity.uid,pathId:"custom_notifications"}}).then(function(data){data=data.entity,$scope.listRows.splice(index,1),Alert.notify({title:"Success",content:data.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}function editMessage(activity){var index=$scope.listRows.indexOf(activity);Modal.openModal({channel:activity.channel,message:activity.message,uid:activity.uid,type:"edit"},newMessageTemplate,editMessageCtrl).then(function(editedMessage){$scope.listRows[index]=editedMessage})}function createNewMessage(){Modal.openModal({channel:"",message:"",type:"create"},newMessageTemplate,newMessageCtrl).then(function(newMessage){$scope.listRows.push(newMessage)})}var dataTableContainer=$(".data-tbl");$scope.loading=!0,$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.actions=["edit","delete"],$scope.classColumns=[{label:"Channel",key:"channel"},{label:"Message",key:"message"}],dataGrid.addResponsiveAttrs($scope.classColumns,"phone, tablet");var pagno=parseInt($location.search().p)-1;$scope.myPageItemsCount=50,$scope.mycurrentPage=(0>pagno?0:pagno)||0,$scope.onServerSideItemsRequested=function(currentPage,filterBy,filterByFields,orderBy,orderByReverse,myPageItemsCount){$scope.loading=!0;var skip=currentPage*myPageItemsCount,params={options:{pathId:"custom_notifications",query:{include_count:!0,skip:skip,desc:"created_at",limit:myPageItemsCount}}};builtApi.Notifications.getAll(params).then(function(data){$scope.listRows=data.custom_notifications,$scope.myItemsTotalCount=data.count,dataGrid.initFootable(dataTableContainer),$location.search({p:currentPage+1})}).finally(function(){$scope.loading=!1})},$scope.action=function(act,activity){return"delete"===act?void deleteMessage(activity):"edit"===act?void editMessage(activity):"create"===act?void createNewMessage():void 0};var editMessageCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.btnStatus=!1,$scope.ok=function(){$scope.btnStatus=!0,builtApi.Notifications.editOne({options:{pathId:"custom_notifications",objectUid:$scope.data.uid},body:{custom_notification:{channel:$scope.data.channel,message:$scope.data.message}}}).then(function(res){$scope.btnStatus=!1,Alert.notify({title:"Success",content:res.notice,type:"success"}),$modalInstance.close(res.custom_notification)},function(xhr){$scope.btnStatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}},newMessageCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.btnStatus=!1,$scope.ok=function(){$scope.btnStatus=!0,builtApi.Notifications.addOne({options:{pathId:"custom_notifications"},body:{custom_notification:{channel:$scope.data.channel,message:$scope.data.message}}}).then(function(res){$scope.btnStatus=!1,Alert.notify({title:"Success",content:res.notice,type:"success"}),$modalInstance.close(res.custom_notification)},function(xhr){$scope.btnStatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}};$scope.getHelp=function(){Modal.openModal({},helpModalTemplate,helpCtrl)};var helpCtrl=function($scope,$modalInstance,data){$scope.data=data,$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}}]},{1:351,2:352}],350:[function(require,module){module.exports='<div class="button-wrap mb10">\n <a class="btn btn-labeled btn-primary pull-left" ng-click="action(\'create\')">\n<span class="btn-label"><i class="fa fa-plus-square"></i> \n</span> Set new message\n</a> \n<i class="fa fa-info-circle help-icon pull-left ml10" ng-click="getHelp()"></i> \n</div>\n<div class="data-tbl-wrap">\n<table tr-ng-grid="" items="listRows" class="table data-tbl" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="mycurrentPage" on-data-required="onServerSideItemsRequested(mycurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-tools">\n<th colspan="100">\n<div class="row">\n<div class="col-md-8 col-xs-12 pull-right">\n<span tr-ng-grid-pager=""></span> \n</div>\n</div>\n</th>\n</tr>\n<tr class="dt-head-tr" ng-show="loading || listRows.length">\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}} \n</div>\n</th>\n<th class="dt-actions-th" class="">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody ng-show="!loading">\n<tr class="">\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}">\n <span>{{dataGrid.getCell(gridItem, column)}}</span>\n</td>\n<td class="">\n<span title="{{act}}" ng-repeat=\'act in actions\' ng-click=\'action(act, gridItem)\' class="hand fa fa-lg edit_evnt ml10 dt-action-item" ng-class="{\'fa-pencil\' : act == \'edit\', \'fa-trash-o\' : act == \'delete\'}"></span> \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table>\n<div class="tab-loader" ng-show="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="no-msg" ng-show="!loading && !listRows.length">\n No activity channels created yet.\n</div>\n</div>\n'},{}],351:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click=\'cancel()\'>\n ×\n</button>\n<h3 class="modal-title">Activity Channels</h3>\n</div>\n<div class="modal-body">\n<p>Activity channels allow you to set a custom message for an event.</p>\n<p>Mobile devices can subscribe to events in your application, such as creation of an object in a class. When the event is triggered, a generic message consisting of the channel name is sent. You may wish to change this to a more appropriate message.</p>\n<p>Channels are a string that encodes information regarding the event. You specify the message against a channel. The mobile devices listen on the same channels as well.</p>\n<p>Channels have the following syntax:</p><pre class="prettyprint">{class_uid}.{object_uid}.{event}</pre>\n<p>The structure for create/update/delete on a class, object or upload:</p><pre class="prettyprint">class.{create|update|delete} <br>{class_uid}.object.{create|update|delete}      <br>upload.create<br>{upload_uid}.update<br>{upload_uid}.delete     </pre>\n<p>There are also more generic events:</p>\n<p>* when any event is triggered on any class:</p><pre class="prettyprint">class.{create|update|delete}</pre>\n<p>* when any event is triggered on any object of a particular class:</p><pre class="prettyprint">{class_uid}.object.{create|update|delete}</pre>\n<p>* when any event is triggered on any object:</p><pre class="prettyprint">object.{create|update|delete}</pre>\n<p>* when any event is triggered on any upload:</p><pre class="prettyprint">upload.delete<br>upload.update</pre>\n<p>For example, suppose you have a "News" app, and users may choose to subscribe for notifications on breaking news. This means they are subscribed for creation of objects in the class "news". The channel\'s would then be as follows:</p><pre class="prettyprint">post.object.create</pre>\n<p>With this, we may specify a more interesting message as follows:</p><pre class="prettyprint">"Breaking News: {title}"</pre>\n<p>Here, {title} is substituted with the news title that may exist in the news object. In this way you can use any field in the object (must be of the String/Text/Number datatype). To access fields which are in a group, you may employ the dot "." notation. For example:</p><pre class="prettyprint">{content.title}</pre></div>\n<div class="modal-footer">\n <a class="btn btn-labeled btn-default btn-sm pull-left" ng-click=\'cancel()\'>\n <span class="btn-label">\n<i class="fa fa-arrow-left"></i> \n</span> \n <span>\n Close\n</span> \n</a> \n</div>'},{}],352:[function(require,module){module.exports='<div class="modal-header">\n <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">\n ×\n</button>\n<h3 class="modal-title">Set New Message</h3>\n</div>\n<div class="modal-body">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Channel</label>\n<div class="col-md-10">\n <input type="text" placeholder="Enter channel" ng-model="data.channel" class="form-control" />\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Message</label>\n<div class="col-md-10">\n<textarea ng-model="data.message" class="form-control"></textarea> \n</div>\n</div>\n</fieldset>\n</div>\n</div>\n\n<div class="modal-footer">\n<div class="button-wrap">\n <button ng-show="data.type===\'create\'" btn-loader="btnStatus" loading-text="Creating..." type="submit" class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n <span class="js-btn-text">\n Create \n</span> \n</button>\n <button ng-show="data.type===\'edit\'" btn-loader="btnStatus" loading-text="Updating..." type="submit" class="btn btn-labeled btn-primary btn-sm pull-right" ng-click="ok()">\n <span class="btn-label">\n<i class="fa fa-check"></i> \n</span> \n\n <span class="js-btn-text">\nUpdate \n</span> \n</button>\n <button ng-click=\'cancel()\' class="btn btn-labeled btn-default btn-sm pull-left">\n<span class="btn-label"><i class="fa fa-arrow-left"></i> \n</span> Cancel\n</button>\n</div>\n</div>'},{}],353:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","constants","dataGridService",function($scope,$location,$state,builtApi,Alert,Utils,constants,dataGrid){function deleteNotifications(notification){var index=$scope.listRows.indexOf(notification);Alert.confirm({title:"Delete class",content:"Are you sure you want to delete this Notification?"}).then(function(){builtApi.Notifications.deleteOne({options:{objectUid:notification.uid,pathId:"broadcasts"}}).then(function(data){data=data.entity,$scope.listRows.splice(index,1),Alert.notify({title:"Success",content:data.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})})}function createNotifications(){$state.go("app.dashboard.notifications-broadcasts-new",{api_key:$state.params.api_key})}var dataTableContainer=$(".data-tbl");$scope.loading=!0,$scope.dataGrid=dataGrid,$scope.listRows=[],$scope.actions=["delete"],$scope.classColumns=[{label:"Text",key:"message"},{label:"Sent At",key:"timestamp"},{label:"Badge",key:"badge"},{label:"Sender",key:"sender"},{label:"Status",key:"status"}],dataGrid.addResponsiveAttrs($scope.classColumns,"phone, tablet");var pagno=parseInt($location.search().p)-1;$scope.myPageItemsCount=constants.queryLimit,$scope.mycurrentPage=(0>pagno?0:pagno)||0,$scope.onServerSideItemsRequested=function(currentPage,filterBy,filterByFields,orderBy,orderByReverse,myPageItemsCount){$scope.loading=!0;var skip=currentPage*myPageItemsCount,params={options:{pathId:"broadcasts",query:{include_count:!0,skip:skip,desc:"created_at",limit:myPageItemsCount}}};builtApi.Notifications.getAll(params).then(function(data){$scope.listRows=data.broadcasts,$scope.myItemsTotalCount=data.count,dataGrid.initFootable(dataTableContainer),$location.search({p:currentPage+1})}).finally(function(){$scope.loading=!1})},$scope.action=function(act,notification){return"delete"===act?void deleteNotifications(notification):"create"===act?void createNotifications():void 0}}]},{}],354:[function(require,module){"use strict";module.exports=["$scope","$location","$state","builtApi","alertService","utilsService","constants","$q","tip",function($scope,$location,$state,builtApi,Alert,Utils,constants,$q,TIP){function switchStep(step){destroyTips(),$scope.currentStep=step}function destroyTips(){TIP.destroyAll(notificationWrap)}function constructLocationQuery(){var shapeArray=$scope.geoFencingArray,queryArray=[],obj={app_user_object_uid:{$select:{class_uid:$scope.locationQueryClass.id,key:"app_user_object_uid"}}},select=obj.app_user_object_uid.$select;"built_io_application_user"==$scope.locationQueryClass&&(select.key="uid");for(var i=0;i<shapeArray.length;i++)if(shapeArray[i]&&shapeArray[i].getMap()){if("polygon"===shapeArray[i].type){for(var vertices=shapeArray[i].getPath(),cordArray=[],j=0;j<vertices.getLength();j++){var xy=vertices.getAt(j);cordArray.push([xy.lng(),xy.lat()])}select.query={$within:cordArray}}else if("circle"===shapeArray[i].type){var cords=shapeArray[i].getCenter(),radius=shapeArray[i].getRadius();select.query={$near:{radius:radius,coords:_.values(cords).reverse()}}}queryArray.push($.extend(!0,{},obj))}return queryArray}function messageValidation(){var tipOptions={content:{text:function(){return $(this).attr("data-error-text")}}},errorEls=[];return _.isEmpty($scope.notificationRequestPayload.message)?errorEls.push(notificationWrap.find(".n-msg-textarea")):!_.isEmpty($scope.notificationRequestPayload.badge)&&isNaN($scope.notificationRequestPayload.badge)&&errorEls.push(notificationWrap.find(".n-badge-count")),errorEls.length?(TIP.qbTip(errorEls,tipOptions),!1):!0}function getlocalTimeZone(){var date=moment().format();return date.substring(getDateIndex(date),date.length).split(":").join("")}function setDateTimeScope(){$scope.dateTime=moment().format(),$scope.$watch("dateTime",function(newValue){"specified"===$scope.deliveryType&&($scope.notificationRequestPayload.run_at=newValue)})}function getDateIndex(isoDate){return-1!==isoDate.lastIndexOf(".")?isoDate.lastIndexOf("."):-1!==isoDate.lastIndexOf("+")?isoDate.lastIndexOf("+"):-1!==isoDate.lastIndexOf("-")?isoDate.lastIndexOf("-"):void 0}var notificationWrap=$(".new-notification-wrap");$scope.apiKey=$state.params.api_key,$scope.steps=["compose message","specify targets","schedule delivery"],$scope.alertMessages={},$scope.bookmarksData={},$scope.timeZone=Utils.getTimeZoneOffset(),$scope.zone=getlocalTimeZone(),$scope.userSpecificTimezoneStatus=!1,$scope.deliveryType="immediate",$scope.dateTime=moment().format(),$scope.btnStatus=!1,builtApi.Bookmarks.get().then(function(bookmarks){$scope.bookmarksData=bookmarks}),$scope.intQuery=[],$scope.getNotificationQueryNow=!1,$scope.geoFencingArray=[],$scope.locationQueryClass={id:"built_io_installation_data",text:"Installation Data"},$scope.installationDataQuery={},$scope.idqValidationPromise=$q.defer(),$scope.notificationRequestPayload={badge:"",message:""},$scope.notificationQuery={},$scope.currentStep=$scope.steps[0],$scope.toggleCollapse=function(e){destroyTips(),$(e.currentTarget).parent().toggleClass("active"),google.maps.event.trigger(document.getElementById("geo-fencing-map"),"resize")},$("#js-select2-deviceType").select2({allowClear:!0,minimumResultsForSearch:-1,data:[{id:0,text:"All"},{id:1,text:"iOS"},{id:2,text:"Android"}]}),$("#js-select2-deviceType").select2("data",{id:0,text:"All"}),$("#js-select2-deviceType").on("change",function(){var selectTargetArray=[],selectedTarget=$("#js-select2-deviceType").select2("data");"All"!==selectedTarget.text&&(selectTargetArray.push(selectedTarget.text),$scope.notificationQuery.device_type={$in:selectTargetArray})}),$("#js-select2-timeZones").select2({placeholder:"Choose timezone(s)",data:constants.timezones,multiple:!0}),$("#js-select2-timeZones").on("change",function(){var selectTargetArray=$("#js-select2-timeZones").select2("data");_.isEmpty(selectTargetArray)||($scope.notificationQuery.timezone={$in:selectTargetArray.map(function(target){return target.id})})}),$scope.$watch("deliveryType",function(){"specified"===$scope.deliveryType&&setDateTimeScope()}),$scope.validateStep=function(step){if(step!=$scope.currentStep)if($scope.currentStep===$scope.steps[0]){if(!messageValidation())return;switchStep(step)}else $scope.currentStep===$scope.steps[1]?($scope.getNotificationQueryNow=!0,$scope.idqValidationPromise.promise.then(function(){_.isEmpty($scope.installationDataQuery)||switchStep(step)}).finally(function(){$scope.getNotificationQueryNow=!1,$scope.idqValidationPromise=$q.defer()})):switchStep(step)},$scope.notificationQueryCallback=function(getQuery){getQuery.then(function(res){$scope.installationDataQuery=res,$scope.idqValidationPromise.resolve()},function(){$scope.idqValidationPromise.reject()})},$scope.sendNotification=function(){$scope.btnStatus=!0,$scope.geoFencingArray.length&&($scope.notificationQuery.$or=constructLocationQuery()),$scope.notificationRequestPayload.query="query="+JSON.stringify(_.assign($scope.installationDataQuery,$scope.notificationQuery)),builtApi.Notifications.addOne({options:{pathId:"broadcasts"},body:{app_api_key:$state.params.api_key,notification:$scope.notificationRequestPayload}}).then(function(res){$scope.btnStatus=!1,Alert.notify({title:"Success",content:res.notice,type:"success"}),$state.go("app.dashboard.notifications-broadcasts",{api_key:$scope.apiKey})},function(xhr){$scope.btnStatus=!1,Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},$scope.$watch("userSpecificTimezoneStatus",function(isTrue){isTrue&&($scope.notificationRequestPayload.local_push=isTrue)}),Utils.tip({container:"body"})}]},{}],355:[function(require,module){module.exports='<div class="button-wrap mb10">\n <a class="btn btn-labeled btn-primary pull-left mr10" ng-click="action(\'create\')">\n<span class="btn-label"><i class="fa fa-plus-square"></i> \n</span> New Notification\n</a> \n</div>\n<div class="data-tbl-wrap broadcasts-table-wrap">\n<table tr-ng-grid="" items="listRows" class="table data-tbl" page-items="myPageItemsCount" total-items="myItemsTotalCount" current-page="mycurrentPage" on-data-required="onServerSideItemsRequested(mycurrentPage, filterBy, filterByFields, orderBy, orderByReverse,myPageItemsCount, gridItem.uid)" enable-selections="false">\n<thead>\n<tr class="dt-tools">\n<th colspan="100">\n<div class="row">\n<div class="col-md-8 col-xs-12 pull-right">\n<span tr-ng-grid-pager=""></span> \n</div>\n</div>\n</th>\n</tr>\n<tr class="dt-head-tr" ng-show="loading || listRows.length">\n<th class="dt-{{column.key}}-th" ng-repeat=\'column in classColumns\' field-name="{{column.label}}" data-toggle="{{column.dataToggle}}" data-hide="{{column.dataHide}}">\n<div class="tr-ng-title">\n {{column.label}}\n</div>\n</th>\n<th class="dt-actions-th" class="">\n<div class="tr-ng-title">\n Actions\n</div>\n</th>\n</tr>\n</thead>\n<tbody ng-show="!loading">\n<tr class="">\n<td class="dt-{{column.key}}-td" ng-repeat=\'column in classColumns\' field-name="{{column.label}}">\n <span ng-if="column.key != \'status\'">{{dataGrid.getCell(gridItem, column)}}</span>\n <span ng-if="column.key == \'status\'" class="b-label">\n <span ng-if="gridItem[column.key] == \'delivered\'" class="label label-success">{{dataGrid.getCell(gridItem, column)}}</span>\n <span ng-if="gridItem[column.key] == \'pending\'" class="label label-warning">{{dataGrid.getCell(gridItem, column)}}</span>\n <span ng-if="gridItem[column.key] == \'failed\'" class="label label-danger">{{dataGrid.getCell(gridItem, column)}}</span>\n</span> \n</td>\n<td class="">\n<span title="{{act}}" ng-repeat=\'act in actions\' ng-click=\'action(act, gridItem)\' class="hand fa fa-lg edit_evnt ml10 dt-action-item" ng-class="{\'fa-pencil\' : act == \'edit\', \'fa-trash-o\' : act == \'delete\'}"></span> \n \n</td>\n</tr>\n</tbody>\n<tfoot class="hidden">\n</tfoot>\n</table>\n<div class="tab-loader" ng-show="loading">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n<div class="no-msg" ng-show="!loading && !listRows.length">\n No broadcasts created yet.\n</div>\n</div>\n'},{}],356:[function(require,module){module.exports='<div class="well well-sm new-notification-wrap">\n<div class="">\n<legend class="pg-header">\n New notification\n</legend>\n<ul class="breadcrumb">\n<li ng-repeat="step in steps" ng-class="{\'active\' : step === currentStep}">\n <a ng-click="validateStep(step)">\n {{step}}<span class="fa fa-angle-double-right" ng-if="!$last"></span> \n</a> \n</li>\n</ul>\n<div ng-show="currentStep === steps[0]">\n<div class="form-horizontal">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Message</label>\n<div class="col-md-10">\n<textarea rows="4" class="form-control n-msg-textarea" ng-model="notificationRequestPayload.message" data-error-text="Message cannot be blank!"></textarea> \n<p ng-if="alertMessages.message">{{alertMessages.message}}</p>\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Badge</label>\n<div class="col-md-10">\n <input class="form-control n-badge-count" type="text" ng-model="notificationRequestPayload.badge" data-error-text="Please enter a valid number!"/>\n\n<p class="note">\n <b>iOS only:</b> Specify a badge count. If left blank, any existing badge count will be incremented. Enter \'-1\' to leave the badge count unchanged.\n</p>\n<div class="txt-color-red" ng-if="alertMessages.batchCount">\n {{alertMessages.batchCount}}\n</div>\n\n</div>\n</div>\n</fieldset>\n</div>\n<div class="n-head-bar">\n<div class="button-wrap">\n <button class="btn btn-primary pull-right" ng-click="validateStep(steps[1])">\n Continue\n</button>\n</div>\n</div>\n</div>\n<div ng-show="currentStep ===steps[1]">\n<div class="collapsible-wrap form-horizontal n-select-device-wrap">\n<div class="collapsible-group active">\n<div class="cl-header" ng-click="toggleCollapse($event)">\n<i class="fa fa-caret-right"></i> Select device\n</div>\n<div class="cl-body">\n<fieldset>\n<div class="form-group">\n <label class="col-md-2 control-label">Device type</label>\n<div class="col-md-10">\n<div id="js-select2-deviceType"></div>\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Device tokens</label>\n<div class="col-md-10">\n <input type="hidden" placeholder="Enter comma separated device tokens..." select-device-selectbox notification-query="notificationQuery" query-param="device_token">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Installation UID</label>\n<div class="col-md-10">\n <input type="hidden" select-device-selectbox placeholder="Enter comma separated UIDs..." notification-query="notificationQuery" query-param="uid">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Channels</label>\n<div class="col-md-10">\n <input type="hidden" placeholder="Enter comma separated channels..." select-device-selectbox notification-query="notificationQuery" query-param="subscribed_to_channels">\n</div>\n</div>\n<div class="form-group">\n <label class="col-md-2 control-label">Timezones</label>\n<div class="col-md-10">\n<div id="js-select2-timeZones"></div>\n</div>\n</div>\n</fieldset>\n</div>\n</div>\n<div class="collapsible-group">\n<div class="cl-header" ng-click="toggleCollapse($event)">\n<i class="fa fa-caret-right"></i> Location\n</div>\n<div class="cl-body">\n<div geofencing></div>\n</div>\n</div>\n<div class="collapsible-group">\n<div class="cl-header" ng-click="toggleCollapse($event)">\n<i class="fa fa-caret-right"></i> Query\n</div>\n<div class="cl-body">\n<div class="n-query-builder-wrap">\n<div notification-query-builder=\'intQuery\' bookmarks-data="bookmarksData" api-key="apiKey" get-notification-query-now="getNotificationQueryNow" notification-query-callback="notificationQueryCallback"></div>\n</div>\n</div>\n</div>\n</div>\n<div class="n-head-bar">\n<div class="button-wrap">\n <button class="btn btn-primary pull-right" ng-click="validateStep(steps[2])">\n Continue\n</button>\n</div>\n</div>\n</div>\n \n<div ng-show="currentStep ===steps[2]" class="n-schedule-delivery-wrap">\n<div class="form-horizontal">\n<div class="radio">\n <label>\n <input type="radio" name="schedule-delivery-type" ng-model="deliveryType" value="immediate" class="radiobox style-0">\n <span>Immediately <span class="help-text">Your message will be sent ASAP</span></span>\n</label> \n</div>\n\n<hr />\n\n<div class="radio">\n <label>\n <input type="radio" name="schedule-delivery-type" ng-model="deliveryType" value="specified" class="radiobox style-0">\n <span>Specify the time</span>\n</label> \n<div class="form-group mt20">\n <label class="col-md-2 control-label">Send at</label>\n<div class="col-md-10">\n<div class="n-send-at-wrap clearfix">\n <input bootstrap-date-picker date-time="dateTime">\n</div>\n<div class="checkbox animated fadeIn" ng-show="deliveryType === \'specified\'">\n <label>\n <input type="checkbox" class="checkbox style-0" ng-model="userSpecificTimezoneStatus" ng-change="userSpecificTimezoneStatus!=userSpecificTimezoneStatus">\n <span>Send this notification in user\'s specific timezone.</span>\n</label> \n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="n-head-bar">\n<div class="button-wrap">\n <button btn-loader="btnStatus" loading-text="Sending..." class="btn btn-primary pull-right" ng-click="sendNotification()" data-loading-text="Sending...">\n <span class="js-btn-text">Send Notification</span>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>' },{}],357:[function(require,module){"use strict";module.exports=["$scope","$state","builtApi","alertService","utilsService","currentUser","$sce","$timeout","postMessageUploadService",function($scope,$state,builtApi,Alert,Utils,currentUser,$sce,$timeout,postMessageUploadService){function getNotificationCredentials(){$scope.loadingCredentials=!0,builtApi.Notifications.getCredentialsDetails().then(function(res){$scope.credentials=res},function(){}).finally(function(){$scope.loadingCredentials=!1})}var nCSelector=$("#js-notification-credentials");$scope.credentials={},$scope.loadingCredentials=!1,$scope.apiKey=$state.params.api_key,$scope.currentUser=currentUser;var randvalue=Utils.getRand();$scope.host=window.location.protocol+"//"+window.location.host,$scope.actionurl=$sce.trustAsResourceUrl("/v1/notification_credentials.postmessage?postmessage_payload="+randvalue),getNotificationCredentials(),$(document).on("change",".js-cert-select",function(e){_.isEmpty($(e.target).val())||$(e.target).attr("name",$(e.target).attr("name")+""+$(e.target).attr("data-name"))}),$scope.postCredentials=function(e){var button=$(e.currentTarget);button.button("loading"),nCSelector.find("form").trigger("submit"),postMessageUploadService.getPostMessage(randvalue).then(function(res){Utils.sa($scope,function(){$scope.credentials=res.notification_credentials}),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})}).finally(function(){button.button("reset")})},$scope.addIOSCredentials=function(){$scope.credentials.ios_credentials.unshift({name:"",dev_certificate:"",prod_certificate:"",prod_environment:!1})},$scope.addAndroidCredentials=function(){$scope.credentials.android_credentials.unshift({name:"",gcm_api_key:""})},$scope.removeAndroidCredential=function(index){$scope.credentials.android_credentials.length>1&&$scope.credentials.android_credentials.splice(index,1)},$scope.removeCertificate=function(name){var input='<input type="file" class="btn btn-default" name="notification_credentials[ios_credentials][CERT]">'.replace("CERT",name);$("#js-"+name).html(input),delete $scope.credentials.ios_credentials[name]},$scope.removeIOSCredential=function(index){$scope.credentials.ios_credentials.length>1&&$scope.credentials.ios_credentials.splice(index,1)}}]},{}],358:[function(require,module){module.exports='<div id="js-notification-credentials" class="n-c-wrap well well-sm">\n<legend class="pg-header">\n Setup your notification credentials\n</legend>\n<div class="pg-tagline">\n Specify credentials for iOS and Android notifications such as iOS certificates or the Android GCM (Google Cloud Messaging) key. For iOS, specify the environment as well to choose which certificate to use.\n</div>\n\n <iframe height="1" width="1" name="n-c-iframe" class="hidden" src=""></iframe>\n<form class="form-horizontal" action="{{actionurl}}" method="POST" target="n-c-iframe" enctype="multipart/form-data" multipart="" ng-show="!loadingCredentials">\n <input type="hidden" name="host" value="{{host}}" />\n <input type="hidden" name="APPLICATION_API_KEY" value="{{apiKey}}" />\n <input type="hidden" name="AUTHTOKEN" value="{{currentUser.authtoken}}" />\n<fieldset>\n<legend>iOS credentials</legend>\n<div class="row">\n<div class="col-md-6">\n<a class="btn btn-labeled btn-primary btn-lg" ng-click="addIOSCredentials()"><span class="btn-label"><i class="fa fa-plus-square"></i></span> Click to add a ios credentials</a>\n</div>\n<div class="col-md-6" ng-repeat="iosCredential in credentials.ios_credentials track by $id(iosCredential)">\n <a href="" ng-click="removeIOSCredential($index)">[X]</a>\n<div class="well well-sm">\n<div class="form-group">\n <label>Certificate name</label>\n <input class="form-control" placeholder="Enter name" type="text" ng-model="iosCredential.name" ng-value="iosCredential.name">\n</div>\n<div class="form-group">\n <label>Development certificate</label>\n<p id="js-dev_certificate" ng-show="!iosCredential.dev_certificate">\n <input type="file" class="btn btn-default js-cert-select" name="notification_credentials[ios_credentials][{{$index}}]" data-name="[dev_certificate]">\n</p>\n<p ng-show="iosCredential.dev_certificate" class="cert-link-wrap">\n <a target="_blank" ng-href="{{iosCredential.dev_certificate}}?APPLICATION_API_KEY={{apiKey}}" class="">view certificate</a>\n <a title="Remove certificate" class="close remove-certificate" ng-click="removeCertificate(\'dev_certificate\')">×</a>\n</p>\n</div>\n<div class="form-group">\n <label>Production certificate</label>\n<p id=\'js-prod_certificate\' ng-show="!iosCredential.prod_certificate">\n <input type="file" class="btn btn-default js-cert-select" name="notification_credentials[ios_credentials][{{$index}}]" data-name="[prod_certificate]">\n</p>\n<p ng-show="iosCredential.prod_certificate" class="cert-link-wrap">\n <a target="_blank" ng-href="{{credentials.ios_credentials.prod_certificate}}?APPLICATION_API_KEY={{apiKey}}" class="">view certificate</a>\n <a title="Remove certificate" class="close remove-certificate" ng-click="removeCertificate(\'prod_certificate\')">×</a>\n</p>\n</div>\n<div class="form-group" ng-init="iosCredential.prod_environment =iosCredential.prod_environment || false">\n <label>Environment</label>\n<div class="radio">\n <label>\n <input class="radiobox style-0 ng-pristine ng-valid" type="radio" ng-value="false" ng-model="iosCredential.prod_environment" name="notification_credentials[ios_credentials][{{$index}}][prod_environment]" /><span>Switch to development environment.</span>\n</label> \n</div>\n<div class="radio">\n <label>\n <input class="radiobox style-0 ng-pristine ng-valid" type="radio" ng-value="true" ng-model="iosCredential.prod_environment" name="notification_credentials[ios_credentials][{{$index}}][prod_environment]" /><span>Switch to production environment.</span>\n</label> \n</div>\n</div>\n</div>\n\n</div>\n</div>\n</fieldset>\n<fieldset>\n<legend>Android credentials</legend>\n<div class="row">\n<div class="col-md-6">\n<a class="btn btn-labeled btn-primary btn-lg" ng-click="addAndroidCredentials()"><span class="btn-label"><i class="fa fa-plus-square"></i></span> Click to add a andriod credentials</a>\n</div>\n<div class="col-md-6" ng-repeat="androidCredential in credentials.android_credentials track by $id(androidCredential)">\n <a href="" ng-click="removeAndroidCredential($index)">[X]</a>\n<div class="well well-sm">\n<div class="form-group">\n <label>Certificate name</label>\n <input class="form-control" placeholder="Enter name" type="text" ng-model="androidCredential.name" ng-value="androidCredential.name">\n</div>\n<div class="form-group">\n <label class="col-md-3 control-label">GCM API Key</label>\n<div class="col-md-7">\n <input type="text" class="u-input form-control" ng-model="androidCredential.gcm_api_key" name="notification_credentials[android_credentials][{{$index}}][gcm_api_key]" ng-value="androidCredential.gcm_api_key" />\n</div>\n</div>\n</div>\n</div>\n</div>\n\n</fieldset>\n<div class="form-actions">\n <button class="btn btn-primary" type="submit" ng-click="postCredentials($event)" data-loading-text="Saving...">\n Save credentials\n</button>\n</div>\n</form>\n\n<div class="tab-loader" ng-if="loadingCredentials">\n <img alt="" src="images/loaders/block-loader.gif" />\n</div>\n</div>'},{}],359:[function(require,module){"use strict";var geoFencingTmpl=require(1);module.exports=["builtApi","$q","constants","utilsService","libraryService",function(builtApi,$q,constants,Utils,LIB){return{template:geoFencingTmpl,restrict:"A",replace:!0,link:function(scope,elem){function initClassSelect(){var classSelectBox=elem.find("#js-class-select2");classSelectBox.select2({minimumInputLength:1,containerCssClass:"select2-sm",dropdownCssClass:"select2-sm",escapeMarkup:function(m){return m},initSelection:function(element,callback){return callback(scope.locationQueryClass)},query:function(query){Utils.getClassSearch(builtApi,query.term)().then(query.callback)}}),classSelectBox.on("change",function(){scope.locationQueryClass=classSelectBox.select2("data")})}function initLocationSelect(){scope.searchRef=_.throttle(function(query){var deferred=$q.defer(),geocoder=new google.maps.Geocoder,objResults={};return geocoder.geocode({address:query},function(locationData){locationData&&(objResults={results:locationData.map(function(location){return{id:location.formatted_address,text:location.formatted_address,other:location}})},deferred.resolve(objResults))}),deferred.promise},10),scope.onSelectedSearchlocation=function(result){result=result.other,scope.$apply(function(){if(scope.latlng.lat=result.geometry.location.lat(),scope.latlng.lng=result.geometry.location.lng(),scope.mapObject){var latlng=new google.maps.LatLng(scope.latlng.lat,scope.latlng.lng);scope.mapObject.setCenter(latlng)}else initializeGeoLocationMap()})}}function initializeGeoLocationMap(){google.maps.visualRefresh=!0;var latlng=new google.maps.LatLng(scope.latlng.lat,scope.latlng.lng),mapOptions={zoom:6,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0};scope.mapObject=new google.maps.Map(document.getElementById("geo-fencing-map"),mapOptions);var drawOptions={strokeWeight:0,fillOpacity:.45,editable:!0,fillColor:"#1E90FF"};scope.drawingManager=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!1,circleOptions:drawOptions,polygonOptions:drawOptions,map:scope.mapObject}),google.maps.event.addListener(scope.mapObject,"click",scope.clearSelection),google.maps.event.addListener(scope.drawingManager,"drawingmode_changed",scope.clearSelection),google.maps.event.addDomListener(document.getElementById("btn-delete-shape"),"click",scope.deleteSelectedShape),google.maps.event.addListener(scope.drawingManager,"overlaycomplete",function(e){e.type!=google.maps.drawing.OverlayType.MARKER&&Utils.sa(scope,function(){scope.changeDrawingMode("hand");var newShape=e.overlay;newShape.type=e.type,google.maps.event.addListener(newShape,"click",function(){scope.setSelection(newShape)}),scope.setSelection(newShape),scope.saveShapeObject(newShape)})})}scope.latlng={lat:constants.googleMaps.defaults.lat,lng:constants.googleMaps.defaults.lng},scope.activeDrawingMode="hand",scope.selectedShape=void 0,LIB.get("googleMaps").then(function(){initializeGeoLocationMap()}),initClassSelect(),initLocationSelect(),scope.changeDrawingMode=function(mode){switch(scope.clearSelection(),mode){case"hand":scope.drawingManager.setDrawingMode(null);break;case"circle":scope.drawingManager.setDrawingMode(google.maps.drawing.OverlayType.CIRCLE);break;case"polygon":scope.drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYGON);break;default:scope.drawingManager.setDrawingMode(null)}scope.activeDrawingMode=mode},scope.clearSelection=function(){Utils.sa(scope,function(){scope.selectedShape&&(scope.selectedShape.setEditable(!1),scope.selectedShape=void 0)})},scope.setSelection=function(shape){Utils.sa(scope,function(){scope.clearSelection(),scope.selectedShape=shape,shape.setEditable(!0)})},scope.saveShapeObject=function(shape){scope.geoFencingArray.push(shape)},scope.deleteSelectedShape=function(){scope.selectedShape&&(scope.selectedShape.setMap(null),scope.clearSelection())}}}}]},{1:362}],360:[function(require,module){"use strict";var queryBuilderTmpl=require(1);module.exports=["builtApi","utilsService","alertService","$q","tip",function(builtApi,Utils,Alert,$q,TIP){return{template:queryBuilderTmpl,restrict:"A",scope:{apiKey:"=",query:"=notificationQueryBuilder",getNotificationQueryNow:"=",notificationQueryCallback:"=",bookmarksData:"="},link:function(scope,elem){function initNotificationQueryBuilder(){scope.query.length||scope.query.push(_.cloneDeep(defaultNotificationQuery)),mainConstraintSelector.select2({containerCssClass:"select2-sm",minimumResultsForSearch:-1}),mainConstraintSelector.select2("val",scope.query[0].__key)}function constructQuery(query){var q={};return void 0===query.__key?query:(q[query.__key]=query.__value instanceof Array?_.map(query.__value,constructQuery):constructQuery(query.__value),q)}function destroyTips(){TIP.destroyAll($(".n-query-builder-wrap"))}function getNotificationQuery(){return scope.validateNotificationQueryNow=!0,validateNotificationQuery().then(function(res){return constructNotificationQuery(res)},function(xhr){throw xhr}).finally(function(){scope.validateNotificationQueryNow=!1})}function validateNotificationQuery(){return $q.all(scope.notificationValidationArray.map(function(promiseObj){return promiseObj.promise}))}function constructNotificationQuery(queryArray){var actualQuery={__key:scope.query[0].__key,__value:queryArray};return constructQuery(actualQuery)}var defaultNotificationQuery={__key:"$and",__value:[{__key:"app_user_object_uid",__value:{$select:{class_uid:"",key:"app_user_object_uid",query:[]}},classData:{}}]},mainConstraintSelector=elem.find(".js-notification-select2");scope.notificationValidationArray=[],scope.validateNotificationQueryNow=!1,scope.$watch("bookmarksData",function(){_.isEmpty(scope.bookmarksData)||(scope.bookmarks=scope.bookmarksData)}),initNotificationQueryBuilder(),scope.$watch("query",function(oldValue,newValue){_.isEmpty(newValue)?TIP.destroyAll($(elem)):mainConstraintSelector.select2("val",newValue[0].__key)}),scope.$watch("getNotificationQueryNow",function(){if(scope.getNotificationQueryNow){var actualQuery=getNotificationQuery();scope.notificationQueryCallback(actualQuery)}}),mainConstraintSelector.on("change",function(){scope.query[0].__key=mainConstraintSelector.select2("val")}),scope.onSelectBookmark=function(bookmarkQuery){destroyTips(),scope.query=JSON.parse(bookmarkQuery.data)},scope.onSaveBookmark=function(inputbookmark,callback){_.isEmpty(inputbookmark)||builtApi.Bookmarks.add({body:{query_bookmark:{name:inputbookmark,data:JSON.stringify(Utils.removeKey(_.cloneDeep(scope.query)),"$$hashKey")}}}).then(function(res){callback(),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},scope.onDeleteBookmark=function(bookmark,onDeletedCallback){var index=scope.bookmarks.indexOf(bookmark);builtApi.Bookmarks.delete({options:{paramId:bookmark.uid},body:{app_api_key:scope.apiKey,bookmark_uid:bookmark.uid}}).then(function(res){onDeletedCallback(),scope.bookmarks.splice(index,1),Alert.notify({title:"Success",content:res.notice,type:"success"})},function(xhr){Alert.notify({title:xhr.entity.error_message,content:Utils.parseError(xhr.entity),type:"error"})})},scope.addRow=function(){destroyTips(),scope.query[0].__value.push(_.cloneDeep(defaultNotificationQuery.__value[0]))}}}}]},{1:363}],361:[function(require,module){"use strict";var queryBuilderTmpl=require(1);module.exports=["utilsService","$q","builtApi","$timeout","oqService","tip",function(Utils,$q,builtApi,$timeout,qbService,TIP){return{template:queryBuilderTmpl,restrict:"A",scope:{query:"=",queryIndex:"=",notificationQueryArray:"=",validateNotificationQueryNow:"=",notificationValidationArray:"="},link:function(scope,elem){function initialClassCheck(){initClassSelect(),_.isEmpty(scope.query.__value.$select.class_uid)||(classSelectBox.select2("data",{id:scope.query.__value.$select.class_uid,text:scope.query.classData.title}),scope.selectedClass=scope.query.classData,scope.selectedClassSet=!0)}function constructNotificationRowQuery(query){var notificationQuery=_.cloneDeep(scope.query);return notificationQuery.__value.$select.query=query,notificationQuery}function validateRow(){var classData=classSelectBox.select2("data"),errorEls=[];_.isEmpty(classData)?(deferred.reject(),errorEls.push(elem.find("div.js-notification-class-selector")),errorEls.length&&qbService.showErrorTips(errorEls),setDefaultPromise()):scope.getQueryNow=!0}function onlyOneRow(){return 1===scope.notificationQueryArray.length}function setDefaultPromise(){deferred=$q.defer(),defaultPromiseObject.promise=deferred.promise}function initClassSelect(){function changeClass(klass){Utils.sa(scope,function(){scope.selectedClass=klass,scope.selectedClassSet=!1,setKey(),scope.query.__value.$select.query=[],$timeout(function(){scope.selectedClassSet=!0,scope.query.__value.$select.class_uid=scope.selectedClass.uid,scope.query.classData=scope.selectedClass},0)})}_.memoize(function(query){return Utils.getClassSearch(query)},function(query){return query});classSelectBox.select2({minimumInputLength:1,containerCssClass:"select2-sm",dropdownCssClass:"select2-sm",placeholder:"Select class",escapeMarkup:function(m){return m},query:function(query){Utils.getClassSearch(builtApi,query.term)().then(query.callback)}}),classSelectBox.off("select2-open").on("select2-open",function(){qbService.destroyTip(elem.find("div.js-notification-class-selector"))}),classSelectBox.on("change",function(){_.isEmpty(classSelectBox.select2("data"))||changeClass(classSelectBox.select2("data"))})}function setKey(){scope.query.__value.$select.key="built_io_application_user"===scope.selectedClass.uid?"uid":"app_user_object_uid"}var classSelectBox=elem.find(".js-notification-class-selector"),deferred=$q.defer(),defaultPromiseObject={promise:deferred.promise};scope.notificationValidationArray.push(defaultPromiseObject),scope.selectedClass={},scope.selectedClassSet=!1,scope.currentQuery=scope.query.__value.$select.query,scope.currentQuery.fieldData={},scope.getQueryNow=!1,initialClassCheck(),scope.$watch("validateNotificationQueryNow",function(){scope.validateNotificationQueryNow!==!1&&(onlyOneRow()&&_.isEmpty(classSelectBox.select2("data"))?(deferred.resolve({}),setDefaultPromise()):validateRow())}),scope.queryCallback=function(getQuery){getQuery.then(function(res){deferred.resolve(constructNotificationRowQuery(res))},function(){deferred.reject()}).finally(function(){scope.getQueryNow=!1,setDefaultPromise()})},scope.removeRow=function(){TIP.destroyAll($(".n-query-builder-wrap")),1===scope.notificationQueryArray.length?(scope.query={__key:"app_user_object_uid",__value:{$select:{class_uid:"",key:"app_user_object_uid",query:[]}},classData:{}},scope.notificationQueryArray.splice(scope.queryIndex,1,scope.query)):scope.notificationQueryArray.splice(scope.queryIndex,1)},scope.$on("$destroy",function(){scope.notificationValidationArray.splice(scope.notificationValidationArray.indexOf(defaultPromiseObject),1)})}}}]},{1:364}],362:[function(require,module){module.exports='<div class="geo-fencing-view">\n<div class="n-head-bar">\n<div>Query location on</div>\n<div id="js-class-select2"></div>\n<div>class</div>\n \n</div>\n<div class="gf-toolbar clearfix">\n<div class="gf-search-wrap">\n<div id="js-select2-loc-search" select-location-search search-reference="searchRef" on-selected-reference="onSelectedSearchlocation"></div>\n</div>\n<div class="gf-tools-wrap">\n<div class="btn-group">\n <button rel="tooltip" class="btn btn-default btn-sm" ng-class="{\'active\': activeDrawingMode === \'hand\'}" ng-click="changeDrawingMode(\'hand\')" title="Hand tool" data-placement="bottom">\n<i class="fa fa-arrows-alt"></i> \n</button>\n <button rel="tooltip" class="btn btn-default btn-sm" ng-class="{\'active\': activeDrawingMode === \'circle\'}" ng-click="changeDrawingMode(\'circle\')" title="Circle tool" data-placement="bottom">\n<i class="fa fa-circle-o"></i> \n</button>\n <button rel="tooltip" class="btn btn-default btn-sm" ng-class="{\'active\': activeDrawingMode === \'polygon\'}" ng-click="changeDrawingMode(\'polygon\')" title="Polygon tool" data-placement="bottom">\n<i class="fa fa-stop"></i> \n</button>\n <button ng-class="{\'disabled\': selectedShape == undefined}" id="btn-delete-shape" rel="tooltip" class="btn btn-default btn-sm ml5" ng-click="deleteShape()" title="Delete shape" data-placement="bottom">\n<i class="fa fa-trash-o"></i> \n</button>\n</div>\n\n</div>\n</div>\n<div class="gf-map">\n<div id="geo-fencing-map" class="g-map"></div>\n</div>\n</div>'},{}],363:[function(require,module){module.exports='<div>\n<div class="nqb-head n-head-bar clearfix">\n<div class="nqb-text">Users match</div>\n <select class="js-notification-select2 nqb-con-select">\n<option value="$and">All</option>\n<option value="$or">Any</option>\n</select>\n<div class="nqb-text">of the following:</div>\n<div class="nqb-bookmarks-wrap" ng-show="bookmarksData">\n<div bookmarks="bookmarks" on-select-bookmark="onSelectBookmark" on-save-bookmark="onSaveBookmark" on-delete-bookmark="onDeleteBookmark"></div>\n</div>\n</div>\n<div class="nqb-body clearfix">\n<div ng-repeat="queryObject in query[0].__value track by $id(queryObject)" class="nqb-row clearfix" notification-row-view query="queryObject" query-index="$index" notification-query-array="query[0].__value" validate-notification-query-now="validateNotificationQueryNow" notification-validation-array="notificationValidationArray">\n</div>\n<div class="nqb-btn-add-wrap">\n <button type="button" class="btn bg-color-blue txt-color-white btn-xs" ng-click="addRow()">\n Add condition\n</button>\n</div>\n</div>\n</div>'},{}],364:[function(require,module){module.exports='<div class="nqb-row-inner">\n <input type="hidden" class="js-notification-class-selector nqb-class-select" rel="tooltip" />\n<div ng-switch on="selectedClassSet" class="nqb-qb-wrap">\n<div ng-switch-when="true" objects-query-builder="query.__value.$select.query" cls="selectedClass" get-query-now="getQueryNow" get-query-callback="queryCallback"></div>\n</div>\n <button type="button" class="close btn-delete-nqb-row" ng-click="removeRow()">\n ×\n</button>\n\n</div>'},{}],365:[function(require,module){"use strict";module.exports=function(){return{template:"",restrict:"A",replace:!0,scope:{notificationQuery:"=notificationQuery",queryParam:"@queryParam"},link:function(scope,elem){elem.select2({tags:[],multiple:!0,tokenSeparators:[","," "],dropdownCssClass:"hide-search",selectOnBlur:!0}),elem.on("change",function(){if(!_.isEmpty(elem.select2("data"))){var selectData=elem.select2("data").map(function(obj){return obj.text});scope.notificationQuery[scope.queryParam]={$in:selectData}}})}}}},{}],366:[function(require,module){"use strict";var angular=require(16),selectDeviceSelectbox=(require(15),require(1),require(13)),geoFencing=require(10),notificationQueryBuilder=require(11),notificationRowView=require(12),broadcastsTemplate=(require(14),require(6)),newNotificationTemplate=require(7),activityChannelsTemplate=require(3),notificationCredentialsTemplate=require(9),broadcastsCtrl=require(4),newNotificationCtrl=require(5),activityChannels=require(2),notificationCredentials=require(8);module.exports=angular.module("built.notifications",["ui.router"]).controller("broadcastsCtrl",broadcastsCtrl).controller("newNotificationCtrl",newNotificationCtrl).controller("activityChannels",activityChannels).controller("notificationCredentials",notificationCredentials).directive("selectDeviceSelectbox",selectDeviceSelectbox).directive("geofencing",geoFencing).directive("notificationQueryBuilder",notificationQueryBuilder).directive("notificationRowView",notificationRowView).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.dashboard.notifications-broadcasts",{url:"/notifications/broadcasts?p",template:broadcastsTemplate,controller:"broadcastsCtrl",data:{breadcrumbs:[{name:"Notifications"},{name:"Broadcasts"}]}}).state("app.dashboard.notifications-broadcasts-new",{url:"/new-notification",template:newNotificationTemplate,controller:"newNotificationCtrl",data:{breadcrumbs:[{name:"Notifications",state:"app.dashboard.notifications-broadcasts"},{state:"app.dashboard.notifications-broadcasts",name:"Broadcasts"},{name:"New notification"}]}}).state("app.dashboard.activityChannels",{url:"/notifications/activity-channels?p",template:activityChannelsTemplate,controller:"activityChannels",data:{breadcrumbs:[{name:"Notifications"},{name:"Activity channels"}]}}).state("app.dashboard.notificationCredentials",{url:"/notifications/notification-credentials",template:notificationCredentialsTemplate,controller:"notificationCredentials",data:{breadcrumbs:[{name:"Notifications"},{name:"Credentials"}]}})}]).run(["menuService",function(menu){var menuItem={id:"notifications",title:"Notifications",order:6,icon:"fa-bell-o",sub_menu:[{id:"notificationCredentials",title:"Credentials",state:"app.dashboard.notificationCredentials"},{id:"broadcasts",title:"Broadcasts",state:"app.dashboard.notifications-broadcasts"},{id:"activityChannels",title:"Activity Channels",state:"app.dashboard.activityChannels"}]};menu.add(menuItem)}])},{1:221,10:359,11:360,12:361,13:365,14:367,15:239,16:295,2:349,3:350,4:353,5:354,6:355,7:356,8:357,9:358}],367:[function(require,module){require(1),module.exports=["$rootScope","constants",function($rootScope,constants){Highcharts.theme={colors:constants.highCharts.colorPalette},Highcharts.setOptions(Highcharts.theme),this.drawChart=function(args){args.el.highcharts(args.options)}}]},{1:306}]},{},[199]);